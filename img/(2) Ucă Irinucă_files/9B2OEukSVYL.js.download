if (self.CavalryLogger) { CavalryLogger.start_js(["0KPtK"]); }

__d("FrameEditorSupportedGeneratedText",[],(function a(b,c,d,e,f,g){f.exports={"\u0025City_Name\u0025":"City name","\u0025CITY_NAME\u0025":"City name (all caps)"}}),null);
__d("FXMediaEffectProduct",[],(function a(b,c,d,e,f,g){f.exports={AML_CAMERA:"aml_camera",FACEBOOK:"facebook",FLASH:"flash",FLASH_ALDRIN:"flash_aldrin",INSTAGRAM:"instagram",MESSENGER:"messenger",MSQRD:"msqrd",TALK:"talk"}}),null);
__d("FXProductVisibilityPolicyTypeLabels",[],(function a(b,c,d,e,f,g){f.exports={ALL_PRODUCTS:"All products",OWNING_PRODUCT_ONLY:"Owning product only",SPECIFIC_PRODUCTS:"Specific products",ALL_EXCEPT_PRODUCTS:"All products except specific products",ANY_FACEBOOK_UNIVERSE:"Only Facebook-universe products"}}),null);
__d("OzConstants",[],(function a(b,c,d,e,f,g){f.exports={AUTHOR_TYPES:{BOT:"bot",TRAINER:"trainer",USER:"user"},ATTS:{COMMAND:"\u0040COMMAND",IMAGE:"image",SUGG:"\u0040SUGG",TEMPLATE:"template",SURVEY:"survey",QUICK_REPLIES:"\u0040QUICK_REPLIES",OPENTABLEQR:"opentableQuickReply"},SESSION_INFO_EVENT:"iframenonce_fb_session_info",TOKENS:{USER_FIRST_NAME:"user-first-name"},REMINDERS:{RANGE_IN_YEARS:5},M_FBIDS:{M:"881263441913087",M_DEV:"1579802578966277",P:"506060876211905"}}}),null);
__d('AdsTargetingLocationMapMetaRecord',['cx','AdsCommonLocalMapUtils','AdsTargetingLocationUtils','GeoCoordinates','immutable','LeafletUtils','LocationConstants','Map','leaflet','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={},l=new (c('Map'))(),m=350,n={NONE:0,SHIFT_LEFT:-1,SHIFT_RIGHT:1};i=babelHelpers.inherits(o,c('immutable').Record({center:null,circleCenter:null,coordinateLists:null,geoLocation:null,icon:null,meta:null,name:null,popup:null,radius:0}));j=i&&i.prototype;function o(p){j.constructor.call(this,p)}o.prototype.hashCode=function(){var p=c('AdsTargetingLocationUtils').getUniqueKey(this.geoLocation);if(!l.has(p))l.set(p,c('AdsTargetingLocationUtils').getHashCode(this.geoLocation));return c('nullthrows')(l.get(p))};o.fromGeoLocations=function(p,q){var r=[];c('LocationConstants').locationTypes.forEach(function(s){(p[s]||[]).forEach(function(t){if(t.latitude==null||t.longitude==null)return;r.push(this.fromGeoLocationCached(t,q(t)))}.bind(this))}.bind(this));return c('immutable').Set(r)};o.fromGeoLocationCached=function(p,q){var r=c('AdsTargetingLocationUtils').getUniqueKey(p);if(!k[r])k[r]=this.fromGeoLocation(p,q);return k[r]};o.fromGeoLocation=function(p,q){var r=[],s=0,t=new (c('GeoCoordinates'))(Number(p.latitude),Number(p.longitude));if(p.polygons&&p.polygons.length)r=this.generatePolygonLists(p.polygons);if(p.radius&&p.distance_unit)s=c('AdsTargetingLocationUtils').getRadiusInMeters(p.radius,p.distance_unit);return new o({center:t,coordinateLists:c('immutable').List(r),geoLocation:p,icon:null,meta:q,name:p.name,popup:null,radius:s})};o.generatePolygonLists=function(p){var q=c('leaflet').latLngBounds(p),r=n.NONE;if(q.getEast()-q.getWest()>m){var s=this.boundsForShiftedMultipolygons(p,n.SHIFT_LEFT),t=this.boundsForShiftedMultipolygons(p,n.SHIFT_RIGHT),u=Math.abs(q.getEast()-q.getWest()),v=Math.abs(s.getEast()-s.getWest()),w=Math.abs(t.getEast()-t.getWest());if(v<=u||w<=u)if(Math.abs(s.getCenter().lng)<=Math.abs(t.getCenter().lng)){r=n.SHIFT_LEFT}else r=n.SHIFT_RIGHT;}var x=[];p.forEach(function(y){var z=[];y.forEach(function(aa){z.push(new (c('GeoCoordinates'))(Number(aa.lat),this.shiftLongitude(c('LeafletUtils').wrapLongitude(Number(aa.lng)),r)))}.bind(this));x.push(c('immutable').List(z))}.bind(this));return x};o.shiftLongitude=function(p,q){if(q===n.SHIFT_LEFT){p=p<0?p:p-360}else if(q===n.SHIFT_RIGHT)p=p>0?p:p+360;return p};o.boundsForShiftedMultipolygons=function(p,q){var r=[];p.forEach(function(s){var t=[];s.forEach(function(u){t.push(c('LeafletUtils').toLatLng(new (c('GeoCoordinates'))(Number(u.lat),this.shiftLongitude(c('LeafletUtils').wrapLongitude(Number(u.lng)),q))))}.bind(this));r.push(t)}.bind(this));return c('leaflet').latLngBounds(r)};o.iconForSingleLocationSelected=function(){return c('leaflet').divIcon(babelHelpers['extends']({},c('AdsCommonLocalMapUtils').LEAFLET_MARKER_LOCATION_PIN_ICON_SELECTED_OPTIONS,{className:"_tl9"}))};o.iconForSingleLocationNotSelected=function(){return c('leaflet').divIcon(babelHelpers['extends']({},c('AdsCommonLocalMapUtils').LEAFLET_MARKER_LOCATION_PIN_ICON_NOT_SELECTED_OPTIONS,{className:"_tla"}))};f.exports=o}),null);
__d('AdsTargetingLocationClusterRecord',['cx','fbt','invariant','AdsTargetingLocationMapMetaRecord','GeoCoordinates','immutable','LegacyMapCoordinate','LocationConstants','MapRects','Rect','leaflet'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('LocationConstants').Aggregation,n=m.AGGREGATION_RADIUS,o=m.LARGE_CLUSTER_THRESHOLD,p=m.MEDIUM_CLUSTER_THRESHOLD,q=m.SMALL_CLUSTER_THRESHOLD;k=babelHelpers.inherits(r,c('immutable').Record({center:null,members:c('immutable').Set(),radius:0,rect:null}));l=k&&k.prototype;r.fromSingleRecord=function(s,t){var u=this.calculateAbsoluteCenter(s.geoLocation.latitude,s.geoLocation.longitude,t);return new r({center:u,members:c('immutable').Set.of(s),radius:n,rect:new (c('Rect'))(u.y,u.x,u.y,u.x)})};r.toSingleRecordWithOptions=function(s,t,u,v,w){if(u||s.members.size>1){var x=c('LegacyMapCoordinate').fromMap(s.center.x,s.center.y,t),y=new (c('GeoCoordinates'))(x.getLatitude(),x.getLongitude()),z=w(s),aa=0,ba={center:y,key:this.keyFromKeys(s.members.map(this.memberToKey).toArray()),name:z,radius:aa,type:c('LocationConstants').CUSTOM_LOCATIONS},ca=this.iconForCluster(v(s)),da=s.members.map(function(ea){return ea.meta});return new (c('AdsTargetingLocationMapMetaRecord'))({center:y,coordinateLists:null,geoLocation:ba,icon:ca,meta:da,name:z,popup:null,radius:aa})}return s.members.first()};r.countFromCluster=function(s){return s.members.size};r.nameFromCluster=function(s){return i._("{count} Locations",[i.param('count',s.members.size)])};r.toSingleRecord=function(s,t){return this.toSingleRecordWithOptions(s,t,false,this.countFromCluster,this.nameFromCluster)};r.memberToKey=function(s){return s.geoLocation.key};r.keyFromKeys=function(s){return s.join('-')};r.keysFromKey=function(s){return s.split('-')};r.iconForCluster=function(s){var t=[0,18],u="_n9c",v=r.markerIconSizeForCluster(s);v=[v,v];return c('leaflet').divIcon({className:u,html:s,iconSize:v,popupAnchor:t})};r.markerIconSizeForCluster=function(s){if(s==null||s<q){return 24}else if(s<p){return 36}else if(s<o){return 48}else return 60;};r.markerRadiusForCluster=function(s){if(s==null||s<=1){return 100}else if(s<q){return 10000}else if(s<p){return 40000}else if(s<o){return 70000}else return 100000;};r.calculateAbsoluteCenter=function(s,t,u){return c('LegacyMapCoordinate').fromLatLong(s,t).getMapXY(u)};r.combine=function(s,t){s.asMutable()===s||j(0);s.rect=c('MapRects').boundingBox(s.rect,t.rect);s.radius=Math.max(s.radius,t.radius);s.center=s.rect.getCenter();s.members=s.members.union(t.members)};function r(){k.apply(this,arguments)}f.exports=r}),null);
__d('AdsTargetingAggregatedMapUtils',['AdsTargetingLocationClusterRecord','immutable','MapAggregation'],(function a(b,c,d,e,f,g){'use strict';function h(k,l,m,n){var o=k.map(function(r){return c('AdsTargetingLocationClusterRecord').fromSingleRecord(r,l).asMutable()}).toArray(),p=new (c('MapAggregation'))().aggregate(o,c('AdsTargetingLocationClusterRecord').combine),q=p.map(function(r){return c('AdsTargetingLocationClusterRecord').toSingleRecordWithOptions(r,l,k.size!==p.length,m||c('AdsTargetingLocationClusterRecord').countFromCluster,n||c('AdsTargetingLocationClusterRecord').nameFromCluster)});return c('immutable').Set(q)}function i(k){return c('immutable').Set(c('AdsTargetingLocationClusterRecord').keysFromKey(k))}var j={aggregateMapRecords:h,extractRecordKey:c('AdsTargetingLocationClusterRecord').memberToKey,splitClusterKey:i};f.exports=j}),null);
__d('AdsTargetingLocationInlineMapUtils',['GeoCoordinates','LeafletUtils','LeafletView','LocationConstants','leaflet'],(function a(b,c,d,e,f,g){'use strict';var h=10000;function i(n){var o=void 0;n.forEach(function(p){var q=void 0;if(p.center&&p.radius){var r=p.center,s=p.radius;q=c('LeafletUtils').circleBounds(c('LeafletUtils').toLatLng(r),s)}else if(p.coordinateLists&&p.coordinateLists.size){p.coordinateLists.forEach(function(t){var u=t.map(function(w){return c('LeafletUtils').toLatLng(new (c('GeoCoordinates'))(w.latitude,w.longitude))}).toArray(),v=c('leaflet').latLngBounds(u);q=undefined===q?v:q.extend(v)})}else if(p.center)q=c('LeafletUtils').circleBounds(c('LeafletUtils').toLatLng(p.center),h);if(undefined===o){o=q}else o.extend(q);});return o}function j(n,o){var p=i(o);if(!p)return n;return n.setCenter(c('LeafletUtils').fromLatLng(p.getCenter()))}function k(n,o){return new (c('LeafletView'))({center:n.center,zoom:c('LocationConstants').getNextZoomRangeStart(o)})}function l(n){return n.type===c('LocationConstants').CUSTOM_LOCATIONS&&n.custom_type===c('LocationConstants').CUSTOM_TYPE_MULTI_CITY}var m={centerToLocations:j,getAllBounds:i,isLocationForMultiCity:l,zoomToNextRange:k};f.exports=m}),null);
__d('AdsTargetingLocationMapPopup',['cx','FbtResultBase','React','isEmpty','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={showingPopoverMenu:false},this.$AdsTargetingLocationMapPopup1=function(){var r=c('isEmpty')(this.props.menuItems);return c('React').createElement('div',null,c('React').createElement('div',{className:(r?"_2e-k":'')+(!r?' '+"_37vz":'')},this.props.label),r?null:this.$AdsTargetingLocationMapPopup2())}.bind(this),this.$AdsTargetingLocationMapPopup2=function(){var r="_37v-";return c('React').createElement('div',{className:"_37v_"},c('React').createElement('button',{className:r,type:'button',onClick:this.$AdsTargetingLocationMapPopup3},this.props.children),this.$AdsTargetingLocationMapPopup4())}.bind(this),this.$AdsTargetingLocationMapPopup5=function(r){return !!(this.props.menuItemsDisabled&&this.props.menuItemsDisabled[r])}.bind(this),this.$AdsTargetingLocationMapPopup4=function(){if(!this.state.showingPopoverMenu)return null;var r=c('nullthrows')(this.props.menuItems),s="_37w0",t=Object.keys(r).map(function(u){var v=this.$AdsTargetingLocationMapPopup6.bind(this,u),w=r[u],x=this.$AdsTargetingLocationMapPopup5(u);return c('React').createElement('button',{className:s,disabled:x,key:u,onClick:v},w)}.bind(this));return c('React').createElement('div',{className:"_37w1"},t)}.bind(this),this.$AdsTargetingLocationMapPopup3=function(){this.setState({showingPopoverMenu:!this.state.showingPopoverMenu})}.bind(this),this.$AdsTargetingLocationMapPopup6=function(r){this.setState({showingPopoverMenu:false});this.props.onMenuItemSelect(r,this.props.location)}.bind(this),n}l.prototype.render=function(){return c('React').createElement('div',{className:"_37vy"},this.$AdsTargetingLocationMapPopup1())};l.propTypes={label:k.oneOfType([k.string,k.instanceOf(c('FbtResultBase'))]).isRequired,location:k.object.isRequired,menuItems:k.object,menuItemsDisabled:k.object,onMenuItemSelect:k.func.isRequired};f.exports=l}),null);
__d('AdsTargetingLocationTypeAliases',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({DEFAULT:null,INVOKE_CALLBACK_ON_SINGLE_NODE:null,NONE:null,SHOW_POPUP:null,ZOOM_TO_MARKER:null,ZOOM_TO_NEXT_RANGE:null}),i={CLICK_BEHAVIORS:h};f.exports=i}),null);
__d('AdsTargetingLocationInlineMap.react',['cx','fbt','ix','AdsCommonLocalMapUtils','AdsInterfacesLogger','AdsTargetingLocationLoggingEvents','AdsTargetingLocationMapPopup','BanzaiODS','BUIAdoptionButton.react','FBOverlayElement.react','FBTilesMap.react','FBTilesMapZoomOverlay.react','GeoCoordinates','Image.react','immutable','LeafletCircle.react','LeafletCircleMarker.react','LeafletMarker.react','LeafletMultiPolygon.react','LeafletPopup.react','LeafletUtils','LeafletView','LocationConstants','React','TilesMapConfig','XUIButton.react','areEqual','emptyFunction','leaflet','performanceNow','AdsTargetingLocationInlineMapUtils','AdsTargetingLocationTypeAliases'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=c('AdsTargetingLocationInlineMapUtils').centerToLocations,o=c('AdsTargetingLocationInlineMapUtils').getAllBounds,p=c('AdsTargetingLocationInlineMapUtils').isLocationForMultiCity,q=c('AdsTargetingLocationInlineMapUtils').zoomToNextRange,r=c('AdsTargetingLocationTypeAliases').CLICK_BEHAVIORS,s=new (c('LeafletView'))({center:new (c('GeoCoordinates'))(0,0),zoom:1}),t=1,u=2,v=c('React').createElement(c('Image.react'),{src:j("22149"),width:'12'}),w=c('React').createElement(c('Image.react'),{src:j("22118"),width:'16'}),x={INCLUDE:i._("Include"),EXCLUDE:i._("Exclude"),DELETE:i._("Delete")},y={DELETE:i._("Delete")},z=0,aa=0;k=babelHelpers.inherits(ba,c('React').Component);l=k&&k.prototype;function ba(){var ca,da;for(var ea=arguments.length,fa=Array(ea),ga=0;ga<ea;ga++)fa[ga]=arguments[ga];return da=(ca=l.constructor).call.apply(ca,[this].concat(fa)),this.state={locating:false,mapOptions:{scrollWheelZoom:!this.props.disableScrollWheelZoom,maxBounds:this.props.maxBounds},size:null,view:this.props.view||s,popupLocationKey:null},this.$AdsTargetingLocationInlineMap1=function(ha){if(ha.coordinateLists.size)return null;var ia=c('LocationConstants').getPluralLocationType(ha.geoLocation.type);switch(ia){case c('LocationConstants').COUNTRIES:return new (c('LeafletView'))({center:ha.center,zoom:u});case c('LocationConstants').COUNTRY_GROUPS:return new (c('LeafletView'))({center:ha.center,zoom:t});case c('LocationConstants').CUSTOM_LOCATIONS:if(ha.geoLocation.custom_type===c('LocationConstants').CUSTOM_TYPE_MULTI_CITY)return new (c('LeafletView'))({center:ha.center,zoom:ha.geoLocation.country?u:t});return null;default:return null;}},this.$AdsTargetingLocationInlineMap8=function(ha,ia){if(ia){return !ha?c('AdsCommonLocalMapUtils').LEAFLET_TARGET_HIGHLIGHT_REGION_INCLUDE_OPTIONS:c('AdsCommonLocalMapUtils').LEAFLET_TARGET_HIGHLIGHT_REGION_EXCLUDE_OPTIONS}else return !ha?c('AdsCommonLocalMapUtils').LEAFLET_TARGET_REGION_INCLUDE_OPTIONS:c('AdsCommonLocalMapUtils').LEAFLET_TARGET_REGION_EXCLUDE_OPTIONS;},this.$AdsTargetingLocationInlineMap9=function(ha,ia){if(ia){return ha?"_s6h":"_s6i"}else return ha?"_3i44":"_3i45";},this.$AdsTargetingLocationInlineMap4=function(ha,ia,ja,ka){var la=this.props.menuItems||(this.props.onlyInclusion?y:x),ma=void 0;if(!this.props.menuItems)ma=ia?{INCLUDE:false,EXCLUDE:true,DELETE:false}:{INCLUDE:true,EXCLUDE:false,DELETE:false};var na={};if(!ia)this.props.excludedLocations.forEach(function(oa,pa){var qa=oa.geoLocation;if(qa.type===c('LocationConstants').CUSTOM_LOCATIONS&&qa.custom_type===c('LocationConstants').CUSTOM_TYPE_MULTI_CITY)na[qa.key]=true;});ha.forEach(function(oa,pa){if(!ia&&na[oa.geoLocation.key]===true)return;var qa=this.state.popupLocationKey===oa.geoLocation.key,ra=this.props.highlightLocations.contains(oa)||qa,sa=(ra?'h':'')+(ia?'-':'')+oa.geoLocation.key,ta=this.$AdsTargetingLocationInlineMap8(ia,ra),ua=[],va=c('React').createElement(c('LeafletPopup.react'),{options:{autoPan:false,closeButton:false,className:"_1l0n",maxWidth:500}},oa.popup||c('React').createElement(c('AdsTargetingLocationMapPopup'),{label:this.$AdsTargetingLocationInlineMap10(oa.geoLocation),location:oa.geoLocation,menuItems:p(oa.geoLocation)?y:la,menuItemsDisabled:ma,onMenuItemSelect:this.props.onPopupMenuItemSelect})),wa=qa||[r.DEFAULT,r.SHOW_POPUP].includes(this.props.clickBehavior)?va:undefined,xa=this.$AdsTargetingLocationInlineMap11(oa),ya=function gb(hb){if(qa)hb.target.openPopup();},za=function(gb){if(this.state.popupLocationKey!==oa.geoLocation.key)this.setState({popupLocationKey:oa.geoLocation.key});}.bind(this),ab=function(gb){if(this.state.popupLocationKey===oa.geoLocation.key&&qa)this.setState({popupLocationKey:null});}.bind(this),bb=function(gb){if(this.props.showPopupOnHover)za(gb);}.bind(this),cb=function(gb){if(this.props.showPopupOnHover)ab(gb);}.bind(this),db=oa.icon||c('leaflet').divIcon(babelHelpers['extends']({},c('AdsCommonLocalMapUtils').LEAFLET_MARKER_ICON_OPTIONS,{className:this.$AdsTargetingLocationInlineMap9(ia,ra)}));ua.push(c('React').createElement(c('LeafletMarker.react'),{coordinates:oa.center,eventHandlers:{add:ya,click:xa,mouseover:bb,mouseout:cb,popupclose:ab,popupopen:za},key:'m'+sa,options:{clickable:true,icon:db,zIndexOffset:ra?1000:0},popup:wa}));var eb=false;if(oa.coordinateLists&&oa.coordinateLists.size){ua.push(c('React').createElement(c('LeafletMultiPolygon.react'),{coordinateLists:oa.coordinateLists,key:'p'+sa,options:ta}));eb=true}var fb=oa.circleCenter||oa.center;if(fb&&oa.radius){ua.push(c('React').createElement(c('LeafletCircle.react'),{center:fb,key:'c'+sa,options:ta,radius:oa.radius}));if(!eb)ua.push(c('React').createElement(c('LeafletCircleMarker.react'),{center:fb,key:'cm'+sa,options:c('AdsCommonLocalMapUtils').LEAFLET_TARGET_MARKER_OPTIONS}));}if(ra){ka.push.apply(ka,ua)}else ja.push.apply(ja,ua);}.bind(this))}.bind(this),this.$AdsTargetingLocationInlineMap10=function(ha){return ha.name},this.$AdsTargetingLocationInlineMap12=function(){c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_ZOOM_IN},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);var ha=this.state.view;if(ha.zoom<c('TilesMapConfig').ZOOM_RANGE.MAX)this.$AdsTargetingLocationInlineMap3(ha.setZoom(ha.zoom+1));}.bind(this),this.$AdsTargetingLocationInlineMap13=function(){c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_ZOOM_OUT},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);var ha=this.state.view;if(ha.zoom>c('TilesMapConfig').ZOOM_RANGE.MIN)this.$AdsTargetingLocationInlineMap3(ha.setZoom(ha.zoom-1));}.bind(this),this.$AdsTargetingLocationInlineMap14=function(){c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_ZOOM_TO_FIT},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);var ha=this.$AdsTargetingLocationInlineMap2(this.state.size,this.props.locations.union(this.props.excludedLocations));this.$AdsTargetingLocationInlineMap3(ha)}.bind(this),this.$AdsTargetingLocationInlineMap15=function(){var ha=this.state.view.zoom<c('TilesMapConfig').ZOOM_RANGE.MAX?this.$AdsTargetingLocationInlineMap12:undefined,ia=this.state.view.zoom>c('TilesMapConfig').ZOOM_RANGE.MIN?this.$AdsTargetingLocationInlineMap13:undefined,ja=!this.props.disableCollapseButton&&c('React').createElement('div',{className:"_qh2"},c('React').createElement(c('XUIButton.react'),{className:"_qh3",image:w,label:i._("click to collaps map"),labelIsHidden:true,type:'button',onClick:this.props.onCollapseMap}));return c('React').createElement(c('FBOverlayElement.react'),{horizontal:'right',key:'zoomControls',vertical:'top'},c('React').createElement('div',null,ja,c('React').createElement(c('FBTilesMapZoomOverlay.react'),{className:"_3-8j",onZoomIn:ha,onZoomOut:ia}),c('React').createElement('div',{className:"_qh4"},c('React').createElement(c('XUIButton.react'),{className:"_qh5",image:v,label:i._("Zoom To Fit"),labelIsHidden:true,type:'button',onClick:this.$AdsTargetingLocationInlineMap14}))))}.bind(this),this.$AdsTargetingLocationInlineMap16=function(){return c('React').createElement(c('FBOverlayElement.react'),{horizontal:'right',key:'addLocation',vertical:'bottom'},c('React').createElement('div',null,c('React').createElement(c('BUIAdoptionButton.react'),{disabled:this.props.addingLocation,icon:c('React').createElement(c('Image.react'),{src:this.props.addLocationMode===c('LocationConstants').INCLUDE?j("22123"):j("22122")}),isDepressed:this.state.locating,label:i._("Drop Pin"),style:{marginBottom:'12px',marginRight:'12px'},type:'button',onClick:this.$AdsTargetingLocationInlineMap17})))}.bind(this),this.$AdsTargetingLocationInlineMap7=function(){if(this.props.hideAllControls)return null;return this.props.enableDropPin?[this.$AdsTargetingLocationInlineMap15(),this.$AdsTargetingLocationInlineMap16()]:[this.$AdsTargetingLocationInlineMap15()]}.bind(this),this.$AdsTargetingLocationInlineMap5=function(event){if(this.state.locating){this.setState({locating:false});this.props.onAddLocationFromMap(new (c('GeoCoordinates'))(event.latlng.lat,c('LeafletUtils').wrapLongitude(event.latlng.lng)))}}.bind(this),this.$AdsTargetingLocationInlineMap17=function(ha){this.setState({locating:!this.state.locating})}.bind(this),this.$AdsTargetingLocationInlineMap2=function(ha,ia){if(!ha||0===ia.size)return this.state.view;var ja=o(ia);if(!ja)return this.state.view;var ka=c('LeafletUtils').fitBounds(ja,{width:ha.x,height:ha.y},{zoomRange:[0,20]});return ka}.bind(this),this.$AdsTargetingLocationInlineMap6=function(ha){var ia=this.state.view;if(this.props.centerLocations&&this.props.centerLocations.size>0){ia=n(this.state.view,this.props.centerLocations)}else if(this.props.locations.size>0||this.props.excludedLocations.size>0||this.props.fitLocations.size>0)ia=this.$AdsTargetingLocationInlineMap2(ha,this.props.locations.union(this.props.excludedLocations).union(this.props.fitLocations));this.$AdsTargetingLocationInlineMap3(ia,ha)}.bind(this),this.$AdsTargetingLocationInlineMap3=function(ha,ia){var ja=ia||this.state.size;if(this.props.view){this.setState({size:ja})}else this.setState({view:ha,size:ja});if(this.props.onViewChange)this.props.onViewChange(ha,ja);}.bind(this),da}ba.prototype.componentWillMount=function(){z=c('performanceNow')()};ba.prototype.componentDidMount=function(){var ca=Math.floor(c('performanceNow')()-z);c('AdsInterfacesLogger').log({eventName:c('AdsTargetingLocationLoggingEvents').GEO_LOCATION_MAP_MOUNTING_TIME},c('AdsInterfacesLogger').LOG_TYPE_PRIMARY_APP);c('BanzaiODS').bumpEntityKey('ads_targeting_location','geo_location_map_mounting_time',ca)};ba.prototype.componentWillUpdate=function(ca,da){aa=c('performanceNow')()};ba.prototype.componentWillReceiveProps=function(ca){if(!c('LeafletUtils').areViewEqual(ca.view,this.props.view)){this.setState({view:ca.view||s})}else if(null!==this.state.size&&ca.fitLocations.size>0&&(ca.forceUpdate||!c('areEqual')(ca.fitLocations,this.props.fitLocations))){var da=null;if(ca.fitLocations.size==1){var ea=ca.fitLocations.first();da=this.$AdsTargetingLocationInlineMap1(ea)}if(!da)da=this.$AdsTargetingLocationInlineMap2(this.state.size,ca.fitLocations);this.$AdsTargetingLocationInlineMap3(da)}};ba.prototype.shouldComponentUpdate=function(ca,da){var ea=ca.addLocationMode!==this.props.addLocationMode||ca.enableDropPin!==this.props.enableDropPin||!c('areEqual')(ca.highlightLocations,this.props.highlightLocations)||!c('areEqual')(ca.locations,this.props.locations)||!c('areEqual')(ca.excludedLocations,this.props.excludedLocations)||!c('LeafletUtils').areViewEqual(ca.view,this.props.view),fa=da!==undefined&&(da.size!=this.state.size||!c('LeafletUtils').areViewEqual(da.view,this.state.view)||da.popupLocationKey!==this.state.popupLocationKey||da.locating!=this.state.locating);return ea||fa};ba.prototype.render=function(){var ca=null;if(this.state.locating){ca=this.props.addLocationMode===c('LocationConstants').INCLUDE?"_3aio":"_3aiw"}else ca="_3-cr";var da=[],ea=[];this.$AdsTargetingLocationInlineMap4(this.props.locations,false,da,ea);this.$AdsTargetingLocationInlineMap4(this.props.excludedLocations,true,da,ea);return c('React').createElement(c('FBTilesMap.react'),{className:ca,eventHandlers:{click:this.$AdsTargetingLocationInlineMap5},options:this.state.mapOptions,showReportButton:false,showZoomControls:false,view:this.state.view,onSizeSettled:this.$AdsTargetingLocationInlineMap6,onViewChange:this.$AdsTargetingLocationInlineMap3},this.$AdsTargetingLocationInlineMap7(),da,ea)};ba.prototype.$AdsTargetingLocationInlineMap18=function(ca){var da=ca.meta;if(!this.props.onSingleNodeClick||c('immutable').Set.isSet(da)&&da.size!==1){this.$AdsTargetingLocationInlineMap19(ca);return}var ea=!c('immutable').Set.isSet(da)?da:da.first();this.props.onSingleNodeClick(ea.getID())};ba.prototype.$AdsTargetingLocationInlineMap11=function(ca){switch(this.props.clickBehavior){case r.DEFAULT:case r.ZOOM_TO_MARKER:return function(){return this.$AdsTargetingLocationInlineMap20(ca)}.bind(this);case r.ZOOM_TO_NEXT_RANGE:return function(){return this.$AdsTargetingLocationInlineMap19(ca)}.bind(this);case r.INVOKE_CALLBACK_ON_SINGLE_NODE:return function(){return this.$AdsTargetingLocationInlineMap18(ca)}.bind(this);default:return c('emptyFunction');}};ba.prototype.$AdsTargetingLocationInlineMap20=function(ca){var da=this.$AdsTargetingLocationInlineMap2(this.state.size,c('immutable').Set.of(ca));this.$AdsTargetingLocationInlineMap3(da)};ba.prototype.$AdsTargetingLocationInlineMap19=function(ca){this.$AdsTargetingLocationInlineMap3(q(ca,this.state.view.zoom))};ba.propTypes={addLocationMode:m.string.isRequired,addingLocation:m.bool,clickBehavior:m.oneOf(Object.keys(r)),disableCollapseButton:m.bool,disableScrollWheelZoom:m.bool,enableDropPin:m.bool.isRequired,excludedLocations:m.instanceOf(c('immutable').Set).isRequired,fitLocations:m.instanceOf(c('immutable').Set).isRequired,forceUpdate:m.bool,hideAllControls:m.bool,highlightLocations:m.instanceOf(c('immutable').Set).isRequired,locations:m.instanceOf(c('immutable').Set).isRequired,maxBounds:m.instanceOf(c('leaflet').LatLngBounds),menuItems:m.object,onlyInclusion:m.bool.isRequired,showPopupOnHover:m.bool,view:m.instanceOf(c('LeafletView')),onAddLocationFromMap:m.func.isRequired,onCollapseMap:m.func.isRequired,onPopupMenuItemSelect:m.func.isRequired,onViewChange:m.func};ba.defaultProps={clickBehavior:r.DEFAULT};f.exports=ba}),null);
__d('AdsTargetingAggregatedMap.react',['AdsTargetingAggregatedMapUtils','AdsTargetingLocationInlineMap.react','FbtResultBase','immutable','LeafletUtils','LeafletView','LocationConstants','React','areEqual','emptyFunction','emptyObject','AdsTargetingLocationTypeAliases'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('AdsTargetingAggregatedMapUtils').aggregateMapRecords,k=c('AdsTargetingAggregatedMapUtils').extractRecordKey,l=c('AdsTargetingAggregatedMapUtils').splitClusterKey,m=c('React').Component,n=c('React').PropTypes,o=c('AdsTargetingLocationTypeAliases').CLICK_BEHAVIORS,p=c('LocationConstants').Aggregation,q=p.MAX_LOCATIONS_SIZE,r=p.MIN_ZOOM_LEVEL_FOR_FILTERING;h=babelHelpers.inherits(s,m);i=h&&h.prototype;function s(t){i.constructor.call(this,t);this.$AdsTargetingAggregatedMap6=function(u,v){var w=this.props.onLocationsSelect;if(!w)return;w(this.$AdsTargetingAggregatedMap5(v))}.bind(this);this.$AdsTargetingAggregatedMap7=function(u,v){if(this.props.onViewChange)this.props.onViewChange(u,v);if(!v){if(!this.props.view)this.setState({view:u});return}this.$AdsTargetingAggregatedMap2(this.props,u,v)}.bind(this);this.state={bounds:null,clusteredLocations:c('immutable').Set(),inRangeLocations:c('immutable').Set(),locationRecordMap:c('immutable').Map(),size:null,view:this.props.view}}s.prototype.render=function(){if(this.state.clusteredLocations.size>q)return null;return c('React').createElement('div',{style:{height:this.props.height}},this.$AdsTargetingAggregatedMap1())};s.prototype.componentWillReceiveProps=function(t){this.$AdsTargetingAggregatedMap2(t)};s.prototype.shouldComponentUpdate=function(t,u){var v=t.height!==this.props.height||!c('areEqual')(t.locationRecords,this.props.locationRecords)||!c('areEqual')(t.menuItems,this.props.menuItems)||!c('LeafletUtils').areViewEqual(t.view,this.props.view),w=u!==undefined&&(u.bounds&&!u.bounds.equals(this.state.bounds)||!c('areEqual')(u.clusteredLocations,this.state.clusteredLocations)||!c('LeafletUtils').areViewEqual(u.view,this.state.view));return v||w};s.prototype.$AdsTargetingAggregatedMap3=function(){this.state.view&&this.state.view.zoom||null};s.prototype.$AdsTargetingAggregatedMap4=function(t,u){if(u&&t)return c('LeafletUtils').getViewBounds(t,{width:u.x,height:u.y});return c('LeafletUtils').WHOLE_WORLD_BOUNDS};s.prototype.$AdsTargetingAggregatedMap5=function(t){var u=l(t.key);return u.map(function(v){return this.state.locationRecordMap.get(v)}.bind(this))};s.prototype.$AdsTargetingAggregatedMap2=function(t,u,v){var w=t.view||u||this.state.view,x=v||this.state.size,y=this.$AdsTargetingAggregatedMap4(w,x),z=w&&w.zoom;if(z===undefined||!y)return;var aa=false;if(t.disableAggregation)aa=t.disableAggregation(z);var ba=void 0;if(z<r){ba=t.locationRecords}else ba=t.locationRecords.filter(function(fa){return y.contains(c('LeafletUtils').toLatLng(fa.center))});var ca=z==this.state.zoom&&(ba.equals(this.state.inRangeLocations)||ba.map(k).equals(this.state.inRangeLocations.map(k))),da=this.state.locationRecordMap;if(!ca)da=c('immutable').Map().withMutations(function(fa){ba.forEach(function(ga){return fa.set(ga.geoLocation.key,ga)})});var ea=void 0;if(aa||ba.size<2){ea=ba}else if(ca){ea=this.state.clusteredLocations}else ea=j(ba,z,this.props.countFromCluster,this.props.nameFromCluster);this.setState({bounds:y,clusteredLocations:ea,inRangeLocations:ba,locationRecordMap:da,size:x,view:w})};s.prototype.$AdsTargetingAggregatedMap1=function(){var t=this.state.clusteredLocations.isEmpty()?this.props.locationRecords:this.state.clusteredLocations;return c('React').createElement(c('AdsTargetingLocationInlineMap.react'),babelHelpers['extends']({addLocationMode:c('LocationConstants').INCLUDE,addingLocation:false,centerLocations:t,clickBehavior:this.props.clickBehavior,disableCollapseButton:this.props.disableCollapseButton,disableScrollWheelZoom:this.props.disableScrollWheelZoom,enableDropPin:false,excludedLocations:c('immutable').Set(),fitLocations:c('immutable').Set(),highlightLocations:c('immutable').Set(),locations:this.state.clusteredLocations,maxBounds:c('LeafletUtils').WHOLE_WORLD_BOUNDS,menuItems:this.props.menuItems||c('emptyObject'),onlyInclusion:true,showPopupOnHover:true,view:this.state.view||undefined,onAddLocationFromMap:c('emptyFunction'),onCollapseMap:c('emptyFunction'),onSingleNodeClick:this.props.onSingleNodeClick,onPopupMenuItemSelect:this.$AdsTargetingAggregatedMap6,onViewChange:this.$AdsTargetingAggregatedMap7},this.props.inlineMapProps))};s.propTypes={clickBehavior:n.oneOf(Object.keys(o)),countFromCluster:n.func,disableAggregation:n.func,disableCollapseButton:n.bool,disableScrollWheelZoom:n.bool,height:n.number.isRequired,inlineMapProps:n.object,locationRecords:n.instanceOf(c('immutable').Set).isRequired,menuItems:n.shape({INCLUDE:n.oneOfType([n.instanceOf(c('FbtResultBase')),n.string]),EXCLUDE:n.oneOfType([n.instanceOf(c('FbtResultBase')),n.string]),DELETE:n.oneOfType([n.instanceOf(c('FbtResultBase')),n.string])}),nameFromCluster:n.func,view:n.instanceOf(c('LeafletView')),onLocationsSelect:n.func,onViewChange:n.func};s.defaultProps={clickBehavior:o.ZOOM_TO_NEXT_RANGE,inlineMapProps:{}};f.exports=s}),null);
__d('AdsTargetingLocationMapRecord',['AdsTargetingLocationMapMetaRecord','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('AdsTargetingLocationMapMetaRecord'));i=h&&h.prototype;j.fromGeoLocation=function(k){return c('AdsTargetingLocationMapMetaRecord').fromGeoLocation(k,undefined)};j.fromGeoLocationCached=function(k){return c('AdsTargetingLocationMapMetaRecord').fromGeoLocationCached(k,undefined)};j.fromGeoLocations=function(k){return c('AdsTargetingLocationMapMetaRecord').fromGeoLocations(k,c('emptyFunction'))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('AdsDayPartingHourBox.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$AdsDayPartingHourBox2=function(){this.props.onMouseEnter(this.props.day,this.props.hour)}.bind(this),this.$AdsDayPartingHourBox1=function(event){event.preventDefault();this.props.onMouseDown(this.props.day,this.props.hour)}.bind(this),this.$AdsDayPartingHourBox3=function(event){event.preventDefault();event.stopPropagation();this.props.onMouseUp(this.props.day,this.props.hour)}.bind(this),n}l.prototype.render=function(){var m=this.props.hour;return c('React').createElement('div',{className:(this.props.isSelected&&!this.props.isHighlighted?"_4axe":'')+(this.props.isSelected&&this.props.isHighlighted?' '+"_4axf":'')+(!this.props.isSelected&&this.props.isHighlighted?' '+"_4axg":'')+(' '+"_4axh")+(' '+"_4axi")+(m===0?' '+"_4axj":'')+(m%3===2?' '+"_4axk":'')+(m%3!==2&&m!==0?' '+"_4axl":'')+(this.props.reducedWidth?' '+"_4axm":''),onMouseDown:this.$AdsDayPartingHourBox1,onMouseEnter:this.$AdsDayPartingHourBox2,onMouseUp:this.$AdsDayPartingHourBox3})};l.propTypes={day:k.number,hour:k.number.isRequired,isHighlighted:k.bool,isSelected:k.bool.isRequired,reducedWidth:k.bool,onMouseDown:k.func.isRequired,onMouseEnter:k.func.isRequired,onMouseUp:k.func.isRequired};f.exports=l}),null);
__d('AdsDayPartingInterval',['DateConsts'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){this.start_minute=i*c('DateConsts').MIN_PER_HOUR;this.end_minute=j*c('DateConsts').MIN_PER_HOUR}f.exports=h}),null);
__d('DayPartingGrid',['AdsApiScheduleObjectFields','AdsApiScheduleObjectPaths','AdsApiScheduleObjectRecord','AdsDayPartingInterval','DayPartingUtils','getByPath'],(function a(b,c,d,e,f,g){'use strict';var h=c('DayPartingUtils').DAYS_IN_WEEK,i=c('DayPartingUtils').HOURS_IN_DAY;function j(k){if(k){this.hours=new Array(h);for(var l=0;l<h;l++)this.hours[l]=k.hours[l].slice();this.everyDay=k.everyDay.slice();this.allDay=k.allDay.slice()}else{this.hours=this.$DayPartingGrid1();this.allDay=c('DayPartingUtils').createArray(h,function(){return false});this.everyDay=c('DayPartingUtils').createArray(i,function(){return false})}}j.prototype.set=function(k,l,m,n,o){var p;if(m<k){p=k;k=m;m=p}if(n<l){p=l;l=n;n=p}for(var q=k;q<=m;q++){for(var r=l;r<=n;r++)this.hours[q][r]=o;this.$DayPartingGrid2(q)}for(r=l;r<=n;r++)this.$DayPartingGrid3(r);};j.prototype.setEveryDay=function(k,l,m){if(l<k){var n=k;k=l;l=n}this.set(0,k,h-1,l,m)};j.prototype.setAllDay=function(k,l,m){if(l<k){var n=k;k=l;l=n}this.set(k,0,l,i-1,m)};j.prototype.isSelected=function(k,l){if(l===null&&k===null)return false;if(l==null&&this.allDay&&k!=null)return !!this.allDay[k];if(k==null&&this.everyDay&&l!=null)return !!this.everyDay[l];if(this.hours&&k!=null&&l!=null)return !!this.hours[k][l];return false};j.prototype.$DayPartingGrid2=function(k){var l=true;for(var m=0;m<i;m++)if(this.hours[k][m]!==true){l=false;break}this.allDay[k]=l};j.prototype.$DayPartingGrid3=function(k){var l=true;for(var m=0;m<h;m++)if(this.hours[m][k]!==true){l=false;break}this.everyDay[k]=l};j.prototype.getSchedule=function(){var k=new Array(7);for(var l=0;l<h;l++){var m=this.toAPIDayIndex(l);k[m]=this.$DayPartingGrid4(l)}return c('DayPartingUtils').mergeDays(k)};j.prototype.getScheduleWithTimezoneType=function(k){var l=new Array(7);for(var m=0;m<h;m++){var n=this.toAPIDayIndex(m);l[n]=this.$DayPartingGrid4(m)}var o=c('DayPartingUtils').mergeDays(l);return o.map(function(p){var q;return new (c('AdsApiScheduleObjectRecord'))((q={},q[c('AdsApiScheduleObjectFields').START_MINUTE]=p.start_minute,q[c('AdsApiScheduleObjectFields').END_MINUTE]=p.end_minute,q[c('AdsApiScheduleObjectFields').DAYS]=p.days,q[c('AdsApiScheduleObjectFields').TIMEZONE_TYPE]=k,q))})};j.prototype.$DayPartingGrid4=function(k){var l=[],m=null,n=function q(r){if(m!==null){var s=new (c('AdsDayPartingInterval'))(m,r);l.push(s)}};for(var o=0;o<i;o++){var p=this.hours[k][o];if(m===null){if(p===true)m=o;}else if(p===false){n(o);m=null}}if(m!==null)n(i);return l};j.prototype.setSchedule=function(k){var l=this.$DayPartingGrid1();if(k!=null&&k.length){k.forEach(function(o){var p=o[c('AdsApiScheduleObjectFields').DAYS];if(p!=null&&p.length)p.forEach(function(q){var r=c('getByPath')(o,c('AdsApiScheduleObjectPaths').START_MINUTE),s=c('getByPath')(o,c('AdsApiScheduleObjectPaths').END_MINUTE),t=this.fromAPIDayIndex(q),u=r/60,v=s/60;for(var w=u;w<v;w++)l[t][w]=true;}.bind(this));}.bind(this));this.hours=l;for(var m=0;m<h;m++)this.$DayPartingGrid2(m);for(var n=0;n<i;n++)this.$DayPartingGrid3(n);}return this};j.prototype.toAPIDayIndex=function(k){return (k+1)%c('DayPartingUtils').DAYS_IN_WEEK};j.prototype.fromAPIDayIndex=function(k){return (k+6)%c('DayPartingUtils').DAYS_IN_WEEK};j.prototype.$DayPartingGrid1=function(){return c('DayPartingUtils').createArray(h,function(){return c('DayPartingUtils').createArray(i,function(){return false})})};f.exports=j}),null);
__d('AdsDayPartingTableRow.react',['cx','fbt','AdsDayPartingHourBox.react','DateStrings','DayPartingGrid','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=[];for(var o=0;o<24;o++){var p=!!this.props.highlighted&&this.props.highlighted.isSelected(this.props.day,o);n.push(c('React').createElement(c('AdsDayPartingHourBox.react'),{day:this.props.day,hour:o,isHighlighted:p,isSelected:this.props.grid.isSelected(this.props.day,o),key:o,reducedWidth:this.props.reducedWidth,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseUp:this.props.onMouseUp}))}var q=this.props.day===null;return c('React').createElement('div',{className:"clearfix"+(this.props.day===0?' '+"_14f-":'')+(q?' '+"_14f_":'')},c('React').createElement('div',{className:"_4axh"+(' '+"_14g1")+(' '+"_14g2")+(this.props.reducedWidth?' '+"_14gd":'')},this.$AdsDayPartingTableRow1()),n)};m.prototype.$AdsDayPartingTableRow1=function(){if(this.props.day==null)return i._("Every Day");if(this.props.reducedWidth)return c('DateStrings').getWeekdayNameShort(this.props.grid.toAPIDayIndex(this.props.day));return c('DateStrings').getWeekdayName(this.props.grid.toAPIDayIndex(this.props.day))};function m(){j.apply(this,arguments)}m.propTypes={day:l.number,grid:l.instanceOf(c('DayPartingGrid')).isRequired,highlighted:l.instanceOf(c('DayPartingGrid')),reducedWidth:l.bool,onMouseDown:l.func.isRequired,onMouseEnter:l.func.isRequired,onMouseUp:l.func.isRequired};f.exports=m}),null);
__d('AdsDayPartingTable.react',['cx','fbt','AdsDayPartingTableRow.react','DayPartingGrid','DayPartingUtils','React','XUIError.react','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=[i._("12am"),i._("3am"),i._("6am"),i._("9am"),i._("12pm"),i._("3pm"),i._("6pm"),i._("9pm")],n=7,o=512;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={isDragging:false,dragMode:false,dragStartDay:null,dragStartHour:null,dragEndDay:null,dragEndHour:null,renderedGrid:null},this.$AdsDayPartingTable6=function(){this.$AdsDayPartingTable5()}.bind(this),this.$AdsDayPartingTable5=function(){if(this.state.isDragging)this.setState({isDragging:false,renderedGrid:this.props.grid});}.bind(this),this.$AdsDayPartingTable3=function(v,w){if(!this.state.isDragging)return;this.$AdsDayPartingTable8({dragEndDay:v,dragEndHour:w})}.bind(this),this.$AdsDayPartingTable2=function(v,w){if(this.state.isDragging||this.props.isReadOnly)return;this.$AdsDayPartingTable8({isDragging:true,dragMode:!this.props.grid.isSelected(v,w),dragStartDay:v,dragStartHour:w,dragEndDay:v,dragEndHour:w})}.bind(this),this.$AdsDayPartingTable4=function(v,w){if(!this.state.isDragging)return;this.setState({isDragging:false,dragMode:false,dragStartDay:null,dragStartHour:null,dragEndDay:null,dragEndHour:null});this.props.onGridChange(this.$AdsDayPartingTable1())}.bind(this),r}p.prototype.componentWillReceiveProps=function(q){if('grid' in q)this.setState({renderedGrid:q.grid});};p.prototype.render=function(){var q=this.$AdsDayPartingTable1(),r=[];for(var s=0;s<n;s++)r.push(c('React').createElement(c('AdsDayPartingTableRow.react'),{day:s,grid:q,highlighted:this.props.highlighted,key:s,reducedWidth:this.props.reducedWidth,onMouseDown:this.$AdsDayPartingTable2,onMouseEnter:this.$AdsDayPartingTable3,onMouseUp:this.$AdsDayPartingTable4}));if(!this.props.reducedWidth&&!this.props.hideAllDaysPicker)r.push(c('React').createElement(c('AdsDayPartingTableRow.react'),{day:null,grid:q,highlighted:this.props.highlighted,key:r.length,onMouseDown:this.$AdsDayPartingTable2,onMouseEnter:this.$AdsDayPartingTable3,onMouseUp:this.$AdsDayPartingTable4}));var t=[];for(var u=0;u<8;u++){t.push(c('React').createElement('div',{className:"_33bn"+(this.props.reducedWidth?' '+"_33bo":''),key:'hour'+u},m[u]));t.push(c('React').createElement('div',{className:"_33bp",key:'hourA'+u}));t.push(c('React').createElement('div',{className:"_33bp",key:'hourB'+u}))}var v=this.props.width&&this.props.width<o;return c('React').createElement(c('XUIError.react'),this.props,c('React').createElement('div',{className:v?"_13h5":'',style:v?{width:this.props.width}:null},c('React').createElement('div',{className:"_5sn9"+(!this.props.isReadOnly?' '+"_33bq":'')+(this.props.reducedWidth?' '+"_26mb":''),onMouseLeave:this.$AdsDayPartingTable5,onMouseUp:this.$AdsDayPartingTable6},c('React').createElement('div',{className:"_33br"+(' '+"clearfix")+(this.props.reducedWidth?' '+"_33bs":'')},t),r,c('React').createElement('div',{className:"_5sne"},c('React').createElement('div',{className:"_4axe"+(' '+"_5sny")+(this.props.reducedWidth?' '+"_26mg":'')}),i._("Scheduled hours")),this.$AdsDayPartingTable7())))};p.prototype.$AdsDayPartingTable7=function(){if(!this.props.highlighted)return null;return c('React').createElement('div',{className:"_5sne"},c('React').createElement('div',{className:"_4axg _5sny"}),i._("Business opening hours"))};p.prototype.$AdsDayPartingTable8=function(q){var r=babelHelpers['extends']({},this.state,q);r.renderedGrid=this.$AdsDayPartingTable9(r);this.setState(r)};p.prototype.$AdsDayPartingTable1=function(){return this.state.renderedGrid||this.props.grid};p.prototype.$AdsDayPartingTable9=function(q){if(!q.isDragging)return this.props.grid;var r=new (c('DayPartingGrid'))(this.props.grid),s=q.dragStartDay,t=q.dragEndDay,u=c('nullthrows')(q.dragStartHour),v=c('nullthrows')(q.dragEndHour),w=q.dragMode;if(s!==null&&t===null)t=c('DayPartingUtils').DAYS_IN_WEEK-1;if(u!==null&&v===null)v=c('DayPartingUtils').HOURS_IN_DAY-1;if(s===null){r.setEveryDay(u,v,w)}else if(u===null){r.setAllDay(s,t,w)}else r.set(s,u,t,v,w);return r};p.propTypes=babelHelpers['extends']({grid:l.instanceOf(c('DayPartingGrid')).isRequired,hideAllDaysPicker:l.bool,highlighted:l.instanceOf(c('DayPartingGrid')),isReadOnly:l.bool,reducedWidth:l.bool,onGridChange:l.func.isRequired,width:l.number},c('XUIError.react').propTypes);p.defaultProps={hideAllDaysPicker:false,isReadOnly:false,xuiErrorPosition:'above',xuiErrorAlignh:'left'};f.exports=p}),null);
__d('AdsTargetingLanguageSelector.react',['fbt','AdsGraphAPI','AdsStaticSearchSource','AdsTargetingTokenizer.react','BoostedComponentClientEvent','immutable','React','SearchableEntry','areEqual'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=null,m=new (c('AdsStaticSearchSource'))([]),n=h._("Add languages...");i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={entries:[]},this.$AdsTargetingLanguageSelector3=function(u,v){this.props.onDataUpdate(c('BoostedComponentClientEvent').UPDATE_LANGUAGES,u.map(function(w){return parseInt(w.getUniqueID(),10)}))}.bind(this),this.$AdsTargetingLanguageSelector1=function(u){var v=c('immutable').Set(u||[]),w=[];l.forEach(function(x,y){if(v.contains(x.key))w.push(new (c('SearchableEntry'))({uniqueID:x.id,title:x.name}));});this.setState({entries:w,searchSource:this.state.searchSource||new (c('AdsStaticSearchSource'))(l)})}.bind(this),this.$AdsTargetingLanguageSelector2=function(u){l=u.data.map(function(v){return {id:v.key,name:v.name,key:v.key}});this.$AdsTargetingLanguageSelector1(this.props.selectedLanguages)}.bind(this),q}o.prototype.componentWillMount=function(){'use strict';if(l){this.$AdsTargetingLanguageSelector1(this.props.selectedLanguages);return}c('AdsGraphAPI').get(f.id).search('adlocale').get({limit:500}).done(this.$AdsTargetingLanguageSelector2)};o.prototype.componentWillReceiveProps=function(p){'use strict';if(l&&!c('areEqual')(p.selectedLanguages,this.props.selectedLanguages))this.$AdsTargetingLanguageSelector1(p.selectedLanguages);};o.prototype.render=function(){'use strict';var p=this.state.searchSource||m;return c('React').createElement(c('AdsTargetingTokenizer.react'),{disabled:this.props.disabled,entries:this.state.entries,placeholder:n,searchSource:p,smallInput:true,uri:'#',onDataUpdate:this.$AdsTargetingLanguageSelector3})};o.propTypes={disabled:k.bool,selectedLanguages:k.arrayOf(k.number),onDataUpdate:k.func.isRequired};f.exports=o}),null);
__d('asyncSleep',['regeneratorRuntime','Promise'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('regeneratorRuntime').async(function j(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return c('regeneratorRuntime').awrap(new (c('Promise'))(function(l){return setTimeout(l,i)}));case 2:case 'end':return k.stop();}},null,this)}f.exports=h}),null);
__d('EventPermalinkCameraFramesLogging',['EventsActionsLogger'],(function a(b,c,d,e,f,g){'use strict';f.exports={logClick:function h(i,j,k){c('EventsActionsLogger').log(this._eventID,{type:c('EventsActionsLogger').Type.CLICK,target:i,surface:c('EventsActionsLogger').Surface.PERMALINK,mechanism:c('EventsActionsLogger').Mechanism.PERMALINK,target_id:j,acontext:k},{})}}}),null);
__d('MediaEffectOwnerHubHeader.react',['fbt','Link.react','MediaEffectHubViewTab','React','XMediaEffectHubController','XUICardHeader.react','XUICardHeaderTitle.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.hubLinkTab,n=l.title,o=null;if(m){var p=c('XMediaEffectHubController').getURIBuilder().setEnum('tab',m).getURI(),q=m===c('MediaEffectHubViewTab').LEARN?h._("Learn More"):h._("Manage Effects");o=c('React').createElement(c('Link.react'),{href:p,target:'_blank'},q)}return c('React').createElement(c('XUICardHeader.react'),{link:o,type:'secondary'},c('React').createElement(c('XUICardHeaderTitle.react'),null,n))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectWebdriverIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HUB_EFFECT_TABLE:"hub_effect_table",HUB_EFFECT_TABLE_PREVIEW_COLUMN:"hub_effect_table_preview_column",LWE_FRAME_CREATION_DIALOG:"lwe_frame_creation_dialog",LWE_EFFECT_OWNER_POPOVER_BUTTON:"lwe_effect_owner_popover_button",LWE_EFFECT_APP_POPOVER_BUTTON:"lwe_effect_app_popover_button",LWE_EFFECT_FRAME_NAME_INPUT:"lwe_effect_frame_name_input",HUB_EFFECT_CREATE_BUTTON:"hub_effect_create_button",LWE_EFFECT_CONTINUE_BUTTON:"lwe_effect_continue_button",LWE_EFFECT_CONFIRMATION_DIALOG:"lwe_effect_confirmation_dialog",LWE_EFFECT_EDUCATION_CONTINUE_BUTTON:"lwe_effect_education_continue_button",LWE_EFFECT_SAVE_DRAFT_BUTTON:"lwe_effect_save_draft_button"})}),null);
__d('EventPermalinkCameraFramesCreate.react',['cx','fbt','ix','AsyncDialog','AsyncRequest','EventPermalinkCameraFramesLogging','EventsActionsLogger','EventsPermalinkTabBar','Image.react','MediaEffectCreateStep','MediaEffectCreationReferrer','MediaEffectFlowType','MediaEffectHubViewTab','MediaEffectOwnerHubHeader.react','MediaEffectWebdriverIDs','React','ShimButton.react','XMediaEffectCreateDialogController','XUICard.react','XUICardSection.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$EventPermalinkCameraFramesCreate1=function(){c('EventPermalinkCameraFramesLogging').logClick(c('EventsActionsLogger').Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var s=c('XMediaEffectCreateDialogController').getURIBuilder().setEnum('flow_type',c('MediaEffectFlowType').EVENT).setFBID('source_id',this.props.eventID).setEnum('step',c('MediaEffectCreateStep').CREATE).setString('action_context',JSON.stringify(this.props.actionContext)).setEnum('active_tab',c('EventsPermalinkTabBar').getCurrentTab()).setEnum('ref',c('MediaEffectCreationReferrer').EVENT_PAGE).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(s))}.bind(this),o}m.prototype.render=function(){return c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('MediaEffectOwnerHubHeader.react'),{title:this.props.title,hubLinkTab:c('MediaEffectHubViewTab').LEARN}),c('React').createElement(c('XUICardSection.react'),null,c('React').createElement(c('ShimButton.react'),{className:"_weu",'data-testid':c('MediaEffectWebdriverIDs').HUB_EFFECT_CREATE_BUTTON,onClick:this.$EventPermalinkCameraFramesCreate1},c('React').createElement(c('Image.react'),{src:j("293229")}),c('React').createElement('h1',{className:"_1x8l"},i._("Help people share at your event")),c('React').createElement('p',{className:"_wev"},i._("Create a custom camera frame for your event using handy templates. People can add it to the photos and videos they share with friends.")),c('React').createElement('p',{className:"_wew"},i._("Get Started")))))};f.exports=m}),null);
__d("FXEntMediaEffectStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTIVE:"active",ARCHIVED:"archived",COMPLETED:"completed",DISABLED:"disabled",DRAFT:"draft",INACTIVE:"inactive",IN_REVIEW:"in_review",NOT_APPROVED:"not_approved",SCHEDULED:"scheduled",NEEDS_ATTENTION:"needs_attention",DEPRECATED:"deprecated"})}),null);
__d('MediaEffectFunnelLoggingConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={CREATION_FUNNEL_LOGGING_NAME:'CREATIVE_STUDIO_CREATION_FUNNEL',FUNNEL_LOGGING_EVENT:{ADD_DYNAMIC_TEXT:'add_dynamic_text',ADD_TEXT:'add_text',ASSET_INPLACE_WARNING:'asset_inplace_warning',CANCEL:'cancel',CHANGE_CATEGORY:'change_category',CHANGE_EDITOR_BACKGROUND_COLOR:'change_editor_background_color',CHANGE_EDITOR_BACKGROUND_IMAGE:'change_editor_background_image',CHANGE_END_TIME:'change_end_time',CHANGE_LOCATION:'change_location',CHANGE_NAME:'change_name',CHANGE_OWNER:'change_owner',CHANGE_START_TIME:'change_start_time',CHANGE_TAG:'change_tag',CHANGE_TEXT_ALIGNMENT:'change_text_alignment',CHANGE_TEXT_COLOR:'change_text_color',CHANGE_TEXT_FONT:'change_text_font',CHANGE_TEXT_CONTENT:'change_text_content',DELETE_ASSET:'delete_asset',DUPLICATE_ASSET:'duplicate_asset',ENTER_CREATION_FLOW_FROM_INLINE_NUX:'enter_creation_flow_from_inline_nux',EXPLICIT_DROPOFF:'explicit_dropoff',GALLERY_VIEW:'gallery_view',GALLERY_MEDIA_CLICK:'gallery_media_click',PREVIEW_ON_CAMERA:'preview_on_camera',SAVE_AS_DRAFT:'save_as_draft',SET_SCALE_WITH_WIDTH:'set_scale_with_width',SET_SCALE_WITH_HEIGHT:'set_scale_with_height',SHOW_PREVIEW:'show_preview',SHOWN_INLINE_NUX:'shown_inline_nux',SUBMIT:'submit',UPDATE_STEP:'update_step',UPLOAD_FILE:'upload_file',UPLOAD_FINISHED:'upload_finished',DIALOG_LOADED:'dialog_loaded',BACKGROUND_AUTO_REMOVAL_PREVIEW:'background_auto_removal_preview',BACKGROUND_AUTO_REMOVAL_APPLIED:'background_auto_removal_applied',ASSET_AUTO_SNAPPING:'asset_auto_snapping'},FUNNEL_LOGGING_TIMEOUT:999999,FUNNEL_LOGGING_TAGS:{BROWSER_NAME:'browser_name',CREATION_FLOW_TYPE:'creation_flow_type',EFFECT_ID:'effect_id',FAILURE:'failure',FRAME_EDITOR_SHOWN:'frame_editor_shown',NEW_EFFECT:'new_effect',REF:'ref',SOURCE_ID:'source_id',SUCCESS:'success',DIALOG_TYPE:'dialog_type',IS_FIRST_TIME_SAVE_OR_SUBMIT:'is_first_time_save_or_submit'},FUNNEL_LOGGING_PAYLOAD:{ALIGNMENT:'alignment',ASSET_INPLACE_WARNING_TYPE:'asset_inplace_warning_type',COLOR:'color',IMAGE:'image',EFFECT_ID:'effect_id',FONT:'font',NEW_EFFECT:'new_effect',OWNER_FIRST_PARTY:'owner_first_party',OWNER_ID:'owner_id',OWNER_TYPE:'owner_type',RESULT:'result',SCALE_WITH_HEIGHT:'scale_with_height',SCALE_WITH_WIDTH:'scale_with_width',TEXT:'text',STEP:'step',ASSET_ID:'asset_id',ASSETS:'assets',ASSET_AUTO_SNAPPING_TYPE:'asset_auto_snapping_type'}}}),null);
__d("MediaEffectErrorCode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HAS_DISALLOWED_LOCATION:"has_disallowed_location"})}),null);
__d('MediaEffectError',['fbt','immutable','MediaEffectErrorCode'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Record,l=k({code:null,message:null,messageItems:[],params:[]});i=babelHelpers.inherits(m,l);j=i&&i.prototype;m.fromObject=function(p){return new m(babelHelpers['extends']({},p,{message:n(p.code,p.params),messageItems:o(p.code,p.params)}))};function m(){i.apply(this,arguments)}function n(p,q){switch(p){case c('MediaEffectErrorCode').HAS_DISALLOWED_LOCATION:if(!q||q.length===0)return null;if(q.length===1){return h._("The location you added is no longer available to use with frames. Select a different location or General for no location.")}else return h._("Some of the locations you added are no longer available to use with frames. Change these locations or select General for no location:");}return null}function o(p,q){switch(p){case c('MediaEffectErrorCode').HAS_DISALLOWED_LOCATION:if(!q)return null;if(q.length===1){return []}else return q;}return null}f.exports=m}),null);
__d('MediaEffectFrameEditorDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d('MediaEffectMetadataViewStore',['FluxReduceStore','immutable','MediaEffectError','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').List,m=c('immutable').Map,n=c('immutable').Record;h=babelHelpers.inherits(o,n({errors:l(),fbRankingStrategy:'DEFAULT',instructions:m(),instagramAttributionData:l(),ownersData:l(),potentialOwnersForAttribution:m(),templateCategories:m()}));i=h&&h.prototype;function o(){h.apply(this,arguments)}j=babelHelpers.inherits(p,c('FluxReduceStore'));k=j&&j.prototype;p.prototype.getInitialState=function(){return new o()};p.prototype.reduce=function(q,r){switch(r.type){case 'update/fbRankingStrategy':q=q.set('fbRankingStrategy',r.value);break;case 'init/effectMetadata':var s=r.data,t=s.activationJSData,u=s.instructionsData,v=s.instagramAttributionData,w=s.ownersData,x=s.errorsData,y=s.templateCategoryData,z=s.potentialOwnersForAttribution,aa=t.fbBoosted,ba=t.fbRankWeight,ca='DEFAULT';if(aa){ca='BOOST'}else if(ba)ca='MANUAL';var da=l((x||[]).map(function(ea){return c('MediaEffectError').fromObject(ea)}));q=q.withMutations(function(ea){ea.set('fbRankingStrategy',ca).set('instructions',m(u)).set('instagramAttributionData',l(v)).set('ownersData',l(w)).set('potentialOwnersForAttribution',m(z)).set('errors',da).set('templateCategories',m(y))});break;}return q};p.prototype.getMediaEffectOwnerFromID=function(q,r){if(!r)return null;var s=q.filter(function(t){return t.id===r});if(s.size===1)return s.first();return null};p.prototype.getOwner=function(q){return this.getMediaEffectOwnerFromID(this.getState().get('ownersData'),q)};p.prototype.getInstagramAttribution=function(q){return this.getMediaEffectOwnerFromID(this.getState().get('instagramAttributionData'),q)};p.prototype.isFirstParty=function(q){var r=this.getOwner(q);if(!r)return false;return r.isFirstParty};p.prototype.isFirstPartyProduct=function(q,r){if(!this.isFirstParty(q))return false;var s=this.getOwner(q);if(!s)return false;return s.product===r};function p(){j.apply(this,arguments)}f.exports=new p(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectEditorFunnelLogger',['invariant','FunnelLogger','MediaEffectFunnelLoggingConstants','MediaEffectMetadataStore','MediaEffectMetadataViewStore','MediaEffectReactFrameEditorImageAssetRecord','mergeDeep'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MediaEffectFunnelLoggingConstants').CREATION_FUNNEL_LOGGING_NAME,j=c('MediaEffectFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,k=c('MediaEffectFunnelLoggingConstants').FUNNEL_LOGGING_PAYLOAD,l=c('MediaEffectFunnelLoggingConstants').FUNNEL_LOGGING_TAGS,m={_funnelStarted:false,_bootstrapData:undefined,startFunnel:function n(){c('FunnelLogger').startFunnel(i);this._funnelStarted=true},startFunnelWithData:function n(o){this._bootstrapData=o;if(this._funnelStarted){this._appendAction(j.DIALOG_LOADED)}else this.startFunnel();},endFunnel:function n(){this._funnelStarted=false;c('FunnelLogger').endFunnel(i)},logAddDynamicText:function n(o){var p;this._appendAction(j.ADD_DYNAMIC_TEXT,(p={},p[k.TEXT]=o,p))},logAddText:function n(){this._appendAction(j.ADD_TEXT,{})},logCancel:function n(){this._appendAction(j.CANCEL)},logChangeCategory:function n(){this._appendActionIfNew(j.CHANGE_CATEGORY)},logChangeEditorBackgroundColor:function n(o){var p;this._appendAction(j.CHANGE_EDITOR_BACKGROUND_COLOR,(p={},p[k.COLOR]=o,p))},logChangeEditorBackgroundImage:function n(o){var p,q=o&&o.match(/.*?\/([^\/]*\.jpg)/);this._appendAction(j.CHANGE_EDITOR_BACKGROUND_IMAGE,(p={},p[k.IMAGE]=!o?'no image':q?q[1]:'no image name found',p))},logChangeEndTime:function n(){this._appendActionIfNew(j.CHANGE_END_TIME)},logChangeLocation:function n(){this._appendActionIfNew(j.CHANGE_LOCATION)},logChangeName:function n(){this._appendActionIfNew(j.CHANGE_NAME)},logPreviewAutoBackgroundRemoval:function n(o){var p;this._appendAction(j.BACKGROUND_AUTO_REMOVAL_PREVIEW,(p={},p[k.ASSET_ID]=o,p))},logApplyAutoBackgroundRemoval:function n(o){var p;this._appendAction(j.BACKGROUND_AUTO_REMOVAL_APPLIED,(p={},p[k.ASSET_ID]=o,p))},logAutoSnapping:function n(o){var p;this._appendAction(j.ASSET_AUTO_SNAPPING,(p={},p[k.ASSET_AUTO_SNAPPING_TYPE]=o,p))},logChangeOwner:function n(){this._appendActionIfNew(j.CHANGE_OWNER)},logChangeStartTime:function n(){this._appendActionIfNew(j.CHANGE_START_TIME)},logChangeTag:function n(){this._appendActionIfNew(j.CHANGE_TAG)},logChangeTextAlignment:function n(o){var p;this._appendAction(j.CHANGE_TEXT_ALIGNMENT,(p={},p[k.ALIGNMENT]=o,p))},logChangeTextColor:function n(o){var p;this._appendAction(j.CHANGE_TEXT_COLOR,(p={},p[k.COLOR]=o,p))},logChangeTextFont:function n(o){var p;this._appendAction(j.CHANGE_TEXT_FONT,(p={},p[k.FONT]=o,p))},logChangeTextContent:function n(o){var p;this._appendAction(j.CHANGE_TEXT_CONTENT,(p={},p[k.TEXT]=o,p))},logDeleteAsset:function n(){this._appendAction(j.DELETE_ASSET)},logDuplicateAsset:function n(){this._appendAction(j.DUPLICATE_ASSET)},logStep:function n(o){var p;this._appendAction(j.UPDATE_STEP,(p={},p[k.STEP]=o,p))},logExplicitDropoff:function n(o){var p;this._appendAction(j.EXPLICIT_DROPOFF,(p={},p[k.STEP]=o,p))},logSaveAsDraft:function n(o,p,q){var r,s=o?l.SUCCESS:l.FAILURE,t=q?q.assets.toArray().map(function(u){var v=u instanceof c('MediaEffectReactFrameEditorImageAssetRecord');return {asset_type:v?'image':'text',is_processed:v?u.processApplied:false,asset_id:v?u.stickerFBID:null,snappedType:v?u.autoSnappedType:null}}):[];this._appendAction(j.SAVE_AS_DRAFT,(r={},r[k.RESULT]=s,r[k.EFFECT_ID]=p,r[k.ASSETS]=t,r))},logPreviewOnCamera:function n(){this._appendAction(j.PREVIEW_ON_CAMERA)},logSetScaleWithHeight:function n(o){var p;this._appendAction(j.SET_SCALE_WITH_HEIGHT,(p={},p[k.SCALE_WITH_HEIGHT]=o,p))},logSetScaleWithWidth:function n(o){var p;this._appendAction(j.SET_SCALE_WITH_WIDTH,(p={},p[k.SCALE_WITH_WIDTH]=o,p))},logSubmit:function n(o,p,q){var r,s=o?l.SUCCESS:l.FAILURE,t=q?q.assets.toArray().map(function(u){var v=u instanceof c('MediaEffectReactFrameEditorImageAssetRecord');return {asset_type:v?'image':'text',is_processed:v?u.processApplied:false,asset_id:v?u.stickerFBID:null,snappedType:v?u.autoSnappedType:null}}):[];this._appendAction(j.SUBMIT,(r={},r[k.RESULT]=s,r[k.EFFECT_ID]=p,r[k.ASSETS]=t,r))},logUploadFile:function n(){this._appendAction(j.UPLOAD_FILE)},logUploadFinished:function n(o){var p,q=o?l.SUCCESS:l.FAILURE;this._appendAction(j.UPLOAD_FINISHED,(p={},p[k.RESULT]=q,p))},logShownInlineNUX:function n(){this._appendAction(j.SHOWN_INLINE_NUX)},logEnterCreationFlowFromInlineNUX:function n(){this._appendAction(j.ENTER_CREATION_FLOW_FROM_INLINE_NUX)},logAssetInPlaceWarning:function n(o){var p;this._appendAction(j.ASSET_INPLACE_WARNING,(p={},p[k.ASSET_INPLACE_WARNING_TYPE]=o,p))},logGalleryView:function n(){this._appendAction(j.GALLERY_VIEW)},logGalleryMediaClick:function n(){this._appendAction(j.GALLERY_MEDIA_CLICK)},_appendActionIfNew:function n(o,p){if(!this._funnelStarted)return;p=c('mergeDeep')(p,this._getStandardPayload());c('FunnelLogger').appendActionWithPayloadIfNew(i,o,p)},_appendAction:function n(o,p){if(!this._funnelStarted)return;p=c('mergeDeep')(p,this._getStandardPayload());c('FunnelLogger').appendActionWithPayload(i,o,p)},_getStandardPayload:function n(){var o,p=c('MediaEffectMetadataStore').getState(),q=this._bootstrapData&&this._bootstrapData.metadataJSData?this._bootstrapData.metadataJSData.id:undefined,r=p.selectedOwnerID,s=(o={},o[k.NEW_EFFECT]=!q,o);if(q){var t;s=babelHelpers['extends']({},s,(t={},t[k.EFFECT_ID]=q,t))}if(r){var u,v=c('MediaEffectMetadataViewStore').getOwner(r);v||h(0);s=babelHelpers['extends']({},s,(u={},u[k.OWNER_FIRST_PARTY]=v.isFirstParty,u[k.OWNER_ID]=r,u[k.OWNER_TYPE]=v.type,u))}return s}};f.exports=m}),null);
__d('mediaEffectGKCheck',['MediaEffectGKConfig','invariant'],(function a(b,c,d,e,f,g){'use strict';var h=c('MediaEffectGKConfig').gk_results;function i(j){return !!h[j]}f.exports=i}),null);
__d('MediaEffectFrameCreationStepsConfig',['fbt','invariant','immutable','MediaEffectEditingStep.react','MediaEffectFlowType','MediaEffectFrameCreationReviewContainer.react','MediaEffectMaskFileUploadStep.react','MediaEffectTargetingStep.react','MediaEffectTemplateColorStepContainer.react','MediaEffectTemplateNewColorStepContainer.react','MediaEffectTemplateVariationStepContainer.react','keyMirror','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('keyMirror')({NONE:'',COLORS:'',EDITING:'',MASK_UPLOAD:'',NEW_COLORS:'',TARGETING:'',REVIEW:'',VARIATIONS:''}),m=(j={},j[c('MediaEffectFlowType').BASIC_HUB]=[l.EDITING,l.TARGETING,l.REVIEW],j[c('MediaEffectFlowType').INTERNAL_TOOL]=[l.TARGETING],j[c('MediaEffectFlowType').MASK]=[l.MASK_UPLOAD,l.TARGETING,l.REVIEW],j[c('MediaEffectFlowType').TEMPLATE]=c('mediaEffectGKCheck')('media_effect_frame_editor_template_variations')?[l.EDITING,l.COLORS,l.NEW_COLORS,l.VARIATIONS,l.TARGETING,l.REVIEW]:[l.EDITING,l.TARGETING,l.REVIEW],j[c('MediaEffectFlowType').EVENT]=[l.EDITING,l.REVIEW],j[c('MediaEffectFlowType').BIRTHDAY]=[l.EDITING,l.REVIEW],j[c('MediaEffectFlowType').LIVE_TEMPLATE]=[l.EDITING],j[c('MediaEffectFlowType').INSTAGRAM_STICKER]=[l.EDITING,l.TARGETING,l.REVIEW],j),n=(k={},k[l.EDITING]={component:c('MediaEffectEditingStep.react'),label:h._("Design")},k[l.COLORS]={component:c('MediaEffectTemplateColorStepContainer.react'),label:h._("Source Palette")},k[l.NEW_COLORS]={component:c('MediaEffectTemplateNewColorStepContainer.react'),label:h._("Destination Palette")},k[l.VARIATIONS]={component:c('MediaEffectTemplateVariationStepContainer.react'),label:h._("Variations")},k[l.MASK_UPLOAD]={component:c('MediaEffectMaskFileUploadStep.react'),label:h._("Upload")},k[l.TARGETING]={component:c('MediaEffectTargetingStep.react'),label:h._("Details")},k[l.REVIEW]={component:c('MediaEffectFrameCreationReviewContainer.react'),label:h._("Review")},k);function o(r,s){var t=q(r).indexOf(s);t>=0||i(0);return t}function p(r,s){if(s>=0)return q(r).get(s);return l.NONE}function q(r){return c('immutable').List(m[r])}f.exports={ComponentConfigs:n,CreationSteps:l,getStepIndex:o,getSteps:q,StepsConfigs:m,getStep:p}}),null);
__d('MediaEffectSquircleImage.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){var k=this.props,l=k.className,m=k.height,n=k.src,o=k.width,p=k.isTransparent;return c('React').createElement('div',null,c('React').createElement('svg',{baseProfile:'full',className:l,height:m,version:'1.2',width:o},c('React').createElement('defs',null,c('React').createElement('mask',{id:'masking_squircle',maskContentUnits:'userSpaceOnUse',maskUnits:'userSpaceOnUse',transform:'scale(1)'},c('React').createElement('image',{height:m,width:o,xlinkHref:'/images/media_effect/icon/squircle.png'}))),!p?c('React').createElement('rect',{fill:'#7f7f7f',height:m,mask:'url(#masking_squircle)',width:o}):null,c('React').createElement('image',{height:m,mask:'url(#masking_squircle)',width:o,xlinkHref:n})))};function j(){h.apply(this,arguments)}j.defaultProps={isTransparent:true};f.exports=j}),null);
__d('MediaEffectReviewMaskPreviewSection.react',['cx','Image.react','MediaEffectSquircleImage.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.getSquircleIcon=function(){var l=this.props.thumbnailImageSrc;if(!l)return null;return c('React').createElement(c('MediaEffectSquircleImage.react'),{className:"_4bmc _3-92",height:72,src:l,width:72})};k.prototype.getOwnerBlock=function(){var l=this.props.owner;if(!l)return null;return c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_4bmc _3-90",src:l.src}),l.name)};k.prototype.render=function(){return c('React').createElement('div',{className:"_4bmd"},c('React').createElement('div',null,this.getSquircleIcon(),c('React').createElement('div',{className:"_4bme"},c('React').createElement('span',{className:"_4bmf"},this.props.frameName),this.getOwnerBlock())))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("FXMediaEffectType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FRAME:"frame",GENERIC:"generic",MSQRD_MASK:"msqrd_mask",PARTICLE_EFFECT:"particle_effect",PROFILE_FRAME:"profile_frame",SHADER_FILTER:"shader_filter",STYLE_TRANSFER:"style_transfer",UNDERLAY:"underlay",WATERMARK:"watermark",PROFILE_OVERLAY_MASK_DEPRECATED:"profile_overlay_mask_DEPRECATED",TEST_MEDIA_EFFECT:"test_media_effect",FLT_TEST_MEDIA_EFFECT:"flt_test_media_effect"})}),null);
__d('MediaEffectHubStrings',['fbt','invariant','FXEntMediaEffectStatus','FXMediaEffectType'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={active:function k(){return h._("Active")},archived:function k(){return h._("Archived")},completed:function k(){return h._("Completed")},inactive:function k(){return h._("Inactive")},draft:function k(){return h._("Draft")},inReview:function k(){return h._("In Review")},notApproved:function k(){return h._("Not Approved")},deprecated:function k(){return h._("Deprecated")},scheduled:function k(){return h._("Scheduled")},ongoing:function k(){return h._("Ongoing")},frame:function k(){return h._("Frame")},genericEffect:function k(){return h._("Generic Effect")},mask:function k(){return h._("Mask")},particleEffect:function k(){return h._("Reactive Effect")},profileFrame:function k(){return h._("Profile Frame")},shaderFilter:function k(){return h._("Filter")},styleTransfer:function k(){return h._("Style Effect")},underlay:function k(){return h._("Underlay")},getNeedsAttention:function k(){return h._("Needs Attention")},getTextForStatus:function k(l){switch(l){case c('FXEntMediaEffectStatus').ACTIVE:return j.active();case c('FXEntMediaEffectStatus').ARCHIVED:return j.archived();case c('FXEntMediaEffectStatus').COMPLETED:return j.completed();case c('FXEntMediaEffectStatus').DRAFT:return j.draft();case c('FXEntMediaEffectStatus').INACTIVE:return j.inactive();case c('FXEntMediaEffectStatus').IN_REVIEW:return j.inReview();case c('FXEntMediaEffectStatus').SCHEDULED:return j.scheduled();case c('FXEntMediaEffectStatus').NOT_APPROVED:return j.notApproved();case c('FXEntMediaEffectStatus').DEPRECATED:return j.deprecated();case c('FXEntMediaEffectStatus').NEEDS_ATTENTION:return j.getNeedsAttention();}i(0)},getTextForEffectType:function k(l){switch(l){case c('FXMediaEffectType').FRAME:return j.frame();case c('FXMediaEffectType').GENERIC:return j.genericEffect();case c('FXMediaEffectType').MSQRD_MASK:return j.mask();case c('FXMediaEffectType').PARTICLE_EFFECT:return j.particleEffect();case c('FXMediaEffectType').PROFILE_FRAME:return j.profileFrame();case c('FXMediaEffectType').SHADER_FILTER:return j.shaderFilter();case c('FXMediaEffectType').STYLE_TRANSFER:return j.styleTransfer();case c('FXMediaEffectType').UNDERLAY:return j.underlay();}i(0)}};f.exports=j}),null);
__d('MediaEffectLocationStrings',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={geoLocation:function j(k,l){return h._("{open brace}{latitude}, {longitude}{close brace}",[h.param('open brace','('),h.param('latitude',k),h.param('longitude',l),h.param('close brace',')')])}};f.exports=i}),null);
__d('MediaEffectPlaceDescriptionRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({constrain_eligibility:false,name:null,key:null,latitude:null,longitude:null,manual_geo:false,polygons:null,radius:null}));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectLocationTargetingMap.react',['cx','fbt','AdsTargetingLocationInlineMap.react','AdsTargetingLocationMapRecord','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','GeoCoordinates','immutable','LocationConstants','MediaEffectLocationStrings','MediaEffectPlaceDescriptionRecord','React','Tooltip','XUIButton.react','XUIText.react','emptyFunction','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$MediaEffectLocationTargetingMap2=function(){var r,s=this.props.onManualLocationToggled||c('emptyFunction');s(!((r=this.props.location)!=null?r.manual_geo:r))}.bind(this),n}l.prototype.$MediaEffectLocationTargetingMap1=function(m){if(!m||!m.latitude||!m.longitude)return null;var n=m.name||c('MediaEffectLocationStrings').geoLocation(m.latitude,m.longitude).toString();if(m.polygons&&m.polygons.length&&!m.manual_geo)return {latitude:m.latitude,longitude:m.longitude,name:n,polygons:m.polygons};if(m.radius)return {distance_unit:c('LocationConstants').KILOMETER_UNIT,latitude:m.latitude,longitude:m.longitude,name:n,radius:m.radius};return null};l.prototype.render=function(){var m,n,o=this.$MediaEffectLocationTargetingMap1(this.props.location),p=c('immutable').Set().asMutable();if(o){var q=c('AdsTargetingLocationMapRecord').fromGeoLocation(o).set('popup',c('React').createElement(c('XUIText.react'),null,o.name));p.add(q)}var r=p.asImmutable(),s=!((m=this.props.location)!=null?m.manual_geo:m)?{text:i._("Custom"),tooltip:i._("Customize the area where your effect can be discovered.")}:{text:i._("Default"),tooltip:i._("Switch to the default area where your effect can be discovered.")};return c('React').createElement(c('FBOverlayContainer.react'),null,c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement('div',{className:this.props.className},c('React').createElement(c('AdsTargetingLocationInlineMap.react'),{addLocationMode:c('LocationConstants').INCLUDE,disableCollapseButton:true,enableDropPin:!this.props.disabled&&!this.props.isLoading,excludedLocations:c('immutable').Set(),fitLocations:r,highlightLocations:c('immutable').Set(),locations:r,onAddLocationFromMap:this.props.onLocationSelected||c('emptyFunction'),onCollapseMap:c('emptyFunction'),onPopupMenuItemSelect:c('emptyFunction'),onlyInclusion:true}))),((n=this.props.location)!=null?n.polygons:n)&&!this.props.disabled?c('React').createElement(c('FBOverlayElement.react'),{horizontal:'left',vertical:'top'},c('React').createElement(c('XUIButton.react'),babelHelpers['extends']({className:"_mvk",label:s.text,onClick:this.$MediaEffectLocationTargetingMap2,type:'button'},c('Tooltip').propsFor(s.tooltip)))):null)};f.exports=l}),null);
__d('MediaEffectReviewMetadataSection.react',['cx','fbt','AdsTargetingAggregatedMap.react','AdsTargetingLocationMapRecord','FBCollapsibleList.react','LocationConstants','MediaEffectFlowType','MediaEffectHubStrings','MediaEffectLocationTargetingMap.react','React','SUIMediaEffectTheme','SUIText.react','SUIThemeContainer.react','XUIText.react','formatDate','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('FBCollapsibleList.react').Delimiters,k=200;function l(n){var o=c('joinClasses')(n.className,"_1d1k");return c('React').createElement('div',{className:o},c('React').createElement('div',{className:"_1d1h"},c('React').createElement(c('XUIText.react'),{weight:'bold'},n.title)),n.children)}var m=function n(o){var p,q=i._("None"),r=o.startTime,s=o.endTime,t=null;if(!r){t=c('MediaEffectHubStrings').ongoing()}else t=i._("{start date} \u2014 {end date}",[i.param('start date',c('formatDate')(r,'M j, Y')),i.param('end date',!s?c('MediaEffectHubStrings').ongoing():c('formatDate')(s,'M j, Y'))]);var u=c('React').createElement(l,{title:i._("Location")},o.location?c('React').createElement(c('MediaEffectLocationTargetingMap.react'),{className:"_10ev",disabled:true,location:o.location}):o.placeDescription?c('React').createElement(c('AdsTargetingAggregatedMap.react'),{height:k,locationRecords:c('AdsTargetingLocationMapRecord').fromGeoLocations((p={},p[c('LocationConstants').CUSTOM_LOCATIONS]=[o.placeDescription],p))}):c('React').createElement(c('XUIText.react'),null,i._("Any location")));if(o.flowType===c('MediaEffectFlowType').MASK&&!o.canThirdPartyMaskLocation)u=null;var v=null;if(o.flowType===c('MediaEffectFlowType').MASK){var w=o.arfxFiles.map(function(y,z){return c('React').createElement('div',{key:z+1},c('React').createElement(c('SUIText.react'),{display:'truncate'},y.name))}),x=o.fbfxprojFile;if(x)w.unshift(c('React').createElement('div',{key:0},c('React').createElement(c('SUIText.react'),{display:'truncate'},x.name)));v=c('React').createElement(c('SUIThemeContainer.react'),{theme:c('SUIMediaEffectTheme')},c('React').createElement(l,{className:"_hyk",title:i._("Files Uploaded")},w))}return c('React').createElement('div',{className:"_1d1l"},c('React').createElement('div',{className:"_1d1m"},c('React').createElement(l,{title:i._("Schedule")},c('React').createElement(c('XUIText.react'),{display:'block'},t||q)),u,v,c('React').createElement(l,{title:i._("Keywords")},c('React').createElement(c('FBCollapsibleList.react'),{delimiter:j.COMMA,display:'inline',numVisible:3,showLessLink:true},o.tags.length>0?o.tags.map(function(y,z){return c('React').createElement(c('XUIText.react'),{key:z},y.title)}):[c('React').createElement(c('XUIText.react'),{key:'none'},q)]))))};f.exports=m}),null);
__d('MediaEffectReviewStepConfig',['MediaEffectFlowType','MediaEffectReviewMaskPreviewSection.react','MediaEffectReviewMetadataSection.react','MediaEffectReviewPreviewSection.react'],(function a(b,c,d,e,f,g){'use strict';var h,i=(h={},h[c('MediaEffectFlowType').BASIC_HUB]=[c('MediaEffectReviewPreviewSection.react'),c('MediaEffectReviewMetadataSection.react')],h[c('MediaEffectFlowType').TEMPLATE]=[c('MediaEffectReviewPreviewSection.react'),c('MediaEffectReviewMetadataSection.react')],h[c('MediaEffectFlowType').EVENT]=[c('MediaEffectReviewPreviewSection.react')],h[c('MediaEffectFlowType').BIRTHDAY]=[c('MediaEffectReviewPreviewSection.react')],h[c('MediaEffectFlowType').MASK]=[c('MediaEffectReviewMaskPreviewSection.react'),c('MediaEffectReviewMetadataSection.react')],h[c('MediaEffectFlowType').INSTAGRAM_STICKER]=[c('MediaEffectReviewPreviewSection.react'),c('MediaEffectReviewMetadataSection.react')],h);f.exports=i}),null);
__d("FXEntMediaEffectSubmissionStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING:0,APPROVED:1,DENIED:2,DRAFT:3,ARCHIVED:4,DISABLED:5,TAKEN_DOWN:6})}),null);
__d('MediaEffectQE',['immutable','QE2Logger'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('immutable').Record({inExperiment:false,params:{},universe:''}));i=h&&h.prototype;j.prototype.getParam=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1];if(!this.inExperiment)return null;if(l)c('QE2Logger').logExposureForUser(this.universe);return this.params[k]};j.prototype.getParamBool=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1],m=this.getParam(k,l);return m==='0'?false:!!m};j.prototype.getParamInt=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1],m=this.getParam(k,l),n=parseInt(m,10);return isNaN(n)?null:n};j.prototype.getParamString=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1],m=this.getParam(k,l);return typeof m==='string'?m:null};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectQEUtils',['MediaEffectFlowType','MediaEffectQE','MediaEffectUserContext'],(function a(b,c,d,e,f,g){'use strict';var h=[c('MediaEffectFlowType').INSTAGRAM_STICKER,c('MediaEffectFlowType').LIVE_TEMPLATE],i={shouldHideLandscapePreview:function j(){var k=arguments.length<=0||arguments[0]===undefined?true:arguments[0],l=new (c('MediaEffectQE'))(c('MediaEffectUserContext').landscapePreviewQE);return l.getParamBool('hide_landscape_preview',k)},shouldShowHeaderSelector:function j(){var k=new (c('MediaEffectQE'))(c('MediaEffectUserContext').ownerSelectorQE);return k.getParamBool('show_selector')},shouldSnap:function j(){var k=new (c('MediaEffectQE'))(c('MediaEffectUserContext').snappingQE);return k.getParamBool('should_snap')},shouldUseNewUploader:function j(){var k=new (c('MediaEffectQE'))(c('MediaEffectUserContext').uploaderQE);return k.getParamBool('in_test')},shouldDefaultToPortrait:function j(k){if(this._shouldExclude(k))return false;var l=new (c('MediaEffectQE'))(c('MediaEffectUserContext').portraitCanvasQE);return l.getParamBool('show_portrait')},_shouldExclude:function j(k){return h.includes(k)}};f.exports=i}),null);
__d('MediaEffectEditingStep.react',['cx','FXEntMediaEffectSubmissionStatus','MediaEffectFlowType','MediaEffectFullscreenFrameEditorContainer.react','MediaEffectQEUtils','MediaEffectReactFrameEditorCanvasContainer.react','MediaEffectReactFrameEditorPreviewContainer.react','MediaEffectValidationDialogContainer.react','React','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.$MediaEffectEditingStep1=function(){return this.props.bootstrapData.metadataJSData.id};k.prototype.$MediaEffectEditingStep2=function(){return !this.$MediaEffectEditingStep1()};k.prototype.$MediaEffectEditingStep3=function(){return this.$MediaEffectEditingStep2()||!!this.props.frameEditorBootstrapData.frameData};k.prototype.$MediaEffectEditingStep4=function(){var l=this.props.bootstrapData.metadataJSData.submissionStatus;return l===c('FXEntMediaEffectSubmissionStatus').DRAFT||l===c('FXEntMediaEffectSubmissionStatus').DENIED||this.props.flowType===c('MediaEffectFlowType').LIVE_TEMPLATE};k.prototype.render=function(){var l=this.props,m=l.context,n=l.frameEditorBootstrapData,o=null,p=null;if(this.$MediaEffectEditingStep3()){o=this.$MediaEffectEditingStep4()?c('React').createElement(c('MediaEffectFullscreenFrameEditorContainer.react'),{context:{enableEditorCamera:m.enableEditorCamera,enableFontSettingsDialog:m.enableFontSettingsDialog,enableEditorFreeText:m.enableEditorFreeText},filtersData:n.filtersData,flowType:this.props.flowType,frameData:n.frameData}):c('React').createElement('div',{className:"_14bw _4a4u"},c('React').createElement(c('MediaEffectReactFrameEditorCanvasContainer.react'),{bootstrapData:n.frameData,includesPhoneFrame:c('MediaEffectQEUtils').shouldDefaultToPortrait(this.props.flowType),readOnly:true}));p=this.$MediaEffectEditingStep4()?null:c('React').createElement('div',{className:"_2odg"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(400,225)}),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(225,400)})))}return c('React').createElement('div',{className:"_3iei"},c('React').createElement(c('MediaEffectValidationDialogContainer.react'),null),o,p)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectEventDataDispatcher',['GraphAPI','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={loadEventData:function i(j){c('GraphAPI')('2.5').object('eventID',j).get({fields:'name, place{name, location{city}}, start_time, end_time'}).then(function(k){c('MediaEffectFrameEditorDispatcher').dispatch({type:'event/getSuccess',event:k})}).done()}};f.exports=h}),null);
__d('MediaEffectEventDataStore',['FluxLoadObjectStore','MediaEffectEventDataDispatcher','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxLoadObjectStore'));i=h&&h.prototype;j.prototype.reduce=function(k,l){switch(l.type){case 'event/getSuccess':return this.__handleOne(k,l.event.id,babelHelpers['extends']({},l.event));default:return k;}};j.prototype.__load=function(k){c('MediaEffectEventDataDispatcher').loadEventData(k)};function j(){h.apply(this,arguments)}f.exports=new j(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectEventOwnerTile.react',['ix','cx','fbt','Image.react','ProfileTile.react','React','XUIText.react','fbglyph','formatDate','parseISODate'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;m.prototype.$MediaEffectEventOwnerTile1=function(n,o){var p='';if(n)p+=c('formatDate')(c('parseISODate')(n),'D M j');if(o)p+=' - '+c('formatDate')(c('parseISODate')(o),'D M j');return p};m.prototype.$MediaEffectEventOwnerTile2=function(n){var o='';if(n){o+=n.name;if(n.location)o+=', '+n.location.city;}return o};m.prototype.render=function(){var n=this.props.event,o=n.start_time,p=n.end_time,q=n.place,r=n.name,s=n.id,t=this.$MediaEffectEventOwnerTile1(o,p),u=this.$MediaEffectEventOwnerTile2(q),v=c('React').createElement(c('Image.react'),{src:h("117711")});if(this.props.style==='byline')return c('React').createElement('div',{className:"_5zsm"},c('React').createElement('div',{className:"_3rd0"},v),c('React').createElement('div',{className:"_5zsn"},c('React').createElement(c('XUIText.react'),{weight:'bold'},j._("Event:")),c('React').createElement(c('XUIText.react'),{className:"_3-99"},j._("{date range}",[j.param('date range',t)]),t!==''&&u!==''?', ':null,j._("{location}",[j.param('location',u)]))));return c('React').createElement(c('ProfileTile.react'),{desc:c('React').createElement(c('XUIText.react'),{size:'small'},j._("{date range}",[j.param('date range',t)]),t!==''&&u!==''?', ':null,j._("{location}",[j.param('location',u)])),id:s,imageProps:{src:h("114508"),className:"_3ykz"},name:r,tileProps:{className:"_3yk-",target:'_blank'},titleProps:{className:"_3yk_"}})};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d('MediaEffectEventOwnerBylineTileContainer.react',['FluxContainer','LoadingIndicator.react','MediaEffectEventDataStore','MediaEffectEventOwnerTile.react','MediaEffectFrameEditorDispatcher','MediaEffectMetadataStore','React','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectEventDataStore'),c('MediaEffectMetadataStore')]};j.calculateState=function(){var k=c('MediaEffectMetadataStore').getState().selectedOwnerID;if(k)return {event:c('MediaEffectEventDataStore').get(k)};return {}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(j.getStores())};j.prototype.render=function(){var event=this.state.event;return event&&event.hasValue()?c('React').createElement(c('MediaEffectEventOwnerTile.react'),{event:c('nullthrows')(this.state.event).getValueEnforcing(),style:'byline'}):c('React').createElement(c('LoadingIndicator.react'),{color:'white',size:'medium'})};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j)}),null);
__d('MediaEffectFrameCreateDialogDataStore',['FluxReduceStore','immutable','MediaEffectFlowType','MediaEffectFrameCreationStepsConfig','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Record,m=c('MediaEffectFrameCreationStepsConfig').CreationSteps;h=babelHelpers.inherits(n,l({currentStep:0,creationReferrer:null,dialogHeight:0,screenWidth:0,validatingStep:-1,flowType:null,shownInlineNUX:false,sourceID:null,eventDialogContext:{}}));i=h&&h.prototype;function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,c('FluxReduceStore'));k=j&&j.prototype;o.prototype.getInitialState=function(){return new n()};o.prototype.reduce=function(p,q){switch(q.type){case 'init/effectData':p=p.set('validatingStep',-1);break;case 'change/step':p=p.set('currentStep',q.step);break;case 'form/validate':p=p.set('validatingStep',q.step);break;case 'init/dialog':p=new n({creationReferrer:q.creationReferrer,flowType:q.flowType,sourceID:q.sourceID});break;case 'init/eventDialog':p=p.set('eventDialogContext',q.dialogContext);break;case 'set/screenDimensions':p=p.set('screenWidth',q.screenWidth).set('dialogHeight',q.dialogHeight);break;case 'inlineNUX/enterCreationFlow':p=p.set('shownInlineNUX',true);break;}return p};o.prototype.isTemplateFlow=function(){return this.getState().flowType===c('MediaEffectFlowType').TEMPLATE};o.prototype.getCreationFlowType=function(){return this.getState().flowType};o.prototype.isValidating=function(){var p=this.getState(),q=c('MediaEffectFrameCreationStepsConfig').getStep(p.flowType,p.validatingStep);return q!==m.NONE};function o(){j.apply(this,arguments)}f.exports=new o(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectFrameCreationReview.react',['cx','fbt','Link.react','MediaEffectReviewStepConfig','React','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=c('React').createElement('div',{className:"_2pio _3s-b"},c('React').createElement(c('XUIText.react'),{weight:'normal'},i._("By clicking \"Submit\" you agree to the Camera Effects Platform {terms} and {policies} Effects are public for anyone to use.",[i.param('terms',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_terms',target:'_blank'},i._("terms"))),i.param('policies',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_policies',target:'_blank'},i._("policies.")))])));return c('React').createElement('div',{className:"_1d1n"},c('MediaEffectReviewStepConfig')[this.props.flowType].map(function(n,o){return c('React').createElement(n,babelHelpers['extends']({},this.props,{key:o}))}.bind(this)),m)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectFrameEditorConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={EDITOR_BUFFER_SIZE:35,PORTRAIT_CANVAS_RATIO:9/16,PHONE_SCREEN_TO_FRAME_WIDTH_RATIO:1094/1216,PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO:1956/2458};f.exports=h}),null);
__d('MediaEffectFullscreenFrameEditorSizingUtils',['MediaEffectFrameEditorConstants'],(function a(b,c,d,e,f,g){'use strict';var h=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE,i=212,j=12,k=60,l=60,m=12,n=40,o=200,p=4,q=40,r=70,s=12,t=50,u={getDialogWidth:function v(w,x){return Math.max(m+i+h+j+this.getCanvasSize(w,x)+j+h+p+this.getPortraitPreviewHeight(w,x)+p+m)},getCanvasSize:function v(w,x){return Math.max(0,Math.min(w-(n+i+h+j+j+h+o+n)-1,x-(2*h+q+k+l)-1))},getPortraitPreviewHeight:function v(w,x){return Math.max(o,Math.min(w-(n+i+h+j+this.getCanvasSize(w,x)+j+h+n),this.getCanvasSize(w,x)/3))},getPortraitFullPreviewHeight:function v(w,x){return Math.max(0,Math.min(x-96,3*this.getPortraitPreviewHeight(w,x)))},getSquareReviewPreviewWidth:function v(w,x){var y=1+1.1325+1.2849*16/9+.25,z=120,aa=(w-z)/y,ba=x-(s+r+t+q+k+l);return Math.min(9*(ba*.7694174757281553)/16,aa)}};f.exports=u}),null);
__d('MediaEffectARStudioEffectArfxFileTypes',[],(function a(b,c,d,e,f,g){'use strict';var h=['@uncompressed.arfx','@pvr.arfx','@etc.arfx'];f.exports=h}),null);
__d('MediaEffectCard.react',['cx','React','Tooltip.react','XUICard.react','XUICardHeader.react','XUICardHeaderTitle.react','XUICardSection.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l="_-jo",m=this.props.tooltip?c('React').createElement(c('Tooltip.react'),{className:"_3-99",tooltip:this.props.tooltip},c('React').createElement('span',{className:"_3o-c"})):null;return c('React').createElement(c('XUICard.react'),{className:c('joinClasses')(l,this.props.className),style:{border:'none'}},c('React').createElement(c('XUICardHeader.react'),{className:"_-jp",type:'primary'},c('React').createElement(c('XUICardHeaderTitle.react'),null,this.props.title,m)),c('React').createElement(c('XUICardSection.react'),{background:'transparent',className:"_-jq _190n",style:{borderTop:'none'}},this.props.children))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectMaskDescriptionInput.react',['fbt','MediaEffectCard.react','MediaEffectFrameEditorDispatcher','React','SUITextArea.react','XUIError.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.validateDescription=function(l){if(!l||l.length<=0)return h._("Please provide a description of your effect to continue");return null};k.prototype.getErrorMessage=function(){var l=this.props,m=l.description,n=l.isValidating;if(!n)return null;return this.constructor.validateDescription(m)};k.prototype.updateDescriptionText=function(l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'effectDescription/change',payload:{text:l}})};k.prototype.render=function(){var l=this.props.description;return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Effect Description")},c('React').createElement(c('XUIText.react'),{color:'gray',display:'block'},h._("Describe what your effect does and all the ways people can interact with it.")),c('React').createElement(c('XUIError.react'),{xuiError:this.getErrorMessage()},c('React').createElement(c('SUITextArea.react'),{maxLength:2000,onChange:this.updateDescriptionText,placeholder:h._("Example: Open your mouth to shoot a fireball. (Max 2000 characters)"),rows:4,value:l})))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('ProfileInfoAddImage.react',['ix','cx','xuiglyph','Image.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){'use strict';return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_u08"+(this.props.size==='medium'?' '+"_518l":''))},c('React').createElement(c('Image.react'),{className:"_u09",src:h("89665")}))};function n(){'use strict';k.apply(this,arguments)}n.propTypes={size:m.oneOf(['medium','large'])};n.defaultProps={size:'large'};f.exports=n}),null);
__d('MediaEffectMaskFileSelect.react',['cssVar','cx','fbt','CenteredContainer.react','FileInput.react','Layout.react','ProfileInfoAddImage.react','React','SUIBusinessTheme','SUILink.react','XUIError.react','XUIGrayText.react','XUIText.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn,o=function r(s){var t=s.className,u=s.text,v=babelHelpers.objectWithoutProperties(s,['className','text']);return c('React').createElement('div',{className:c('joinClasses')(t,"_2pid")},c('React').createElement(c('FileInput.react'),v,c('React').createElement(c('SUILink.react'),{showUnderline:'never',theme:c('SUIBusinessTheme')},c('React').createElement(c('Layout.react'),null,c('React').createElement(m,{className:"_3-92"},c('React').createElement(c('ProfileInfoAddImage.react'),null)),c('React').createElement(n,{style:{height:'36px'}},c('React').createElement(c('CenteredContainer.react'),{fullHeight:true,horizontal:false,vertical:true},c('React').createElement(c('XUIText.react'),{display:'block',size:'medium',style:{color:"#4080ff"}},u)))))))},p=function r(s){var t=s.className,u=s.disabled,v=s.files,w=s.expectFiles,x=s.preview,y=babelHelpers.objectWithoutProperties(s,['className','disabled','files','expectFiles','preview']),z=j._("Upload More Files");if(v.length===w)z=w>1?j._("Update Files"):j._("Update");var aa=v[0].src;return c('React').createElement('div',{className:c('joinClasses')(t,"_2pid")},c('React').createElement(c('Layout.react'),null,c('React').createElement(m,{className:"_3-92"},x),c('React').createElement(n,{style:{minHeight:'36px'}},c('React').createElement('div',null,v.map(function(ba){return c('React').createElement(c('XUIText.react'),{display:'block',key:ba.name},c('React').createElement(c('XUIGrayText.react'),{shade:'dark',size:'medium'},ba.name))})),c('React').createElement(c('Layout.react'),null,u?null:c('React').createElement(m,{className:"_3-92"},c('React').createElement(c('FileInput.react'),y,c('React').createElement('a',{href:'#'},c('React').createElement(c('XUIText.react'),{display:'block',size:'medium',style:{color:"#4080ff"}},z)))),aa?c('React').createElement(n,null,c('React').createElement('a',{href:aa},c('React').createElement(c('XUIText.react'),{display:'block',size:'medium',style:{color:"#4080ff"}},j._("Download")))):null))))};k=babelHelpers.inherits(q,c('React').PureComponent);l=k&&k.prototype;q.prototype.render=function(){var r=this.props,s=r.disabled,t=r.expectFiles,u=r.error,v=r.files,w=r.preview,x=r.text,y=babelHelpers.objectWithoutProperties(r,['disabled','expectFiles','error','files','preview','text']);return c('React').createElement(c('XUIError.react'),{xuiError:u},v.length===0?c('React').createElement(o,babelHelpers['extends']({disabled:s,text:x},y)):c('React').createElement(p,babelHelpers['extends']({disabled:s,expectFiles:t,files:v,preview:w},y)))};function q(){k.apply(this,arguments)}f.exports=q}),null);
__d('MediaEffectMaskProjectFileUpload.react',['fbt','Image.react','MediaEffectCard.react','MediaEffectFrameEditorDispatcher','MediaEffectMaskFileSelect.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.validateProjectFile=function(l){if(!l||!l.name.endsWith('.fbfxproj'))return h._("Please upload a .fbfxproj file to continue");return null};k.prototype.updateProjectFile=function(event){var l=event.target.files[0];c('MediaEffectFrameEditorDispatcher').dispatch({type:'fbfxprojFile/selected',payload:{file:l}})};k.prototype.getErrorMessage=function(){var l=this.props,m=l.projectFile,n=l.isValidating;if(!n)return null;return this.constructor.validateProjectFile(m)};k.prototype.render=function(){var l=this.props,m=l.projectFile,n=l.disabled,o=this.getErrorMessage();return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Effect Project File"),tooltip:h._("AR Studio will export a .fbfxproj file when you save your project.")},c('React').createElement(c('XUIText.react'),{color:'gray',display:'block'},h._("Upload the .fbfxproj file created when saving your effect in {ar studio link}.",[h.param('ar studio link',c('React').createElement('a',{href:'https://developers.facebook.com/products/camera-effects/ar-studio/',target:'_blank'},h._("AR Studio")))])),c('React').createElement(c('MediaEffectMaskFileSelect.react'),{accept:'.fbfxproj',disabled:n,error:o,expectFiles:1,files:m?[m]:[],name:'project_file',onChange:this.updateProjectFile,preview:c('React').createElement(c('Image.react'),{height:36,src:'/images/media_effect/icon/fbfx-icon.png',width:36}),text:h._("Upload .fbfxproj File")}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("XMediaEffectScreencastUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/ar_effect\/screencast_upload\/",{review_material_id:{type:"FBID"}})}),null);
__d('MediaEffectMaskScreencastUpload.react',['fbt','AsyncUploadRequest','MediaEffectCard.react','MediaEffectFrameEditorDispatcher','MediaEffectMaskFileSelect.react','ProgressBar.react','React','XMediaEffectScreencastUploadController','XUINotice.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.validateScreencastFile=function(l,m){var n=l;if(!n||!(n.name.endsWith('.mov')||n.name.endsWith('.mp4'))){if(m)return null;return h._("Please select a video file of type MP4 or MOV")}return null};function k(l){j.constructor.call(this,l);this.updateScreencastFile=function(event){if(!event.target.files||event.target.files.length===0)return;var m=event.target.files[0];this.setState({uploading:true,progress:0,uploadError:false});c('MediaEffectFrameEditorDispatcher').dispatch({type:'effectScreencastFile/selected',payload:{file:m,src:null,reviewMaterialID:this.props.reviewMaterialID}});var n=c('XMediaEffectScreencastUploadController').getURIBuilder().getURI(),o=this.props.reviewMaterialID,p=new (c('AsyncUploadRequest'))().setURI(n).setAllowCrossOrigin(false).setData({review_material_id:o}).setFiles({screencast:m}),q=[p.subscribe('progress',function(r,s){var event=s.getProgressEvent();this.setState({progress:parseInt(event.loaded/event.total*100,10)})}.bind(this)),p.subscribe('failure',function(r,s){this.setState({uploadError:true})}.bind(this)),p.subscribe('success',function(r,s){this.setState({uploading:false,progress:100});var t=s.getResponse(),u=t.payload,v=u.reviewMaterialID,w=u.screencastSrc;c('MediaEffectFrameEditorDispatcher').dispatch({type:'effectScreencastFile/selected',payload:{file:m,src:w,reviewMaterialID:v}});this.setState({uploadError:false})}.bind(this)),p.subscribe('complete',function(r,s){while(q.length)q.pop().unsubscribe();})];p.send()}.bind(this);this.state={uploadError:false,uploading:false,progress:0}}k.prototype.getErrorMessage=function(){var l=this.props,m=l.screencastFile,n=l.screencastSrc,o=l.isValidating;if(!o)return null;return this.constructor.validateScreencastFile(m,n)};k.prototype.render=function(){var l=this.props,m=l.screencastFile,n=l.screencastSrc,o=this.state,p=o.uploadError,q=o.uploading,r=o.progress,s=this.getErrorMessage(),t=null;if(q){t=c('React').createElement(c('ProgressBar.react'),{label:r+'%',typesetting:'float',value:r})}else if(n){t=c('React').createElement('video',{controls:true,src:n,width:'320px'})}else if(p)t=c('React').createElement(c('XUINotice.react'),{warn:h._("Upload Failed")});return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Screencast")},c('React').createElement(c('XUIText.react'),{color:'gray',display:'block'},h._("Upload a video of someone using your effect. This is used to make sure your effect doesn't violate our policies. Your screencast will only be visible to reviewers. You can also see Apple's instructions on how to {ar studio link}.",[h.param('ar studio link',c('React').createElement('a',{href:'https://support.apple.com/en-us/HT201066#screen',target:'_blank'},h._("use Quicktime to capture a screencast")))])),c('React').createElement(c('MediaEffectMaskFileSelect.react'),{accept:'video/*',disabled:q,error:s,expectFiles:1,files:m?[m]:[],name:'screencast',onChange:this.updateScreencastFile,preview:c('React').createElement('div',{style:{width:320}},t),text:h._("Upload Screencast")}))};f.exports=k}),null);
__d('MediaEffectMaskThumbnailUpload.react',['fbt','Event','MediaEffectCard.react','MediaEffectFrameEditorDispatcher','MediaEffectMaskFileSelect.react','MediaEffectSquircleImage.react','MediaEffectThumbnailValidationConfig','React','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=['.png','.jpg','.jpeg'];i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.validateThumbnail=function(m,n,o){if(!n)return h._("Please upload an effect icon to continue");var p=m;if(p&&p.name&&p.name.length>0)if(!k.some(function(s){return p.name.endsWith(s)}))return h._("Please upload a PNG or JPG file to continue");if(o){var q=o.width*o.height;if(o.width!==o.height||q>c('MediaEffectThumbnailValidationConfig').maxResolution){var r=Math.trunc(Math.sqrt(c('MediaEffectThumbnailValidationConfig').maxResolution));return h._("Camera effect icons must be square ratios and no more than {max height of image} x {max width of image}px",[h.param('max height of image',r),h.param('max width of image',r)])}}return null};l.prototype.updateThumbnailFile=function(event){var m=event.target.files[0],n=new FileReader();c('Event').listen(n,'load',function(o){var p=new window.Image();p.onload=function(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'effectThumbnailFile/selected',payload:{file:m,src:n.result,dimensions:{width:p.width,height:p.height}}})};p.src=n.result});n.readAsDataURL(m)};l.prototype.getErrorMessage=function(){var m=this.props,n=m.cameraIconDimensions,o=m.cameraIconFile,p=m.cameraIconSrc,q=m.isValidating;if(!q)return null;return this.constructor.validateThumbnail(o,p,n)};l.prototype.render=function(){var m=this.props,n=m.cameraIconFile,o=m.cameraIconSrc,p=this.getErrorMessage();return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Effect Icon"),tooltip:h._("Include an image thumbnail for your effect that will appear in the camera tray.")},c('React').createElement(c('XUIText.react'),{color:'gray',display:'block'},h._("Upload an effect icon for the camera tray that is 144 x 144 pixels. Your icon will be cropped to have rounded corners. You can also download the {effect icon link}",[h.param('effect icon link',c('React').createElement('a',{href:'https://developers.facebook.com/docs/camera-effects/design/effect-icons',target:'_blank'},h._("effect icon template")))])),c('React').createElement(c('MediaEffectMaskFileSelect.react'),{accept:'.png,.jpg,.jpeg',error:p,expectFiles:1,files:n?[n]:[],name:'thumbnail_file',onChange:this.updateThumbnailFile,preview:o?c('React').createElement(c('MediaEffectSquircleImage.react'),{height:36,src:o,width:36}):c('React').createElement('div',null),text:h._("Upload Camera Icon")}))};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectMaskUploadDataStore',['FluxReduceStore','immutable','MediaEffectARStudioEffectArfxFileTypes','MediaEffectFrameEditorDispatcher','MediaEffectMaskDescriptionInput.react','MediaEffectMaskProjectFileUpload.react','MediaEffectMaskScreencastUpload.react','MediaEffectMaskThumbnailUpload.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Record,m=c('immutable').Set;h=babelHelpers.inherits(n,l({arfxFiles:m(),arfxFilesForUpload:m(),userIsAgreed:false,effectDescription:null,effectThumbnailFile:null,effectThumbnailFileForUpload:null,effectThumbnailSrc:null,effectThumbnailDimensions:null,fbfxprojFile:null,fbfxprojFileForUpload:null,screencastFile:null,screencastSrc:null,reviewMaterialID:null,immutable:false,currentARStudioVersions:[]}));i=h&&h.prototype;function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,c('FluxReduceStore'));k=j&&j.prototype;o.prototype.getInitialState=function(){return new n()};o.prototype.reduce=function(p,q){var r=void 0,s=void 0,t=void 0;switch(q.type){case 'init/maskUploadData':var u=q.data;p=!u?new n():new n(u).set('arfxFiles',m(u.arfxFiles));break;case 'fbfxprojFile/selected':r=q.payload.file;if(r)p=this.getState().set('fbfxprojFileForUpload',r).set('fbfxprojFile',{name:r.name});break;case 'arfxFile/selected':r=q.payload.file;var v=q.payload.type;p=this.getState();var w=p.get('arfxFilesForUpload');w=w.remove(w.find(function(aa){return aa.name.endsWith(v)})).add(r);var x=p.get('arfxFiles');x=x.remove(x.find(function(aa){return aa.name.endsWith(v)})).add({name:r.name});p=p.set('arfxFilesForUpload',w).set('arfxFiles',x);break;case 'effectDescription/change':p=this.getState().set('effectDescription',q.payload.text);break;case 'effectScreencastFile/selected':r=q.payload.file;t=q.payload.reviewMaterialID;s=q.payload.src;if(r)p=this.getState().set('reviewMaterialID',t).set('screencastFile',{name:r.name}).set('screencastSrc',s);break;case 'effectThumbnailFile/selected':r=q.payload.file;s=q.payload.src;var y=q.payload.dimensions;if(r)p=this.getState().set('effectThumbnailFileForUpload',r).set('effectThumbnailFile',{name:r.name}).set('effectThumbnailSrc',s).set('effectThumbnailDimensions',y);break;case 'legalAgreement/userIsAgreed':var z=q.payload.userIsAgreed;p=this.getState().set('userIsAgreed',z);break;default:return p;}return p};o.prototype.getRequestFiles=function(){var p=this.getState();return {effect_review_material_id:p.get('reviewMaterialID'),mask_files:p.get('arfxFilesForUpload').toArray(),project_file:p.get('fbfxprojFileForUpload'),thumbnail_file:p.get('effectThumbnailFileForUpload')}};o.prototype.getMinARStudioVersion=function(){var p=this.getState(),q=p.currentARStudioVersions;if(q.length)return Math.min.apply(Math,q);return 0};o.prototype.getLatestARStudioVersion=function(){var p=this.getState(),q=p.currentARStudioVersions;if(q.length)return Math.max.apply(Math,q);return 0};o.prototype.getArfxTopVersion=function(){var p=this.getState(),q=p.arfxFiles,r=q.map(function(s){return s.version&&Number(s.version)}).max();return r||0};o.prototype.isVersionOutOfDate=function(){var p=this.getArfxTopVersion(),q=this.getMinARStudioVersion();return !!p&&!!q&&p<q};o.prototype.isVersionNotCurrent=function(){var p=this.getArfxTopVersion(),q=this.getLatestARStudioVersion();return !!p&&!!q&&p<q};o.prototype.isValidForSubmit=function(){var p=this.getState();if(!p.get('userIsAgreed'))return false;if(c('MediaEffectMaskProjectFileUpload.react').validateProjectFile(p.get('fbfxprojFile')))return false;if(c('MediaEffectMaskThumbnailUpload.react').validateThumbnail(p.get('effectThumbnailFile'),p.get('effectThumbnailSrc'),p.get('effectThumbnailDimensions')))return false;if(!this.validateArfxFiles(p.get('arfxFilesForUpload')))return false;var q=p.get('effectDescription');if(c('MediaEffectMaskDescriptionInput.react').validateDescription(q))return false;var r=p.get('screencastFile'),s=p.get('screencastSrc');if(c('MediaEffectMaskScreencastUpload.react').validateScreencastFile(r,s))return false;return true};o.prototype.validateArfxFiles=function(p){if(p.size===0)return true;if(p.size!==c('MediaEffectARStudioEffectArfxFileTypes').length)return false;return c('MediaEffectARStudioEffectArfxFileTypes').every(function(q){return p.some(function(r){return r.name.endsWith(q)})})};function o(){j.apply(this,arguments)}f.exports=new o(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectFrameCreationReviewContainer.react',['FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationReview.react','MediaEffectFrameEditorDispatcher','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectMaskUploadDataStore','MediaEffectMetadataStore','MediaEffectMetadataViewStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectMetadataStore'),c('MediaEffectMetadataViewStore'),c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMaskUploadDataStore')]};j.calculateState=function(){var k=c('MediaEffectMetadataStore').getState(),l=k.get('selectedOwnerID'),m=c('MediaEffectFrameCreateDialogDataStore').getState(),n=m.screenWidth,o=m.dialogHeight,p=c('MediaEffectFullscreenFrameEditorSizingUtils').getDialogWidth(n,o),q=c('MediaEffectMaskUploadDataStore').getState();return {name:k.get('name'),selectedOwner:c('MediaEffectMetadataViewStore').getOwner(l),tags:k.get('tags'),startTime:k.startTime,endTime:k.endTime,location:k.location,placeDescription:k.placeDescription,dialogWidth:p,dialogHeight:o,arfxFiles:q.get('arfxFiles').toArray(),fbfxprojFile:q.get('fbfxprojFile'),effectThumbnailFile:q.get('effectThumbnailFile'),thumbnailSrc:q.get('effectThumbnailSrc')}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c('React').createElement(c('MediaEffectFrameCreationReview.react'),{arfxFiles:this.state.arfxFiles,canThirdPartyMaskLocation:this.props.canThirdPartyMaskLocation,dialogHeight:this.state.dialogHeight,dialogWidth:this.state.dialogWidth,effectThumbnailFile:this.state.effectThumbnailFile,endTime:this.state.endTime,fbfxprojFile:this.state.fbfxprojFile,flowType:this.props.flowType,frameName:this.state.name,location:this.state.location,owner:this.state.selectedOwner,placeDescription:this.state.placeDescription,startTime:this.state.startTime,tags:this.state.tags,thumbnailImageSrc:this.state.thumbnailSrc})};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react',['ix','cx','Image.react','MediaEffectFrameEditorTemplateGrid.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector1=function(){this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2('Birthdays')}.bind(this);this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector3=function(){this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2('Celebrations')}.bind(this);this.state={selectedCategory:'Birthdays'}}l.prototype.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector2=function(m){this.setState({selectedCategory:m})};l.prototype.render=function(){var m=this.state.selectedCategory==='Birthdays'?this.props.birthdayTemplates:this.props.celebrationTemplates;return c('React').createElement('div',null,c('React').createElement('div',{className:"_3-94"},c('React').createElement('a',{className:"_2w6x"+(' '+"_3-fi")+(' '+"_hto")+(' '+"_htp")+(this.state.selectedCategory==='Birthdays'?' '+"_hts":'')+(' '+"_3-fj"),href:'#',onClick:this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector1},c('React').createElement(c('Image.react'),{className:"_3-8x _3-94",src:this.state.selectedCategory==='Birthdays'?h("114499"):h("122508")}),c('React').createElement('div',null,'Birthdays')),c('React').createElement('a',{className:"_2w6x"+(' '+"_3-fi")+(' '+"_hto")+(' '+"_htt")+(this.state.selectedCategory==='Celebrations'?' '+"_hts":'')+(' '+"_3-fj"),href:'#',onClick:this.$MediaEffectFrameEditorBirthdayCelebrationTemplateSelector3},c('React').createElement(c('Image.react'),{className:"_3-8x _3-94",src:this.state.selectedCategory==='Celebrations'?h("114650"):h("122659")}),c('React').createElement('div',null,'Celebrations'))),c('React').createElement(c('MediaEffectFrameEditorTemplateGrid.react'),{activeTemplate:this.props.activeTemplate,templates:m}))};f.exports=l}),null);
__d('MediaEffectFrameEditorDataRecord',['immutable','MediaEffectReactFrameEditorImageAssetRecord'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=c('immutable').List,l=c('immutable').Map;h=babelHelpers.inherits(m,j({assets:l(),assetOrder:k(),frameFBID:null,filterID:null,templateFBID:null,containsJPEG:false}));i=h&&h.prototype;m.prototype.withNewAsset=function(n,o){return this.withMutations(function(p){p.set('assets',this.assets.set(n,o)).set('assetOrder',this.assetOrder.push(n))}.bind(this))};m.prototype.withDeletedAsset=function(n){var o=this.assetOrder,p=this.assets,q=o.indexOf(n),r=o.splice(q,1),s=p.remove(n);return this.withMutations(function(t){t.set('assets',s).set('assetOrder',r)})};m.prototype.replaceAsset=function(n,o){return this.set('assets',this.assets.set(n,o))};m.prototype.withAssetMutation=function(n,o){var p=this.assets,q=p.get(n);if(!q)return this;return this.set('assets',p.set(n,q.withMutations(o)))};m.prototype.withTextAssetMutation=function(n,o){var p=this.assets,q=p.get(n);if(!q)return this;if(q instanceof c('MediaEffectReactFrameEditorImageAssetRecord')){if(q.assocTextAsset)q=q.set('assocTextAsset',q.assocTextAsset.withMutations(o));}else q=q.withMutations(o);return this.set('assets',p.set(n,q))};m.prototype.withRaisedAsset=function(n,o){return this.$MediaEffectFrameEditorDataRecord1(n,o,1)};m.prototype.withLoweredAsset=function(n,o){return this.$MediaEffectFrameEditorDataRecord1(n,o,-1)};m.prototype.$MediaEffectFrameEditorDataRecord1=function(n,o,p){var q=this.assetOrder,r=this.assets,s=r.get(n),t=q.indexOf(n);if(t===(p>0?q.size-1:0))return this;var u=o?p>0?q.size:0:t+p;for(;u<q.size&&u>0;u+=p){var v=r.get(q.get(u));if(s.assetType()===v.assetType())break;}var w=q.splice(t,1).splice(u,0,n);return this.set('assetOrder',w)};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d('MediaEffectFrameEditorMultiCategoryTemplateSelector.react',['cx','fbt','MediaEffectFrameEditorTemplateGrid.react','MediaEffectMetadataActionCreators','React','SUIBusinessTheme','SUISelector.react','SUISelectorOption.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectFrameEditorMultiCategoryTemplateSelector2=function(n){if(n===this.state.selectedCategory)return;this.setState({selectedCategory:n});var o=this.$MediaEffectFrameEditorMultiCategoryTemplateSelector1(n);c('MediaEffectMetadataActionCreators').applyTemplate(o?o.first():null)}.bind(this);this.state={selectedCategory:null}}l.prototype.$MediaEffectFrameEditorMultiCategoryTemplateSelector1=function(m){if(!m)return null;return this.props.categories.get(m)};l.prototype.$MediaEffectFrameEditorMultiCategoryTemplateSelector3=function(){return c('React').createElement(c('SUISelector.react'),{canSelectMultiple:false,onChange:this.$MediaEffectFrameEditorMultiCategoryTemplateSelector2,theme:c('SUIBusinessTheme'),value:this.state.selectedCategory,width:184},c('React').createElement(c('SUISelectorOption.react'),{value:null},i._("None")),this.props.categories.keySeq().map(function(m){return c('React').createElement(c('SUISelectorOption.react'),{key:m,value:m},m)}))};l.prototype.$MediaEffectFrameEditorMultiCategoryTemplateSelector4=function(){var m=this.$MediaEffectFrameEditorMultiCategoryTemplateSelector1(this.state.selectedCategory);if(!m)return null;return c('React').createElement(c('MediaEffectFrameEditorTemplateGrid.react'),{activeTemplate:this.props.activeTemplate,showNoTemplate:false,templates:m})};l.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement('div',{className:"_3-96"},this.$MediaEffectFrameEditorMultiCategoryTemplateSelector3()),this.$MediaEffectFrameEditorMultiCategoryTemplateSelector4())};f.exports=l}),null);
__d('WebGLShaderCode',['regeneratorRuntime','immutable','Set'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i=c('immutable').Set;j.prototype.getDirectDeps=function(){return i()};j.prototype.generateAllCodeFragments=c('regeneratorRuntime').mark(function k(){var l,m,n,o,p,q,r,s,t,u,v,w;return c('regeneratorRuntime').wrap(function x(y){while(1)switch(y.prev=y.next){case 0:l=new (c('Set'))();m=this.getCodeFragment();l.add(m);n=this.getDirectDeps(),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();case 4:if(!o){y.next=10;break}if(!(p>=n.length)){y.next=7;break}return y.abrupt('break',35);case 7:q=n[p++];y.next=14;break;case 10:p=n.next();if(!p.done){y.next=13;break}return y.abrupt('break',35);case 13:q=p.value;case 14:r=q;s=r.generateAllCodeFragments(),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();case 16:if(!t){y.next=22;break}if(!(u>=s.length)){y.next=19;break}return y.abrupt('break',33);case 19:v=s[u++];y.next=26;break;case 22:u=s.next();if(!u.done){y.next=25;break}return y.abrupt('break',33);case 25:v=u.value;case 26:w=v;if(l.has(w)){y.next=31;break}y.next=30;return w;case 30:l.add(w);case 31:y.next=16;break;case 33:y.next=4;break;case 35:y.next=37;return m;case 37:case 'end':return y.stop();}},k,this)});j.prototype.getAllCodeFragments=function(){return h(this.generateAllCodeFragments())};j.prototype.getCodeFragment=function(){return ''};function j(){}f.exports=j}),null);
__d('WebGLShaderLibraryCode',['WebGLShaderCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderCode'));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectColorComponentShaderCode',['WebGLShaderLibraryCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderLibraryCode'));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$MediaEffectColorComponentShaderCode1=k||4}j.prototype.getCodeFragment=function(){return '\n    precision mediump float;\n\n    #define MAX_NUM_COMPONENTS '+this.$MediaEffectColorComponentShaderCode1+'\n    // These is not just MAX_NUM_COMPONENTS so we don\'t have to keep changing\n    // the program all the time. That might be unnecessary though.\n    uniform int u_num_components;\n\n    struct Component\n    {\n      vec3 hsl;\n      vec3 hslwidth;\n    };\n\n    uniform Component u_source[MAX_NUM_COMPONENTS];\n\n    float component_scores[MAX_NUM_COMPONENTS];\n\n    float discreteComponentScore(Component component, vec3 hsl) {\n      float normhuediff = (\n        mod(hsl.x - component.hsl.x + 0.5, 1.0) - 0.5\n      ) / component.hslwidth.x;\n      vec2 normsldiff = (\n        (hsl.yz - component.hsl.yz) / component.hslwidth.yz\n      );\n      vec3 normscore = vec3(\n        (1.0 - abs(normhuediff)) / component.hslwidth.x,\n        (vec2(1.0, 1.0) - abs(normsldiff)) / component.hslwidth.yz\n      );\n      if (!(normscore.x > 0.0 && normscore.x < 1000000.0)) {\n        return -10.0;\n      }\n      if (!(normscore.y > 0.0 && normscore.y < 1000000.0)) {\n        return -10.0;\n      }\n      if (!(normscore.z > 0.0 && normscore.z < 1000000.0)) {\n        return -10.0;\n      }\n      return normscore.x * normscore.y * normscore.z;\n    }\n\n    float lightnessCentrality(float lightness) {\n      return 1.0 - abs(2.0 * lightness - 1.0);\n    }\n\n    float avg(float x, float y) {\n      return (x + y) / 2.0;\n    }\n\n    float getNaturalSaturation(vec3 hsl) {\n      return hsl.y * lightnessCentrality(hsl.z);\n    }\n\n    float getSaturationSignificance(vec3 hsl1, vec3 hsl2) {\n      float saturationSignificance = clamp(\n        avg(\n          lightnessCentrality(hsl1.z),\n          lightnessCentrality(hsl2.z)\n        ),\n        0.01, 1.0\n      );\n      return saturationSignificance;\n    }\n\n    float getHueSignificance(vec3 hsl1, vec3 hsl2) {\n      float sat1 = getNaturalSaturation(hsl1);\n      float sat2 = getNaturalSaturation(hsl2);\n      float saturation = avg(sat1, sat2);\n      float hueSignificance = clamp(\n        saturation,\n        0.01, 1.0\n      );\n      return hueSignificance;\n    }\n\n    float componentScore(Component component, vec3 hsl) {\n      float saturationSignificance = getSaturationSignificance(\n        component.hsl, hsl\n      );\n      float hueSignificance = getHueSignificance(component.hsl, hsl);\n      vec3 width = component.hslwidth + vec3(0.01);\n      width /= vec3(hueSignificance, saturationSignificance, 1.0);\n      float normhuediff = (\n        mod(hsl.x - component.hsl.x + 0.5, 1.0) - 0.5\n      ) / width.x;\n      float normsatdiff = (\n        getNaturalSaturation(hsl) - getNaturalSaturation(component.hsl)\n      ) / width.y;\n      float normlightdiff = (\n        (hsl.z - component.hsl.z) / width.z\n      );\n      vec3 score = max(vec3(\n        (1.0 - abs(normhuediff)),\n        (1.0 - abs(normsatdiff)),\n        (1.0 - abs(normlightdiff))\n      ), vec3(0.0));\n      vec3 normscore = vec3(\n        score.x,\n        score.y,\n        score.z\n      );\n\n      return normscore.x * normscore.y * normscore.z;\n    }\n\n    void computeComponentScores(vec3 hsl) {\n      for (int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        float score = 0.0;\n        if (index < u_num_components) {\n          score = componentScore(u_source[index], hsl);\n        }\n        component_scores[index] = score;\n      }\n    }\n    '};f.exports=j}),null);
__d('MediaEffectImageIOShaderCode',['WebGLShaderLibraryCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderLibraryCode'));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return '\n    precision mediump float;\n\n    // our texture\n    uniform sampler2D u_image;\n    uniform int u_alpha_premultiplied;\n\n    // the texCoords passed in from the vertex shader.\n    varying vec2 v_texCoord;\n\n    vec4 premultiplyAlpha(vec4 src) {\n      if (u_alpha_premultiplied == 0) {\n        return src;\n      }\n      return vec4(src.rgb * src.a, src.a);\n    }\n\n    vec4 demultiplyAlpha(vec4 src) {\n      if (u_alpha_premultiplied == 0 || src.a == 0.0) {\n        return src;\n      }\n      return vec4(src.rgb / src.a, src.a);\n    }\n\n    vec4 getInputColor() {\n      return demultiplyAlpha(texture2D(u_image, v_texCoord));\n    }\n\n    void setOutputColor(vec4 value) {\n      gl_FragColor = premultiplyAlpha(value);\n    }\n    '};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('WebGLShaderMainCode',['WebGLShaderCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderCode'));i=h&&h.prototype;j.prototype.toString=function(){return this.getAllCodeFragments().join('\n\n')};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('WebGLFragmentShaderCode',['WebGLShaderMainCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderMainCode'));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('WebGLShaderColorTransformCode',['WebGLShaderLibraryCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderLibraryCode'));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return '\n    precision mediump float;\n\n    float e = 1e-10;\n\n    vec3 hue2rgb(float h) {\n      return clamp(\n        vec3(\n          abs(h*6.0 - 3.0) - 1.0,\n          2.0 - abs(h*6.0 - 2.0),\n          2.0 - abs(h*6.0 - 4.0)\n        ),\n        0.0,\n        1.0\n      );\n    }\n\n    vec3 hsl2rgb(vec3 hsl) {\n      vec3 rgb = hue2rgb(hsl.x);\n      float c = (1.0 - abs(2.0*hsl.z - 1.0)) * hsl.y;\n      return (rgb - 0.5)*c + hsl.z;\n    }\n\n    vec3 rgb2hsl(vec3 rgb){\n      vec3 hsl = vec3(0.0);\n      float minrgb = min(rgb.r, min(rgb.g, rgb.b));\n      float maxrgb = max(rgb.r, max(rgb.g, rgb.b));\n      hsl.z = (maxrgb + minrgb) / 2.0;\n      if (maxrgb > minrgb) {\n        float rgbrange = maxrgb - minrgb;\n        hsl.y = (\n          hsl.z < .05 ?\n          rgbrange / (maxrgb + minrgb) :\n          rgbrange / (2.0 - (maxrgb + minrgb))\n        );\n        if (rgb.r == maxrgb) {\n          hsl.x = (rgb.g - rgb.b) / rgbrange / 6.0;\n        } else if (rgb.g == maxrgb) {\n          hsl.x = (2.0 + (rgb.b - rgb.r) / rgbrange) / 6.0;\n        } else {\n          hsl.x = (4.0 + (rgb.r - rgb.g) / rgbrange) / 6.0;\n        }\n\n        hsl.x = mod(hsl.x, 1.0);\n      }\n      return hsl;\n    }\n    '};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('WebGLShaderEaseThroughCode',['WebGLShaderLibraryCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderLibraryCode'));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return '\n    precision mediump float;\n\n    // A clamped linear interpolation through (0, 0) and (x0, y0)\n    float easeThroughZero(float x0, float y0, float x) {\n      return clamp(x * y0 / x0, 0.0, 1.0);\n    }\n\n    // A clamped linear interpolation through (1, 1) and (x0, y0)\n    float easeThroughOne(float x0, float y0, float x) {\n      return clamp(\n        x * (y0 - 1.0) / (x0 - 1.0) + (x0 - y0) / (x0 - 1.0),\n        0.0, 1.0\n      );\n    }\n\n    // A clamped linear interpolation through (x0, y0) of gradient 1\n    float easeThroughCorner(float x0, float y0, float x) {\n      return clamp(\n        x + (y0 - x0),\n        0.0, 1.0\n      );\n    }\n\n    // A hyperbolic interpolation through (0, 0), (x0, y0) and (1, 1)\n    // Doesn\'t behave too stably when x0 or y0 is close to 0 or 1\n    float easeThroughRawHyperbola(float x0, float y0, float x) {\n      float a = x0 / y0 * (y0 - 1.0) / (x0 - 1.0) ;\n      return x / (a * (1.0 - x) + x);\n    }\n\n    // The above hyperbolic interpolation patched for individual degenerative\n    // values of x0 and y0.\n    float easeThroughHyperbola(float x0, float y0, float x) {\n      if (x0 == 1.0 || (y0 == 1.0 && x0 != 0.0)) {\n        return easeThroughZero(x0, y0, x);\n      }\n      if (x0 == 0.0 || y0 == 0.0) {\n        return easeThroughOne(x0, y0, x);\n      }\n      return easeThroughRawHyperbola(x0, y0, x);\n    }\n\n    // A hybrid blend of the above, preferring:\n    //  linear through (1, 1) when (x0, y0) close to (0, 0)\n    //  linear through (0, 0) when (x0, y0) close to (1, 1)\n    //  linear of gradient 1 when (x0, y0) close to (0, 1) or (1, 0)\n    //  hyperbolic interpolation when (x0, y0) fairly central\n    float easeThrough(float x0, float y0, float x) {\n      float zeroWeight = x0 * y0;\n      zeroWeight *= zeroWeight;\n      float oneWeight = (1.0 - x0) * (1.0 - y0);\n      oneWeight *= oneWeight;\n      float cornerWeight = y0 * (1.0 - x0) + x0 * (1.0 - y0);\n      cornerWeight *= cornerWeight;\n      float hyperbolaWeight = 16.0 * x0 * y0 * (1.0 - x0) * (1.0 - y0);\n      return (\n        zeroWeight * easeThroughZero(x0, y0, x) +\n        oneWeight * easeThroughOne(x0, y0, x) +\n        cornerWeight * easeThroughCorner(x0, y0, x) +\n        hyperbolaWeight * easeThroughHyperbola(x0, y0, x)\n      ) / (zeroWeight + oneWeight + cornerWeight + hyperbolaWeight);\n    }\n    '};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectColorTransformFragmentShaderCode',['immutable','MediaEffectColorComponentShaderCode','MediaEffectImageIOShaderCode','WebGLFragmentShaderCode','WebGLShaderColorTransformCode','WebGLShaderEaseThroughCode'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Set;h=babelHelpers.inherits(k,c('WebGLFragmentShaderCode'));i=h&&h.prototype;k.prototype.getDirectDeps=function(){return j.of(new (c('WebGLShaderColorTransformCode'))(),new (c('MediaEffectColorComponentShaderCode'))(),new (c('MediaEffectImageIOShaderCode'))(),new (c('WebGLShaderEaseThroughCode'))())};k.prototype.getCodeFragment=function(){return '\n    precision mediump float;\n\n    #define UNMAPPED_WEIGHT 0.5\n\n    float epsilon = 1e-10;\n\n    uniform Component u_dest[MAX_NUM_COMPONENTS];\n\n    float bounceWrap(float x) {\n      return 1.0 - abs(abs(x) - 1.0);\n    }\n\n    float componentWeight(float score) {\n      if (score > 0.9999) {\n        return 10.0;\n      }\n      return -log(1.0 - score);\n    }\n\n    vec3 componentTransform(Component source, Component dest, vec3 point) {\n      vec3 wrapped = vec3(\n        mod(point.x + dest.hsl.x - source.hsl.x, 1.0),\n        easeThrough(source.hsl.y, dest.hsl.y, point.y),\n        easeThrough(source.hsl.z, dest.hsl.z, point.z)\n      );\n      return wrapped;\n    }\n\n    vec3 colorTransform(vec3 rgb) {\n      vec3 numerator = rgb * UNMAPPED_WEIGHT;\n      vec3 hsl = rgb2hsl(rgb);\n      computeComponentScores(hsl);\n      float denominator = UNMAPPED_WEIGHT;\n      for (int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        if (component_scores[index] <= 0.0) {\n          continue;\n        }\n        Component component = u_source[index];\n        float weight = componentWeight(component_scores[index]);\n        denominator += weight;\n        vec3 transformed = componentTransform(\n          u_source[index], u_dest[index], hsl\n        );\n        numerator += weight * hsl2rgb(transformed);\n      }\n      return numerator / denominator;\n    }\n\n    void main() {\n      vec4 src = getInputColor();\n      setOutputColor(src);\n      if (src.a == 0.0) {\n       return;\n      }\n      vec3 newrgb = colorTransform(src.rgb);\n      setOutputColor(vec4(newrgb, src.a));\n    }\n    '};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectHighlightFragmentShaderCode',['immutable','MediaEffectColorComponentShaderCode','MediaEffectImageIOShaderCode','WebGLFragmentShaderCode','WebGLShaderColorTransformCode'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Set;h=babelHelpers.inherits(k,c('WebGLFragmentShaderCode'));i=h&&h.prototype;k.prototype.getDirectDeps=function(){return j.of(new (c('WebGLShaderColorTransformCode'))(),new (c('MediaEffectColorComponentShaderCode'))(),new (c('MediaEffectImageIOShaderCode'))())};k.prototype.getCodeFragment=function(){return '\n    precision mediump float;\n\n    uniform int u_highlight_component;\n\n    void main() {\n      vec4 src = getInputColor();\n      setOutputColor(src);\n      if (src.a == 0.0) {\n        return;\n      }\n      vec3 rgb = src.rgb;\n      vec3 hsl = rgb2hsl(rgb);\n      computeComponentScores(hsl);\n      for(int index = 0; index < MAX_NUM_COMPONENTS; index++) {\n        if (index == u_highlight_component - 1) {\n          setOutputColor(vec4(\n            rgb,\n            src.a * clamp(componentScore(u_source[index], hsl), 0.0, 1.0))\n          );\n          return;\n        }\n      }\n    }\n    '};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('WebGLVertexShaderCode',['WebGLShaderMainCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLShaderMainCode'));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectVertexShaderCode',['WebGLVertexShaderCode'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('WebGLVertexShaderCode'));i=h&&h.prototype;j.prototype.getCodeFragment=function(){return '\n    attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n\n    uniform vec2 u_resolution;\n\n    varying vec2 v_texCoord;\n\n    void main() {\n       // convert the rectangle from pixels to 0.0 to 1.0\n       vec2 zeroToOne = a_position / u_resolution;\n\n       // convert from 0->1 to 0->2\n       vec2 zeroToTwo = zeroToOne * 2.0;\n\n       // convert from 0->2 to -1->+1 (clipspace)\n       vec2 clipSpace = zeroToTwo - 1.0;\n\n       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\n       // pass the texCoord to the fragment shader\n       // The GPU will interpolate this value between points.\n       v_texCoord = a_texCoord;\n    }\n    '};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectImageTransmogrifier',['invariant','Promise','regeneratorRuntime','EventListener','MediaEffectColorTransformFragmentShaderCode','MediaEffectHighlightFragmentShaderCode','MediaEffectVertexShaderCode','getErrorNameFromWebGLErrorCode'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;function m(z){var aa=new Image();aa.crossOrigin='anonymous';aa.src=z;var ba=new (c('Promise'))(function(ca,da){aa.onload=function(){return ca(aa)}});return ba}function n(z){if(!b.WebGLRenderingContext)throw new Error('WebGLRenderingContext not available.');var aa=['webgl','experimental-webgl','webkit-3d','moz-webgl'],ba=null,ca=null,da=c('EventListener').listen(z,'webglcontextcreationerror',function(fa){return ca=fa.statusMessage});for(var ea=0;ea<aa.length;ea++){try{ba=z.getContext(aa[ea],{premultipliedAlpha:true})}catch(fa){}if(ba)break;}da.remove();if(!ba){if(!ca)ca='Unknown error.';throw new Error('Failed to acquire rendering context: '+ca)}return ba}function o(z,aa,ba){z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ba?1:0);var ca=z.createTexture();if(!ca)throw new Error('Failed to create texture: '+c('getErrorNameFromWebGLErrorCode')(z.getError()));z.bindTexture(z.TEXTURE_2D,ca);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST);z.texImage2D(z.TEXTURE_2D,0,z.RGBA,z.RGBA,z.UNSIGNED_BYTE,aa)}function p(z,aa,ba,ca,da){var ea=aa,fa=aa+ca,ga=ba,ha=ba+da;z.bufferData(z.ARRAY_BUFFER,new Float32Array([ea,ga,fa,ga,ea,ha,ea,ha,fa,ga,fa,ha]),z.STATIC_DRAW)}function q(z){var aa=z.createShader(z.VERTEX_SHADER);if(!aa)throw new Error('Failed to create vertex shader: '+c('getErrorNameFromWebGLErrorCode')(z.getError()));z.shaderSource(aa,new (c('MediaEffectVertexShaderCode'))().toString());z.compileShader(aa);if(!z.getShaderParameter(aa,z.COMPILE_STATUS))throw new Error('Failed to intialize vertex shader: '+c('getErrorNameFromWebGLErrorCode')(z.getError()));return aa}function r(z,aa,ba,ca){var da=q(z),ea=z.createProgram();if(!ea)throw new Error('Failed to create shader program: '+c('getErrorNameFromWebGLErrorCode')(z.getError()));z.attachShader(ea,da);z.attachShader(ea,ca);z.linkProgram(ea);if(!z.getProgramParameter(ea,z.LINK_STATUS))throw new Error('Failed to link shader program: '+c('getErrorNameFromWebGLErrorCode')(z.getError()));var fa=z.getAttribLocation(ea,'a_position'),ga=z.getAttribLocation(ea,'a_texCoord'),ha=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,ha);p(z,0,0,aa,ba);var ia=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,ia);z.bufferData(z.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),z.STATIC_DRAW);z.clearColor(0,0,0,0);z.clear(z.COLOR_BUFFER_BIT);z.useProgram(ea);z.enableVertexAttribArray(fa);z.bindBuffer(z.ARRAY_BUFFER,ha);var ja=2,ka=z.FLOAT,la=false,ma=0,na=0;z.vertexAttribPointer(fa,ja,ka,la,ma,na);z.enableVertexAttribArray(ga);z.bindBuffer(z.ARRAY_BUFFER,ia);z.vertexAttribPointer(ga,ja,ka,la,ma,na);return ea}function s(z,aa,ba,ca,da,ea){var fa=z.getUniformLocation(aa,'u_resolution');z.uniform2f(fa,z.canvas.width,z.canvas.height);z.viewport(0,0,z.canvas.width,z.canvas.height);var ga=z.getUniformLocation(aa,'u_alpha_premultiplied');z.uniform1i(ga,ba?1:0);var ha=z.getUniformLocation(aa,'u_num_components');z.uniform1i(ha,ea);var ia=z.getUniformLocation(aa,'u_highlight_component');z.uniform1i(ia,da);var ja=void 0;for(ja=0;ja<ea;ja++){var ka=z.getUniformLocation(aa,'u_source['+ja+'].hsl'),la=z.getUniformLocation(aa,'u_source['+ja+'].hslwidth'),ma=ca.components.get(ja);z.uniform3f(ka,ma.hue,ma.saturation,ma.lightness);z.uniform3f(la,ma.hueVariation,ma.saturationVariation,ma.lightnessVariation)}}function t(z,aa,ba,ca,da){var ea=Math.min(ca.components.size,da.components.size);s(z,aa,ba,ca,0,ea);var fa=void 0;for(fa=0;fa<ea;fa++){var ga=z.getUniformLocation(aa,'u_dest['+fa+'].hsl'),ha=z.getUniformLocation(aa,'u_dest['+fa+'].hslwidth'),ia=da.components.get(fa);z.uniform3f(ga,ia.hue,ia.saturation,ia.lightness);z.uniform3f(ha,ia.hueVariation,ia.saturationVariation,ia.lightnessVariation)}}function u(z,aa,ba,ca,da){var ea=ca.components.size;s(z,aa,ba,ca,da,ea)}function v(z){z.drawArrays(z.TRIANGLES,0,6)}function w(z,aa,ba,ca,da,ea,fa){this.imageURI=z;this.alphaPremultiplied=aa;this.sourceColorPalette=ba;this.image=ca;this.canvas=da;this.glContext=ea;this.shaderProgram=fa}w.prototype.execute=function z(){return c('regeneratorRuntime').async(function aa(ba){while(1)switch(ba.prev=ba.next){case 0:if(!this.$Transmogrifier1)this.$Transmogrifier1=this.$Transmogrifier2();return ba.abrupt('return',this.$Transmogrifier1);case 2:case 'end':return ba.stop();}},null,this)};w.prototype.$Transmogrifier2=function z(){var aa,ba;return c('regeneratorRuntime').async(function ca(da){while(1)switch(da.prev=da.next){case 0:if(!(!this.image||this.image.src!==this.imageURI)){da.next=4;break}da.next=3;return c('regeneratorRuntime').awrap(m(this.imageURI));case 3:this.image=da.sent;case 4:this.width=this.image.width;this.height=this.image.height;if(!this.canvas)this.canvas=document.createElement('canvas');this.canvas.width=this.width;this.canvas.height=this.height;if(!this.glContext)this.glContext=n(this.canvas);aa=this.glContext;o(aa,this.image,this.alphaPremultiplied);if(!this.shaderProgram)this.shaderProgram=r(aa,this.width,this.height,this.getFragmentShader(aa));ba=this.shaderProgram;this.configureTransmogrification(aa,ba);v(aa,ba);return da.abrupt('return',this);case 17:case 'end':return da.stop();}},null,this)};w.prototype.toBlob=function z(){var aa,ba=this;return c('regeneratorRuntime').async(function ca(da){while(1)switch(da.prev=da.next){case 0:if(this.blob){da.next=3;break}da.next=3;return c('regeneratorRuntime').awrap(function ea(){var fa,ga;return c('regeneratorRuntime').async(function ha(ia){while(1)switch(ia.prev=ia.next){case 0:ia.next=2;return c('regeneratorRuntime').awrap(ba.execute());case 2:ba.canvas||h(0);fa=ba.canvas;ga=new (c('Promise'))(function(ja,ka){fa.toBlob(ja)});ia.next=7;return c('regeneratorRuntime').awrap(ga);case 7:ba.blob=ia.sent;case 8:case 'end':return ia.stop();}},null,ba)}());case 3:return da.abrupt('return',this.blob);case 4:case 'end':return da.stop();}},null,this)};w.prototype.getFragmentShader=function(z){var aa=z.createShader(z.FRAGMENT_SHADER);if(!aa)throw new Error('Failed to create fragment shader: '+c('getErrorNameFromWebGLErrorCode')(z.getError()));var ba=this.getShaderSource();z.shaderSource(aa,ba);z.compileShader(aa);if(!z.getShaderParameter(aa,z.COMPILE_STATUS))throw new Error('Failed to intialize fragment shader: '+c('getErrorNameFromWebGLErrorCode')(z.getError()));return aa};w.prototype.configureTransmogrification=function(z,aa){};w.prototype.getShaderSource=function(){return ''};i=babelHelpers.inherits(x,w);j=i&&i.prototype;function x(z,aa,ba,ca,da,ea,fa,ga){j.constructor.call(this,z,aa,ba,da,ea,fa,ga);this.$ColorTransform1=ca}x.prototype.getShaderSource=function(){return new (c('MediaEffectColorTransformFragmentShaderCode'))().toString()};x.prototype.configureTransmogrification=function(z,aa){t(z,aa,this.alphaPremultiplied,this.sourceColorPalette,this.$ColorTransform1)};k=babelHelpers.inherits(y,w);l=k&&k.prototype;function y(z,aa,ba,ca,da,ea,fa,ga){l.constructor.call(this,z,aa,ba,da,ea,fa,ga);this.$HighlightTransform1=ca}y.prototype.getShaderSource=function(){return new (c('MediaEffectHighlightFragmentShaderCode'))().toString()};y.prototype.configureTransmogrification=function(z,aa){u(z,aa,this.alphaPremultiplied,this.sourceColorPalette,this.$HighlightTransform1)};f.exports={HighlightTransform:y,ColorTransform:x,Transmogrifier:w}}),null);
__d('MediaEffectFrameEditorColorMappedImage.react',['regeneratorRuntime','EventListener','MediaEffectImageTransmogrifier','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$MediaEffectFrameEditorColorMappedImage7=function(l){this.$MediaEffectFrameEditorColorMappedImage2=l;if(l){this.$MediaEffectFrameEditorColorMappedImage4.addSubscriptions(c('EventListener').listen(l,'webglcontextlost',this.$MediaEffectFrameEditorColorMappedImage8),c('EventListener').listen(l,'webglcontextrestored',this.$MediaEffectFrameEditorColorMappedImage9));this.$MediaEffectFrameEditorColorMappedImage10()}else this.$MediaEffectFrameEditorColorMappedImage4.release();}.bind(this);this.$MediaEffectFrameEditorColorMappedImage8=function(){this.$MediaEffectFrameEditorColorMappedImage3=null;this.$MediaEffectFrameEditorColorMappedImage5=null}.bind(this);this.$MediaEffectFrameEditorColorMappedImage9=function(){this.$MediaEffectFrameEditorColorMappedImage10()}.bind(this);this.$MediaEffectFrameEditorColorMappedImage4=new (c('SubscriptionsHandler'))()}j.prototype.$MediaEffectFrameEditorColorMappedImage10=function k(){return c('regeneratorRuntime').async(function l(m){while(1)switch(m.prev=m.next){case 0:if(this.$MediaEffectFrameEditorColorMappedImage2){m.next=2;break}return m.abrupt('return');case 2:if(this.props.imageURI){m.next=4;break}return m.abrupt('return');case 4:if(this.props.highlightComponent){this.$MediaEffectFrameEditorColorMappedImage6=new (c('MediaEffectImageTransmogrifier').HighlightTransform)(this.props.imageURI,true,this.props.sourcePalette,this.props.highlightComponent,this.$MediaEffectFrameEditorColorMappedImage1,this.$MediaEffectFrameEditorColorMappedImage2,this.$MediaEffectFrameEditorColorMappedImage3,this.$MediaEffectFrameEditorColorMappedImage5)}else if(this.props.transformPalette){this.$MediaEffectFrameEditorColorMappedImage6=new (c('MediaEffectImageTransmogrifier').ColorTransform)(this.props.imageURI,true,this.props.sourcePalette,this.props.transformPalette,this.$MediaEffectFrameEditorColorMappedImage1,this.$MediaEffectFrameEditorColorMappedImage2,this.$MediaEffectFrameEditorColorMappedImage3,this.$MediaEffectFrameEditorColorMappedImage5)}else this.$MediaEffectFrameEditorColorMappedImage6=null;if(this.$MediaEffectFrameEditorColorMappedImage6)this.$MediaEffectFrameEditorColorMappedImage6.execute().then(function(n){if(n&&n===this.$MediaEffectFrameEditorColorMappedImage6){this.$MediaEffectFrameEditorColorMappedImage3=n.glContext;this.$MediaEffectFrameEditorColorMappedImage1=n.image;this.$MediaEffectFrameEditorColorMappedImage5=n.shaderProgram}}.bind(this))['catch'](function(n){});case 6:case 'end':return m.stop();}},null,this)};j.prototype.render=function(){this.$MediaEffectFrameEditorColorMappedImage10();return c('React').createElement('canvas',{ref:this.$MediaEffectFrameEditorColorMappedImage7,style:{width:this.props.size.x,height:this.props.size.y}})};f.exports=j}),null);
__d('MediaEffectFrameEditorPixelCanvas.react',['cx','regeneratorRuntime','Image.react','MediaEffectFrameEditorColorMappedImage.react','MediaEffectFrameRenderer','React','ReactDOM','ResponsiveBlock.react','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MediaEffectFrameEditorPixelCanvas4=false;this.$MediaEffectFrameEditorPixelCanvas6=function(event){var m=this.state,n=m.imageURI,o=m.size,p=this.$MediaEffectFrameEditorPixelCanvas2;if(event.button!==0||!n||!o||!p)return;if(this.props.onSamplingStart&&!event.shiftKey)this.props.onSamplingStart();var q=document.createElement('canvas');q.width=o.x*window.devicePixelRatio;q.height=o.y*window.devicePixelRatio;var r=new Image(),s=q.getContext('2d');if(!s)throw new Error('Cannot get rendering context');this.$MediaEffectFrameEditorPixelCanvas1=s;this.$MediaEffectFrameEditorPixelCanvas4=true;var t=p.getBoundingClientRect(),u=(event.clientX-t.left)*window.devicePixelRatio,v=(event.clientY-t.top)*window.devicePixelRatio;r.onload=function(){s.drawImage(r,0,0);var w=s.getImageData(u,v,1,1),x=w.data;if(this.props.onAddSample)this.props.onAddSample([x[0],x[1],x[2],x[3]]);}.bind(this);r.src=n}.bind(this);this.$MediaEffectFrameEditorPixelCanvas7=function(event){var m=this.$MediaEffectFrameEditorPixelCanvas2,n=this.$MediaEffectFrameEditorPixelCanvas1,o=this.$MediaEffectFrameEditorPixelCanvas4,p=this.props.onAddSample;if(o&&n&&m&&p){var q=m.getBoundingClientRect(),r=(event.clientX-q.left)*window.devicePixelRatio,s=(event.clientY-q.top)*window.devicePixelRatio,t=n.getImageData(r,s,1,1),u=t.data;p([u[0],u[1],u[2],u[3]])}}.bind(this);this.$MediaEffectFrameEditorPixelCanvas8=function(event){if(!this.$MediaEffectFrameEditorPixelCanvas4||event.button!==0)return;this.$MediaEffectFrameEditorPixelCanvas4=false;this.$MediaEffectFrameEditorPixelCanvas1=null}.bind(this);this.$MediaEffectFrameEditorPixelCanvas15=function(m,n){this.setState({size:new (c('Vector'))(m,n)})}.bind(this);this.$MediaEffectFrameEditorPixelCanvas11=function(m){if(m){var n=c('ReactDOM').findDOMNode(m);this.$MediaEffectFrameEditorPixelCanvas2=n instanceof HTMLImageElement?n:null}else this.$MediaEffectFrameEditorPixelCanvas2=null;}.bind(this);this.state={imageURI:null,size:null}}k.prototype.componentDidMount=function(){this.$MediaEffectFrameEditorPixelCanvas3=true};k.prototype.componentWillUnmount=function(){this.$MediaEffectFrameEditorPixelCanvas3=false};k.prototype.setState=function(l){if(this.$MediaEffectFrameEditorPixelCanvas3)j.setState.call(this,l);};k.prototype.$MediaEffectFrameEditorPixelCanvas5=function(event){event.preventDefault()};k.prototype.$MediaEffectFrameEditorPixelCanvas9=function l(){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:if(this.state.size){o.next=2;break}return o.abrupt('return');case 2:o.next=4;return c('regeneratorRuntime').awrap(c('MediaEffectFrameRenderer')(this.props.assets,this.props.assetOrder,this.state.size));case 4:m=o.sent;this.setState({imageURI:m});case 6:case 'end':return o.stop();}},null,this)};k.prototype.$MediaEffectFrameEditorPixelCanvas10=function(){if(!this.state.imageURI||!this.state.size)return null;var l=!!this.props.onAddSample&&!!this.props.onSamplingStart;return c('React').createElement(c('Image.react'),{onDragStart:this.$MediaEffectFrameEditorPixelCanvas5,onMouseDown:l?this.$MediaEffectFrameEditorPixelCanvas6:null,onMouseMove:l?this.$MediaEffectFrameEditorPixelCanvas7:null,onMouseOut:l?this.$MediaEffectFrameEditorPixelCanvas8:null,onMouseUp:l?this.$MediaEffectFrameEditorPixelCanvas8:null,ref:this.$MediaEffectFrameEditorPixelCanvas11,src:this.state.imageURI,style:{width:this.state.size.x,height:this.state.size.y}})};k.prototype.$MediaEffectFrameEditorPixelCanvas12=function(){if(!this.state.imageURI||!this.state.size)return null;return c('React').createElement(c('MediaEffectFrameEditorColorMappedImage.react'),{highlightComponent:this.props.highlightComponent,imageURI:this.state.imageURI,size:this.state.size,sourcePalette:this.props.sourcePalette,transformPalette:this.props.transformPalette})};k.prototype.$MediaEffectFrameEditorPixelCanvas13=function(){return this.$MediaEffectFrameEditorPixelCanvas10()};k.prototype.$MediaEffectFrameEditorPixelCanvas14=function(){if(this.props.transformPalette||this.props.highlightComponent){return this.$MediaEffectFrameEditorPixelCanvas12()}else return this.$MediaEffectFrameEditorPixelCanvas13();};k.prototype.render=function(){this.$MediaEffectFrameEditorPixelCanvas9()['catch'](function(l){});return c('React').createElement(c('ResponsiveBlock.react'),{className:"_3g0j",onResize:this.$MediaEffectFrameEditorPixelCanvas15},c('React').createElement('div',{className:"_3g0k"},c('React').createElement('div',{className:"_24s9"},this.$MediaEffectFrameEditorPixelCanvas14())))};f.exports=k}),null);
__d('MediaEffectFrameEditorPixelCanvasContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorPixelCanvas.react','MediaEffectTemplateDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectTemplateDataStore')]};j.calculateState=function(k,l){var m=c('MediaEffectTemplateDataStore').getFrameData(l.localTemplateID);return {assets:m.assets,assetOrder:m.assetOrder}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectFrameEditorPixelCanvas.react'),k)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectFrameEditorTemplateGrid.react',['cx','ix','Grid.react','MediaEffectMetadataActionCreators','Image.react','React','ScrollableArea.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n=c('Grid.react').GridItem;j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;function o(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$TemplateButton1=function(){c('MediaEffectMetadataActionCreators').applyTemplate(this.props.template)}.bind(this),r}o.prototype.render=function(){var q=this.props.template?this.props.template.previewURL:i("86677");return c('React').createElement('a',{className:"_2w6x"+(this.props.selected?' '+"_2w6_":'')+(' '+"_3-fi")+(!this.props.template?' '+"_2w70":'')+(' '+"_3-fj"),href:'#',onClick:this.$TemplateButton1},c('React').createElement(c('Image.react'),{className:"_2w71",src:q}))};l=babelHelpers.inherits(p,c('React').PureComponent);m=l&&l.prototype;p.prototype.render=function(){var q=98*this.props.rows+6,r=this.props,s=r.activeTemplate,t=r.showNoTemplate,u=r.templates;return c('React').createElement('div',{className:"_2w72"},c('React').createElement(c('ScrollableArea.react'),{height:q},c('React').createElement('div',{className:"_2w73"},c('React').createElement(c('Grid.react'),{cols:2},t?c('React').createElement(n,null,c('React').createElement(o,{selected:s===null})):null,u.toArray().map(function(v){return c('React').createElement(n,{key:v.templateFBID},c('React').createElement(o,{selected:v===s||s&&s.sourceTemplateFBID&&v.templateFBID===s.sourceTemplateFBID,template:v}))})))))};function p(){l.apply(this,arguments)}p.defaultProps={rows:3,showNoTemplate:true};f.exports=p}),null);
__d('MediaEffectColorPaletteWheel.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.render=function(){var o=360*this.props.size,p=Math.max(o,180)-180,q=Math.min(o,180);return c('React').createElement('div',{className:"_3p7c",style:{transform:'rotate('+this.props.offset*360+'deg)'}},c('React').createElement('div',{className:"_3p7f _3p7e"},c('React').createElement('div',{className:"_3p7d",style:{backgroundColor:this.props.color,transform:'translateX(-100%) rotate('+p+'deg)'}})),c('React').createElement('div',{className:"_3p7g _3p7e"},c('React').createElement('div',{className:"_3p7d",style:{backgroundColor:this.props.color,transform:'translateX(-100%) rotate('+q+'deg)'}})))};function m(){i.apply(this,arguments)}k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectColorPaletteWheel1=function(){this.props.onHover&&this.props.onHover(true)}.bind(this),this.$MediaEffectColorPaletteWheel2=function(){this.props.onHover&&this.props.onHover(false)}.bind(this),p}n.prototype.render=function(){var o=this.props.ratio.reduce(function(r,s){return r+s},0),p=this.props.ratio.map(function(r,s){return this.props.ratio.slice(0,s).reduce(function(t,u){return t+u},0)/o}.bind(this)),q=this.props.palette.components.map(function(r,s){return c('React').createElement(m,{color:r.toRGB(),key:s,offset:p[s],size:this.props.ratio[s]/o})}.bind(this));return c('React').createElement('div',{className:"_3p7b",onClick:this.props.onClick,onMouseEnter:this.$MediaEffectColorPaletteWheel1,onMouseLeave:this.$MediaEffectColorPaletteWheel2,role:'presentation',style:{height:this.props.size,width:this.props.size}},q)};n.defaultProps={ratio:[4,3,2,1],size:50};f.exports=n}),null);
__d('MediaEffectFrameEditorTemplatePaletteSelector.react',['cx','MediaEffectColorPaletteWheel.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(t){this.props.onPaletteSelect(t?this.props.palette:null)}.bind(this),p}m.prototype.render=function(){return c('React').createElement('div',{className:"_4xob"},c('React').createElement(c('MediaEffectColorPaletteWheel.react'),{onHover:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;n.prototype.render=function(){return c('React').createElement('div',{className:"_4xob"},this.props.colorPalettes.map(function(o,p){return c('React').createElement(m,{key:p,onPaletteSelect:this.props.onPaletteSelect,palette:o})}.bind(this)))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d('MediaEffectFrameEditorTemplatePaletteSelectorContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorTemplatePaletteSelector.react','MediaEffectTemplateDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectTemplateDataStore')]};j.calculateState=function(k,l,m){return {colorPalettes:c('MediaEffectTemplateDataStore').getState().systemColorPalettes}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectFrameEditorTemplatePaletteSelector.react'),k)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectFrameEditorTemplatePanel.react',['cx','fbt','immutable','MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react','MediaEffectFrameEditorMultiCategoryTemplateSelector.react','MediaEffectFrameEditorTemplateGrid.react','MediaEffectFrameEditorTemplateVariationPicker.react','React','XUIText.react','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('immutable').List;function m(o){var p=o.templates;if(!p||p.size<2||!c('mediaEffectGKCheck')('media_effect_frame_editor_template_variations'))return null;return c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Color Palette")),c('React').createElement(c('MediaEffectFrameEditorTemplateVariationPicker.react'),{activeTemplate:o.activeTemplate,templates:p}))}j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.$MediaEffectFrameEditorTemplatePanel1=function(o,p){if(o===1||p<=5){var q=this.props.categories.reduce(function(t,u){return t.concat(u)},l());return c('React').createElement(c('MediaEffectFrameEditorTemplateGrid.react'),{activeTemplate:this.props.activeTemplate,templates:q})}if(o===2&&this.props.categories.has('Birthdays')&&this.props.categories.get('Birthdays').size>0&&this.props.categories.has('Celebrations')&&this.props.categories.get('Celebrations').size>0){var r=this.props.categories.get('Birthdays'),s=this.props.categories.get('Celebrations');return c('React').createElement(c('MediaEffectFrameEditorBirthdayCelebrationTemplateSelector.react'),{activeTemplate:this.props.activeTemplate,birthdayTemplates:r,celebrationTemplates:s})}return c('React').createElement(c('MediaEffectFrameEditorMultiCategoryTemplateSelector.react'),{activeTemplate:this.props.activeTemplate,categories:this.props.categories})};n.prototype.render=function(){var o=this.props,p=o.activeTemplate,q=o.categories,r=q.count(),s=q.reduce(function(t,u){return t+u.size},0);if(r===0||s===0)return null;return c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Template")),this.$MediaEffectFrameEditorTemplatePanel1(r,s),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(m,{activeTemplate:p,templates:this.props.variations})))};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d('MediaEffectFrameEditorTemplatePanelContainer.react',['FluxContainer','immutable','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorTemplatePanel.react','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')]};k.calculateState=function(l,m){var n=c('MediaEffectReactFrameEditorDataStore').getState(),o=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {activeTemplate:o.getTemplate(n.templateFBID),categories:o.templateCategories.map(function(p){return j(p.map(function(q){return o.templates.get(q)}))}),templates:o.templates,variations:o.getTemplateVariants(n.templateFBID)}};k.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};k.prototype.render=function(){var l=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectFrameEditorTemplatePanel.react'),l)};function k(){h.apply(this,arguments)}k.defaultProps={};f.exports=c('FluxContainer').create(k,{withProps:true})}),null);
__d('MediaEffectFrameEditorTemplateVariationPicker.react',['cx','Grid.react','MediaEffectMetadataActionCreators','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Grid.react').GridItem;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MediaEffectFrameEditorTemplateVariationPicker1=function(r){return function(){return c('MediaEffectMetadataActionCreators').applyTemplate(r)}},n}l.prototype.render=function(){return c('React').createElement(c('Grid.react'),{cols:5},this.props.templates.map(function(m){return c('React').createElement(k,{key:m.templateFBID},c('React').createElement('a',{className:"_18pf"+(' '+"_2w6x")+(m===this.props.activeTemplate?' '+"_2w6_":'')+(' '+"_zjf"),href:'#',onClick:this.$MediaEffectFrameEditorTemplateVariationPicker1(m),style:{backgroundColor:m.getColor()}}))}.bind(this)))};f.exports=l}),null);
__d("AssetHorizontalAlignmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LEFT:"left",RIGHT:"right",CENTER:"center"})}),null);
__d('MediaEffectFrameEditorCardTab.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement('div',null,this.props.children)};function j(){h.apply(this,arguments)}j.defaultProps={activeHeader:null};f.exports=j}),null);
__d('MediaEffectFrameEditorTabbedCard.react',['cx','Grid.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=c('Grid.react').GridItem;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$TabHeader1=function(){this.props.onItemClick(this.props.index)}.bind(this),q}n.prototype.render=function(){return c('React').createElement('a',{href:'#',onClick:this.$TabHeader1},c('React').createElement('div',{className:"_zn2"+(this.props.active?' '+"_zn4":'')},this.props.active?this.props.activeContent||this.props.content:this.props.content))};k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.$MediaEffectFrameEditorTabbedCard1=function(q){this.setState({activeTabIndex:q})}.bind(this);this.state={activeTabIndex:null}}o.prototype.render=function(){var p=this.props.children,q=c('React').Children.map(p.filter(function(s){return !!s}),function(s,t){return c('React').createElement(m,null,c('React').createElement(n,{active:t===this.state.activeTabIndex,activeContent:s.props.activeHeader,content:s.props.header,index:t,onItemClick:this.$MediaEffectFrameEditorTabbedCard1}))}.bind(this)),r=c('React').Children.map(p.filter(function(s){return !!s}),function(s,t){return c('React').createElement('div',{className:(t===this.state.activeTabIndex?"_zn4":'')+(t!==this.state.activeTabIndex?' '+"_zn8":'')},s)}.bind(this));return c('React').createElement('div',{className:"_zn9",onMouseDown:this.props.onMouseDown},c('React').createElement(c('Grid.react'),{cols:q.length,style:{margin:'auto'}},q),r)};f.exports=o}),null);
__d('MediaEffectFrameEditorTextPropertiesDialog.react',['cx','ix','AssetHorizontalAlignmentType','Grid.react','Image.react','MediaEffectEditorFunnelLogger','MediaEffectFrameEditorCardTab.react','MediaEffectFrameEditorTabbedCard.react','MediaEffectMetadataActionCreators','React','XUIContextualDialog.react','color-picker','immutable'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n,o,p=c('Grid.react').GridItem,q=c('immutable').Set,r=i("86665"),s=i("86667"),t=i("86669"),u=i("86666"),v=i("86668"),w=i("86670"),x=i("86671"),y=i("86672"),z=[c('AssetHorizontalAlignmentType').LEFT,c('AssetHorizontalAlignmentType').CENTER,c('AssetHorizontalAlignmentType').RIGHT];j=babelHelpers.inherits(aa,c('React').PureComponent);k=j&&j.prototype;function aa(){var da,ea;for(var fa=arguments.length,ga=Array(fa),ha=0;ha<fa;ha++)ga[ha]=arguments[ha];return ea=(da=k.constructor).call.apply(da,[this].concat(ga)),this.$AlignmentItem1=function(){this.props.onChange(this.props.value)}.bind(this),ea}aa.prototype.render=function(){return c('React').createElement('a',{href:'#',onClick:this.$AlignmentItem1},this.props.children)};l=babelHelpers.inherits(ba,c('React').PureComponent);m=l&&l.prototype;function ba(){var da,ea;for(var fa=arguments.length,ga=Array(fa),ha=0;ha<fa;ha++)ga[ha]=arguments[ha];return ea=(da=m.constructor).call.apply(da,[this].concat(ga)),this.$FontMenuItem1=function(){this.props.onChange(this.props.font)}.bind(this),ea}ba.prototype.render=function(){return c('React').createElement('div',{onClick:this.$FontMenuItem1,role:'menuitem',tabIndex:'0'},c('React').createElement('div',{className:"_1jhm"},c('React').createElement('div',{className:"_1jhn"},this.props.isSelected?'\u2713':null),c('React').createElement('span',{style:{fontFamily:this.props.font.getFontFamily()}},this.props.font.getName())))};n=babelHelpers.inherits(ca,c('React').PureComponent);o=n&&n.prototype;function ca(da){o.constructor.call(this,da);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog4=function(ea){c('MediaEffectMetadataActionCreators').updateTextFonts(q([this.props.localAssetID]),ea)}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog3=function(ea){var fa=this.props.assetData.font.getID()===ea.getID();return c('React').createElement(p,{key:ea.getID()},c('React').createElement(ba,{font:ea,isSelected:fa,onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog4}))}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7=function(ea){c('MediaEffectMetadataActionCreators').updateTextAlignments(q([this.props.localAssetID]),ea)}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog10=function(ea){c('MediaEffectMetadataActionCreators').updateTextColors(q([this.props.localAssetID]),ea);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=ea}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9=function(){if(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1){c('MediaEffectEditorFunnelLogger').logChangeTextColor(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=null}}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog11=function(){return this.props.context}.bind(this);this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog1=null}ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog2=function(){return c('React').createElement(c('MediaEffectFrameEditorCardTab.react'),{activeHeader:c('React').createElement('div',{className:"_1jhq"},c('React').createElement(c('Image.react'),{className:"_1jhr",src:y})),header:c('React').createElement('div',{className:"_1jhq"},c('React').createElement(c('Image.react'),{className:"_1jhr",src:x})),key:'fonts'},c('React').createElement(c('Grid.react'),{alignh:'left',alignv:'middle',cols:1,width:'100%'},this.props.fonts.map(this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog3)))};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog5=function(){if(!this.props.assetData.isDynamicText())return null;return c('React').createElement(c('MediaEffectFrameEditorCardTab.react'),{activeHeader:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6(this.props.assetData.textHorizontalAlignment,true),header:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6(this.props.assetData.textHorizontalAlignment,false),key:'alignment'},c('React').createElement(c('Grid.react'),{alignh:'center',alignv:'middle',cols:z.length,style:{margin:'auto'}},z.map(function(da){return c('React').createElement(p,{key:da},c('React').createElement(aa,{onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog7,value:da},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6(da,da===this.props.assetData.textHorizontalAlignment)))}.bind(this))))};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog6=function(da,ea){return c('React').createElement('div',{className:"_1jhq"},c('React').createElement(c('Image.react'),{className:"_1jhr",src:{center:ea?u:r,left:ea?v:s,right:ea?w:t}[da]}))};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog8=function(){return c('React').createElement(c('MediaEffectFrameEditorCardTab.react'),{header:c('React').createElement('div',{className:"_1jhq"},c('React').createElement('div',{className:"_1jhs"},c('React').createElement('div',{className:"_1jht",style:{backgroundColor:this.props.assetData.color}})))},c('React').createElement('div',{className:"_1jhu",onMouseLeave:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9,onMouseUp:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog9},c('React').createElement(c('color-picker'),{className:"_1jhv",color:this.props.assetData.color,onChange:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog10})))};ca.prototype.$MediaEffectReactFrameEditorTextAssetPropertiesDialog12=function(da){da.preventDefault()};ca.prototype.render=function(){return c('React').createElement('div',{className:"_1jhw"},c('React').createElement(c('XUIContextualDialog.react'),{alignment:'center',autoFocus:false,contextRef:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog11,key:'contextualDialog',position:'below',shown:this.props.shown,width:c('XUIContextualDialog.react').WIDTH.NORMAL},c('React').createElement(c('MediaEffectFrameEditorTabbedCard.react'),{onMouseDown:this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog12},this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog2(),this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog5(),this.$MediaEffectReactFrameEditorTextAssetPropertiesDialog8())))};f.exports=ca}),null);
__d('MediaEffectFrameEditorTextPropertiesDialogContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorTextPropertiesDialog.react','MediaEffectReactFrameEditorCanvasDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorCanvasDataStore')]};j.calculateState=function(k,l){return {fonts:c('MediaEffectReactFrameEditorCanvasDataStore').getFonts()}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectFrameEditorTextPropertiesDialog.react'),k)};function j(){h.apply(this,arguments)}j.defaultProps={};f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectFramePreviewTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({PORTRAIT:'',LANDSCAPE:'',PROFILE:''});f.exports=h}),null);
__d('MediaEffectFramePreviewConfigs',['fbt','MediaEffectFramePreviewTypes'],(function a(b,c,d,e,f,g,h){'use strict';var i,j=288,k=512,l=104,m=(i={},i[c('MediaEffectFramePreviewTypes').PORTRAIT]={label:h._("Portrait"),size:{previewHeight:k,previewWidth:j}},i[c('MediaEffectFramePreviewTypes').PROFILE]={label:h._("Profile"),size:{previewHeight:l,previewWidth:l}},i[c('MediaEffectFramePreviewTypes').LANDSCAPE]={label:h._("Landscape"),size:{previewHeight:j,previewWidth:k}},i);f.exports=m}),null);
__d('MediaEffectFramePhonePreview.react',['cx','Image.react','MediaEffectFramePreviewConfigs','MediaEffectFramePreviewTypes','MediaEffectReactFrameEditorPreviewCanvas.react','React','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=361,l=643,m=811,n=400,o=m/l,p=n/k,q=n/k,r=m/l;i=babelHelpers.inherits(s,c('React').PureComponent);j=i&&i.prototype;s.prototype.$MediaEffectFramePhonePreview1=function(){var t=this.props,u=t.previewWidth,v=t.previewHeight;if(u===v){return c('MediaEffectFramePreviewTypes').PROFILE}else if(u>v){return c('MediaEffectFramePreviewTypes').LANDSCAPE}else return c('MediaEffectFramePreviewTypes').PORTRAIT;};s.prototype.render=function(){var t=this.props,u=t.previewWidth,v=t.previewHeight;if(u===v){u=c('MediaEffectFramePreviewConfigs')[c('MediaEffectFramePreviewTypes').PORTRAIT].size.previewWidth;v=c('MediaEffectFramePreviewConfigs')[c('MediaEffectFramePreviewTypes').PORTRAIT].size.previewHeight}var w=v>u,x=w?q:o,y=w?r:p,z=this.props.previewImage;if(!z)switch(this.$MediaEffectFramePhonePreview1()){case c('MediaEffectFramePreviewTypes').PORTRAIT:z='/images/media_effect/frame_preview/phone_portrait.png';break;case c('MediaEffectFramePreviewTypes').LANDSCAPE:z='/images/media_effect/frame_preview/phone_landscape.png';break;case c('MediaEffectFramePreviewTypes').PROFILE:z='/images/media_effect/frame_preview/phone_profile.png';break;}return c('React').createElement('div',{className:"_3076",style:{height:v*y,width:u*x}},c('React').createElement('div',{className:(w?"_5znd":'')+(!w?' '+"_5znl":'')},c('React').createElement('div',{className:this.$MediaEffectFramePhonePreview1()===c('MediaEffectFramePreviewTypes').PROFILE?"_60qj":''},c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvas.react'),{assetOrder:this.props.assetOrder,assets:this.props.assets,backgroundColor:this.props.backgroundColor,backgroundImage:this.props.backgroundImage,previewSize:new (c('Vector'))(this.props.previewWidth,this.props.previewHeight),videoSourceID:this.props.videoSourceID}))),c('React').createElement(c('Image.react'),{className:"_43y6",height:v*y,src:z,width:u*x}))};function s(){i.apply(this,arguments)}f.exports=s}),null);
__d('MediaEffectFramePhonePreviewContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectFramePhonePreview.react','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.calculateState=function(){var k=c('MediaEffectReactFrameEditorDataStore').getState(),l=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {assets:k.assets,assetOrder:k.assetOrder,backgroundColor:l.backgroundColor,backgroundImage:l.backgroundImage}};j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')]};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c('React').createElement(c('MediaEffectFramePhonePreview.react'),{assetOrder:this.state.assetOrder,assets:this.state.assets,backgroundColor:this.state.backgroundColor,backgroundImage:this.state.backgroundImage,previewHeight:this.props.previewHeight,previewImage:this.props.previewImage,previewWidth:this.props.previewWidth,videoSourceID:this.props.videoSourceID})};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectFrameRenderer',['Promise','regeneratorRuntime','MediaEffectReactFrameEditorImageAssetRecord','Vector'],(function a(b,c,d,e,f,g){'use strict';var h=800;function i(p){var q=new Image();q.crossOrigin='anonymous';q.src=p;var r=new (c('Promise'))(function(s,t){q.onload=function(){return s(q)}});return r}function j(p,q,r,s){var t,u,v,w;return c('regeneratorRuntime').async(function x(y){while(1)switch(y.prev=y.next){case 0:y.next=2;return c('regeneratorRuntime').awrap(i(s.getURI()));case 2:t=y.sent;u=s.assetSize;if(u){y.next=6;break}throw new Error('Asset size not set',s);case 6:if(!u.isValid())u=u.set('aspect_ratio',t.width/t.height);if(u.isValid()){y.next=9;break}throw new Error('Asset size not valid',s);case 9:v=u.toAbsolute(r);w=s.position.toAbsolute(r,v);q.drawImage(t,w.getLeft(),w.getTop(),w.getWidth(),w.getHeight());case 12:case 'end':return y.stop();}},null,this)}function k(p,q,r,s){var t,u,v,w,x,y;return c('regeneratorRuntime').async(function z(aa){while(1)switch(aa.prev=aa.next){case 0:t=s.assetSize;if(t){aa.next=3;break}throw new Error('Asset size not set',s);case 3:if(t.isValid()){aa.next=5;break}throw new Error('Asset size not valid',s);case 5:u=t.toAbsolute(r);v=s.position.toAbsolute(r,u);w=v.getHeight()+'px';x=s.font.getFontFamily();q.font=w+' '+x;q.fillStyle=s.color;q.textAlign=s.textHorizontalAlignment;y=r.x/2;aa.t0=s.textHorizontalAlignment;aa.next=aa.t0==='left'?16:aa.t0==='center'?18:aa.t0==='right'?20:22;break;case 16:y=v.getLeft();return aa.abrupt('break',22);case 18:y=v.getCenter().x;return aa.abrupt('break',22);case 20:y=v.getRight();return aa.abrupt('break',22);case 22:q.fillText(s.content,y,v.getBottom(),v.getWidth());case 23:case 'end':return aa.stop();}},null,this)}function l(p,q,r,s){return c('regeneratorRuntime').async(function t(u){while(1)switch(u.prev=u.next){case 0:if(!(s instanceof c('MediaEffectReactFrameEditorImageAssetRecord'))){u.next=5;break}u.next=3;return c('regeneratorRuntime').awrap(j(p,q,r,s));case 3:u.next=7;break;case 5:u.next=7;return c('regeneratorRuntime').awrap(k(p,q,r,s));case 7:case 'end':return u.stop();}},null,this)}function m(p,q,r){var s,t,u;return c('regeneratorRuntime').async(function v(w){while(1)switch(w.prev=w.next){case 0:s=q.map(function(x){return p.get(x)});t=document.createElement('canvas');t.width=r.x;t.height=r.y;u=t.getContext('2d',{premultipliedAlpha:true});if(u){w.next=7;break}throw new Error('Cannot get rendering context');case 7:w.next=9;return c('regeneratorRuntime').awrap(c('Promise').all(s.map(function(x){return l(t,u,r,x)}).toArray()));case 9:return w.abrupt('return',t);case 10:case 'end':return w.stop();}},null,this)}function n(p,q,r){var s,t,u,v,w,x,y,z,aa,ba;return c('regeneratorRuntime').async(function ca(da){while(1)switch(da.prev=da.next){case 0:s=Math.min(r.y,h);t=r.y!==0?s*r.x/r.y:r.x;u=s;v=t*u;da.next=6;return c('regeneratorRuntime').awrap(m(p,q,new (c('Vector'))(t,u)));case 6:w=da.sent;x=w.getContext('2d');if(x){da.next=10;break}throw new Error('Cannot get rendering context');case 10:y=x.getImageData(0,0,t,u);z=y.data;aa=0;for(ba=3;ba<z.length;ba+=4)aa+=z[ba];return da.abrupt('return',aa/(255*v));case 15:case 'end':return da.stop();}},null,this)}function o(p,q,r){var s;return c('regeneratorRuntime').async(function t(u){while(1)switch(u.prev=u.next){case 0:u.next=2;return c('regeneratorRuntime').awrap(m(p,q,r.mul(window.devicePixelRatio)));case 2:s=u.sent;return u.abrupt('return',s.toDataURL());case 4:case 'end':return u.stop();}},null,this)}o.percentageCovered=n;f.exports=o}),null);
__d('MediaEffectWarnings.react',['cx','List.react','React','XUICard.react','XUICardSection.react','XUINotice.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.message,o=m.items,p=m.use,q=o&&o.length>0?c('React').createElement(c('List.react'),{className:"_45qz"},o.map(function(r,s){return c('React').createElement('li',{key:s},r.trim())})):null;return c('React').createElement(c('XUICard.react'),{className:c('joinClasses')(this.props.className,"_2ex6 _3-8x _190n")},c('React').createElement(c('XUICardSection.react'),{background:'transparent',className:"_190n",style:{borderTop:'none'}},c('React').createElement(c('XUINotice.react'),{use:p||'warn'},n,q)))};function l(){i.apply(this,arguments)}l.propTypes={message:k.any,items:k.array,className:k.string};f.exports=l}),null);
__d('MediaEffectRejectedReviewResult.react',['cx','fbt','MediaEffectWarnings.react','React','Link.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Your frame wasn't approved because it doesn't meet the Camera Effects Platform {terms} and {policies}",[i.param('terms',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_terms',target:'_blank'},i._("terms"))),i.param('policies',c('React').createElement(c('Link.react'),{href:'/legal/camera_effects_platform_policies',target:'_blank'},i._("policies.")))]);return c('React').createElement(c('MediaEffectWarnings.react'),{className:"_21ks",items:this.props.reasons,message:n})};function m(){j.apply(this,arguments)}m.propTypes={reasons:l.array};f.exports=m}),null);
__d('MediaEffectFullscreenFrameEditor.react',['cx','ix','Image.react','MediaEffectFullscreenFrameEditorControls.react','MediaEffectFullscreenFrameEditorPreviewPanelContainer.react','MediaEffectMetadataActionCreators','MediaEffectQEUtils','MediaEffectReactFrameEditorCanvasContainer.react','MediaEffectRejectedReviewResult.react','React','Vector'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.$MediaEffectFullscreenFrameEditor1=function(m){var n=m.files;if(n)for(var o=0;o<n.length;o++){var p=n.item(o);p&&c('MediaEffectMetadataActionCreators').addImage(p)}m.value=''};l.prototype.$MediaEffectFullscreenFrameEditor2=function(){navigator.getUserMedia&&navigator.getUserMedia({video:true},function(m){return c('MediaEffectMetadataActionCreators').startCamera(window.URL.createObjectURL(m))},function(m){return false})};l.prototype.$MediaEffectFullscreenFrameEditor3=function(){var m=this.props.rejectReasons;if(m&&m.length!==0)return c('React').createElement(c('MediaEffectRejectedReviewResult.react'),{reasons:m});return null};l.prototype.render=function(){return c('React').createElement('div',{className:"_1skh"},c('React').createElement('div',null,c('React').createElement(c('MediaEffectFullscreenFrameEditorControls.react'),{assetNum:this.props.assetNum,cameraEnabled:this.props.cameraEnabled,cameraPaused:this.props.cameraPaused,canvasBgColor:this.props.canvasBgColor,context:this.props.context,filterID:this.props.filterID,filtersData:this.props.filtersData,flowType:this.props.flowType,fontColor:this.props.fontColor,frameData:this.props.frameData,isFrameValid:this.props.isFrameValid,isValidating:this.props.isValidating,loading:this.props.loading,selectedTextIDs:this.props.selectedTextIDs}),this.$MediaEffectFullscreenFrameEditor3()),c('React').createElement('div',{className:"_2yvx"},c('React').createElement(c('MediaEffectReactFrameEditorCanvasContainer.react'),{bootstrapData:this.props.frameData,enableEditorFreeText:this.props.context.enableEditorFreeText,enableFontSettingsDialog:this.props.context.enableFontSettingsDialog,includesPhoneFrame:c('MediaEffectQEUtils').shouldDefaultToPortrait(this.props.flowType),showTitle:false})),c('React').createElement('div',{className:"_1skk"},c('React').createElement(c('MediaEffectFullscreenFrameEditorPreviewPanelContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(400,225)})),c('React').createElement('div',{className:"_zn8"},c('React').createElement(c('Image.react'),{src:i("86663")}),c('React').createElement(c('Image.react'),{src:i("86664")})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectFullscreenFrameEditorContainer.react',['FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFullscreenFrameEditor.react','MediaEffectMetadataStore','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMetadataStore'),c('MediaEffectReactFrameEditorCanvasDataStore'),c('MediaEffectReactFrameEditorDataStore')]};j.calculateState=function(k,l){var m=c('MediaEffectReactFrameEditorDataStore').getState(),n=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),o=c('MediaEffectFrameCreateDialogDataStore').getState(),p=o.flowType,q=n.selectedAssets.filter(function(s){return m.assets.get(s).assetType()==='MediaEffectReactFrameEditorTextAssetRecord'}),r=m.assets.some(function(s){return s.assetType()==='MediaEffectReactFrameEditorImageAssetRecord'&&!s.stickerFBID});return {canvasBgColor:n.backgroundColor,filterID:m.filterID,flowType:p,fontColor:q.size>0?m.assets.get(q.first()).color:'#ffffff',loading:r,selectedTextIDs:q,cameraEnabled:n.cameraSource!=null,cameraPaused:n.cameraPaused,isFrameValid:c('MediaEffectReactFrameEditorDataStore').isValidForSubmit(),isValidating:c('MediaEffectFrameCreateDialogDataStore').isValidating(),rejectReasons:c('MediaEffectMetadataStore').getState().get('rejectReasons'),assetNum:m.assets.size}};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectFullscreenFrameEditor.react'),k)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectFullscreenFrameEditorControls.react',['cx','fbt','ix','FileInput.react','FrameEditorSupportedGeneratedText','Image.react','MediaEffectFlowType','MediaEffectFrameEditorTemplatePanelContainer.react','MediaEffectMetadataActionCreators','MediaEffectUserContext','PopoverMenu.react','React','ReactXUIMenu','XUIError.react','XUIContextualDialog.react','XUIContextualDialogTitle.react','XUIContextualDialogBody.react','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('ReactXUIMenu').Item;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$MediaEffectFullscreenFrameEditorControls3=function(p){var q=p.target;if(q instanceof HTMLInputElement)this.$MediaEffectFullscreenFrameEditorControls4(q);}.bind(this);this.state={uploadArtTooltipShown:false}}n.prototype.$MediaEffectFullscreenFrameEditorControls1=function(){return c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$MediaEffectFullscreenFrameEditorControls2},this.props.context.enableEditorFreeText?c('React').createElement(m,{key:'freetext',value:null},'Free text'):null,Object.keys(c('FrameEditorSupportedGeneratedText')).map(function(o){return c('React').createElement(m,{key:o,value:o},c('FrameEditorSupportedGeneratedText')[o])}))};n.prototype.$MediaEffectFullscreenFrameEditorControls2=function(o,p){c('MediaEffectMetadataActionCreators').addText(p.item.getValue())};n.prototype.$MediaEffectFullscreenFrameEditorControls4=function(o){var p=o.files;if(p)for(var q=0;q<p.length;q++){var r=p.item(q);r&&c('MediaEffectMetadataActionCreators').addImage(r)}o.value=''};n.prototype.$MediaEffectFullscreenFrameEditorControls5=function(){navigator.getUserMedia&&navigator.getUserMedia({video:true},function(o){return c('MediaEffectMetadataActionCreators').startCamera(window.URL.createObjectURL(o))},function(o){return false})};n.prototype.$MediaEffectFullscreenFrameEditorControls6=function(){if(this.props.isValidating&&this.props.assetNum===0)if(this.props.context.enableEditorFreeText){return i._("Please insert some text or an art asset to continue")}else return i._("Please insert an art asset to continue");return null};n.prototype.$MediaEffectFullscreenFrameEditorControls7=function(){c('MediaEffectMetadataActionCreators').addText(null,null,null)};n.prototype.$MediaEffectFullscreenFrameEditorControls8=function(){var o=c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.uploadArtButton}.bind(this),hideOnBlur:true,hoverShowDelay:1000,hoverContextRef:function(){return this.uploadArtButton}.bind(this),position:'right',shown:this.state.uploadArtTooltipShown,width:c('XUIContextualDialog.react').WIDTH.NORMAL},c('React').createElement(c('XUIContextualDialogTitle.react'),null,i._("Upload Art")),c('React').createElement(c('XUIContextualDialogBody.react'),null,i._("Upload PNGs with a transparent background. You can upload multiple PNGs at a time.")));return c('React').createElement(c('FileInput.react'),{accept:'image/x-png, image/jpeg, image/png',multiple:true,onChange:this.$MediaEffectFullscreenFrameEditorControls3,onMouseEnter:function(){this.setState({uploadArtTooltipShown:true})}.bind(this),onMouseLeave:function(){this.setState({uploadArtTooltipShown:false})}.bind(this)},c('React').createElement('a',{className:"_2w6x _3-fi _3-fj",href:'#'},c('React').createElement(c('Image.react'),{className:"_3-8x",height:'44',src:j("86673"),width:'44'}),c('React').createElement('div',{ref:function(p){this.uploadArtButton=p}.bind(this)}),o,c('React').createElement('div',null,i._("Upload Art"))))};n.prototype.$MediaEffectFullscreenFrameEditorControls9=function(){return c('React').createElement('a',{className:"_2w6x _3-fi _3-fj",href:'#',onClick:this.$MediaEffectFullscreenFrameEditorControls7},c('React').createElement(c('Image.react'),{className:"_3-8x",height:'44',src:j("86675"),width:'44'}),c('React').createElement('div',null,i._("Insert Text")))};n.prototype.$MediaEffectFullscreenFrameEditorControls10=function(){return c('React').createElement(c('PopoverMenu.react'),{alignv:'middle',menu:this.$MediaEffectFullscreenFrameEditorControls1()},c('React').createElement('a',{className:"_2w6x _3-fi _3-fj",href:'#'},c('React').createElement(c('Image.react'),{className:"_3-8x",height:'44',src:j("86675"),width:'44'}),c('React').createElement('div',null,'Text')))};n.prototype.$MediaEffectFullscreenFrameEditorControls11=function(){return c('MediaEffectUserContext').includesFBOnly?this.$MediaEffectFullscreenFrameEditorControls10():this.$MediaEffectFullscreenFrameEditorControls9()};n.prototype.render=function(){var o=c('mediaEffectGKCheck')('media_effect_template')&&this.props.flowType!==c('MediaEffectFlowType').EVENT&&this.props.flowType!==c('MediaEffectFlowType').TEMPLATE,p=this.$MediaEffectFullscreenFrameEditorControls6();return c('React').createElement('div',{className:"_2j1s"},c('React').createElement(c('XUIError.react'),{xuiError:p},c('React').createElement('div',{className:!!p?"_3gvu":''},c('React').createElement('div',{className:"_1pbz _3-96"},this.$MediaEffectFullscreenFrameEditorControls8(),this.props.context.enableEditorFreeText||c('MediaEffectUserContext').includesFBOnly?this.$MediaEffectFullscreenFrameEditorControls11():null),o?c('React').createElement(c('MediaEffectFrameEditorTemplatePanelContainer.react'),null):null)))};f.exports=n}),null);
__d('MediaEffectFullscreenFrameEditorPreviewPanel.react',['ix','cx','fbt','Image.react','MediaEffectQEUtils','MediaEffectReactFrameEditorPreviewContainer.react','React','Vector','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogTitle.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.state={showPreviewFormatTooltip:false}}m.prototype.render=function(){var n=this.props.portraitCanvasWidth/this.props.popoverPortraitCanvasWidth,o=c('React').createElement('div',{className:"_3-8z"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:n,previewSize:new (c('Vector'))(this.props.popoverPortraitCanvasWidth,this.props.popoverPortraitCanvasHeight)})),p=c('React').createElement('div',{className:"_3-8z"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:n,previewSize:new (c('Vector'))(this.props.popoverPortraitCanvasWidth,this.props.popoverPortraitCanvasWidth)})),q=c('React').createElement('div',{className:"_3-8z"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:n,previewSize:new (c('Vector'))(this.props.popoverPortraitCanvasHeight,this.props.popoverPortraitCanvasWidth)})),r=c('React').createElement(c('Image.react'),{src:h("126340")}),s=c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.previewFormatsTitle}.bind(this),hideOnBlur:true,hoverContextRef:function(){return this.previewFormatsTitle}.bind(this),hoverShowDelay:1000,position:'left',shown:this.state.showPreviewFormatTooltip,width:c('XUIContextualDialog.react').WIDTH.NORMAL},c('React').createElement(c('XUIContextualDialogTitle.react'),null,j._("Preview Formats")),c('React').createElement(c('XUIContextualDialogBody.react'),null,j._("Your art will automatically be positioned to work on different photo and video orientations."))),t=null;if(this.props.previewConfig.showLandscape)t=c('MediaEffectQEUtils').shouldHideLandscapePreview()?null:q;return c('React').createElement('div',null,c('React').createElement('div',{onMouseEnter:function(){this.setState({showPreviewFormatTooltip:true})}.bind(this),onMouseLeave:function(){this.setState({showPreviewFormatTooltip:false})}.bind(this)},c('React').createElement('span',{className:"_202m"},j._("Preview Formats")),r),c('React').createElement('div',{ref:function(u){this.previewFormatsTitle=u}.bind(this)}),s,this.props.previewConfig.showPortrait&&o,this.props.previewConfig.showProfile&&p,t)};f.exports=m}),null);
__d('MediaEffectFullscreenFrameEditorPreviewPanelContainer.react',['FluxContainer','MediaEffectFlowType','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameEditorDispatcher','MediaEffectFullscreenFrameEditorPreviewPanel.react','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore'),c('MediaEffectFrameCreateDialogDataStore')]};j.calculateState=function(k){var l=c('MediaEffectReactFrameEditorDataStore').getState(),m=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),n=c('MediaEffectFrameCreateDialogDataStore').getState(),o=n.screenWidth,p=n.dialogHeight,q=c('MediaEffectFullscreenFrameEditorSizingUtils').getPortraitPreviewHeight(o,p),r=9/16*q,s=c('MediaEffectFullscreenFrameEditorSizingUtils').getPortraitFullPreviewHeight(o,p),t=9/16*s,u=c('MediaEffectFrameCreateDialogDataStore').getState().flowType;return {assets:l.assets,assetOrder:l.assetOrder,backgroundColor:m.backgroundColor,backgroundImage:m.backgroundImage,cameraEnabled:m.cameraSource!=null,portraitCanvasWidth:r,portraitCanvasHeight:q,popoverPortraitCanvasWidth:t,popoverPortraitCanvasHeight:s,previewConfig:{showLandscape:u!==c('MediaEffectFlowType').LIVE_TEMPLATE,showProfile:u!==c('MediaEffectFlowType').LIVE_TEMPLATE,showPortrait:true}}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectFullscreenFrameEditorPreviewPanel.react'),k)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d("XDeveloperPlatformPolicyController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/policy\/{?path1}\/",{path1:{type:"String"},locale:{type:"String"}})}),null);
__d("XMediaEffectARStudioDownloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/arstudio\/download\/",{})}),null);
__d('MediaEffectHubARStudioDialog.react',['cx','fbt','Image.react','MediaEffectHubLearnStringsV2','React','SUIButton.react','SUILink.react','SUIMediaEffectTheme','SUIModalDEPRECATED.react','SUIThemeContainer.react','URI','XDeveloperPlatformPolicyController','XMediaEffectARStudioDownloadController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.getDialogFooter=function(){var m=c('XDeveloperPlatformPolicyController').getURIBuilder().getURI().setSubdomain('developers'),n=c('XMediaEffectARStudioDownloadController').getURIBuilder().getURI().setSubdomain('www'),o=new (c('URI'))('/legal/ar_studio_terms').setSubdomain('www').toString();return c('React').createElement('div',{className:"_3j66"},c('React').createElement('div',null,i._("By clicking \"Download\" you agree to the {link to platform policy} and the AR Studio {link to AR Studio Terms}",[i.param('link to platform policy',c('React').createElement(c('SUILink.react'),{href:m,target:'_blank'},i._("Facebook Platform Policy"))),i.param('link to AR Studio Terms',c('React').createElement(c('SUILink.react'),{href:o,target:'_blank'},i._("Terms")))])),c('React').createElement('div',{className:"_2x7l"},c('React').createElement(c('SUIButton.react'),{href:n,label:i._("Download"),onClick:this.props.onClose,target:'_blank',use:'confirm'})))};l.prototype.getDialogHeader=function(){var m=new (c('URI'))('/images/media_effect/learn/AR-Studio-Screenshots.png').setSubdomain('www').toString();return c('React').createElement(c('Image.react'),{className:"_3j67",height:160,src:m,width:200})};l.prototype.getContent=function(){return c('React').createElement('div',{className:"_3j6e"},c('React').createElement('div',{className:"_3j6f"},i._("Download AR Studio")),c('React').createElement('div',{className:"_3j6l"},c('MediaEffectHubLearnStringsV2').StudioBlurb.arStudio))};l.prototype.render=function(){return c('React').createElement(c('SUIThemeContainer.react'),{theme:c('SUIMediaEffectTheme')},c('React').createElement(c('SUIModalDEPRECATED.react'),{footer:this.getDialogFooter(),header:this.getDialogHeader(),onClose:this.props.onClose,width:520},this.getContent()))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("XMediaEffectARFXValidateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/effects\/arfx\/validate\/",{})}),null);
__d('MediaEffectMaskArfxFileSelect.react',['fbt','AsyncUploadRequest','Image.react','MediaEffectFrameEditorDispatcher','MediaEffectMaskFileSelect.react','React','XMediaEffectARFXValidateController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.updateArfxFile=function(event){var m=event.target.files;if(m.length===0)return;var n=m[0];this.setState({isFileTypeValid:this.isFileTypeValid(n)},function(){if(!this.state.isFileTypeValid)return;this.validateVersion(n)}.bind(this))}.bind(this);this.state={isCheckingVersion:false,isFileTypeValid:true,isVersionValid:true,canUploadVersion:'',version:''}}k.prototype.isFileTypeValid=function(l){return l.name.endsWith(this.props.arfxFileType)};k.prototype.validateVersion=function(l){var m=c('XMediaEffectARFXValidateController').getURIBuilder().getURI(),n=new (c('AsyncUploadRequest'))(m).setAllowCrossOrigin(false).setFiles({arfx:[l]}),o=this,p=[n.subscribe('success',function(q,r){var s=r.getResponse().payload;o.setState({isVersionValid:s.canUpload,isCheckingVersion:false,canUploadVersion:s.canUploadVersion,version:s.version},function(){if(!o.state.isVersionValid)return;c('MediaEffectFrameEditorDispatcher').dispatch({type:'arfxFile/selected',payload:{file:l,type:o.props.arfxFileType}})})}),n.subscribe('complete',function(q,r){while(p.length)p.pop().unsubscribe();})];o.setState({isCheckingVersion:true});n.send()};k.prototype.getErrorMessage=function(){var l=this.state,m=l.isFileTypeValid,n=l.isVersionValid,o=l.canUploadVersion,p=l.version;if(!m||this.props.isValidating&&(!this.props.arfxFile||this.props.missingFileForUpload))return h._("Please choose a file of type: {arfx file type}",[h.param('arfx file type',this.props.arfxFileType)]);if(!n)return h._("This ARFX file is created with AR Studio {current}. Only version {canUpload} and above can be uploaded. Please download and use new AR studio to update.",[h.param('current',' '+p),h.param('canUpload',' '+o+' ')]);return null};k.prototype.render=function(){var l=this.props,m=l.arfxFile,n=l.arfxFileType,o=l.disabled,p=this.state.isCheckingVersion;return c('React').createElement(c('MediaEffectMaskFileSelect.react'),{accept:'.arfx',disabled:o,error:this.getErrorMessage(),expectFiles:1,files:m?[m]:[],multiple:true,name:'mask_files',onChange:this.updateArfxFile,preview:c('React').createElement(c('Image.react'),{height:36,src:p?'/images/tablet/spinner/spinner-large-bgLight.gif':'/images/media_effect/icon/arfx-icon.png',width:36}),text:h._("Upload {arfx file type} File",[h.param('arfx file type',n)])})};f.exports=k}),null);
__d('MediaEffectMaskArfxFileUpload.react',['fbt','immutable','MediaEffectARStudioEffectArfxFileTypes','MediaEffectCard.react','MediaEffectMaskArfxFileSelect.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Set;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.arfxFiles,o=m.disabled,p=m.isValidating,q=m.filesForUpload;return c('React').createElement(c('MediaEffectCard.react'),{title:h._("ARFX Files"),tooltip:h._("Upload all three ARFX files exported from your AR Studio project: \u0040uncompressed.arfx, \u0040pvr.afx and \u0040etc.arfx")},c('React').createElement(c('XUIText.react'),{color:'gray',display:'block'},h._("Upload the \u0040uncompressed.arfx, \u0040pvr.arfx and \u0040etc.arfx files created when exporting your project in {ar studio link}.",[h.param('ar studio link',c('React').createElement('a',{href:'https://developers.facebook.com/products/camera-effects/ar-studio/',target:'_blank'},h._("AR Studio")))])),c('MediaEffectARStudioEffectArfxFileTypes').map(function(r){return c('React').createElement(c('MediaEffectMaskArfxFileSelect.react'),{arfxFile:n.find(function(s){return s.name.endsWith(r)}),arfxFileType:r,disabled:o,isValidating:p,key:r,missingFileForUpload:!q.isEmpty()&&!q.some(function(s){return s.name.endsWith(r)})})}))};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectMaskLegalAgreement.react',['fbt','InputLabel.react','MediaEffectCard.react','MediaEffectFrameEditorDispatcher','React','XUICheckboxInput.react','XUIError.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.onCheckboxChanged=function(event){c('MediaEffectFrameEditorDispatcher').dispatch({type:'legalAgreement/userIsAgreed',payload:{userIsAgreed:event.target.checked}})};k.prototype.getErrorMessage=function(){var l=this.props,m=l.isValidating,n=l.userIsAgreed;if(!m||n)return null;return h._("Please accept the agreement to continue")};k.prototype.render=function(){var l=this.props.effectUploadLegalText,m=this.getErrorMessage();return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Legal Agreement")},c('React').createElement(c('XUIError.react'),{xuiError:m},c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('XUICheckboxInput.react'),{checked:this.props.userIsAgreed,onChange:this.onCheckboxChanged}),c('React').createElement(c('XUIText.react'),null,l))))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectMaskMegaphone.react',['cx','BUIAdoptionCloseButton.react','BUIAdoptionXUIText.react','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=c('React').createElement(c('BUIAdoptionCloseButton.react'),{className_DEPRECATED:"_eyf",onClick:this.props.onClose,shade:'dark'}),m=c('React').createElement(c('BUIAdoptionXUIText.react'),{className:"_2pim",display:'block',size:'medium',weight:'bold'},this.props.title),n=this.props.imageSrc?c('React').createElement('div',{className:"_eyg"+(this.props.imageAlign==='center'?' '+"_eyi":''),style:{backgroundColor:this.props.imageBackgroundColor}},c('React').createElement(c('Image.react'),{className:"_eyj",src:this.props.imageSrc})):null,o=c('React').createElement('div',{className:"_eyl"+(this.props.containerAlign==='center'?' '+"_eym":'')},n,c('React').createElement('div',{className:"_eyn"},m,this.props.children),c('React').createElement('div',{className:"_eyo"},this.props.button));return c('React').createElement('div',{className:"_eyp"},o,l)};function k(){i.apply(this,arguments)}k.defaultProps={containerAlign:'center',imageAlign:'center'};f.exports=k}),null);
__d('MediaEffectMaskVersionNotice.react',['cx','fbt','FluxContainer','Link.react','MediaEffectMaskUploadDataStore','MediaEffectWarnings.react','React','XDeveloperDocumentationController','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.getStores=function(){return [c('MediaEffectMaskUploadDataStore')]};l.calculateState=function(){return {isNotCurrent:c('MediaEffectMaskUploadDataStore').isVersionNotCurrent(),isOutOfDate:c('MediaEffectMaskUploadDataStore').isVersionOutOfDate(),latestVersion:c('MediaEffectMaskUploadDataStore').getLatestARStudioVersion(),minVersion:c('MediaEffectMaskUploadDataStore').getMinARStudioVersion(),topVersion:c('MediaEffectMaskUploadDataStore').getArfxTopVersion()}};l.prototype.render=function(){var m=this.state,n=m.isNotCurrent,o=m.isOutOfDate,p=m.latestVersion,q=m.minVersion,r=m.topVersion;if(!n)return null;var s=c('XDeveloperDocumentationController').getURIBuilder().setString('path1','camera-effects').setString('path2','key-concepts').setString('path3','versioning').getURI().setSubdomain('developers');return c('React').createElement(c('MediaEffectWarnings.react'),{message:c('React').createElement(c('XUIText.react'),null,i._("This effect was created with AR Studio {arfx-version}. The minimum supported version is {ar-studio-min-version}. Please update AR Studio to the latest version {ar-studio-latest-version} before saving and resubmitting your effect.",[i.param('arfx-version',' '+r),i.param('ar-studio-min-version',' '+q),i.param('ar-studio-latest-version',' '+p+' ')]),c('React').createElement(c('Link.react'),{className:"_466q",href:s},i._("Learn more"))),use:o?'warn':'recommend'})};function l(){j.apply(this,arguments)}f.exports=c('FluxContainer').create(l)}),null);
__d('MediaEffectMaskFileUploadStep.react',['cx','fbt','ix','FluxContainer','immutable','MediaEffectFlowType','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationStepsConfig','MediaEffectFrameEditorDispatcher','MediaEffectHubARStudioDialog.react','MediaEffectMaskArfxFileUpload.react','MediaEffectMaskDescriptionInput.react','MediaEffectMaskLegalAgreement.react','MediaEffectMaskMegaphone.react','MediaEffectMaskProjectFileUpload.react','MediaEffectMaskScreencastUpload.react','MediaEffectMaskThumbnailUpload.react','MediaEffectMaskUploadDataStore','MediaEffectMaskVersionNotice.react','MediaEffectMetadataStore','MediaEffectRejectedReviewResult.react','React','SimpleNUXMessage','SimpleNUXMessageTypes','SUIBusinessTheme','SUICardDEPRECATED.react','SUIText.react','XUIButton.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('immutable').Set;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;n.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMaskUploadDataStore'),c('MediaEffectMetadataStore')]};n.calculateState=function(o){var p=c('MediaEffectMaskUploadDataStore').getState(),q=c('MediaEffectMetadataStore').getState(),r=c('MediaEffectFrameCreateDialogDataStore').getState(),s=c('MediaEffectFrameCreationStepsConfig').getStep(c('MediaEffectFlowType').MASK,r.get('validatingStep')),t=s!==c('MediaEffectFrameCreationStepsConfig').CreationSteps.NONE;return {projectFile:p.get('fbfxprojFile'),maskFiles:p.get('arfxFiles'),cameraIconDimensions:p.get('effectThumbnailDimensions'),cameraIconFile:p.get('effectThumbnailFile'),cameraIconSrc:p.get('effectThumbnailSrc'),screencastFile:p.get('screencastFile'),screencastSrc:p.get('screencastSrc'),reviewMaterialID:p.get('reviewMaterialID'),description:p.get('effectDescription'),rejectReasons:q.get('rejectReasons'),isValidating:t,arfxFilesForUpload:p.arfxFilesForUpload,showARStudioDialog:false,showDownloadBanner:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').AR_STUDIO_DOWNLOAD_BANNER_NUX),userIsAgreed:p.get('userIsAgreed')}};function n(o,p){l.constructor.call(this,o,p);this.$MediaEffectMaskFileUploadStep1=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').AR_STUDIO_DOWNLOAD_BANNER_NUX);this.setState({showDownloadBanner:false})}.bind(this);this.$MediaEffectMaskFileUploadStep2=function(){this.setState({showARStudioDialog:true})}.bind(this);this.$MediaEffectMaskFileUploadStep3=function(){this.setState({showARStudioDialog:false})}.bind(this);c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores([c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMaskUploadDataStore'),c('MediaEffectMetadataStore')]);if(o.hasUsedARStudio&&!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').AR_STUDIO_DOWNLOAD_BANNER_NUX))c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').AR_STUDIO_DOWNLOAD_BANNER_NUX);this.state={projectFile:null,maskFiles:m(),cameraIconDimensions:null,cameraIconFile:null,cameraIconSrc:null,screencastFile:null,screencastSrc:null,reviewMaterialID:null,description:null,rejectReasons:null,isValidating:false,arfxFilesForUpload:m(),showARStudioDialog:false,showDownloadBanner:false,userIsAgreed:false}}n.prototype.render=function(){var o=this.props.effectUploadLegalText,p=this.state,q=p.projectFile,r=p.maskFiles,s=p.cameraIconDimensions,t=p.cameraIconFile,u=p.cameraIconSrc,v=p.screencastFile,w=p.screencastSrc,x=p.reviewMaterialID,y=p.description,z=p.rejectReasons,aa=p.isValidating,ba=p.arfxFilesForUpload,ca=p.showDownloadBanner,da=p.showARStudioDialog,ea=p.userIsAgreed,fa=da?c('React').createElement(c('MediaEffectHubARStudioDialog.react'),{onClose:this.$MediaEffectMaskFileUploadStep3}):null,ga=ca?c('React').createElement(c('MediaEffectMaskMegaphone.react'),{button:c('React').createElement(c('XUIButton.react'),{label:'Download AR Studio',onClick:this.$MediaEffectMaskFileUploadStep2,size:'large',use:'confirm'}),imageAlign:'center',imageSrc:j("362460"),onClose:this.$MediaEffectMaskFileUploadStep1,title:i._("Download AR Studio to Get Started")},c('React').createElement(c('SUIText.react'),{display:'block',shade:'medium',theme:c('SUIBusinessTheme')},i._("This page is for uploading camera effects created in AR Studio, but it doesn't look like you have the app yet. Documentation for effect creators is available to help you get started. {ar studio link}.",[i.param('ar studio link',c('React').createElement('a',{href:'https://developers.facebook.com/products/camera-effects/ar-studio/',target:'_blank'},i._("Learn More")))]))):null;return c('React').createElement('div',{className:"_2041 _190n",style:{padding:'32px 80px'}},fa,ga,c('React').createElement(c('XUIText.react'),{className:"_38wf _2pie",display:'block'},i._("Upload Effect")),z&&z.length>0?c('React').createElement(c('MediaEffectRejectedReviewResult.react'),{reasons:z}):null,c('React').createElement(c('MediaEffectMaskVersionNotice.react'),null),c('React').createElement(c('SUICardDEPRECATED.react'),{className:"_2pin _3-98",theme:c('SUIBusinessTheme'),type:'padded'},c('React').createElement(c('MediaEffectMaskThumbnailUpload.react'),{cameraIconDimensions:s,cameraIconFile:t,cameraIconSrc:u,isValidating:aa}),c('React').createElement(c('MediaEffectMaskProjectFileUpload.react'),{isValidating:aa,projectFile:q}),c('React').createElement(c('MediaEffectMaskArfxFileUpload.react'),{arfxFiles:r,filesForUpload:ba,isValidating:aa}),c('React').createElement(c('MediaEffectMaskLegalAgreement.react'),{effectUploadLegalText:o,isValidating:aa,userIsAgreed:ea})),c('React').createElement(c('XUIText.react'),{className:"_38wf _2pie",display:'block'},i._("Description for Review")),c('React').createElement(c('SUICardDEPRECATED.react'),{className:"_2pin _3-98",theme:c('SUIBusinessTheme'),type:'padded'},c('React').createElement(c('MediaEffectMaskDescriptionInput.react'),{description:y,isValidating:aa}),c('React').createElement(c('MediaEffectMaskScreencastUpload.react'),{isValidating:aa,reviewMaterialID:x,screencastFile:v,screencastSrc:w})))};f.exports=c('FluxContainer').create(n)}),null);
__d('MediaEffectHubDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("XMediaEffectHubEffectActivationAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/effects\/async\/activation\/",{activate:{type:"Bool",defaultValue:false},effect_ids:{type:"FBIDVector",required:true}})}),null);
__d('MediaEffectMetadataDataLoader',['Promise','AsyncRequest','XMediaEffectHubEffectActivationAsyncController'],(function a(b,c,d,e,f,g){'use strict';var h={changeActiveStatus:function i(j,k){return new (c('Promise'))(function(l,m){var n=c('XMediaEffectHubEffectActivationAsyncController').getURIBuilder().setBool('activate',j).setFBIDVector('effect_ids',k.toSeq().map(function(o){return o.id}).toArray()).getURI();new (c('AsyncRequest'))().setURI(n).setHandler(l).setErrorHandler(m).send()})}};f.exports=h}),null);
__d('MediaEffectReactFrameEditorScalarAssetPositionRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({anchor_origin:'asset_start',anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:50,asset_pixel_offset:0}));i=h&&h.prototype;k.canonical=function(l,m,n){var o=n-l/2;if(Math.abs(o)<.01)return new k();if(o>0){var p=l-(n+m/2);return new k({anchor_origin:'asset_end',anchor_asset_size_percentage:0,asset_origin:'canvas_end',asset_canvas_size_percentage:100*p/l})}else{var q=n-m/2;return new k({anchor_origin:'asset_start',anchor_asset_size_percentage:0,asset_origin:'canvas_start',asset_canvas_size_percentage:100*q/l})}};k.prototype.isBackendCompatible=function(){if(this.anchor_pixel_offset||this.asset_pixel_offset||this.anchor_origin==='asset_start'&&this.asset_origin==='canvas_end'||this.anchor_origin==='asset_end'&&this.asset_origin==='canvas_start')return false;return this.anchor_asset_size_percentage===50&&this.asset_canvas_size_percentage===50||this.anchor_asset_size_percentage===0};k.prototype.getStart=function(l,m){var n=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord1(l),o=this.$MediaEffectReactFrameEditorScalarAssetPositionRecord2(m);return n-o};k.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord1=function(l){var m=l*this.asset_canvas_size_percentage/100+this.asset_pixel_offset;if(this.asset_origin==='canvas_start'){return m}else return l-m;};k.prototype.$MediaEffectReactFrameEditorScalarAssetPositionRecord2=function(l){var m=l*this.anchor_asset_size_percentage/100+this.anchor_pixel_offset;if(this.anchor_origin==='asset_start'){return m}else return l-m;};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectReactFrameEditorAssetPositionRecord',['immutable','MediaEffectReactFrameEditorScalarAssetPositionRecord','Rect'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({x:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))(),y:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))()}));i=h&&h.prototype;k.fromCenter=function(l,m){return new k({x:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_origin:'asset_start',anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:l,asset_pixel_offset:0}),y:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_origin:'asset_start',anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:m,asset_pixel_offset:0})})};k.canonical=function(l,m){return new k({x:c('MediaEffectReactFrameEditorScalarAssetPositionRecord').canonical(m.x,l.w(),l.w()/2+l.l),y:c('MediaEffectReactFrameEditorScalarAssetPositionRecord').canonical(m.y,l.h(),l.h()/2+l.t)})};k.prototype.isBackendCompatible=function(){return this.x.isBackendCompatible()&&this.y.isBackendCompatible()};k.prototype.toAbsolute=function(l,m){var n=this.x.getStart(l.x,m.x),o=this.y.getStart(l.y,m.y);return new (c('Rect'))(o,n+m.x,o+m.y,n)};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectUploadManager',['Arbiter'],(function a(b,c,d,e,f,g){'use strict';var h='MediaEffectUploadManager/upload',i={subscribeToUploadDone:function j(k,l){return c('Arbiter').subscribe(h,k,l)},informUploadDone:function j(k,l){return c('Arbiter').inform(h,k,l)}};f.exports=i}),null);
__d("XMediaEffectAsyncEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/effects\/activation\/submit\/",{media_effect_id:{type:"FBID"}})}),null);
__d("XProcessImageBackgroundController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/process_background\/",{image_id:{type:"FBID",required:true}})}),null);
__d("XRemoveImageBackgroundController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/remove_background\/",{image_id:{type:"FBID",required:true}})}),null);
__d('MediaEffectMetadataActionCreators',['cx','invariant','regeneratorRuntime','Animation','AsyncRequest','AsyncResponse','AsyncUploadRequest','CurrentUser','immutable','MediaEffectFlowType','MediaEffectFrameEditorDispatcher','MediaEffectHubDispatcher','MediaEffectMetadataDataLoader','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectRequestBuilder','MediaEffectTemplateVariationRecord','MediaEffectUploadManager','SimpleXUIDialog','Style','XMediaEffectAsyncEditController','XProcessImageBackgroundController','XRemoveImageBackgroundController','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('immutable').Set,k="_1tp7",l={addImage:function m(n,o,p){var q={type:'add/image',imageFile:n,position:o&&p?new (c('MediaEffectReactFrameEditorAssetPositionRecord').fromCenter)(o,p):null};c('MediaEffectFrameEditorDispatcher').dispatch(q)},replaceImage:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'replace/image',localAssetID:n,imageFile:o})},addTag:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/tag',data:n})},addText:function m(n,o,p){var q={type:'add/text',content:n,position:null};if(o&&p)q.position=new (c('MediaEffectReactFrameEditorAssetPositionRecord').fromCenter)(o,p);c('MediaEffectFrameEditorDispatcher').dispatch(q)},addWhitelistedUser:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/fbWhitelistedUser',data:n})},changeScheduleRange:function m(n,o,p){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/scheduleRange',startTime:n,endTime:o,timezone:p})},changeBackgroundColor:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/backgroundColor',color:n})},changeBackgroundImage:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/backgroundImage',image:n})},changeCategory:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/category',value:n})},changePageLiked:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbPageLiked',value:n})},changeCatalogGKs:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbCatalogGKs',value:n})},changeEligibilityGKs:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbEligibilityGKs',value:n})},changeManualRankWeight:function m(event){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbRankWeight',value:event.target.value})},changeLocales:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/locales',value:n})},changeLocationPage:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/locationPageID',value:n})},changeLocation:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/location',value:n})},changeLocationTarget:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/locationTarget',value:n})},changeName:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/name',value:n})},changeOwner:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/selectedOwnerID',value:n})},changeInstagramAttribution:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/selectedInstagramAttributionID',value:n})},setUseOwnerSelector:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/setUseOwnerSelector',value:n})},resetLocation:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/locationTarget',value:'everyone'})},updateNameValidation:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/nameValidation',isError:n})},changeProductVisibiilityPolicy:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/productVisibilityPolicy',value:n})},changeRankingStrategy:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbRankingStrategy',value:n})},changeTimingSchedule:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/timingSchedule',value:n})},changeWhitelistCheckEligibility:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbWhitelistCheckEligibility',value:n})},removeBackground:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'replace/startRemovingBackground',localAssetID:n});var p=c('XRemoveImageBackgroundController').getURIBuilder().setFBID('image_id',o).getURI();new (c('AsyncRequest'))().setURI(p).setHandler(function(q){return q.payload.updated_id&&c('MediaEffectFrameEditorDispatcher').dispatch({type:'replace/imageBackground',localAssetID:n,imageID:q.payload.updated_id,imageURI:q.payload.updated_uri})}).send()},processBackground:function m(n,o){var p=c('XProcessImageBackgroundController').getURIBuilder().setFBID('image_id',o).getURI();new (c('AsyncRequest'))().setURI(p).setHandler(function(q){return q.payload.updated_uri&&c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/image',localAssetID:n,imageURI:q.payload.updated_uri})}).send()},updateTextImage:function m(n,o,p,q,r){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textImage',localAssetID:n,textContent:o,localImageURI:p,file:q,assetSize:r})},checkOfflineOnly:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/offlineOnly',value:n})},changeAdsTargetingSpec:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/adsTargetingSpec',adsTargetingSpec:n})},checkSelfBirthday:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/selfBirthday',value:n})},removeWhitelistedUser:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'remove/fbWhitelistedUser',data:n})},removeTag:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'remove/tag',data:n})},updateAssetPosition:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/assetPosition',localAssetID:n,position:o})},setAutoSnapping:function m(n,o,p){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/autoSnapping',localAssetID:n,autoSnappedType:o,specs:p})},setIsDragging:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/isDragging',isDragging:n})},setIsSaving:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/isSaving',isSaving:n})},updateAssetSize:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/assetSize',localAssetID:n,size:o})},updateAssetNativeSize:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/assetNativeSize',localAssetID:n,size:o})},updateStickerFBID:function m(n,o,p){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/stickerFBID',localAssetID:n,stickerFBID:o,localTemplateID:p})},updateTextContent:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textContent',localAssetID:n,content:o})},updateTextFonts:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textFonts',localTextIDs:n,font:o})},updateTextColors:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textColors',localTextIDs:n,color:o})},updateTextAlignments:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/textAlignments',localTextIDs:n,textAlignment:o})},setFrameFilterID:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/frameFilterID',filterID:n})},setThumbnail:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/thumbnail',thumbnail:n})},save:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'save',effectID:n})},saveAsDraft:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'save/draft'})},selectAssetOnly:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/assetOnly',localAssetID:n})},selectAsset:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/asset',localAssetID:n})},deselectAsset:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'deselect/asset',localAssetID:n})},editText:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'edit/text',localAssetID:n})},selectAll:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/all'})},deselectAll:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'deselect/all'})},startCamera:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/cameraSource',cameraSource:n})},pauseCamera:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'pause/camera'})},resumeCamera:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'resume/camera'})},stopCamera:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/cameraSource',cameraSource:null})},selectInstruction:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/instruction',instructionID:n})},raiseAsset:function m(n){var o=arguments.length<=1||arguments[1]===undefined?false:arguments[1];c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/asset/raise',localAssetID:n,toTop:o})},lowerAsset:function m(n){var o=arguments.length<=1||arguments[1]===undefined?false:arguments[1];c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/asset/lower',localAssetID:n,toBottom:o})},deleteAsset:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'delete/asset',localAssetID:n})},duplicateAsset:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'duplicate/asset',localAssetID:n})},initEffectMetadata:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/effectMetadata',data:n})},addValidation:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'validation/add',validation:n})},removeValidation:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'validation/remove',validation:n})},initFrameData:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/frameData',data:n})},initMaskUploadData:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/maskUploadData',data:n})},changeStep:function m(n){if(n>=0)c('MediaEffectFrameEditorDispatcher').dispatch({type:'change/step',step:n});},validate:function m(n){if(n>=0){c('MediaEffectFrameEditorDispatcher').dispatch({type:'form/validate',step:n});l.scrollToFirstError()}},scrollToFirstError:function m(){window.setTimeout(function(){var n=document.getElementsByClassName(k);if(n.length>0){var o=n[0].offsetTop-40,p=c('Style').getScrollParent(n[0]);new (c('Animation'))(p).to('scrollTop',o).duration(750).go()}},750)},initDialog:function m(n,o,p,q){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/dialog',creationReferrer:n,flowType:o,sourceID:q});switch(o){case c('MediaEffectFlowType').EVENT:if(q&&p){l.changeOwner(c('nullthrows')(q));var r=p.ownersData.find(function(s){return s.id===q});r||i(0);this.changeName(r.name)}break;default:break;}},addFontData:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/fontData',data:n})},addTemplateData:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/templateData',data:n,variants:o})},applyTemplate:function m(n){l._genApplyTemplate(n)['catch'](function(o){})},_genApplyTemplate:function m(n){var o,p;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:o=this;if(n){r.next=5;break}c('MediaEffectFrameEditorDispatcher').dispatch({type:'clear/template'});r.next=15;break;case 5:r.prev=5;r.next=8;return c('regeneratorRuntime').awrap(n.genFrameData());case 8:p=r.sent;c('MediaEffectFrameEditorDispatcher').dispatch({type:'apply/template',templateFBID:n.templateFBID,frameData:p});r.next=15;break;case 12:r.prev=12;r.t0=r['catch'](5);c('SimpleXUIDialog').showConfirm(r.t0.message,'Template loading failed. Retry?',function(s){if(s)o.applyTemplate(n);},null);case 15:case 'end':return r.stop();}},null,this,[[5,12]])},changeEffectHasText:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/effectHasText',value:n})},changeProductionVerification:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/productionVerification',value:n})},setScreenDimensions:function m(n,o,p){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/screenDimensions',screenWidth:n,dialogHeight:o,flowType:p})},initEventDialogContext:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/eventDialog',dialogContext:n})},addInspirationCategoryNames:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/inspirationCategoryNames',value:n})},removeInspirationCategoryNames:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'remove/inspirationCategoryNames',value:n})},changeGatelogic:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/gatelogic',value:n})},changeHumanReadableDescription:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/humanReadableDescription',value:n})},setPlaceDescription:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/placeDescription',placeDescription:n})},selectTemplateCategoryID:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/templateCategoryID',value:n})},changeAttributedOwner:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'select/attributedOwnerID',value:n})},initEffectData:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'init/effectData',data:n})},setContentMustBeUpdated:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/asset/contentMustBeUpdated',localAssetID:n,contentMustBeUpdated:o})},changeActiveStatus:function m(n,o,p,q){c('MediaEffectMetadataDataLoader').changeActiveStatus(n,o).then(function(r){var s=r.payload.effects;c('MediaEffectFrameEditorDispatcher').dispatch({type:'effect/edited',data:s[0]});c('MediaEffectHubDispatcher').dispatch({type:'effects_edited',payload:{effects:s}});p&&p()})['catch'](function(r){c('AsyncResponse').defaultErrorHandler(r);q&&q()}).done()},notifyEnterCreationFlowFromInlineNUX:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'inlineNUX/enterCreationFlow'})},updateValidationResult:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'asset/validate',result:o,stickerFBID:n})},muteNotifications:function m(){var n=j.of.apply(j,arguments);c('MediaEffectFrameEditorDispatcher').dispatch({type:'notification/mute',notificationTypes:n})},unmuteNotifications:function m(){var n=j.of.apply(j,arguments);c('MediaEffectFrameEditorDispatcher').dispatch({type:'notification/unmute',notificationTypes:n})},highlightNotification:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'notification/highlight',location:n})},addSystemColorPalettes:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'add/systemColorPalettes',paletteData:n})},bootstrapFontData:function m(){c('MediaEffectFrameEditorDispatcher').dispatch({type:'bootstrap/fontData'})},createNewTemplateVariation:function m(n){var o=c('MediaEffectTemplateVariationRecord').fromSourceTemplate(n);o.then(function(p){c('MediaEffectFrameEditorDispatcher').dispatch({type:'new/templateVariation',templateVariation:p})})['catch'](function(p){})},setCurrentTemplateVariation:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/currentTemplateVariation',localTemplateID:n})},setTemplateSourceColorPalette:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/templateSourceColorPalette',palette:n})},setUserColorPalette:function m(n,o){c('MediaEffectFrameEditorDispatcher').dispatch({type:'set/userColorPalette',palette:n,index:o})},checkFBOnlyMediaRestriction:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/fbOnlyMediaRestriction',value:n})},changeConnectApp:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'change/connectAppID',appID:n})},updateEffectID:function m(n){c('MediaEffectFrameEditorDispatcher').dispatch({type:'update/effectID',effectID:n})},updateMetadata:function m(n,o,p,q){var r=c('XMediaEffectAsyncEditController').getURIBuilder().setFBID('media_effect_id',n).getURI(),s=new (c('AsyncUploadRequest'))().setURI(r).setAllowCrossOrigin(false).setData(o).setFiles(p);s.subscribe('success',function(t,u){c('MediaEffectUploadManager').informUploadDone(u.getResponse().payload);q&&q()});s.subscribe('failure',function(t,u){c('AsyncResponse').defaultErrorHandler(u)});s.send()},updateMaskFilesWithMetadata:function m(n,o){c('MediaEffectRequestBuilder').forMask.forUpdate(n).setOnSuccessComplete(function(p){c('MediaEffectUploadManager').informUploadDone(p.payload);o&&o()}).setOnFailureComplete(function(){o&&o()}).genSend()}};f.exports=l}),null);
__d('MediaEffectMetadataAdsInterest.react',['AdInterfacesUiLogger','MediaEffectCard.react','MediaEffectMetadataActionCreators','React','TargetingContainer.react','AdsCommonTargetingAgeEditor','AdsCommonTargetingGenderEditor','AdsCommonTargetingInterestsEditor'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.componentWillMount=function(){c('AdInterfacesUiLogger').setAppName('mediaEffectMetadataAdsInterest')};j.prototype.render=function(){var k=void 0;if(this.props.adsTargetingSpec&&this.props.adsTargetingSpec!=='null')k=JSON.parse(this.props.adsTargetingSpec);var l=[{component:c('AdsCommonTargetingAgeEditor')},{component:c('AdsCommonTargetingGenderEditor')},{component:c('AdsCommonTargetingInterestsEditor')}],m={oneColumn:true,defaultWidth:300},n=function o(p){return c('MediaEffectMetadataActionCreators').changeAdsTargetingSpec(JSON.stringify(p))};return c('React').createElement(c('MediaEffectCard.react'),{title:'Ads Targeting'},c('React').createElement(c('TargetingContainer.react'),{config:l,defaultApiSpec:k,extraData:m,onTargetingSpecChange:n}))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectMetadataCategoryAndTags.react',['fbt','MediaEffectCard.react','MediaEffectMetadataTagsTypeahead.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Keywords"),tooltip:h._("Add up to 10 keywords to help people find your effect. Keywords must follow the platform's terms and policies.")},c('React').createElement(c('MediaEffectMetadataTagsTypeahead.react'),this.props))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectConnectAppSelector.react',['cx','fbt','Image.react','MediaEffectCard.react','MediaEffectWebdriverIDs','React','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISingleSelector.react').Option,m='0';j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectConnectAppSelector1=function(t){var u=t.value===m?null:t.value;this.props.onConnectAppChange(u)}.bind(this),p}n.prototype.render=function(){var o=this.props,p=o.appID,q=o.appsData,r=o.disabled,s=c('React').createElement(l,{value:m},i._("None")),t=q.map(function(w){return c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{className:"_5hh3",src:w.src}),key:w.id,value:w.id},w.name)}),u=i._("Select the app connected to this effect. This is used for attribution on Facebook."),v=p||m;return c('React').createElement(c('MediaEffectCard.react'),{title:i._("Connected App"),tooltip:u},c('React').createElement(c('XUISingleSelector.react'),{'data-testid':c('MediaEffectWebdriverIDs').LWE_EFFECT_APP_POPOVER_BUTTON,defaultValue:v,disabled:!!r,maxwidth:268,onChange:this.$MediaEffectConnectAppSelector1,size:'xlarge',value:v},s,t))};f.exports=n}),null);
__d('MediaEffectFBOnlyPermissionExplanationCard.react',['cx','DOMContainer.react','MediaEffectCard.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{className:c('joinClasses')("_3-8z _2pip",this.props.className),title:'[FB-Only]'},c('React').createElement(c('DOMContainer.react'),null,this.props.explanationLink))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectMetadataContainer.react',['cx','fbt','FluxContainer','FXEntMediaEffectSubmissionStatus','immutable','MediaEffectConnectAppSelector.react','MediaEffectFBOnlyPermissionExplanationCard.react','MediaEffectFlowType','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationStepsConfig','MediaEffectFrameEditorDispatcher','MediaEffectMetadataActionCreators','MediaEffectMetadataCategoryAndTags.react','MediaEffectMetadataFBOnly.react','MediaEffectMetadataLocation.react','MediaEffectMetadataLocationV2.react','MediaEffectMetadataNameContainer.react','MediaEffectMetadataOwner.react','MediaEffectMetadataSchedule.react','MediaEffectMetadataStore','MediaEffectMetadataViewStore','MediaEffectPlaceDescriptionRecord','MediaEffectQEUtils','MediaEffectUserContext','MediaEffectWarnings.react','React','SUIBusinessTheme','SUICardDEPRECATED.react','XUICard.react','XUIText.react','idx','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MediaEffectFrameCreationStepsConfig').CreationSteps,m=c('immutable').List;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMetadataStore'),c('MediaEffectMetadataViewStore')]};n.calculateState=function(o,p){var q=c('MediaEffectMetadataStore').getState(),r=c('MediaEffectMetadataViewStore').getState(),s=q.get('thumbnail'),t=q.get('selectedOwnerID'),u=c('MediaEffectFrameCreationStepsConfig').getStep(p.flowType,c('MediaEffectFrameCreateDialogDataStore').getState().get('validatingStep')),v=u===l.TARGETING,w=q.get('attributedOwnerID')!==null?String(q.get('attributedOwnerID')):null;return {catalogGKs:q.get('fbCatalogGKs'),inspirationCategoryNames:q.get('inspirationCategoryNames'),effectHasText:q.get('effectHasText'),eligibilityGKs:q.get('fbEligibilityGKs'),endTime:q.get('endTime'),errors:r.get('errors'),fbExperimentID:q.get('fbExperimentID'),fbOnlyMediaRestriction:q.get('fbOnlyMediaRestriction'),gatelogic:q.get('gatelogic'),humanReadableDescription:q.get('humanReadableDescription'),instructions:r.get('instructions'),locales:q.get('locales'),location:q.get('location'),locationPageID:q.get('locationPageID'),offlineOnly:!!q.get('offlineOnly'),ownersData:r.get('ownersData'),pageLiked:q.get('fbPageLiked'),placeDescription:q.get('placeDescription'),potentialOwnersForAttribution:r.get('potentialOwnersForAttribution'),productVisibilityPolicy:q.get('productVisibilityPolicy'),productionVerification:q.get('productionVerification'),rankWeight:q.get('fbRankWeight'),rankingStrategy:r.get('fbRankingStrategy'),startTime:q.get('startTime'),selectedAttributedOwnerID:w,selectedCategoryID:q.get('selectedCategoryID'),selectedConnectAppID:q.get('connectAppID'),selectedInstagramAttribution:c('MediaEffectMetadataViewStore').getInstagramAttribution(q.get('selectedInstagramAttributionID')),selectedInstructionID:q.get('selectedInstructionID'),selectedOwner:c('MediaEffectMetadataViewStore').getOwner(t),selectedOwnerID:t,selectedTemplateCategoryID:q.get('selectedTemplateCategoryID'),selfBirthday:!!q.get('selfBirthday'),tags:q.get('tags'),templateCategories:r.get('templateCategories'),thumbnailName:s&&s.name,thumbnailURI:s?URL.createObjectURL(s):q.get('thumbnailURI'),timezone:q.get('timezone'),timingSchedule:q.get('timingSchedule'),whitelistCheckEligibility:q.get('fbWhitelistCheckEligibility'),whitelistedUsers:q.get('fbWhitelistedUsers'),isValidating:v,locationTarget:q.get('locationTarget'),adsTargetingSpec:q.get('adsTargetingSpec')}};n.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores([c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMetadataStore'),c('MediaEffectMetadataViewStore')])};n.prototype.render=function(){var o=this.props.flowType,p=this.state,q=p.endTime,r=p.isValidating,s=p.ownersData,t=p.selectedConnectAppID,u=p.selectedCategoryID,v=p.selectedInstagramAttribution,w=p.selectedOwner,x=p.selectedOwnerID,y=p.startTime,z=p.tags,aa=p.timezone,ba=babelHelpers.objectWithoutProperties(p,['endTime','isValidating','ownersData','selectedConnectAppID','selectedCategoryID','selectedInstagramAttribution','selectedOwner','selectedOwnerID','startTime','tags','timezone']),ca=ba.catalogGKs,da=ba.inspirationCategoryNames,ea=ba.effectHasText,fa=ba.eligibilityGKs,ga=ba.fbExperimentID,ha=ba.fbOnlyMediaRestriction,ia=ba.gatelogic,ja=ba.humanReadableDescription,ka=ba.instructions,la=ba.locales,ma=ba.offlineOnly,na=ba.pageLiked,oa=ba.potentialOwnersForAttribution,pa=ba.productVisibilityPolicy,qa=ba.productionVerification,ra=ba.rankingStrategy,sa=ba.rankWeight,ta=ba.selectedAttributedOwnerID,ua=ba.selectedInstructionID,va=ba.selectedTemplateCategoryID,wa=ba.selfBirthday,xa=ba.templateCategories,ya=ba.timingSchedule,za=ba.thumbnailName,ab=ba.thumbnailURI,bb=ba.whitelistCheckEligibility,cb=ba.whitelistedUsers,db=ba.adsTargetingSpec,eb=this.props.bootstrapData.metadataJSData.submissionStatus,fb=!!this.props.bootstrapData.metadataJSData.id,gb=eb===c('FXEntMediaEffectSubmissionStatus').DRAFT||eb===c('FXEntMediaEffectSubmissionStatus').DENIED||w&&w.isFirstParty,hb=this.state.errors.toArray().map(function(jb,kb){return c('React').createElement(c('MediaEffectWarnings.react'),{items:jb.messageItems,key:kb+jb.code,message:jb.message||''})}),ib=this.props.bootstrapData.appsData;return c('React').createElement('div',{className:"_2041 _190n"},hb,!fb||gb?c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Details")),c('React').createElement(c('SUICardDEPRECATED.react'),{className:"_2pin _3-98",theme:c('SUIBusinessTheme'),type:'padded'},c('React').createElement(c('MediaEffectMetadataNameContainer.react'),{disabled:false,flowType:o,placeholder:i._("Create a name for your effect")}),fb||c('MediaEffectQEUtils').shouldShowHeaderSelector()?null:c('React').createElement(c('MediaEffectMetadataOwner.react'),{disabled:false,isValidating:r,onOwnerChange:this.$MediaEffectMetadataContainer1,ownersData:s,productionVerification:qa,selectedOwner:w}))):null,c('React').createElement(c('XUIText.react'),{className:"_38wf _2pie",display:'block'},i._("Advanced")),c('React').createElement(c('SUICardDEPRECATED.react'),{className:"_2pin",theme:c('SUIBusinessTheme'),type:'padded'},o===c('MediaEffectFlowType').MASK?c('React').createElement('div',null,c('React').createElement(c('MediaEffectConnectAppSelector.react'),{appID:t,appsData:m(ib),isValidating:r&&(!w||!w.isFirstParty),onConnectAppChange:c('MediaEffectMetadataActionCreators').changeConnectApp})):null,this.$MediaEffectMetadataContainer2(),c('React').createElement(c('MediaEffectMetadataSchedule.react'),{endTime:q,onDateRangeChange:c('MediaEffectMetadataActionCreators').changeScheduleRange,startTime:y,timezone:aa}),c('React').createElement('div',{className:"_204i"}),c('React').createElement(c('MediaEffectMetadataCategoryAndTags.react'),{onAddTag:c('MediaEffectMetadataActionCreators').addTag,onCategorySelected:c('MediaEffectMetadataActionCreators').changeCategory,onRemoveTag:c('MediaEffectMetadataActionCreators').removeTag,selectedCategoryID:u,tags:z})),c('MediaEffectUserContext').includesFBOnly?c('React').createElement(c('XUICard.react'),{className:"_3-8-"},c('React').createElement(c('MediaEffectMetadataFBOnly.react'),{catalogGKs:ca,inspirationCategoryNames:da,effectHasText:ea,eligibilityGKs:fa,fbExperimentID:ga,fbOnlyMediaRestriction:ha,flowType:o,gatelogic:ia,humanReadableDescription:ja,instructions:ka,isValidating:r,locales:la,offlineOnly:ma,pageLiked:na,potentialOwnersForAttribution:oa,productVisibilityPolicy:pa,rankingStrategy:ra,rankWeight:sa,selectedAttributedOwnerID:ta,selectedInstagramAttribution:v,selectedInstructionID:ua,selectedOwnerID:x,selectedTemplateCategoryID:va,selfBirthday:wa,templateCategories:xa,timingSchedule:ya,thumbnailName:za,thumbnailURI:ab,whitelistCheckEligibility:bb,whitelistedUsers:cb,adsTargetingSpec:db})):null,this.props.context.explainFBOnly?c('React').createElement(c('MediaEffectFBOnlyPermissionExplanationCard.react'),{explanationLink:this.props.context.explainFBOnly}):null)};n.prototype.$MediaEffectMetadataContainer2=function(){var o=this.props.flowType,p=this.state,q=p.isValidating,r=p.location,s=p.locationPageID,t=p.locationTarget,u=p.selectedOwner;if(!u||!this.props.context.allowLocationFrameCreation||!(o!==c('MediaEffectFlowType').MASK||u.isFirstParty||this.props.context.canThirdPartyMaskLocation))return null;return c('React').createElement('div',null,c('mediaEffectGKCheck')('cep_location_targeting_v2')?c('React').createElement(c('MediaEffectMetadataLocationV2.react'),{isValidating:q,location:r,locationTargetType:t,onLocationSelected:c('MediaEffectMetadataActionCreators').changeLocation,onLocationTargetTypeSelected:c('MediaEffectMetadataActionCreators').changeLocationTarget,selectedOwner:u}):c('React').createElement(c('MediaEffectMetadataLocation.react'),{isValidating:q,locationPageID:s,locationTarget:t,onLocationDescriptionLoaded:c('MediaEffectMetadataActionCreators').setPlaceDescription,onLocationPageSelected:c('MediaEffectMetadataActionCreators').changeLocationPage,onLocationTargetSelected:c('MediaEffectMetadataActionCreators').changeLocationTarget,selectedOwner:u}),c('React').createElement('div',{className:"_204i"}))};n.prototype.$MediaEffectMetadataContainer1=function(o){c('MediaEffectMetadataActionCreators').changeOwner(o);c('MediaEffectMetadataActionCreators').resetLocation()};function n(){j.apply(this,arguments)}f.exports=c('FluxContainer').create(n,{withProps:true})}),null);
__d('MediaEffectMetadataAttributeOwner.react',['cx','fbt','React','SearchableEntry','StaticSearchSource','SUIMediaEffectTheme','SUISearchableSelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l='NO_OWNER_FOR_ATTRIBUTION';j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$MediaEffectMetadataAttributeOwner1=function(q){this.props.onAttributedOwnerChanged(q.getUniqueID()===l?null:q.getUniqueID());this.setState({attributeOwner:q})}.bind(this);var o=new (c('SearchableEntry'))({uniqueID:l,title:'Default Attribution'}),p=n.potentialOwnersForAttribution.entrySeq().map(function(q){var r=q[0],s=q[1];return new (c('SearchableEntry'))({uniqueID:r,title:s})}).toArray();p.unshift(o);this.attributeOwnerSearchSource=new (c('StaticSearchSource'))(p);if(n.selectedAttributedOwner){this.state={attributeOwner:new (c('SearchableEntry'))({uniqueID:n.selectedAttributedOwner,title:n.potentialOwnersForAttribution.get(n.selectedAttributedOwner)})}}else this.state={attributeOwner:o};}m.prototype.render=function(){return c('React').createElement(c('SUISearchableSelector.react'),{className:"_3_kx",emptySearchResultsContent:'No matching results.',onChange:this.$MediaEffectMetadataAttributeOwner1,placeholder:i._("Enter an owner or leave it blank"),searchSource:this.attributeOwnerSearchSource,theme:c('SUIMediaEffectTheme'),value:this.state.attributeOwner,width:'100%'})};f.exports=m}),null);
__d('MediaEffectMetadataFBOnlyRanking.react',['cx','MediaEffectCard.react','React','XUIRadioList.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=c('XUIRadioList.react').Item,m=/^\+?(0|[1-9]\d*)$/;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){var o=this.props,p=o.onManualRankWeightChange,q=o.onRankingStrategyChange,r=o.rankingStrategy,s=o.rankWeight;return c('React').createElement(c('MediaEffectCard.react'),{title:'Select Ranking'},c('React').createElement(c('XUIRadioList.react'),{onValueChange:q,selectedValue:r},c('React').createElement(l,{value:'DEFAULT'},'Default'),c('React').createElement(l,{value:'BOOST'},'Boost'),c('React').createElement(l,{value:'MANUAL'},'Enter a manual rank')),r==='MANUAL'?c('React').createElement('div',{className:"_2piv"},c('React').createElement(c('XUITextInput.react'),{placeholder:'Enter an Integer',className:"_3_kx",height:'tall',onChange:p,value:s,xuiError:!s||m.test(s)?null:'Not an integer'})):null)};function n(){i.apply(this,arguments)}n.propTypes={onManualRankWeightChange:k.func.isRequired,onRankingStrategyChange:k.func.isRequired,rankingStrategy:k.string,rankWeight:k.string};f.exports=n}),null);
__d('MediaEffectMetadataFeatureGroupsCheckList.react',['Grid.react','InputLabel_DEPRECATED.react','InputLabelLabel_DEPRECATED.react','MediaEffectCard.react','React','Tooltip.react','XUICheckboxInput.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('Grid.react').GridItem;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{title:'Effect Group',tooltip:'choose the feature group the effect belongs to'},c('React').createElement(c('Grid.react'),{cols:1},c('React').createElement(j,null,c('React').createElement(c('InputLabel_DEPRECATED.react'),null,c('React').createElement(c('XUICheckboxInput.react'),{checked:this.props.offlineOnly,onChange:function(event){this.props.onOfflineOnlyChange(event.target.checked)}.bind(this)}),c('React').createElement(c('InputLabelLabel_DEPRECATED.react'),null,c('React').createElement(c('Tooltip.react'),{tooltip:'only available when camera is offline'},'Offline Only')))),c('React').createElement(j,null,c('React').createElement(c('InputLabel_DEPRECATED.react'),null,c('React').createElement(c('XUICheckboxInput.react'),{checked:this.props.selfBirthday,onChange:function(event){this.props.onselfBirthdayChange(event.target.checked)}.bind(this)}),c('React').createElement(c('InputLabelLabel_DEPRECATED.react'),null,c('React').createElement(c('Tooltip.react'),{tooltip:'can see only when self birthday'},'Self Birthday Only'))))))};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectGKSearchSource',['AbstractAsyncSearchSource','AbstractSearchSource','AsyncRequest','WebAsyncSearchSourceUtils'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$MediaEffectGKSearchSource1=new (c('AbstractAsyncSearchSource'))(k,this.$MediaEffectGKSearchSource2,c('WebAsyncSearchSourceUtils').normalizeResponse)}j.prototype.bootstrapImpl=function(k){this.$MediaEffectGKSearchSource1.bootstrap(k)};j.prototype.searchImpl=function(k,l,m){this.$MediaEffectGKSearchSource1.search(k,l,m)};j.prototype.getBootstrappedEntries=function(k){return this.$MediaEffectGKSearchSource1.getBootstrappedEntries(k)};j.prototype.getAllEntriesMap=function(){return this.$MediaEffectGKSearchSource1.getAllEntriesMap()};j.prototype.setRequestData=function(k){this.$MediaEffectGKSearchSource1.setRequestData(k)};j.prototype.$MediaEffectGKSearchSource2=function(k,l,m,n){new (c('AsyncRequest'))().setData(babelHelpers['extends']({},k,l.data)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(m).setErrorHandler(n).setAllowCrossOrigin(true).setURI(l.uri).send()};f.exports=j}),null);
__d('MediaEffectMetadataGKsTypeahead.react',['MediaEffectGKSearchSource','React','SearchableEntry','URI','XUITokenizer.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=[',',';',' '],l=new (c('URI'))('/intern/perflab/ajax/select_gk/typeahead').setSubdomain('our');h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;m.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false});};function m(n){i.constructor.call(this,n);this.searchSource=new (c('MediaEffectGKSearchSource'))({queryRequests:[{uri:l}]});this.state={resetQueryString:false}}m.prototype.render=function(){return c('React').createElement(c('XUITokenizer.react'),{entries:this.$MediaEffectMetadataGKsTypeahead1(),onAddEntryAttempt:this.$MediaEffectMetadataGKsTypeahead2.bind(this),onEnterWithoutSelection:this.$MediaEffectMetadataGKsTypeahead3.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataGKsTypeahead4.bind(this),placeholder:this.props.placeholder,queryString:this.state.resetQueryString?'':undefined,searchSource:this.searchSource,tokenizeQueryString:this.$MediaEffectMetadataGKsTypeahead5.bind(this),tokenizeQueryStringOnBlur:this.$MediaEffectMetadataGKsTypeahead3.bind(this)})};m.prototype.$MediaEffectMetadataGKsTypeahead1=function(){return this.props.GKs.map(function(n){return new (c('SearchableEntry'))({title:n,uniqueID:n})})};m.prototype.$MediaEffectMetadataGKsTypeahead2=function(n){this.$MediaEffectMetadataGKsTypeahead6();var o=n.getTitle();if(!o||!o.length)return;if(this.props.GKs.indexOf(o)!==-1)return;var p=this.props.GKs.slice();p[p.length]=o;this.props.onGKsChanged(p)};m.prototype.$MediaEffectMetadataGKsTypeahead4=function(n){this.$MediaEffectMetadataGKsTypeahead6();var o=n.getTitle(),p=this.props.GKs.indexOf(o);if(p===-1)return;var q=this.props.GKs.slice();q.splice(p,1);this.props.onGKsChanged(q)};m.prototype.$MediaEffectMetadataGKsTypeahead3=function(n){this.$MediaEffectMetadataGKsTypeahead6()};m.prototype.$MediaEffectMetadataGKsTypeahead5=function(n){return null};m.prototype.$MediaEffectMetadataGKsTypeahead6=function(){this.setState({resetQueryString:true})};m.propTypes={GKs:j.array,onGKsChanged:j.func.isRequired,placeholder:j.string};f.exports=m}),null);
__d('MediaEffectMetadataInstructions.react',['fbt','MediaEffectCard.react','React','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUISingleSelector.react').Option,l=c('React').PropTypes,m='0',n=c('React').createElement(k,{key:m,value:m},h._("No Instructions"));i=babelHelpers.inherits(o,c('React').PureComponent);j=i&&i.prototype;o.prototype.render=function(){var p=this.props,q=p.instructions,r=p.onInstructionSelected,s=p.selectedInstructionID,t=q.entrySeq().map(function(u){var v=u[0],w=u[1];return c('React').createElement(k,{value:v,key:v},w)}).toArray();t.unshift(n);return c('React').createElement(c('MediaEffectCard.react'),{title:'Interactivity Instructions'},c('React').createElement(c('XUISingleSelector.react'),{onChange:function u(v){r(v.value===m?null:v.value)},size:'large',value:s||m},t))};function o(){i.apply(this,arguments)}o.propTypes={instructions:l.object.isRequired,onInstructionSelected:l.func.isRequired,selectedInstructionID:l.string};f.exports=o}),null);
__d('MediaEffectMetadataLocale.react',['fbt','AdsTargetingLanguageSelector.react','MediaEffectCard.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Languages"),tooltip:h._("Only select a language if the people you want to reach use a language that's uncommon in your set location.")},c('React').createElement(c('AdsTargetingLanguageSelector.react'),{disabled:this.props.disabled,selectedLanguages:this.props.locales,onDataUpdate:function(m,n){this.props.onLocaleChanged(n)}.bind(this)}))};function l(){i.apply(this,arguments)}l.propTypes={disabled:k.bool,locales:k.array,onLocaleChanged:k.func.isRequired};f.exports=l}),null);
__d('MediaEffectMetadataPageTypeahead.react',['cx','fbt','CurrentUser','React','SearchableEntry','WebAsyncSearchSource','XUITypeahead.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.searchSource=new (c('WebAsyncSearchSource'))({queryRequests:[{uri:'/ajax/typeahead/search.php',data:{filter:['page'],viewer:c('CurrentUser').getID()}}]});this.state={queryString:''}}m.prototype.render=function(){var n=this.props.pageLiked;return c('React').createElement(c('XUITypeahead.react'),{className:"_3_kx",clearable:true,onBlur:this.$MediaEffectMetadataPageTypeahead1.bind(this),onChange:function(o){return this.setState({queryString:o.target.value})}.bind(this),onClear:this.$MediaEffectMetadataPageTypeahead2.bind(this),onSelectAttempt:this.$MediaEffectMetadataPageTypeahead3.bind(this),placeholder:i._("Enter a page name or leave it in blank"),queryString:n?n.title:this.state.queryString,searchSource:this.searchSource,selectedEntry:n?new (c('SearchableEntry'))({title:n.title,uniqueID:n.uniqueID}):null})};m.prototype.$MediaEffectMetadataPageTypeahead3=function(n){this.props.onPageLikedChange({title:n.getTitle(),uniqueID:n.getUniqueID()})};m.prototype.$MediaEffectMetadataPageTypeahead1=function(){if(!this.props.pageLiked)this.setState({queryString:''});};m.prototype.$MediaEffectMetadataPageTypeahead2=function(){this.setState({queryString:''});this.props.onPageLikedChange(null)};m.propTypes={onPageLikedChange:l.func.isRequired,pageLiked:l.oneOfType([l.oneOf([null]),l.instanceOf(Object)])};f.exports=m}),null);
__d('MediaEffectMetadataPageLiked.react',['MediaEffectCard.react','MediaEffectMetadataPageTypeahead.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{title:'Select a page'},c('React').createElement(c('MediaEffectMetadataPageTypeahead.react'),this.props))};function k(){h.apply(this,arguments)}k.propTypes={onPageLikedChange:j.func.isRequired,pageLiked:j.oneOfType([j.oneOf([null]),j.instanceOf(Object)])};f.exports=k}),null);
__d("FXProductVisibilityPolicyType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL_PRODUCTS:0,OWNING_PRODUCT_ONLY:1,SPECIFIC_PRODUCTS:2,ALL_EXCEPT_PRODUCTS:3,ANY_FACEBOOK_UNIVERSE:4})}),null);
__d('MediaEffectMetadataProductVisibility.react',['cx','FXMediaEffectProduct','FXProductVisibilityPolicyType','FXProductVisibilityPolicyTypeLabels','LeftRight.react','MediaEffectCard.react','React','XUICheckboxList.react','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUISingleSelector.react').Option,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataProductVisibility4=function(s){var t=this.props.productVisibilityPolicy.products.slice();t.push(s.value);this.$MediaEffectMetadataProductVisibility6(t)}.bind(this),this.$MediaEffectMetadataProductVisibility5=function(s){var t=this.props.productVisibilityPolicy.products.slice();t.splice(t.indexOf(s.value),1);this.$MediaEffectMetadataProductVisibility6(t)}.bind(this),o}m.prototype.$MediaEffectMetadataProductVisibility1=function(n){return n===c('FXProductVisibilityPolicyType').SPECIFIC_PRODUCTS||n===c('FXProductVisibilityPolicyType').ALL_EXCEPT_PRODUCTS};m.prototype.$MediaEffectMetadataProductVisibility2=function(){return this.props.productVisibilityPolicy.type};m.prototype.$MediaEffectMetadataProductVisibility3=function(){var n=this.props.productVisibilityPolicy.type;if(!this.$MediaEffectMetadataProductVisibility1(n))return c('React').createElement('div',null);var o=this.props.productVisibilityPolicy.products,p=Object.keys(c('FXMediaEffectProduct')).map(function(q){return {label:c('FXMediaEffectProduct')[q],value:c('FXMediaEffectProduct')[q],checked:o.indexOf(c('FXMediaEffectProduct')[q])!==-1}});return c('React').createElement('div',null,c('React').createElement('span',null,'You must select at least one product for this setting:'),c('React').createElement(c('XUICheckboxList.react'),{items:p,onAdd:this.$MediaEffectMetadataProductVisibility4,onRemove:this.$MediaEffectMetadataProductVisibility5}))};m.prototype.$MediaEffectMetadataProductVisibility6=function(n){var o={type:this.props.productVisibilityPolicy.type,products:n};this.props.onProductVisibilityPolicyChange(o)};m.prototype.$MediaEffectMetadataProductVisibility7=function(n){var o={type:n,products:[]};this.props.onProductVisibilityPolicyChange(o)};m.prototype.render=function(){var n=Object.keys(c('FXProductVisibilityPolicyType')).map(function(o){return c('React').createElement(k,{key:o,value:c('FXProductVisibilityPolicyType')[o]},c('FXProductVisibilityPolicyTypeLabels')[o])});return c('React').createElement(c('MediaEffectCard.react'),{title:'Products which may consume this effect',tooltip:'You may limit which products this effect may be consumed in. Allowing a product to use an effect does not necessarily mean it WILL show up in that product, since each product may have its own logic for determining which effects it wishes to show. Use this setting to describe restrictions due to licensing, marketing, etc.'},c('React').createElement(c('LeftRight.react'),{direction:'left'},c('React').createElement(c('XUISingleSelector.react'),{className:"_2pik",maxwidth:0,onChange:function(o){this.$MediaEffectMetadataProductVisibility7(o.value)}.bind(this),size:'large',value:this.props.productVisibilityPolicy.type},n),this.$MediaEffectMetadataProductVisibility3()))};m.propTypes={productVisibilityPolicy:l.instanceOf(Object),onProductVisibilityPolicyChange:l.func.isRequired};f.exports=m}),null);
__d('MediaEffectMetadataValidationUtils',['MediaEffectPlaceDescriptionRecord'],(function a(b,c,d,e,f,g){'use strict';var h={validateName:function i(j){return !!j&&j.trim()!==''},validateOwnerID:function i(j){return !!j&&j.trim()!==''},validateTemplateCategoryID:function i(j){return !!j&&j.trim()!==''},validateLocationPageID:function i(j){return !!j&&j.trim()!==''},validateLocation:function i(j){return !!j&&(h.validateLocationPageID(j.key)||j.latitude!==null&&j.longitude!==null)},validateTimeRange:function i(j,k){if(j&&k&&j.getTime()>=k.getTime())return false;return true}};f.exports=h}),null);
__d('MediaEffectMetadataTemplateCategories.react',['cx','fbt','MediaEffectMetadataValidationUtils','React','XUIError.react','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISingleSelector.react').Option,m='0';j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectMetadataTemplateCategories1=function(event){this.props.onTemplateCategorySelected(event.value===m?null:event.value)}.bind(this),p}n.prototype.$MediaEffectMetadataTemplateCategories2=function(){var o=this.props,p=o.isValidating,q=o.selectedTemplateCategoryID,r=c('MediaEffectMetadataValidationUtils').validateTemplateCategoryID(q);if(p&&!r)return i._("Please select a template category");return null};n.prototype.render=function(){var o=this.props,p=o.selectedTemplateCategoryID,q=o.templateCategories,r=q.entrySeq().map(function(s){var t=s[0],u=s[1];return c('React').createElement(l,{key:t,value:t},u)}).toArray();if(!p)r.unshift(c('React').createElement(l,{key:m,value:m},i._("Select template category")));return c('React').createElement(c('XUIError.react'),{xuiError:this.$MediaEffectMetadataTemplateCategories2()},c('React').createElement('div',null,'Select the template category',c('React').createElement(c('XUISingleSelector.react'),{className:"_3-9a",onChange:this.$MediaEffectMetadataTemplateCategories1,size:'medium',value:p||m},r)))};f.exports=n}),null);
__d('MediaEffectMetadataThumbnailUploader.react',['cx','FileInput.react','Image.react','InlineBlock.react','LeftRight.react','MediaEffectCard.react','React','XUIButton.react','XUINotice.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.onFileInputChange=function(event){var m=event.target.files[0],n=m.size/1024/1024;if(n<1){this.props.onFileInputChange(m);this.setState({sizeError:false})}else this.setState({sizeError:true});}.bind(this);this.state={sizeError:false}}k.prototype.render=function(){var l=this.props,m=l.thumbnailName,n=l.thumbnailURI;return c('React').createElement(c('MediaEffectCard.react'),{title:'Thumbnail'},c('React').createElement(c('LeftRight.react'),{direction:'left'},c('React').createElement(c('Image.react'),{className:"_3-91",height:144,src:n,width:144}),c('React').createElement('div',null,c('React').createElement('div',{className:"_2phz"},'Upload a 144 x 144 thumbnail that will be displayed in the camera tray, must be less than 1MB.'),this.state.sizeError?c('React').createElement(c('XUINotice.react'),{use:'warn'},'Size is more than 1MB'):null,c('React').createElement('div',null,c('React').createElement('div',{className:"_2phz"},c('React').createElement(c('FileInput.react'),{accept:'image/*',name:'thumbnail_file',onChange:this.onFileInputChange},c('React').createElement(c('XUIButton.react'),{href:{url:'#'},label:'Upload PNG'}))),c('React').createElement(c('InlineBlock.react'),{alignv:'middle'},m)))))};f.exports=k}),null);
__d('MediaEffectMetadataTiming.react',['fbt','AdsDayPartingTable.react','DayPartingGrid','DayPartingUtils','React','XUIRadioList.react','MediaEffectCard.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUIRadioList.react').Item,l=c('React').PropTypes,m=60*60;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{title:h._("Timing")},c('React').createElement(c('XUIRadioList.react'),{onValueChange:this.$MediaEffectMetadataTiming1.bind(this),selectedValue:this.$MediaEffectMetadataTiming2()},c('React').createElement(k,{value:'no_constrain'},h._("All the time")),c('React').createElement(k,{value:'specified'},h._("During set days and hours"))),this.$MediaEffectMetadataTiming3())};n.prototype.$MediaEffectMetadataTiming1=function(o){if(o==='specified'){this.props.onScheduleChange([])}else this.props.onScheduleChange(null);};n.prototype.$MediaEffectMetadataTiming2=function(){if(!this.props.timingSchedule)return 'no_constrain';return 'specified'};n.prototype.$MediaEffectMetadataTiming3=function(){if(!this.props.timingSchedule)return null;return c('React').createElement(c('AdsDayPartingTable.react'),{grid:this.$MediaEffectMetadataTiming4(),reducedWidth:true,onGridChange:this.$MediaEffectMetadataTiming5.bind(this)})};n.prototype.$MediaEffectMetadataTiming4=function(){var o=new (c('DayPartingGrid'))();if(!this.props.timingSchedule||this.props.timingSchedule.length===0)return o;var p=0,q=0;for(var r=0;r<c('DayPartingUtils').DAYS_IN_WEEK;r++)for(var s=0;s<c('DayPartingUtils').HOURS_IN_DAY;s++){var t=this.props.timingSchedule[p];if(!t)return o;o.hours[r][s]=t.start_time<=q&&q<t.end_time;if(q>=t.end_time)p++;q+=m}return o};n.prototype.$MediaEffectMetadataTiming5=function(o){var p=null,q=[],r=0;for(var s=0;s<c('DayPartingUtils').DAYS_IN_WEEK;s++)for(var t=0;t<c('DayPartingUtils').HOURS_IN_DAY;t++){if(p===null){if(o.hours[s][t])p=r;}else if(!o.hours[s][t]){q[q.length]={start_time:p,end_time:r-1};p=null}r+=m}if(p)q[q.length]={start_time:p,end_time:r-1};this.props.onScheduleChange(q)};function n(){i.apply(this,arguments)}n.propTypes={timingSchedule:l.oneOfType([l.oneOf([null]),l.instanceOf(Array)]),onScheduleChange:l.func.isRequired};f.exports=n}),null);
__d('MediaEffectMetadataUserTypeahead.react',['fbt','CurrentUser','React','SearchableEntry','WebAsyncSearchSource','XUITokenizer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false});};function l(m){j.constructor.call(this,m);this.searchSource=new (c('WebAsyncSearchSource'))({queryRequests:[{uri:'/ajax/typeahead/search.php',data:{filter:['user'],viewer:c('CurrentUser').getID()}}]});this.state={resetQueryString:false}}l.prototype.render=function(){var m=this.props.whitelistedUsers;return c('React').createElement(c('XUITokenizer.react'),{entries:m.map(function(n){return new (c('SearchableEntry'))({title:n.name,uniqueID:n.uniqueID})}),onAddEntryAttempt:this.$MediaEffectMetadataUserTypeahead1.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataUserTypeahead2.bind(this),placeholder:h._("Enter a user's name that you want to whitelist"),queryString:this.state.resetQueryString?'':undefined,searchSource:this.searchSource})};l.prototype.$MediaEffectMetadataUserTypeahead1=function(m){this.setState({resetQueryString:true});this.props.onAddEntry({name:m.getTitle(),uniqueID:m.getUniqueID()})};l.prototype.$MediaEffectMetadataUserTypeahead2=function(m){this.setState({resetQueryString:true});this.props.onRemoveEntry({name:m.getTitle(),uniqueID:m.getUniqueID()})};l.propTypes={onAddEntry:k.func.isRequired,onRemoveEntry:k.func.isRequired,whitelistedUsers:k.array};l.defaultProps={whitelistedUsers:[]};f.exports=l}),null);
__d('MediaEffectProfile',['immutable'],(function a(b,c,d,e,f,g){var h,i,j=c('immutable').Record,k=c('immutable').OrderedSet,l=c('immutable').Set,m=j({effectIDs:k(),id:'',isFirstParty:false,isProductionFirstParty:false,name:'',product:null,src:null,policies:l(),type:'',uri:null});h=babelHelpers.inherits(n,m);i=h&&h.prototype;n.fromObject=function(o){'use strict';if(o==null)return new n({});return new n(babelHelpers['extends']({},o,{effectIDs:new k(o.effectIDs),policies:new l(o.policies)}))};function n(){'use strict';h.apply(this,arguments)}f.exports=n}),null);
__d('MediaEffectOwner',['MediaEffectProfile'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MediaEffectProfile'));i=h&&h.prototype;function j(){'use strict';h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectMetadataFBOnly.react',['cx','FXMediaEffectProduct','InspirationsCategoryNameFBOnly.react','MediaEffectCard.react','MediaEffectFlowType','MediaEffectMetadataActionCreators','MediaEffectMetadataAdsInterest.react','MediaEffectMetadataAttributeOwner.react','MediaEffectMetadataFBOnlyRanking.react','MediaEffectMetadataFeatureGroupsCheckList.react','MediaEffectMetadataGKsTypeahead.react','MediaEffectMetadataInstructions.react','MediaEffectMetadataLocale.react','MediaEffectMetadataPageLiked.react','MediaEffectMetadataProductVisibility.react','MediaEffectMetadataTemplateCategories.react','MediaEffectMetadataThumbnailUploader.react','MediaEffectMetadataTiming.react','MediaEffectMetadataUserTypeahead.react','MediaEffectMetadataViewStore','MediaEffectOwner','React','Text.react','XUICheckboxInput.react','XUIText.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.catalogGKs,n=l.inspirationCategoryNames,o=l.effectHasText,p=l.eligibilityGKs,q=l.fbExperimentID,r=l.fbOnlyMediaRestriction,s=l.gatelogic,t=l.humanReadableDescription,u=l.instructions,v=l.isValidating,w=l.locales,x=l.offlineOnly,y=l.pageLiked,z=l.potentialOwnersForAttribution,aa=l.selfBirthday,ba=l.productVisibilityPolicy,ca=l.rankingStrategy,da=l.rankWeight,ea=l.selectedAttributedOwnerID,fa=l.selectedInstagramAttribution,ga=l.selectedInstructionID,ha=l.selectedOwnerID,ia=l.selectedTemplateCategoryID,ja=l.templateCategories,ka=l.thumbnailName,la=l.thumbnailURI,ma=l.timingSchedule,na=l.whitelistCheckEligibility,oa=l.whitelistedUsers,pa=l.adsTargetingSpec,qa=c('MediaEffectMetadataViewStore').isFirstPartyProduct(ha,c('FXMediaEffectProduct').INSTAGRAM);return c('React').createElement('div',{className:"_2ex3"},c('React').createElement('div',{className:"_3lr9"},c('React').createElement(c('Text.react'),{className:"_3lra"},'FB-Only'),c('React').createElement(c('XUIText.react'),null,'Options below are only to be used by Facebook employees. Do not use these options for effects owned by your personal accounts.')),c('React').createElement(c('MediaEffectMetadataThumbnailUploader.react'),{onFileInputChange:c('MediaEffectMetadataActionCreators').setThumbnail,thumbnailName:ka,thumbnailURI:la}),c('React').createElement(c('InspirationsCategoryNameFBOnly.react'),{suggested_category_names:n}),c('React').createElement(c('MediaEffectCard.react'),{title:'Human Readable Description',tooltip:'If your effect contains text, please input the same exact text here. If your effect does not contain text, please input a description which is understandable to any user. Your description here will be translated and read out to user on the client with the user\'s locale.'},c('React').createElement(c('XUITextInput.react'),{className:"_3_kx",height:'tall',name:'humanReadableDescription',onChange:this.$MediaEffectMetadataFBOnly1,placeholder:'Add an understandable description here',value:t},t)),c('React').createElement(c('MediaEffectCard.react'),{title:'Effect Properties'},this.props.flowType===c('MediaEffectFlowType').TEMPLATE||ia?c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('MediaEffectMetadataTemplateCategories.react'),{isValidating:v,onTemplateCategorySelected:c('MediaEffectMetadataActionCreators').selectTemplateCategoryID,selectedTemplateCategoryID:ia,templateCategories:ja})):null,c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('XUICheckboxInput.react'),{checked:o,name:'effectHasText',onChange:this.$MediaEffectMetadataFBOnly2}),'Effect contains literal text'),c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('XUICheckboxInput.react'),{checked:r,name:'fbOnlyMediaRestriction',onChange:this.$MediaEffectMetadataFBOnly3}),'Limit created media to FB Only visibility')),c('React').createElement(c('MediaEffectMetadataProductVisibility.react'),{onProductVisibilityPolicyChange:c('MediaEffectMetadataActionCreators').changeProductVisibiilityPolicy,productVisibilityPolicy:ba}),qa?null:c('React').createElement(c('MediaEffectCard.react'),{title:'Eligibility Gate Keepers Project'},c('React').createElement(c('MediaEffectMetadataGKsTypeahead.react'),{GKs:p,onGKsChanged:c('MediaEffectMetadataActionCreators').changeEligibilityGKs,placeholder:'Enter a project name or leave it blank'})),qa?null:c('React').createElement(c('MediaEffectCard.react'),{title:'Catalog Gate Keepers Project'},c('React').createElement(c('MediaEffectMetadataGKsTypeahead.react'),{GKs:m,onGKsChanged:c('MediaEffectMetadataActionCreators').changeCatalogGKs,placeholder:'Enter a project name or leave it blank'})),qa?c('React').createElement(c('MediaEffectCard.react'),{title:'Instagram Gatelogic'},c('React').createElement(c('XUITextInput.react'),{className:"_3_kx",height:'tall',name:'gatelogic',onChange:this.$MediaEffectMetadataFBOnly4,placeholder:'category.my_gatelogic',value:s},s)):null,qa?c('React').createElement(c('MediaEffectCard.react'),{title:'Instagram Attribution'},fa?c('React').createElement(c('XUIText.react'),null,fa.name):c('React').createElement(c('XUIText.react'),null,'This effect is not attributed to an Instagram account.')):null,c('React').createElement(c('MediaEffectCard.react'),{title:'Attributed Owner'},c('React').createElement(c('MediaEffectMetadataAttributeOwner.react'),{onAttributedOwnerChanged:c('MediaEffectMetadataActionCreators').changeAttributedOwner,potentialOwnersForAttribution:z,selectedAttributedOwner:ea})),c('React').createElement(c('MediaEffectCard.react'),{title:'Whitelisted Users'},c('React').createElement(c('MediaEffectMetadataUserTypeahead.react'),{onAddEntry:c('MediaEffectMetadataActionCreators').addWhitelistedUser,onRemoveEntry:c('MediaEffectMetadataActionCreators').removeWhitelistedUser,whitelistedUsers:oa}),c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('XUICheckboxInput.react'),{checked:na,name:'whitelistCheckEligibility',onChange:function ra(sa){c('MediaEffectMetadataActionCreators').changeWhitelistCheckEligibility(sa.target.checked)},ref:'whitelistCheckEligibility'}),'Check eligibility for whitelisted users.')),c('React').createElement(c('MediaEffectMetadataLocale.react'),{locales:w,onLocaleChanged:c('MediaEffectMetadataActionCreators').changeLocales}),c('React').createElement(c('MediaEffectMetadataTiming.react'),{timingSchedule:ma,onScheduleChange:c('MediaEffectMetadataActionCreators').changeTimingSchedule}),c('React').createElement(c('MediaEffectMetadataAdsInterest.react'),{adsTargetingSpec:pa}),c('React').createElement(c('MediaEffectMetadataFBOnlyRanking.react'),{onManualRankWeightChange:c('MediaEffectMetadataActionCreators').changeManualRankWeight,onRankingStrategyChange:c('MediaEffectMetadataActionCreators').changeRankingStrategy,rankingStrategy:ca||'DEFAULT',rankWeight:da}),c('React').createElement(c('MediaEffectMetadataInstructions.react'),{instructions:u,onInstructionSelected:c('MediaEffectMetadataActionCreators').selectInstruction,selectedInstructionID:ga}),c('React').createElement(c('MediaEffectMetadataPageLiked.react'),{onPageLikedChange:c('MediaEffectMetadataActionCreators').changePageLiked,pageLiked:y}),c('React').createElement(c('MediaEffectMetadataFeatureGroupsCheckList.react'),{offlineOnly:x,selfBirthday:aa,onOfflineOnlyChange:c('MediaEffectMetadataActionCreators').checkOfflineOnly,onselfBirthdayChange:c('MediaEffectMetadataActionCreators').checkSelfBirthday}),c('React').createElement(c('MediaEffectCard.react'),{title:'FB Camera Experiment'},q?c('React').createElement('p',null,'This effect is part of experiment ',q,'.'):c('React').createElement('p',null,'This effect is not part of an active experiment.')))};k.prototype.$MediaEffectMetadataFBOnly2=function(event){c('MediaEffectMetadataActionCreators').changeEffectHasText(event.target.checked)};k.prototype.$MediaEffectMetadataFBOnly3=function(event){c('MediaEffectMetadataActionCreators').checkFBOnlyMediaRestriction(event.target.checked)};k.prototype.$MediaEffectMetadataFBOnly1=function(event){c('MediaEffectMetadataActionCreators').changeHumanReadableDescription(event.target.value)};k.prototype.$MediaEffectMetadataFBOnly4=function(event){c('MediaEffectMetadataActionCreators').changeGatelogic(event.target.value)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MediaEffectProfilePolicy",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SELF_LOCATION_ONLY:"self_location_only",LOCATION_PROHIBITED:"location_prohibited"})}),null);
__d("PlaceSearchSuppressionVersion",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADS_TARGETING:"ads_targeting_suppression",CAMERA_LOCATION_FRAMES:"camera_location_frames_suppression",GRAPH_API:"graph_api_suppression",MAIN_TYPEAHEAD:"main_typeahead_suppression",QUERIED_CHECKIN:"queried_checkin_suppression",QUERYLESS_CHECKIN:"queryless_checkin_suppression",SET_SEARCH:"set_search_suppression",SUGGESTIFIER:"suggestifier_suppression",PROD_SUPPRESSION:"prod_suppression"})}),null);
__d('MediaEffectMetadataLocation.react',['cx','fbt','AdInterfacesUiLogger','AdsTargetingAggregatedMap.react','AdsTargetingLocationMapRecord','CameraEffectsPOITypeaheadSearchGK','GeoCoordinates','GraphAPI','LeafletView','LocationConstants','Log','MediaEffectCard.react','MediaEffectEditorFunnelLogger','MediaEffectMetadataValidationUtils','MediaEffectPlaceDescriptionRecord','MediaEffectProfilePolicy','PlaceSearchConstants','PlaceSearchSuppressionVersion','React','ReactComposerLocationSearchSource','SearchableEntry','Tooltip.react','XUIGrayText.react','XUIRadioList.react','XUIText.react','XUITypeahead.react','XUITypeaheadView.react','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes,n={everyone:'everyone',targeted:'targeted'},o=200;j=babelHelpers.inherits(p,c('React').PureComponent);k=j&&j.prototype;function p(q){k.constructor.call(this,q);this.$MediaEffectMetadataLocation3=function(r){if(r===n.everyone){this.props.onLocationPageSelected(null);this.setState(this.$MediaEffectMetadataLocation1())}if(r===n.targeted){var s=this.props.selectedOwner;if(s&&this.$MediaEffectMetadataLocation4()){this.props.onLocationPageSelected(s.id);this.updateStateByLocationPageID(s.id)}}this.props.onLocationTargetSelected(r)}.bind(this);this.onSelectTypeahead=function(r,event){var s=r.getUniqueID();c('MediaEffectEditorFunnelLogger').logChangeLocation();this.props.onLocationPageSelected(s);this.updateStateByLocationPageID(s)}.bind(this);this.$MediaEffectMetadataLocation10=function(r){this.setState({view:r})}.bind(this);this.state=Object.assign({},this.$MediaEffectMetadataLocation1());c('AdInterfacesUiLogger').setAccountID('0');c('AdInterfacesUiLogger').setAppName('CameraMediaEffectAudience')}p.prototype.componentDidMount=function(){if(this.props.locationPageID)this.updateStateByLocationPageID(this.props.locationPageID);};p.prototype.componentWillReceiveProps=function(q){if(q.selectedOwner.id!==this.props.selectedOwner.id){this.setState(this.$MediaEffectMetadataLocation1());this.props.onLocationPageSelected(null)}};p.prototype.$MediaEffectMetadataLocation2=function(){var q={event_name:c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,event_specific_data:{context:'places_typeahead:'+c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,source:c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,ref:'MediaEffectMetadataLocation.react'}};return c('ReactComposerLocationSearchSource')({},{hide_geo:false,allow_poi:c('CameraEffectsPOITypeaheadSearchGK').gkResult,allow_country:this.props.selectedOwner.isFirstParty||c('mediaEffectGKCheck')('media_effect_allow_country_location_targeting'),suppression_version:c('PlaceSearchSuppressionVersion').CAMERA_LOCATION_FRAMES},q)};p.prototype.$MediaEffectMetadataLocation1=function(){return {searchSource:this.$MediaEffectMetadataLocation2(),selectedPlace:null,selectedPlaceLocation:{},view:c('LeafletView').DEFAULT,query:''}};p.prototype.$MediaEffectMetadataLocation5=function(){var q=c('React').createElement(c('XUIText.react'),{display:'block',key:'title'},this.props.locationTargetTypeTargetedLabel),r=this.$MediaEffectMetadataLocation6()?c('React').createElement(c('Tooltip.react'),{tooltip:i._("This option is unavailable")},q):q;return c('React').createElement(c('XUIRadioList.react'),{disabled:this.props.disabled,onValueChange:this.$MediaEffectMetadataLocation3,selectedValue:this.props.locationTarget},c('React').createElement(l,{disabled:this.props.disabled,value:n.everyone},c('React').createElement(c('XUIText.react'),{display:'block'},this.props.locationTargetTypeEveryoneLabel)),c('React').createElement(l,{disabled:this.props.disabled||this.$MediaEffectMetadataLocation6(),value:n.targeted},r))};p.prototype.$MediaEffectMetadataLocation7=function(){var q=this.props,r=q.isValidating,s=q.locationPageID,t=c('MediaEffectMetadataValidationUtils').validateLocationPageID(s);if(r&&this.props.locationTarget===n.targeted&&!t)return i._("Please select a location");return null};p.prototype.$MediaEffectMetadataLocation8=function(){if(this.props.locationTarget===n.everyone)return null;if(this.$MediaEffectMetadataLocation4())return null;return c('React').createElement(c('XUITypeahead.react'),{className:"_3_kx",clearable:true,disabled:this.props.disabled,highlightOnSelect:true,initialEntry:null,onChange:function(event){this.setState({query:event.target.value})}.bind(this),onClear:function(){this.setState({query:'',selectedPlace:null})}.bind(this),onSelectAttempt:this.onSelectTypeahead,placeholder:i._("Choose a location"),presenter:{ViewRenderer:c('XUITypeaheadView.react'),useLayer:true},queryString:this.state.query,searchSource:this.state.searchSource,selectedEntry:this.state.selectedPlace,showEntriesOnFocus:true,tallInput:true,xuiError:this.$MediaEffectMetadataLocation7()})};p.prototype.$MediaEffectMetadataLocation9=function(){var q=this.state.selectedPlace,r=this.state.selectedPlaceLocation,s=this.props.locationTarget;if(q&&r&&s===n.targeted){var t,u={name:q.getTitle(),key:q.getUniqueID(),type:q.getType()==='city'?c('LocationConstants').CITY:c('LocationConstants').CUSTOM_LOCATION,latitude:r.latitude,longitude:r.longitude},v=c('AdsTargetingLocationMapRecord').fromGeoLocations((t={},t[c('LocationConstants').CUSTOM_LOCATIONS]=[u],t));if(v&&v.size>0)return c('React').createElement(c('AdsTargetingAggregatedMap.react'),{disableCollapseButton:true,height:o,locationRecords:v,onViewChange:this.$MediaEffectMetadataLocation10,view:this.state.view});}return null};p.prototype.updateStateByLocationPageID=function(q){c('GraphAPI')('2.5').object('page',q).get({fields:'name, location, place_type'}).done(function(r){var s=new (c('GeoCoordinates'))(r.location.latitude,r.location.longitude),t=new (c('LeafletView'))({center:s,zoom:5});this.setState({selectedPlace:new (c('SearchableEntry'))({uniqueID:r.id,title:r.name,type:r.place_type}),selectedPlaceLocation:r.location,query:r.name,view:t});this.props.onLocationDescriptionLoaded(new (c('MediaEffectPlaceDescriptionRecord'))({name:r.name,key:r.id,type:r.place_type==='city'?c('LocationConstants').CITY:c('LocationConstants').CUSTOM_LOCATION,latitude:r.location.latitude,longitude:r.location.longitude}))}.bind(this),function(){this.props.onLocationPageSelected(null);c('Log').info('Failed to fetch Page %s',q);this.setState(this.$MediaEffectMetadataLocation1())}.bind(this))};p.prototype.$MediaEffectMetadataLocation4=function(){var q=this.props.selectedOwner;if(!q)return false;return q.policies.includes(c('MediaEffectProfilePolicy').SELF_LOCATION_ONLY)};p.prototype.$MediaEffectMetadataLocation6=function(){var q=this.props.selectedOwner;if(!q)return false;return q.policies.includes(c('MediaEffectProfilePolicy').LOCATION_PROHIBITED)};p.prototype.render=function(){var q=i._("Choose whether your effect can be discovered anywhere or only at a specific location.");return c('React').createElement(c('MediaEffectCard.react'),{title:i._("Location"),tooltip:q},this.$MediaEffectMetadataLocation5(),this.$MediaEffectMetadataLocation8(),this.$MediaEffectMetadataLocation9())};p.propTypes={locationPageID:m.string,selectedOwner:m.object,onLocationPageSelected:m.func.isRequired};p.defaultProps={locationTargetTypeEveryoneLabel:i._("People in any location"),locationTargetTypeTargetedLabel:i._("People in a set location")};f.exports=p}),null);
__d('MediaEffectMetadataName.react',['cx','fbt','MediaEffectCard.react','MediaEffectEditorFunnelLogger','MediaEffectMetadataValidationUtils','MediaEffectWebdriverIDs','React','XUITextInput.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectMetadataName2=function(event){c('MediaEffectEditorFunnelLogger').logChangeName();this.props.onNameChange(event.target.value)}.bind(this);this.props.handleServerValidationResponse(m.nameData)}l.prototype.componentWillReceiveProps=function(m){this.props.handleServerValidationResponse(m.nameData)};l.prototype.$MediaEffectMetadataName1=function(){if(this.props.isValidating){var m=c('MediaEffectMetadataValidationUtils').validateName(this.props.nameData);if(!m)return i._("You must provide a name.");}if(this.props.isError)return i._("Invalid name");return null};l.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{title:i._("Name"),tooltip:i._("Choose a name for your effect.")},c('React').createElement(c('XUITextInput.react'),{className:"_3_kx",'data-testid':c('MediaEffectWebdriverIDs').LWE_EFFECT_FRAME_NAME_INPUT,disabled:this.props.disabled,height:'tall',onChange:this.$MediaEffectMetadataName2,placeholder:this.props.placeholder,value:this.props.nameData,xuiError:this.$MediaEffectMetadataName1()},this.props.nameData))};f.exports=l}),null);
__d("XMediaEffectNameValidationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/datasource\/name_validation\/",{name:{type:"String"}})}),null);
__d('MediaEffectMetadataNameContainer.react',['AsyncRequest','FluxContainer','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameCreationStepsConfig','MediaEffectMetadataActionCreators','MediaEffectMetadataName.react','MediaEffectMetadataStore','React','XMediaEffectNameValidationController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MediaEffectFrameCreationStepsConfig').CreationSteps;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectMetadataNameContainer1=function(q){if(q){var r=c('XMediaEffectNameValidationController').getURIBuilder().getURI();new (c('AsyncRequest'))(r).setData({name:q}).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(this.$MediaEffectMetadataNameContainer2).send()}}.bind(this),m}k.getStores=function(){return [c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectMetadataStore')]};k.calculateState=function(l,m){var n=c('MediaEffectFrameCreationStepsConfig').getStep(m.flowType,c('MediaEffectFrameCreateDialogDataStore').getState().get('validatingStep')),o=c('MediaEffectMetadataStore').getState().hasFrameNameError;return {isError:o,isValidating:n===j.TARGETING,nameData:c('MediaEffectMetadataStore').getState().get('name')}};k.prototype.$MediaEffectMetadataNameContainer2=function(l){var m=!l.payload.valid;c('MediaEffectMetadataActionCreators').updateNameValidation(m)};k.prototype.render=function(){return c('React').createElement(c('MediaEffectMetadataName.react'),babelHelpers['extends']({},this.props,{handleServerValidationResponse:this.$MediaEffectMetadataNameContainer1,isError:this.state.isError,isValidating:this.state.isValidating,nameData:this.state.nameData,onNameChange:c('MediaEffectMetadataActionCreators').changeName}))};f.exports=c('FluxContainer').create(k,{withProps:true})}),null);
__d('MediaEffectMetadataOwner.react',['cx','fbt','MediaEffectCard.react','MediaEffectMetadataActionCreators','MediaEffectMetadataValidationUtils','MediaEffectOwnerSelectorContainer.react','MediaEffectWebdriverIDs','React','XUICheckboxInput.react','XUIError.react','XUISingleSelector.react','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISingleSelector.react').Option;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataOwner1=function(s){this.props.onOwnerChange(s.value)}.bind(this),o}m.prototype.$MediaEffectMetadataOwner2=function(){var n=this.props,o=n.isValidating,p=n.selectedOwner;if(o){var q=p?p.id:null,r=p?p.isProductionFirstParty:false,s=c('MediaEffectMetadataValidationUtils').validateOwnerID(q);if(!s)return i._("Please select an owner");if(r&&!this.props.productionVerification)return 'You must confirm you wish to create a production effect';}return null};m.prototype.$MediaEffectMetadataOwner3=function(){return c('React').createElement('div',{className:"_2pid"},'Choosing this Owner will result in a production effect, which will be launched publicly according to its schedule and other constraints once it is submitted. If you are trying to create an effect for testing, please use a test owner or contact the ar_platform oncall for help.',c('React').createElement('div',{className:"_2pid"},c('React').createElement(c('XUICheckboxInput.react'),{checked:this.props.productionVerification,onChange:this.$MediaEffectMetadataOwner4}),c('React').createElement('label',null,'I know what I am doing and want to create a production effect')))};m.prototype.$MediaEffectMetadataOwner4=function(event){c('MediaEffectMetadataActionCreators').changeProductionVerification(event.target.checked)};m.prototype.render=function(){var n=0,o=this.props.selectedOwner,p=o?o.id:n,q=this.props.ownersData;if(!c('mediaEffectGKCheck')('ce_allow_event_owner_in_hub_flow'))q=q.filter(function(u){return u.type.toLowerCase()!=='event'});var r=i._("You can assign yourself or a Page to be the effects's owner. The owner's name and profile picture may appear next to it."),s=o&&o.isProductionFirstParty,t=s?this.$MediaEffectMetadataOwner3():null;return c('React').createElement(c('MediaEffectCard.react'),{className:s?"_2ex3":'',title:i._("Effect by"),tooltip:r},c('React').createElement(c('XUIError.react'),{xuiError:this.$MediaEffectMetadataOwner2()},c('React').createElement('div',{'data-testid':c('MediaEffectWebdriverIDs').LWE_EFFECT_OWNER_POPOVER_BUTTON},c('React').createElement(c('MediaEffectOwnerSelectorContainer.react'),{disabled:this.props.disabled}),t)))};f.exports=m}),null);
__d('OzConfig',['immutable','Reflux'],(function a(b,c,d,e,f,g){var h=c('immutable').Map,i=c('Reflux').createAction({sync:true}),j=c('Reflux').createAction({sync:true}),k=c('Reflux').createStore({init:function n(){this.data=h();this.listenTo(i,this._onSetConfig);this.listenTo(j,this._onUpdateConfig)},getInitialState:function n(){return this.data},_onSetConfig:function n(o){this.data=o;this.trigger(this.data)},_onUpdateConfig:function n(o){this.data=this.data.mergeDeep(o);this.trigger(this.data)}});function l(n){return k.data.get(n)}function m(n){return k.data.getIn(n)}f.exports={ConfigStore:k,getInStaticConfig:m,getStaticConfig:l,setConfig:i,updateConfig:j}}),null);
__d('OzActions',['Reflux'],(function a(b,c,d,e,f,g){var h={};h.activateThread=c('Reflux').createAction();h.scrollThreadToTimestamp=c('Reflux').createAction();h.doneScrollingToTimestamp=c('Reflux').createAction();h.updateThreads=c('Reflux').createAction();h.maybeUpdateThreads=c('Reflux').createAction();h.clearReassignState=c('Reflux').createAction();h.deleteTask=c('Reflux').createAction();h.updateMerchants=c('Reflux').createAction();h.deleteMerchants=c('Reflux').createAction();h.updateWitIntents=c('Reflux').createAction();h.updateReps=c('Reflux').createAction();h.replaceReps=c('Reflux').createAction();h.replaceHumans=c('Reflux').createAction();h.updateRequirements=c('Reflux').createAction();h.showDialog=c('Reflux').createAction();h.hideDialog=c('Reflux').createAction();h.updateComposer=c('Reflux').createAction();h.addBubble=c('Reflux').createAction();h.addAutopilot=c('Reflux').createAction();h.isActive=c('Reflux').createAction();h.isInactive=c('Reflux').createAction();h.sendPulse=c('Reflux').createAction();h.updateQueueFilters=c('Reflux').createAction();h.intentCreator=c('Reflux').createActions(['toggle','select','clear']);h.emailComposer=c('Reflux').createActions(['delete','add']);h.emailComposer.update=c('Reflux').createAction({sync:true});h.inviteComposer=c('Reflux').createActions(['delete','add','create']);h.inviteComposer.update=c('Reflux').createAction({sync:true});h.twilio=c('Reflux').createActions(['connect','endCall','hangUp','incoming','incomingAccept','incomingReject','mute','ready','setup','startCall','unmute','updateIncomingInfo','useIntent','updateRating','dialAgain']);h.twilio.changeTo=c('Reflux').createAction({sync:true});h.twilio.sendDigits=c('Reflux').createAction({sync:true});h.sendMessageStart=c('Reflux').createAction();h.sendMessageFinish=c('Reflux').createAction();h.addHandledEvents=c('Reflux').createAction();h.updateServerOffset=c('Reflux').createAction();h.updateLoadingState=c('Reflux').createAction();h.updateCalendarEvents=c('Reflux').createAction();h.skywalkerMessage=c('Reflux').createAction();h.skywalkerStalled=c('Reflux').createAction();h.selectAIPick=c('Reflux').createAction();f.exports=h}),null);
__d('OzImmutablePureRenderMixin',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').is;function i(l,m){if(h(l,m))return true;if(typeof l!=='object'||l===null||typeof m!=='object'||m===null)return false;var n=Object.keys(l),o=Object.keys(m);if(n.length!==o.length)return false;for(var p=0;p<n.length;p++)if(!hasOwnProperty.call(m,n[p])||!h(l[n[p]],m[n[p]])){window._debugLogs;return false}return true}function j(l,m,n){return !i(l.props,m)||!i(l.state,n)}var k={shouldComponentUpdate:function l(m,n){return j(this,m,n)}};f.exports=k}),null);
__d('OzNotify',['cx','immutable','OzImmutablePureRenderMixin','React','ReactCSSTransitionGroup','Reflux','ShimButton.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i=c('immutable').OrderedMap,j=c('immutable').Map,k={addNotif:c('Reflux').createAction({sync:true}),removeNotif:c('Reflux').createAction({sync:true})},l=c('Reflux').createStore({init:function s(){this.data=i();this.listenTo(k.addNotif,this._onAddNotif);this.listenTo(k.removeNotif,this._onRemoveNotif)},getInitialState:function s(){return this.data},_onAddNotif:function s(t){this.data=this.data.set(t.get('id'),t);this.trigger(this.data)},_onRemoveNotif:function s(t){this.data=this.data['delete'](t);this.trigger(this.data)}}),m=j({info:"_4nqo",warn:"_4nqp",error:"_4nqq"}),n=c('React').createClass({displayName:'OzNotify',mixins:[c('Reflux').connect(l,'notifs'),c('OzImmutablePureRenderMixin')],render:function s(){return c('React').createElement(c('ReactCSSTransitionGroup'),{component:'div',transitionName:'oz-fade-in-out',className:"_4nqr",transitionEnterTimeout:500,transitionLeaveTimeout:500},this.state.notifs.reverse().map(function(t,u){return c('React').createElement('div',{key:u,className:c('joinClasses')("_4nqs",m.get(t.get('level')))},t.get('msg'),c('React').createElement(c('ShimButton.react'),{className:"_ok9",inline:true,onClick:function v(){return k.removeNotif(u)}},'\u00D7'))}).valueSeq())}}),o=7000,p=0;function q(s){return function(t){p+=1;k.addNotif(j({id:p,level:s,msg:t}));(function(u){window.setTimeout(function(v){return k.removeNotif(u)},o)})(p)}}var r={Component:n,info:q('info'),warn:q('warn'),error:q('error')};f.exports=r}),null);
__d('OzAPI',['invariant','OzHelpers','OzNotify','Arbiter','ChannelConstants','ChannelManager','immutable','OzActions','OzAJAX','OzConfig','OzStores','promiseFinally','RTISubscriptionManager'],(function a(b,c,d,e,f,g,h){var i=c('immutable').List,j=c('immutable').Map,k=c('OzAJAX').ajax,l=c('OzAJAX').beacon,m=c('OzAJAX').buildURI,n=c('OzStores').ActiveThreadStore,o=c('OzStores').ThreadStore;c('ChannelManager').startChannelManager();function p(aa){if(aa.attachment&&!aa.attachments)aa.attachments=[aa.attachment];var ba=c('immutable').fromJS(aa);return ba}function q(aa){return i(aa.map(function(ba){ba=p(ba);return [c('OzHelpers').msgID(ba),ba]})).fromEntrySeq().toMap()}function r(aa){if(!aa.messages)aa.messages=(aa['last-events']||[]).map(function(ca){ca.sender=ca.from;return ca});aa.messages=q(aa.messages);var ba=c('immutable').fromJS(aa);return ba}function s(aa){return i(aa.map(r))}function t(aa){var ba=s([aa]);c('OzActions').updateThreads(ba);c('OzActions').addHandledEvents(ba.first().get('handled-events',i()));ba.count()===1||h(0);return ba.first()}function u(aa){Number.isSafeInteger(aa.offset)||h(0);Number.isSafeInteger(aa.limit)||h(0);return k({type:'GET',url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID')),params:aa}).then(function(ba){var ca=ba.threads,da=s(ca);c('OzActions').updateThreads(da);return da})}function v(aa){var ba=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],ca=arguments.length<=2||arguments[2]===undefined?null:arguments[2];typeof aa==='string'||h(0);typeof ba==='object'||h(0);var da,ea=false;if(ba instanceof FormData){da=ba}else{da=JSON.stringify(ba);ea=true}var fa=function ha(){var ia=n.data.get('activeIntent'),ja=n.data.get('threadID'),ka=ia&&ja&&o.data.getIn([ja,'intents'],i()).findLast(function(la){return la.get('id')===ia},null,j()).get('state');return ka==='open'&&ia},ga={type:'PUT',url:m('sync'),params:{t:aa,'intent-id':ca||fa(),page:c('OzConfig').getStaticConfig('PAGE_ID')},body:da};if(ea){ga.headers=ga.headers||{};ga.headers['content-type']='application/json'}c('OzHelpers').info('[sync] '+aa,ba);return k(ga)}function w(aa){return function(ba){return v(aa,{tid:ba}).then(function(ca){var da=r(ca);c('OzActions').updateThreads(i([da]));return da})}}function x(aa){var ba=aa['user-id'],ca=aa['owner-id'],da=aa['last-owner-id'],ea=c('OzConfig').getStaticConfig('uid');return o.data.get(ba)||ca===ea||da===ea}var y={metrics:j({}),bumpMetric:function aa(ba){y.metrics=y.metrics.updateIn(ba,function(ca){return (ca||0)+1})},setMetric:function aa(ba,ca){y.metrics=y.metrics.setIn(ba,ca)},_witIntentCSV:function aa(){y.witIntents().done(function(ba){var ca='data:text/csv;charset=utf-8,';ba.forEach(function(da){return ca+='"'+da.get('name')+'","'+da.get('id')+'","'+da.get('doc')+'"\n'});window.open(window.encodeURI(ca))})},grab:w('grab'),release:w('release'),ready:w('ready'),notready:w('notready'),ack:w('ack'),lockThread:w('lock-thread'),markRead:w('mark-read'),unlockThread:function aa(ba,ca){return v('unlock-thread',{tid:ba,'locked-at':ca}).then(t)},assignTo:function aa(ba,ca){return v('assign-to',{tid:ba,id:ca})},escalate:function aa(ba){return y.createTag(ba,'escalated')},escalateTo:function aa(ba,ca){return y.escalate(ba).then(function(){return y.assignTo(ba,ca)})},typing:function aa(ba){return v('rep-typing',{tid:ba})},notTyping:function aa(ba){return v('rep-not-typing',{tid:ba})},createReminder:function aa(ba,ca){return v('create-reminder',babelHelpers['extends']({tid:ba},ca.toJS()))},createTask:function aa(ba,ca){return v('create-task',{tid:ba,task:ca.toJS()})},completeTask:function aa(ba,ca){return v('complete-task',{tid:ba,task:ca.toJS()}).then(t)},editTask:function aa(ba,ca){return v('edit-task',{tid:ba,task:ca.toJS()}).then(t)},cancelTask:function aa(ba,ca){var da=arguments.length<=2||arguments[2]===undefined?false:arguments[2];c('OzActions').deleteTask(ba,ca.get('id'));return v('cancel-task',{tid:ba,task:ca.toJS(),'cancel-future':da}).then(t)},openTask:function aa(ba,ca){return v('open-task',{tid:ba,task:ca.toJS()}).then(t)},closeReminder:function aa(ba,ca,da){return v('close-reminder',{tid:ba,id:ca,all:da}).then(t)},editReminder:function aa(ba,ca){return v('edit-reminder',{tid:ba,reminder:ca.toJS()}).then(t)},snoozeReminder:function aa(ba,ca){return v('snooze-reminder',{tid:ba,id:ca}).then(t)},deleteIntentRequirement:function aa(ba,ca,da){return v('delete-intent-requirement',{tid:ba,'intent-id':ca,'requirement-id':da},ca).then(t)},deleteThreadRequirement:function aa(ba,ca){return v('delete-thread-requirement',{tid:ba,'requirement-id':ca}).then(t)},createIntentRequirement:function aa(ba,ca,da){return v('create-intent-requirement',{tid:ba,'intent-id':ca,'requirement-name':da},ca).then(t)},createThreadRequirement:function aa(ba,ca){return v('create-thread-requirement',{tid:ba,'requirement-name':ca}).then(t)},createIntent:function aa(ba,ca){return v('create-intent',babelHelpers['extends']({tid:ba},ca.toJS())).then(t)},openIntent:function aa(ba,ca){return v('open-intent',{tid:ba,id:ca},ca).then(t)},triggerAIForIntent:function aa(ba,ca){return v('trigger-ai-for-intent',{tid:ba,id:ca},ca)},closeIntent:function aa(ba,ca,da,ea,fa){var ga={tid:ba,id:ca,'close-state':da,feedback:ea,'send-survey':fa};return v('close-intent',ga,ca).then(t)},blockIntent:function aa(ba,ca){return v('block-intent',{tid:ba,id:ca},ca).then(t)},unblockIntent:function aa(ba,ca){return v('unblock-intent',{tid:ba,id:ca},ca).then(t)},addPhoneNumber:function aa(ba,ca){return v('add-phone-number',{tid:ba,'intent-id':ca},ca)},editIntent:function aa(ba,ca){return v('edit-intent',babelHelpers['extends']({tid:ba},ca.toJS()),ca.get('id')).then(t)},createTag:function aa(ba,ca){return v('add-thread-tag',{tid:ba,tag:ca}).then(t)},deleteTag:function aa(ba,ca){return v('remove-thread-tag',{tid:ba,tag:ca}).then(t)},view:w('create-subscription'),unview:function aa(ba){return v('delete-subscription',{tid:ba})},updateMessage:function aa(ba,ca){return v('update-message',{tid:ba,message:ca.toJS()}).then(t)},everstoreUpload:function aa(ba){var ca=new FormData();ba.forEach(function(da,ea){return ca.append(ea,da)});return v('everstore-upload',ca)},upload:function aa(ba){var ca=new FormData();ba.forEach(function(da,ea){return ca.append(ea,da)});return v('upload',ca).then(function(da){return c('immutable').fromJS(da)})},sendMessage:function aa(ba){var ca=v('send',ba).then(function(da){return t({'user-id':ba.tid,'last-events':da})});c('promiseFinally')(ca,function(da){return c('OzActions').sendMessageFinish(ba.tid)});window.setTimeout(function(){return c('OzActions').sendMessageStart(ba.tid)},200);return ca},scheduleMessage:function aa(ba){return v('schedule-send',ba)},suggest:function aa(ba){return v('suggest',ba).then(t)},scheduleSuggest:function aa(ba){return v('schedule-suggest',ba)},deleteScheduled:function aa(ba,ca){return v('delete-scheduled',{tid:ba,id:ca}).then(t)},saveNote:function aa(ba,ca){var da={tid:ba,infos:{notes:ca}};return v('update-infos',da).then(t)},saveMeta:function aa(ba,ca){var da={tid:ba,infos:{'metadata-json':ca.toJS()}};return v('update-infos',da).then(t)},saveMuted:function aa(ba,ca){var da={tid:ba,infos:{muted:ca}};return v('update-infos',da).then(t)},createMerchant:function aa(ba){return v('create-merchant',ba.toJS()).then(function(ca){var da=i([j(ca)]);c('OzActions').updateMerchants(da);return da})},editMerchant:function aa(ba){return v('edit-merchant',ba.toJS()).then(function(ca){var da=i([j(ca)]);c('OzActions').updateMerchants(da);return da})},deleteMerchant:function aa(ba){return v('delete-merchant',ba.toJS()).then(function(ca){if(ca&&ca.id){var da=i([ca.id]);c('OzActions').deleteMerchants(da);return da}else c('OzHelpers').warn('[api] unexpected delete-merchant response',ca);})},sendEmail:function aa(ba,ca){var da=n.data.get('threadID');return v('send-email',babelHelpers['extends']({tid:da},ba.toJS()),ca)},sendInvite:function aa(ba,ca){var da=n.data.get('threadID');return v('send-calendar',babelHelpers['extends']({tid:da},ba.toJS()),ca)},fetchCalendar:function aa(ba){return k({type:'GET',url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID'),ba,'calendar')}).then(function(ca){c('OzActions').updateCalendarEvents({tid:ba,calendarEvents:ca});return ca})},bookOpenTable:function aa(ba,ca,da,ea,fa){return v('book-reservation',{tid:ba,rid:da,ts:ea,covers:fa},ca)},everstoreURI:function aa(ba){return v('everstore-uri',{handle:ba})},witIntents:function aa(){return k({type:'GET',url:m('wit-intents',c('OzConfig').getStaticConfig('PAGE_ID'))}).then(function(ba){var ca=c('immutable').fromJS(ba);c('OzActions').updateWitIntents(ca);return ca})},merchants:function aa(){return k({type:'GET',url:m('merchants')}).then(function(ba){c('OzActions').updateMerchants(i(ba).map(function(ca){return j(ca)}))})},repsSync:function aa(){return k({type:'GET',url:m('reps-sync')})},requirements:function aa(){return k({type:'GET',url:m('requirements')}).then(function(ba){c('OzActions').updateRequirements(c('immutable').fromJS(ba))})},AIModules:function aa(){return k({type:'GET',url:m('ai-modules')}).then(function(ba){return i(ba)})},authorFeedback:function aa(ba){return k({type:'GET',url:m('author-feedback'),params:{author_id:ba}}).then(function(ca){return j(ca.map(function(da){da=c('immutable').fromJS(da);return [c('OzHelpers').msgID(da),da]}))})},myThreads:function aa(){var ba=c('OzConfig').getStaticConfig('PAGE_ID');return k({type:'GET',params:{page:ba},url:m('mythreads')}).then(function(ca){var da=ca.mythreads;c('OzActions').updateThreads(s(da))})},allThreads:function aa(ba,ca,da,ea){var fa={all:true,first_tags:ba.toJS(),last_tags:ca.toJS(),offset:da,limit:ea};if(ba.has('ready')){ba=ba['delete']('ready');fa.ready=true}else if(ca.has('ready')){ca=ca['delete']('ready');fa.ready=false}return u(fa)},thread:function aa(ba){return k({type:'GET',url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID'),ba)}).then(t)},handledEvents:function aa(ba){return k({type:'GET',params:{'intent-id':ba},url:m('handled-events')}).then(function(ca){c('OzActions').addHandledEvents(c('immutable').fromJS(ca['handled-events']))})},tasksForIntent:function aa(ba,ca){var da=c('OzConfig').getStaticConfig('PAGE_ID');return k({type:'GET',params:{page:da},url:m('tasks',ba)}).then(function(ea){t({'user-id':ca,tasks:ea})})},history:function aa(ba,ca,da){return k({type:'GET',params:{timestamp:ca,limit:da},url:m('threads',c('OzConfig').getStaticConfig('PAGE_ID'),ba,'history')}).then(function(ea){var fa=t({'user-id':ba,messages:ea});return fa.get('messages')})},topIntents:function aa(){return k({type:'GET',url:m('top-intents')}).then(function(ba){return c('immutable').fromJS(ba)})},intentsDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','intent',c('OzConfig').getStaticConfig('PAGE_ID'))}).then(function(ca){return c('immutable').fromJS(ca)})},aiDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','ai',c('OzConfig').getStaticConfig('PAGE_ID'))}).then(function(ca){return c('immutable').fromJS(ca)})},statsDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','trainer',ba['trainer-id'])}).then(function(ca){return c('immutable').fromJS(ca)})},teamStatsDashboard:function aa(ba){return k({type:'GET',params:ba,url:m('dashboard','trainer-team-stats')}).then(function(ca){return c('immutable').fromJS(ca)})},humans:function aa(){return k({type:'GET',url:m('humans')}).then(function(ba){return c('OzActions').replaceHumans(c('immutable').fromJS(ba))})},search:function aa(ba){return k({params:ba,type:'GET',url:m('search')}).then(function(ca){return c('immutable').fromJS(ca).flatten(true)})},requestAutopilot:function aa(ba){window.postMessage(ba,'*')},notifyExtension:function aa(ba){c('OzHelpers').debug('[oz-ext] notifying toto',ba);window.postMessage(babelHelpers['extends']({type:'notification'},{data:ba}),'*')},recordActivity:function aa(ba,ca){return v('activity',babelHelpers['extends']({tid:ba},{activity:ca}))},sendPulse:function aa(ba,ca){return k({type:'POST',url:m('pulse'),headers:{'content-type':'application/json'},params:{page:c('OzConfig').getStaticConfig('PAGE_ID'),duration:ba},body:JSON.stringify(ca)})},sendDisconnectPulse:function aa(ba,ca){return l({url:m('pulse'),params:{page:c('OzConfig').getStaticConfig('PAGE_ID'),duration:ba},body:JSON.stringify(ca)})},threadFocus:function aa(ba,ca){return v('thread-focus',{tid:ba,intentID:ca},ca)},away:function aa(ba){return v('away',{away:ba})},coachMode:function aa(ba){return v('coach-mode',{'coach-mode':ba})},timestamp:function aa(){var ba=Date.now();return k({type:'POST',url:m('timestamp')}).then(function(ca){var da=ca.timestamp,ea=Date.now();if(ea-ba>1000){c('OzHelpers').warn('[oz-api] timestamp took over 1 second, not updating offset')}else{var fa=ea-(da+(ea-ba)/2);c('OzActions').updateServerOffset({offsetMs:fa})}})},init:function aa(){return k({type:'GET',url:m('init')}).then(function(ba){ba['twilio-token']&&c('OzActions').twilio.setup(ba['twilio-token']);c('OzConfig').updateConfig(c('immutable').fromJS(ba))})},realTime:function aa(ba,ca){var da,ea=60000,fa=function la(){var ma=Date.now();clearInterval(da);da=setInterval(function(na){var oa=Math.round((Date.now()-ma)/1000);c('OzActions').skywalkerStalled();c('OzHelpers').warn('[rti] no payload in '+oa+'seconds')},ea)},ga={repsVersion:-1},ha=function la(ma,na){var oa=na.payload,pa=na.topic;ma==='sky'||ma==='msg'||h(0);fa();var qa=ma==='sky'?ma+' '+pa+' ->':ma,ra=oa.type,sa=ra||'';c('OzHelpers').debug('[rti] '+qa+' '+sa,oa);if(!oa.data){c('OzHelpers').error('[sky] got sky event without data',oa,pa);return}var ta=oa.data['page-id'];if(ta&&ta!==c('OzConfig').getStaticConfig('PAGE_ID')){c('OzHelpers').debug('[sky] junk event on '+pa,oa);return}var ua;y.bumpMetric(['realtime',ra]);c('OzActions').skywalkerMessage({payload:oa,timestamp:c('OzHelpers').serverNow()});switch(ra){case 'thread':ua=oa.data;t(ua);break;case 'thread-metrics':ua=oa.data;if(o.data.get(ua['user-id'])){y.bumpMetric(['realtime','thread-metrics-update-thread']);t(ua)}break;case 'maybe-thread':ua=oa.data;c('OzActions').maybeUpdateThreads(s([ua]));break;case 'delivered':case 'seen':ua=oa.data;t({'user-id':ua['user-id'],'last-seen':ua['last-seen']});break;case 'presence':ua=oa.data;t({'user-id':ua['user-id'],'last-presence':ua['last-presence']});break;case 'carebear':(function(){var bb=oa.data,cb=bb.type,db=bb.tid,eb={'user-id':db};eb['ui-'+cb]=true;t(eb)})();break;case 'inactive':c('OzActions').isInactive();break;case 'updated-merchant':c('OzActions').updateMerchants(i([j(oa.data)]));break;case 'deleted-merchant':c('OzActions').deleteMerchants(i([oa.data.id]));break;case 'phone-call':c('OzActions').twilio.updateIncomingInfo(c('immutable').fromJS(oa.data));break;case 'humans':c('OzActions').replaceHumans(c('immutable').fromJS(oa.data));break;case 'reps-sync':ga=babelHelpers['extends']({},ga,{repsVersion:oa.version});c('OzActions').replaceReps(c('immutable').fromJS(oa.data));break;case 'reps-diff':if(ga.repsVersion!==oa.version-1){c('OzHelpers').warn('[api] reps version out of sync',{'our-version':ga.repsVersion,'next-version':oa.version});ga=babelHelpers['extends']({},ga,{repsVersion:-1});y.repsSync()}else{ga.repsVersion=oa.version;c('OzActions').updateReps(c('immutable').fromJS(oa.data))}break;case 'handled-events':c('OzActions').addHandledEvents(c('immutable').fromJS(oa.data));break;case 'config':c('OzConfig').updateConfig(c('immutable').fromJS(oa.data));break;case 'notify':var va=oa.data,wa=va.level,xa=va.message;c('OzNotify')[wa](xa);break;case 'updated-thread':var ya=oa.data['user-id'];if(x(oa.data)){y.bumpMetric(['realtime','updated-thread-fetch-thread']);c('OzHelpers').info('[api] fetching thread after update',ya);y.thread(ya)}break;case 'ping':var za=oa.data.timestamp,ab=c('OzHelpers').serverNow()-za;y.setMetric(['realtime','pingLatency'],ab);break;default:c('OzHelpers').debug('[sky] unk type',ra,oa);}},ia=function la(){for(var ma=arguments.length,na=Array(ma),oa=0;oa<ma;oa++)na[oa]=arguments[oa];try{ha.apply(undefined,na)}catch(pa){try{c('OzHelpers').error.apply(c('OzHelpers'),['[sky] error handling message'].concat(na))}catch(qa){}}},ja=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('msg'),function(la,ma){ia('msg',ma.obj)}),ka=z(function(){c('Arbiter').unsubscribe(ja);c('RTISubscriptionManager').unsubscribeAll()});c('RTISubscriptionManager').subscribe(ba,ia.bind(this,'sky'),null,z(function(la){var ma=la.data,na=la.error;if(na){ka();ca(na,ma)}else{fa();ca(null,ma,ja)}}));return ka}};function z(aa){var ba,ca,da=this;return function(){if(!ba){ca=aa.apply(da,arguments);ba=true}return ca}}f.exports=y}),null);
__d('ozMakeColor',['randomShuffle','immutable'],(function a(b,c,d,e,f,g){var h=c('immutable').Map,i=c('immutable').List,j=c('immutable').Range,k=function n(o,p){return 'hsla('+o+', 85%, 30%, '+p+')'};function l(){var n=arguments.length<=0||arguments[0]===undefined?25:arguments[0],o=arguments.length<=1||arguments[1]===undefined?.9:arguments[1],p=i(c('randomShuffle')(j(10,360,n).toJS())),q=0,r=h();return function(s){if(r.has(s)){return k(r.get(s),o)}else{var t=p.get(q);r=r.set(s,t);q=(q+1)%p.count();return k(t)}}}function m(){var n=arguments.length<=0||arguments[0]===undefined?77:arguments[0];return function(o){return k(o*n%360,.9)}}f.exports={makeColorShuffle:l,makeColor:m}}),null);
__d('OzHelpers',['ozMakeColor','BanzaiScuba','DatePickerRestraints','ErrorUtils','getURLRanges','immutable','LogHistory','OzConfig','OzConstants','OzServerTime','OzImmutablePureRenderMixin','React','URI'],(function a(b,c,d,e,f,g){var h=c('ozMakeColor').makeColor,i=c('immutable').List,j=c('immutable').Map,k=c('immutable').Set,l=c('immutable').OrderedMap,m=c('OzConstants').AUTHOR_TYPES,n=c('OzConstants').REMINDERS,o=/^image\//,p={color:h(),blobURI:function ba(ca){return window.URL.createObjectURL(ca)},blobFromDataURI:function ba(ca){var da=ca.split(','),ea=atob(da[1]),fa=da[0].split(':')[1].split(';')[0],ga=new ArrayBuffer(ea.length),ha=new Uint8Array(ga);for(var ia=0;ia<ea.length;ia++)ha[ia]=ea.charCodeAt(ia);return new Blob([ga],{type:fa})},toLocaleDate:function ba(ca){return new Date(ca).toLocaleDateString()},toLocaleTime:function ba(ca){return new Date(ca).toLocaleTimeString()},hasCmdOrCtrl:function ba(ca){return ca.getModifierState('Meta')||ca.getModifierState('Control')},keysIn:function ba(){var ca=k(arguments);return function(da,ea){return ca.has(ea)}},safeParse:function ba(ca){var da={};try{da=JSON.parse(ca)}catch(ea){p.info('invalid json',ca)}return da},safeURI:function ba(ca){var da=null;try{da=c('URI').isValidURI(ca)&&new (c('URI'))(ca)||null}catch(ea){p.info('invalid uri',ca)}return da},pure:s,memoize:t,values:function ba(ca){return Object.keys(ca).map(function(da){return ca[da]})},nonempty:function ba(ca){return ca&&!ca.isEmpty()?ca:null},uniqId:v,debug:x('debug',false),info:x('info',true),warn:x('warn',true),error:x('error',true),isImageType:function ba(ca){return o.test(ca)},isStickerType:function ba(ca){return ca==='image/sticker'},dateRestraints:w,moveCursorToInputEnd:function ba(ca){if(ca.setSelectionRange){var da=ca.value.length;ca.setSelectionRange(da,da)}},toTitleCase:function ba(ca){var da=k(['a','an','the','at','by','for','in','of','on','to','up','and','as','but','or','nor']),ea=function ga(ha,ia,ja){return ia===0||ia+ha.length===ja.length},fa=function ga(ha,ia,ja){return ea(ha,ia,ja)||!da.has(ha)?ha.charAt(0).toUpperCase()+ha.substr(1):ha};return ca.toLowerCase().replace(/\w\S*/g,fa)},scrollToBottom:function ba(ca){ca.scrollTop=ca.scrollHeight},threadID:function ba(ca){return ca.get('user-id')},isNew:function ba(ca){return !p.intents(ca).find(p.isClosedIntent)},hasOwner:function ba(ca){return ca.getIn(['owner','id'])},hasAllTags:function ba(ca,da){return da.every(function(ea){return p.hasTag(ca,ea)})},hasSomeTag:function ba(ca,da){return da.some(function(ea){return p.hasTag(ca,ea)})},hasTag:function ba(ca,da){return ca.get('tags')&&ca.get('tags').contains(da)},isEscalated:function ba(ca){return p.hasTag(ca,'escalated')},hasEngage:function ba(ca){return !!ca.get('engagement-type')},photo:function ba(ca){return ca.getIn(['user-vcard','photo'])||ca.getIn(['user-vcard','picture'])},compareNums:function ba(ca,da){if(ca&&da){return da-ca}else if(ca){return -1}else if(da){return 1}else return 0;},compareBools:function ba(ca,da){if(ca&&da){return 0}else if(ca){return -1}else if(da)return 1;},getIncomingThreads:function ba(ca){return ca.filter(function(da){return da.get('ready')&&!p.hasOwner(da)}).sort(p.threadComparator)},threadComparator:function ba(ca,da){var ea=p.compareBools(p.hasTag(ca,'vip'),p.hasTag(da,'vip')),fa=p.compareBools(p.hasTag(ca,'urgent'),p.hasTag(da,'urgent')),ga=p.compareNums(p.urgentReminders(ca).getIn([0,'scheduled-time']),p.urgentReminders(da).getIn([0,'scheduled-time'])),ha=p.compareNums(ca.get('last-event-at'),da.get('last-event-at'));return ea||fa||ga||ha},lastEvents:function ba(ca){return ca.get('last-events',i()).sortBy(function(da){return da.get('timestamp')})},lastUserMessage:function ba(ca){return p.lastEvents(ca).findLast(function(da){return p.authorType(da)===m.USER})},shortDesc:function ba(){var ca=arguments.length<=0||arguments[0]===undefined?j():arguments[0],da=ca.getIn(['attachments',0,'mime_type']),ea=ca.getIn(['attachments',0,'sticker_id']);return ca.get('text')||ea&&'sent a sticker.'||da&&(da.match(/video/i)&&'sent a video.'||da.match(/audio/i)&&'sent an audio clip.'||da.match(/image/i)&&'sent an image')},preferredName:function ba(ca){return ca.getIn(['metadata-json','preferred-name'])||ca.getIn(['user-vcard','first-name'])},userEmail:function ba(ca){return ca.getIn(['metadata-json','email'])},intents:function ba(ca){return ca.get('intents',i()).sortBy(function(da){return da.get('created-at')})},isOwner:function ba(ca,da){var ea=ca.getIn(['owner','id']);return ea&&da&&ea==da},wasOwner:function ba(ca,da){var ea=ca.getIn(['last-owner','id']);return ea&&da&&ea==da},isLocker:function ba(ca,da){return ca.get('locked')&&ca.get('locker-id')===da},nameOrId:function ba(ca){return ca&&(ca.get('name')||ca.get('id'))||''},isSubscriber:function ba(ca,da){return !!ca.get('subscriptions',i()).find(function(ea){return ea===da})},hasUnblockedIntents:function ba(ca){return ca.get('intents',i()).some(function(da){return !p.isBlockedIntent(da)})},hasOpenIntents:function ba(ca){return ca.get('intents',i()).some(function(da){return p.isOpenIntent(da)})},openIntents:function ba(ca){return p.intents(ca).filter(p.isOpenIntent)},closedIntents:function ba(ca){return p.intents(ca).filter(p.isClosedIntent)},intentById:function ba(ca,da){return p.intents(ca).findLast(function(ea){return ea.get('id')===da})},isBlockedIntent:function ba(ca){return ca.get('blocked')},intentName:function ba(ca){return ca.get('name')||'Unknown intent'},intentAlias:function ba(ca){return ca.get('alias')||ca.get('name')||'Unknown intent'},isOpenIntent:function ba(ca){return ca.get('state')==='open'},isClosedIntent:function ba(ca){return !p.isOpenIntent(ca)},isDeleted:function ba(ca){return ca.get('state')==='deleted'},getName:function ba(ca){return ca.getIn(['user-vcard','name'],'Unknown user')},lastPresence:function ba(ca){return Math.max(ca.get('last-seen')||0,ca.get('last-presence')||0)},timeSpent:function ba(ca){if(ca.get('ready')&&ca.get('last-ready-at'))return p.serverNow()-ca.get('last-ready-at');},locationLastSeen:function ba(ca){if(ca.getIn(['location','last-seen']))return new Date(ca.getIn(['location','last-seen']));},timezone:function ba(ca){return ca.getIn(['location','timezone'])},durationStr:function ba(ca){if(ca==null){p.warn('[durationStr] strange duration '+ca);return '[invalid duration]'}else if(ca<-1000){p.warn('[durationStr] strange duration '+ca);return '-'+p.durationStr(-ca)}else if(ca<0){p.warn('[durationStr] strange duration '+ca);return '< 0s'}else if(ca===0){return '0s'}else if(ca<1000){return '< 1s'}else if(ca<60*1000){return Math.floor(ca/1000)+'s'}else if(ca<60*60*1000){return Math.floor(ca/(60*1000))+'m'}else if(ca<24*60*60*1000){return Math.floor(ca/(60*60*1000))+'h'}else return Math.floor(ca/(24*60*60*1000))+'d';},serverNow:function ba(){return c('OzServerTime').serverNow()},repName:function ba(ca,da){var ea=da.get(ca);return ea&&ea.get('name')||ca||null},authorType:function ba(ca){var da=m.BOT,ea=m.USER,fa=m.TRAINER,ga=ca.get('sender')||ca.get('from'),ha=ca.get('author-type');return ha===da&&da||(ha===fa||ga===c('OzConfig').getStaticConfig('PAGE_ID'))&&fa||ea},msgID:function ba(){var ca=arguments.length<=0||arguments[0]===undefined?j():arguments[0];return ca.get('offline-threading-id')||ca.get('mid')||p.warn('[msgID] had to resort to timestamp',ca)&&null||ca.get('timestamp')},isActivePulse:function ba(ca){var da=ca&&ca.get('pulse-data');if(!da)return false;return !da.get('away?')&&da.get('inactive-ms',Infinity)<30000},EMPTY_BODY:c('immutable').fromJS([{'content-type':'text/plain; charset=UTF-8',body:{contents:''}}]),eventToEmail:function ba(ca){return {email:ca.get('data'),intentId:ca.get('intent-id'),id:ca.get('id')}},reEmail:function ba(ca){var da=ca.getIn(['data','subject']),ea=da.toUpperCase().startsWith('RE:')?da:'Re: '+da;return ca.setIn(['data','subject'],ea).setIn(['data','body'],this.EMPTY_BODY)},switchRecip:function ba(ca){var da=ca.get('data'),ea=da.get('from'),fa=da.get('to');return ca.setIn(['data','from'],fa).setIn(['data','to'],i([ea]))},eventToInvite:function ba(ca){return {invite:ca.get('data'),id:ca.get('id'),intentId:ca.get('intent-id'),disabled:true}},urgentReminders:function ba(ca){return ca.get('reminders',i()).sortBy(function(da){return da.get('scheduled-time')}).filter(p.isUrgentReminder)},paidReminders:function ba(ca){return p.urgentReminders(ca).filter(p.isPaidReminder)},isUrgentReminder:function ba(ca){var da=ca.get('state');return da==='active'||da==='active-snoozed'},isPaidReminder:function ba(ca){return !!ca.getIn(['body','suggestion'])},isSnoozedReminder:function ba(ca){var da=ca.get('state');return da==='snoozed'||da==='active-snoozed'},isUrgentTask:function ba(ca){var da=ca.get('state');return da==='dispatched'&&ca.get('deadline')<p.serverNow()},isPaidTask:function ba(ca){return !!ca.getIn(['data','suggestion'])},isCompletedTask:function ba(ca){return ca.get('state')==='completed'},isCanceledTask:function ba(ca){return ca.get('state')==='canceled'},isWaitingTask:function ba(ca){return ca.get('state')==='waiting'},isClosedTask:function ba(ca){return p.isCompletedTask(ca)||p.isCanceledTask(ca)},isOpenTask:function ba(ca){return !p.isClosedTask(ca)},isUnread:function ba(ca){return ca.get('read-state')==='unread'},soonestDueTask:function ba(ca){return ca.filterNot(p.isClosedTask).minBy(function(da){return da.get('start-at')})},nextTaskForIntent:function ba(ca){var da=arguments.length<=1||arguments[1]===undefined?i():arguments[1];return p.soonestDueTask(da.filter(function(ea){return ea.get('intent-id')===ca.get('id')}))},nextTaskForThread:function ba(ca){return p.soonestDueTask(ca.get('tasks',i()))},unreadTs:function ba(ca){return c('OzConfig').ConfigStore.data.getIn(['GK','responsivenessV2'])?ca.get('unread-timestamp'):(p.lastUserMessage(ca)||j()).get('timestamp')},hasPaid:function ba(ca){return !!p.paidReminders(ca).size},hasReminder:function ba(ca){return !!p.urgentReminders(ca).size},minAge:function ba(ca){var da=+ca.getIn(['user-vcard','age-range','min']);return Number.isSafeInteger(da)?da:0},shimURI:function ba(ca){return new (c('URI'))('https://l.facebook.com/l.php').setQueryData({u:ca,h:c('OzConfig').getStaticConfig('shimhash')}).toString()},uiSuggestion:function ba(ca){var da=ca.has('amount')?'$'+(ca.get('amount')/100).toFixed(2):'';return {id:ca.get('item-id')||'-1',name:ca.get('name'),desc:ca.get('description'),thumb_url:ca.get('thumb-url'),merchant_name:ca.get('merchant-name')||'',total_cost:ca.get('amount')?j({amount:ca.get('amount')}):null,display_total_cost:da,target_url:p.shimURI(ca.get('target-url')),payment_id:ca.get('payment-id'),expiration_time:ca.get('expiration-time')}},parsePhoneNumber:function ba(ca){if(!ca)return '';if(ca.length==12&&ca[0]=='+')ca=ca.substr(1);if(ca.length==11&&ca[0]=='1')ca=ca.substr(1);switch(ca.length){case 10:return '('+ca.substr(0,3)+') '+ca.substr(3,3)+'-'+ca.substr(6,4);case 7:return ca.substr(0,3)+'-'+ca.substr(3,4);default:return ca;}},validateURL:function ba(ca){return !!ca&&typeof ca==='string'&&c('getURLRanges')(ca).length&&c('URI').isValidURI(ca)},normalizeMerchant:function ba(ca){return ca.updateIn(['website'],function(da){if(!da)return da;var ea=c('getURLRanges')(da);if(!ea||ea.length===0)return da;return ea[0].entity.url}).updateIn(['page-id'],function(da){if(Number.isFinite(da)||typeof da==='string')return parseInt(da,10);return null})},validateMerchant:function ba(ca){var da=k(['name-dba','country']),ea=k(['address','website','page-id']),fa={},ga=ca.get('website','');if(ga&&!this.validateURL(ga))fa.website='Website is an invalid URL';var ha=ca.get('page-id',null);if(ha!=null&&!Number.isFinite(ha))fa['page-id']='FB Page must be a number';da.map(function(ja){if(!ca.get(ja))fa[ja]='This field is required';});if(k(ca.filter(function(ja){return ja}).keys()).intersect(ea).isEmpty()){var ia='At least one of '+ea.join(', ')+' is required';ea.forEach(function(ja){fa[ja]=ia})}return j(fa)},isDaytime:function ba(ca){var da=(Date.now()+ca)%(24*60*60*1000),ea=da/(60*60*1000);return ea>=6},fullThreadData:function ba(ca,da,ea){var fa=ca.get(ea);if(!fa)return null;return fa.update('intents',function(ga){return (ga||i()).map(function(ha){var ia=q(da,ha),ja=r(fa,ia);return ja})})},threadPath:function ba(ca){var da=ca.threadid,ea=ca.intentid,fa=ca.taskid,ga=ca.eventid,ha=ea?'/intent/'+ea:'',ia=fa?'/task/'+fa:'',ja=ga?'/event/'+ga:'';return '/inbox/'+da+ha+(ia||ja)},updateInWhen:function ba(ca,da,ea){var fa={};if(ca.getIn(da,fa)!==fa)return ca.updateIn(da,ea);return ca},getRequirement:function ba(ca,da){return ca.get('requirements',i()).find(function(ea){return ea.get('name')===da})}};function q(ba,ca){var da=ba.getIn(['byIntent',ca.get('id')],j());return ca.set('events',da)}function r(ba,ca){var da=ba.getIn(['tasks-by-intent',ca.get('id')]);return ca.set('tasks',da)}function s(ba){var ca=arguments.length<=1||arguments[1]===undefined?'OzPureComponent':arguments[1];return c('React').createClass({displayName:ca,mixins:[c('OzImmutablePureRenderMixin')],render:function da(){return ba(this.props)}})}function t(ba,ca){var da=arguments.length<=2||arguments[2]===undefined?1000:arguments[2],ea=l();return function(){for(var fa=arguments.length,ga=Array(fa),ha=0;ha<fa;ha++)ga[ha]=arguments[ha];var ia=ca.apply(this,ga);if(ea.get(ia)){return ea.get(ia)}else{var ja=ba.apply(this,ga);ea=ea.set(ia,ja).takeLast(da);return ja}}.bind(this)}var u=0;function v(){return u++}function w(){var ba=new Date(),ca=new Date(Date.UTC(ba.getFullYear(),ba.getMonth(),ba.getDate())),da=new Date(+ca);da.setFullYear(ca.getFullYear()+n.RANGE_IN_YEARS);return {dateRestraints:[c('DatePickerRestraints').enforceDateIsNoEarlierThan(ca),c('DatePickerRestraints').enforceDateIsNoLaterThan(da)]}}c('ErrorUtils').addListener(function(ba){var ca=aa({level:'error',message:'[unhandled-error]['+ba.name+'] '+ba.message,data:'--stack\n'+ba.stack+'\n\n--originalError\n'+ba._originalError});z(ca);y(ca)});function x(ba,ca){return function(){for(var da=arguments.length,ea=Array(da),fa=0;fa<da;fa++)ea[fa]=arguments[fa];var ga=ea[0],ha=ea.slice(1);window.console.log(ba,ga,ha);var ia=aa({level:ba,message:ga,data:ha});z(ia);ca&&y(ia)}}function y(ba){var ca=new (c('BanzaiScuba'))(c('OzConfig').getStaticConfig('scubaCategory'));Object.entries(ba).forEach(function(da){var ea=da[0],fa=da[1];Number.isSafeInteger(fa)?ca.addInteger(ea,fa):ca.addNormal(ea,fa)});ca.post()}function z(ba){var ca=c('LogHistory').getInstance('oz-logger');(ca[ba.level]||ca.debug).call(ca,ba.message,'')}function aa(ba){return babelHelpers['extends']({},ba,{uid:c('OzConfig').getStaticConfig('uid'),public_name:c('OzConfig').getStaticConfig('publicName'),rev:c('OzConfig').getStaticConfig('rev'),timestamp:p.serverNow()})}f.exports=p}),null);
__d('OzServerTime',['OzStores','OzAPI'],(function a(b,c,d,e,f,g){var h=c('OzStores').ServerOffsetStore,i;function j(){return Math.floor(Date.now()-h.data.get('offsetMs'))}function k(){window.clearInterval(i)}function l(){c('OzAPI').timestamp();k();i=window.setInterval(function(){return c('OzAPI').timestamp()},1000*60*60*3)}f.exports={serverNow:j,setup:l,tearDown:k}}),null);
__d('OzStores',['invariant','OzHelpers','immutable','OzActions','Reflux'],(function a(b,c,d,e,f,g,h){var i=c('immutable').List,j=c('immutable').Map,k=c('immutable').OrderedMap,l=c('immutable').OrderedSet,m=c('immutable').Set,n=c('immutable').Iterable,o=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateRequirements,this._onUpdateRequirements)},getInitialState:function na(){return this.data},_onUpdateRequirements:function na(oa){this.data=this.data.withMutations(function(pa){oa.forEach(function(qa){var ra=qa.get('name'),sa=pa.get(ra,j()).merge(qa).update('wit-intent-uuids',function(ta){return ta&&ta.toSet()||m()});pa.set(ra,sa)})});c('OzHelpers').debug('[oz] updated RequirementStore');this.trigger(this.data)}}),p=c('Reflux').createStore({init:function na(){this.data=l();this.listenTo(c('OzActions').addBubble,this._onAddBubble)},getInitialState:function na(){return this.data},_onAddBubble:function na(oa){j.isMap(oa)||h(0);this.data=this.data.add(oa).takeLast(100);this.trigger(this.data)},metrics:function na(){return j({bubbleCount:this.data.count()})}}),q=c('Reflux').createStore({init:function na(){this.data=k();this.listenTo(c('OzActions').addAutopilot,this._onAddAutopilot)},getInitialState:function na(){return this.data},_onAddAutopilot:function na(oa){j.isMap(oa)||h(0);this.data=this.data.set(oa.get('id'),oa.get('data')).takeLast(100);this.trigger(this.data)}}),r='id',s=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateWitIntents,this._onUpdateWitIntents)},getInitialState:function na(){return this.data},_onUpdateWitIntents:function na(oa){c('immutable').List.isList(oa)||h(0);this.data=this.data.withMutations(function(pa){return oa.reduce(function(qa,ra){return qa.set(ra.get(r),ra)},pa)});this.trigger(this.data)},metrics:function na(){return j({witIntentCount:this.data.count()})}}),t=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').activateThread,this._onActivateThread)},getInitialState:function na(){return this.data},_onActivateThread:function na(oa){var pa=oa.threadID,qa=oa.intentID,ra=oa.taskID,sa=oa.eventID;c('OzHelpers').info('[store/activeThread] set active thread: ',{threadID:pa,intentID:qa,taskID:ra,eventID:sa});this.data=this.data.set('oldThreadID',this.data.get('threadID')).set('threadID',pa).set('activeIntent',qa).set('activeTask',ra).set('activeEvent',sa);this.trigger(this.data)}}),u='user-id',v=function na(oa,pa){return oa.reduce(function(qa,ra){qa[ra.get(pa)]=ra;return qa},{})};function w(na,oa){j.isMap(na)&&j.isMap(oa)||h(0);var pa=v(na,'offline-threading-id'),qa=v(na,'mid');return na.withMutations(function(ra){return oa.valueSeq().filterNot(function(sa){var ta=sa.get('attachments');if(ta)return ta.first()&&ta.first().getIn(['xma','body'])===null;return false}).reduce(function(sa,ta){var ua=ta.get('offline-threading-id'),va=ta.get('mid'),wa=ua&&pa[ua]||va&&qa[va]||sa.get(c('OzHelpers').msgID(ta));if(wa){sa=sa['delete'](c('OzHelpers').msgID(wa));ta=wa.merge(ta);ua=ta.get('offline-threading-id');va=ta.get('mid')}ua&&(pa[ua]=ta);va&&(qa[va]=ta);return sa.set(c('OzHelpers').msgID(ta),ta)},ra)})}var x=function na(oa,pa,qa){switch(qa){case 'messages':return w(oa,pa);case 'intents':case 'reminders':var ra=j().withMutations(function(ua){return (oa||i()).reduce(function(va,wa){return va.set(wa.get('id'),wa)},ua)}),sa=pa.reduce(function(ua,va){var wa=va.get('id');return ua.set(wa,(ua.get(wa)||j()).merge(va))},ra).valueSeq().toList();return sa;case 'tasks':var ta=pa.map(function(ua){return ua.get('intent-id')}).toSet();return oa.filterNot(function(ua){return ta.has(ua.get('intent-id'))}).concat(pa);case 'light-thread':return oa&&pa;default:return pa;}},y=function na(oa){return oa.set('tasks-by-intent',oa.get('tasks',i()).groupBy(function(pa){return pa.get('intent-id')}))},z=function na(oa){typeof oa==='function'||h(0);return function(pa,qa){j.isMap(qa)&&j.isMap(pa)||h(0);var ra=qa.get(u),sa=(pa.get(ra)||j()).mergeWith(oa,qa),ta=y(sa);return pa.set(ra,ta)}},aa=c('Reflux').createStore({init:function na(){this.data=j();this.updatedAt=Date.now();this.listenTo(c('OzActions').updateThreads,this._onUpdateThreads);this.listenTo(c('OzActions').maybeUpdateThreads,this._onMaybeUpdateThreads);this.listenTo(c('OzActions').clearReassignState,this._onClearReassignState);this.listenTo(c('OzActions').deleteTask,this._onDeleteTask)},getInitialState:function na(){return this.data},_onUpdateThreads:function na(oa){i.isList(oa)||h(0);this.data=this.data.withMutations(function(pa){return oa.reduce(z(x),pa)});this.updatedAt=Date.now();this.trigger(this.data)},_onMaybeUpdateThreads:function na(oa){i.isList(oa)||h(0);var pa=oa.filter(function(qa){return this.data.has(qa.get(u))}.bind(this));if(pa.isEmpty()){c('OzHelpers').debug('[threads] not updating partial threads');return}this.data=this.data.withMutations(function(qa){return pa.reduce(z(x),qa)});this.updatedAt=Date.now();this.trigger(this.data)},_onClearReassignState:function na(){this.data=this.data.map(function(oa){return oa.get('ui-reassign')?oa['delete']('ui-reassign'):oa});this.trigger(this.data)},_onDeleteTask:function na(oa,pa){this.data=this.data.updateIn([oa,'tasks'],function(qa){return qa.filterNot(function(ra){return ra.get('id')===pa})});this.trigger(this.data)},metrics:function na(){return j({threadCount:this.data.count(),taskCount:this.data.reduce(function(oa,pa){return pa.get('tasks',i()).count()+oa},0)})}}),ba=c('Reflux').createStore({init:function na(){this.data=this._make(null,null);this.listenTo(c('OzActions').showDialog,this._onShowDialog);this.listenTo(c('OzActions').hideDialog,this._onHideDialog)},getInitialState:function na(){return this.data},_make:function na(oa,pa){return {dialogClass:oa,dialogProps:pa}},_onShowDialog:function na(oa,pa){this.data=this._make(oa,pa);this.trigger(this.data)},_onHideDialog:function na(){this.data=this._make(null,null);this.trigger(this.data)}}),ca=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateMerchants,this._onUpdateMerchants);this.listenTo(c('OzActions').deleteMerchants,this._onDeleteMerchants)},getInitialState:function na(){return this.data},_onUpdateMerchants:function na(oa){i.isList(oa)||h(0);this.data=this.data.withMutations(function(pa){return oa.reduce(function(qa,ra){var sa=ra.get('id'),ta=qa.get(sa,j()).merge(ra);return qa.set(sa,ta)},pa)});c('OzHelpers').debug('[oz] updated merchants',this.data.toJS());this.trigger(this.data)},_onDeleteMerchants:function na(oa){i.isList(oa)||h(0);this.data=oa.reduce(function(pa,qa){return pa['delete'](qa)},this.data);c('OzHelpers').debug('[oz] deleted merchants',this.data.toJS());this.trigger(this.data)},metrics:function na(){return j({merchantCount:this.data.count()})}}),da=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateReps,this._onUpdateReps);this.listenTo(c('OzActions').replaceReps,this._onReplaceReps)},getInitialState:function na(){return this.data},_onReplaceReps:function na(oa){this.data=j().withMutations(function(pa){oa.reduce(function(qa,ra){return qa.set(ra.get('fbid'),ra)},pa)});this.trigger(this.data)},_onUpdateReps:function na(oa){this.data=this.data.withMutations(function(pa){return oa.reduce(function(qa,ra){return qa.mergeIn([ra.get('fbid')],ra)},pa)});this.trigger(this.data)},metrics:function na(){return j({repCount:this.data.count()})}}),ea=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').replaceHumans,this._onReplace)},getInitialState:function na(){return this.data},_onReplace:function na(oa){this.data=oa;this.trigger(this.data)},metrics:function na(){return j({humanCount:this.data.count()})}}),fa=c('Reflux').createStore({init:function na(){this.data=j({queue:j({showTags:m(),hideTags:m()}),all:j({showTags:m(),hideTags:m()})});this.listenTo(c('OzActions').updateQueueFilters,this._onUpdateFilters)},getInitialState:function na(){return this.data},_onUpdateFilters:function na(oa){this.data=this.data.merge(oa);this.trigger(this.data)}}),ga=c('Reflux').createStore({init:function na(){this._data=j();this.listenTo(c('OzActions').sendMessageStart,this._onShiftSending.bind(this,1));this.listenTo(c('OzActions').sendMessageFinish,this._onShiftSending.bind(this,-1))},getInitialState:function na(){return this._data},_onShiftSending:function na(oa,pa){this._data=this._data.update(pa,function(qa){return (qa||0)+oa});this.trigger(this._data)}}),ha=c('Reflux').createStore({init:function na(){this.data=j({byIntent:j(),byThread:j(),byId:j()});this.listenTo(c('OzActions').addHandledEvents,this._onAddHandledEvents)},getInitialState:function na(){return this.data},_onAddHandledEvents:function na(oa){this.data=this.data.withMutations(function(pa){oa.reduce(function(qa,ra){return qa.setIn(['byIntent',ra.get('intent-id'),ra.get('id')],ra).setIn(['byId',ra.get('id')],ra)},pa)});this.trigger(this.data)},metrics:function na(){return j({handledEventCount:this.data.get('byId').count()})}}),ia=c('Reflux').createStore({init:function na(){this.data=j({offsetMs:0});this.listenTo(c('OzActions').updateServerOffset,this._onUpdateServerOffset)},getInitialState:function na(){return this.offsetMs},_onUpdateServerOffset:function na(oa){var pa=oa.offsetMs;this.data=this.data.set('offsetMs',pa);this.trigger(this.data)}}),ja=j({state:'loading',error:null,result:null,skip:false}),ka=c('Reflux').createStore({init:function na(){this.data=j({skywalker:ja,init:ja,'wit-intents':ja,merchants:ja,humans:ja,requirements:ja});this.listenTo(c('OzActions').updateLoadingState,this._onUpdateLoadingState)},getInitialState:function na(){return this.data},_onUpdateLoadingState:function na(oa){var pa=oa.component,qa=oa.state,ra=oa.error,sa=oa.result,ta=oa.skip;c('OzHelpers').info('[store/loading] '+qa+' '+pa);if(!this.data.has(pa))c('OzHelpers').warn('[store/loading] '+pa+' wasn\'t listed in LoadingStore.init');this.data=this.data.set(pa,j({state:qa,error:ra,result:sa,skip:ta}));this.trigger(this.data)}}),la=c('Reflux').createStore({init:function na(){this.data=j();this.listenTo(c('OzActions').updateCalendarEvents,this._onUpdateCalendarEvents)},getInitialState:function na(){return this.data},_onUpdateCalendarEvents:function na(oa){var pa=oa.tid,qa=oa.calendarEvents,ra=qa&&qa.sort?qa:[];this.data=this.data.set(pa,ra.sort(function(sa,ta){var ua=new Date(sa.startDate),va=new Date(ta.startDate);return ua.getTime()-va.getTime()}));this.trigger(this.data)},metrics:function na(){return j({calendarEventCount:this.data.count()})}}),ma=c('Reflux').createStore({init:function na(){this.data=j({isStalled:false});this.listenTo(c('OzActions').skywalkerMessage,this._onSkywalkerMessage);this.listenTo(c('OzActions').skywalkerStalled,this._onSkywalkerStalled)},getInitialState:function na(){return this.data},_onSkywalkerMessage:function na(oa){var pa=oa.timestamp;this.data=this.data.set('last-receive-ts',pa).set('isStalled',false);this.trigger(this.data)},_onSkywalkerStalled:function na(){this.data=this.data.set('isStalled',true);this.trigger(this.data)}});f.exports={ActiveThreadStore:t,BubbleStore:p,DialogStore:ba,MerchantStore:ca,AutopilotStore:q,QueueFilterStore:fa,RepStore:da,HumanStore:ea,LoadingStore:ka,RequirementStore:o,ThreadStore:aa,WitIntentStore:s,PendingMessageStateStore:ga,HandledEventsStore:ha,ServerOffsetStore:ia,CalendarEventStore:la,SkywalkerStore:ma}}),null);
__d('OzAJAX',['invariant','Promise','OzHelpers','OzNotify','OzConfig','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i={metrics:{pendingCount:0,requestCount:0,failedCount:0,totalRequestMs:0,averageRequestMs:0},updateMetricsStart:function m(){i.metrics.pendingCount+=1},updateMetricsEnd:function m(n,o){var p=i.metrics;p.pendingCount-=1;if(!n.status||n.status===0||n.status>399)p.failedCount+=1;p.requestCount+=1;p.totalRequestMs+=o;p.averageRequestMs=Math.round(p.totalRequestMs/p.requestCount)},ajax:function m(n){var o=n.type,p=n.headers,q=n.params,r=n.body,s=n.url;q=k(q);var t={type:o,url:s,headers:p,params:q,body:r};i.updateMetricsStart();var u=Date.now();return j(t).then(function(v){i.updateMetricsEnd(v,Date.now()-u);return JSON.parse(v.responseText)},function(v){i.updateMetricsEnd(v,Date.now()-u);var w=void 0;try{w=JSON.parse(v.responseText)}catch(x){}l(w||{},v,t);throw w||v})},beacon:function m(n){window.navigator&&window.navigator.sendBeacon||h(0);var o=n.params,p=n.body,q=n.url;o=k(o);return window.navigator.sendBeacon(new (c('URI'))(q).addQueryData(o).toString(),new Blob([p],{type:'application/json'}))},buildURI:function m(){var n=c('OzConfig').getStaticConfig('API_PATH');n||h(0);for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return [n].concat(p).join('/')}};function j(m){var n=m.type,o=m.headers,p=m.params,q=m.body,r=m.url;return new (c('Promise'))(function(s,t){var u=new XMLHttpRequest(),v=new (c('URI'))(r);if(p)v.addQueryData(p);u.timeout=1000*60*3;u.open(n,v.toString(),true);if(o)for(var w=Object.keys(o),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var aa=z;u.setRequestHeader(aa,o[aa])}u.onreadystatechange=function(){if(u.readyState!==4)return;if(u.status===200){s(u)}else t(u);};u.send(q)})}function k(m){c('OzConfig').getStaticConfig('authToken')||h(0);c('OzConfig').getStaticConfig('uid')||h(0);c('OzConfig').getStaticConfig('API_VERSION')||h(0);return babelHelpers['extends']({xs:c('OzConfig').getStaticConfig('authToken'),c_user:c('OzConfig').getStaticConfig('uid'),rep_name:c('OzConfig').getStaticConfig('fullName'),v:c('OzConfig').getStaticConfig('API_VERSION')},m)}function l(m,n,o){c('OzHelpers').error('[oz-api] backend rejected',m,n,o);var p=m.error||'Something went wrong, the team has been notified already.';if(m.info){c('OzNotify').info(p)}else if(n.status===400){c('OzNotify').warn(p)}else if(n.status===0){c('OzNotify').error('Something went wrong. If this continues, please contact the Wit oncall')}else c('OzNotify').error(p);}f.exports=i}),null);
__d('OzDateTimePicker.react',['cssVar','cx','OzHelpers','joinClasses','AbstractDateTimePicker.react','AdsTimezone','Arbiter','BUIDatePicker.react','BUITimeInput.react','DatePickerRestraints','immutable','LocalDateTime','OzConfig','ReactComponentWithPureRenderMixin','React','ReactDOM','Reflux','SUIAudiencePlatformTheme','SUITheme','SUITimeZoneSelector.react','Timezone','XUIError.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes,m=c('immutable').Map,n=c('React').createClass({displayName:'OzDateTimePicker',mixins:[c('ReactComponentWithPureRenderMixin'),c('Reflux').connect(c('OzConfig').ConfigStore,'config')],propTypes:babelHelpers['extends']({dateRestraints:l.arrayOf(l.func),disabled:l.bool,height:l.oneOf(['short','tall']),layout:l.oneOf(['one-line','two-line','three-line']),onChange:l.func.isRequired,showTimezoneName:l.bool,timestamp:l.number,timezone:l.string},c('XUIError.react').PropTypes),getDefaultProps:function w(){return {dateRestraints:u(),disabled:false,height:'short',layout:'one-line',showTimezoneName:true,timezone:q()}},render:function w(){var x=this.props,y=x.className,z=x.dateRestraints,aa=x.disabled,ba=x.height,ca=x.layout,da=x.onChange,ea=x.showTimezoneName,fa=x.timestamp,ga=x.timezone,ha=x.xuiError,ia=x.xuiErrorAlignh,ja=x.xuiErrorPosition,ka=babelHelpers.objectWithoutProperties(x,['className','dateRestraints','disabled','height','layout','onChange','showTimezoneName','timestamp','timezone','xuiError','xuiErrorAlignh','xuiErrorPosition']),la={xuiError:ha,xuiErrorAlignh:ia,xuiErrorPosition:ja},ma=t(ga),na=o(fa,ma),oa=c('joinClasses')("_3hma"+(aa?' '+"_3hmb":''),y),pa=ca==='two-line'&&ea&&202||!ea&&110||'auto';return c('React').createElement(c('XUIError.react'),la,c('React').createElement('div',{className:oa},c('React').createElement(c('AbstractDateTimePicker.react'),babelHelpers['extends']({},ka,{className:"_3hmc",classNames:{innerWrapper:"_3hmd"},datePicker:c('React').createElement(c('BUIDatePicker.react'),{className:"_3hme",dateRestraints:this._dateRestraints(ma),height:ba,placeholder:'mm/dd/yyyy'}),disabled:aa,onChange:function(qa){return this._handleChange(qa,ma)}.bind(this),timeInput:c('React').createElement(c('BUITimeInput.react'),{className:"_3hml"+(ca!=='three-line'?' '+"_3hmm":'')+(ca==='three-line'?' '+"_3hmn":''),height:ba}),timezoneID:ma,value:na})),c('React').createElement(v,{style:!fa&&{display:'none'},className:"_3hmo"+(ca==='one-line'?' '+"_3hmm":'')+(ca!=='one-line'?' '+"_3hmn":''),isDisabled:aa,onChange:function(qa){return this._handleChange(na,qa.get('timeZoneId'))}.bind(this),shouldShowSubtitleInSelector:ea,value:c('SUITimeZoneSelector.react').VALUE({timeZoneId:ma}),width:pa})))},_handleChange:function w(x,y){var z=p(x,y),aa=r(y);this.props.onChange({timestamp:z,timezone:aa})},_dateRestraints:function w(x){return this.props.dateRestraints&&this.props.dateRestraints.map(function(y){return function(z){return y(z&&z.toDateTime(x).toDate())}})}});function o(w,x){try{if(w&&x!=null){return c('LocalDateTime').fromInstant(Math.round(w/1000),x)}else return null;}catch(y){c('OzHelpers').warn('[dateTimePicker] cannot convert to LocalDateTime',w,x,y);return null}}function p(w,x){try{if(w&&x!=null){var y=w.toInstant(x)*1000,z=y-y%60000;return z}else return null;}catch(aa){c('OzHelpers').warn('[dateTimePicker] cannot convert from LocalDateTime',w,x,aa);return null}}function q(){var w=c('Timezone').getEnvironmentTimezoneID();w==null&&c('OzHelpers').warn('[dateTimePicker] could not get environment time zone');return r(w)}function r(w){var x=c('AdsTimezone').names[w];x==null&&c('OzHelpers').warn('[dateTimePicker] unknown timezone id',w);return x}var s=m(c('AdsTimezone').names.map(function(w,x){return [w,x]}));function t(w){var x=s.get(w);x===undefined&&c('OzHelpers').warn('[timezoneIDForName] unrecognized timezone',w);return x||s.get('America/Los_Angeles')}function u(){var w=new Date(),x=new Date(Date.UTC(w.getFullYear(),w.getMonth(),w.getDate())),y=new Date(+x),z=new Date(+x);y.setFullYear(x.getFullYear()-5);z.setFullYear(x.getFullYear()+5);return [c('DatePickerRestraints').enforceDateIsNoEarlierThan(y),c('DatePickerRestraints').enforceDateIsNoLaterThan(z)]}j=babelHelpers.inherits(v,c('React').PureComponent);k=j&&j.prototype;v.prototype.componentDidMount=function(){'use strict';c('ReactDOM').findDOMNode(this.refs.timezoneSelector).addEventListener('focusout',function(w){return window.setTimeout(function(x){return c('Arbiter').inform('reflow')})})};v.prototype.render=function(){'use strict';return c('React').createElement(c('SUITimeZoneSelector.react'),babelHelpers['extends']({},this.props,{ref:'timezoneSelector',theme:c('SUIAudiencePlatformTheme')}))};function v(){'use strict';j.apply(this,arguments)}n.timezoneIDForName=t;f.exports=n}),null);
__d('MediaEffectMetadataScheduleDatePicker.react',['cx','fbt','DateConsts','DatePickerRestraints','DateTime','Grid.react','Link.react','MediaEffectMetadataValidationUtils','OzDateTimePicker.react','React','XUICloseButton.react','XUIText.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Grid.react').GridItem;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectMetadataScheduleDatePicker2=function(s){var t=s&&s.timezone;if(!s||!s.timestamp){this.props.onEndTimeChange(null,t)}else this.props.onEndTimeChange(new Date(s.timestamp),t);}.bind(this),this.$MediaEffectMetadataScheduleDatePicker3=function(s){var t=s&&s.timezone;if(!s||!s.timestamp){this.props.onStartTimeChange(null,t)}else this.props.onStartTimeChange(new Date(s.timestamp),t);}.bind(this),this.$MediaEffectMetadataScheduleDatePicker4=function(){if(!this.props.startTime)return;var s=new Date(this.props.startTime);s.setDate(s.getDate()+c('DateConsts').DAYS_PER_WEEK);this.props.onEndTimeChange(s,this.props.timezone)}.bind(this),this.$MediaEffectMetadataScheduleDatePicker5=function(){this.props.onEndTimeChange(null,this.props.timezone)}.bind(this),o}m.prototype.$MediaEffectMetadataScheduleDatePicker1=function(){var n=this.props,o=n.startTime,p=n.endTime,q=c('MediaEffectMetadataValidationUtils').validateTimeRange(o,p);if(!q)return i._("Time range is invalid.");return null};m.prototype.render=function(){var n=this.props.startTime||new Date(),o=c('OzDateTimePicker.react').timezoneIDForName(this.props.timezone),p=[c('DatePickerRestraints').enforceDateIsNoEarlierThan(c('DateTime').now(o).startOfDay().toDate())],q=null;if(this.props.endTime){var r=this.props.endTime,s=new (c('DateTime'))(r/1000,o);p.push(c('DatePickerRestraints').enforceDateIsNoLaterThan(s.endOfDay().toDate()));var t=new (c('DateTime'))(n/1000,o);q=c('React').createElement(c('OzDateTimePicker.react'),{dateRestraints:[c('DatePickerRestraints').enforceDateIsNoEarlierThan(t.startOfDay().toDate())],disabled:this.props.disabled,height:'tall',layout:'two-line',onChange:this.$MediaEffectMetadataScheduleDatePicker2,timestamp:r.getTime(),timezone:this.props.timezone,xuiError:this.$MediaEffectMetadataScheduleDatePicker1()})}else q=this.props.disabled?i._("Not specified"):c('React').createElement(c('Link.react'),{onClick:this.$MediaEffectMetadataScheduleDatePicker4},i._("add an end date"));var u="_9vd";return c('React').createElement(c('Grid.react'),{alignv:'middle',className:"_3-8m",cols:3},c('React').createElement(l,null,c('React').createElement(c('XUIText.react'),null,i._("Start"))),c('React').createElement(l,null,c('React').createElement('div',{className:c('joinClasses')(u,"_3-8h _2pir")},c('React').createElement(c('OzDateTimePicker.react'),{dateRestraints:p,disabled:this.props.disabled,height:'tall',layout:'two-line',onChange:this.$MediaEffectMetadataScheduleDatePicker3,timestamp:n.getTime(),timezone:this.props.timezone}))),c('React').createElement(l,null),c('React').createElement(l,null,c('React').createElement(c('XUIText.react'),null,i._("End"))),c('React').createElement(l,null,c('React').createElement('div',{className:c('joinClasses')(u,"_3-8h _2pir")},q)),c('React').createElement(l,null,this.props.endTime&&!this.props.disabled?c('React').createElement(c('XUICloseButton.react'),{className:"_3-9a",onClick:this.$MediaEffectMetadataScheduleDatePicker5,size:'small'}):null))};f.exports=m}),null);
__d('MediaEffectMetadataSchedule.react',['cx','fbt','MediaEffectEditorFunnelLogger','MediaEffectMetadataScheduleDatePicker.react','React','XUIRadioList.react','MediaEffectCard.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectMetadataSchedule1=function(t){if(t==='no_constrain'){this.props.onDateRangeChange(null,null,null)}else this.props.onDateRangeChange(new Date(),null,null);}.bind(this),this.$MediaEffectMetadataSchedule4=function(t,u){var v=this.props.startTime;c('MediaEffectEditorFunnelLogger').logChangeEndTime();this.props.onDateRangeChange(v,t,u)}.bind(this),this.$MediaEffectMetadataSchedule5=function(t,u){var v=this.props.endTime;c('MediaEffectEditorFunnelLogger').logChangeStartTime();this.props.onDateRangeChange(t,v,u)}.bind(this),p}n.prototype.render=function(){return c('React').createElement(c('MediaEffectCard.react'),{title:i._("Schedule"),tooltip:i._("Choose whether your effect will be available for people to use immediately once it's approved or only between specific dates.")},c('React').createElement(c('XUIRadioList.react'),{disabled:this.props.disabled,onValueChange:this.$MediaEffectMetadataSchedule1,selectedValue:this.$MediaEffectMetadataSchedule2()},c('React').createElement(l,{value:'no_constrain',disabled:this.props.disabled},i._("Make active once approved")),c('React').createElement(l,{value:'specified',disabled:this.props.disabled},i._("Set a start and end date"))),this.$MediaEffectMetadataSchedule3())};n.prototype.$MediaEffectMetadataSchedule2=function(){if(this.props.startTime||this.props.endTime){return 'specified'}else return 'no_constrain';};n.prototype.$MediaEffectMetadataSchedule3=function(){if(this.$MediaEffectMetadataSchedule2()!=='specified')return null;return c('React').createElement('div',{className:"_2pis"},c('React').createElement(c('MediaEffectMetadataScheduleDatePicker.react'),babelHelpers['extends']({onEndTimeChange:this.$MediaEffectMetadataSchedule4,onStartTimeChange:this.$MediaEffectMetadataSchedule5},this.props)))};n.propTypes={endTime:m.oneOfType([m.oneOf([null]),m.instanceOf(Date)]),onDateRangeChange:m.func.isRequired,startTime:m.oneOfType([m.oneOf([null]),m.instanceOf(Date)]),timezone:m.string};f.exports=n}),null);
__d('MediaEffectMetadataRecord',['FXEntMediaEffectSubmissionStatus','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({attributedOwnerID:null,connectAppID:null,effectHasText:false,endTime:null,fbPageLiked:null,fbCatalogGKs:[],fbBoosted:false,fbEligibilityGKs:[],fbExperimentID:null,fbOnlyMediaRestriction:false,fbRankWeight:null,fbWhitelistCheckEligibility:false,fbWhitelistedUsers:[],gatelogic:null,humanReadableDescription:null,id:null,inspirationCategoryNames:[],locales:[],location:null,locationPageID:null,name:null,offlineOnly:false,placeDescription:null,productVisibilityPolicy:null,productionVerification:false,rejectReasons:null,saveAsDraft:false,selectedCategoryID:null,selectedInstructionID:null,selectedInstagramAttributionID:null,selectedOwnerID:null,selectedTemplateCategoryID:null,selfBirthday:false,startTime:null,sourceTemplateID:null,submissionStatus:c('FXEntMediaEffectSubmissionStatus').DRAFT,tags:[],thumbnail:null,thumbnailURI:null,timezone:null,timingSchedule:null,locationTarget:'everyone',hasFrameNameError:false,adsTargetingSpec:'{age_min: 13, age_max: 65}',use_owner_selector:true}));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectMetadataStore',['FluxReduceStore','MediaEffectFlowType','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameEditorDispatcher','LocationConstants','MediaEffectMaskUploadDataStore','MediaEffectMetadataRecord','MediaEffectMetadataValidationUtils','MediaEffectMetadataViewStore','MediaEffectPlaceDescriptionRecord'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return new (c('MediaEffectMetadataRecord'))()};j.prototype.reduce=function(k,l){var m=void 0,n=void 0,o=void 0,p=void 0;switch(l.type){case 'add/tag':m=k.get('tags');m.push(l.data);k=k.set('tags',m);break;case 'apply/template':k=k.set('sourceTemplateID',l.templateFBID);break;case 'clear/template':k=k.set('sourceTemplateID',null);break;case 'remove/tag':var q=l.data;m=k.get('tags');m=m.filter(function(t){return t.uniqueID!==q.uniqueID&&t.title!==q.title});k=k.set('tags',m);break;case 'add/fbWhitelistedUser':n=k.get('fbWhitelistedUsers');n.push(l.data);k=k.set('fbWhitelistedUsers',n);break;case 'remove/fbWhitelistedUser':var r=l.data;n=k.get('fbWhitelistedUsers');n=n.filter(function(t){return t.uniqueID!==r.uniqueID&&t.name!==r.name});k=k.set('fbWhitelistedUsers',n);break;case 'save/draft':k=k.set('saveAsDraft',true);break;case 'select/instruction':k=k.set('selectedInstructionID',l.instructionID);break;case 'update/category':k=k.set('selectedCategoryID',l.value);break;case 'change/connectAppID':k=this.getState().set('connectAppID',l.appID);break;case 'update/effectID':k=this.getState().set('id',l.effectID);break;case 'update/fbRankingStrategy':k=k.set('fbBoosted',l.value==='BOOST');if(l.value!=='MANUAL')k=k.set('fbRankWeight',null);break;case 'update/fbRankWeight':k=k.set('fbRankWeight',l.value);break;case 'update/fbWhitelistCheckEligibility':k=k.set('fbWhitelistCheckEligibility',l.value);break;case 'update/fbCatalogGKs':k=k.set('fbCatalogGKs',l.value);break;case 'update/fbEligibilityGKs':k=k.set('fbEligibilityGKs',l.value);break;case 'update/fbOnlyMediaRestriction':k=k.set('fbOnlyMediaRestriction',l.value);break;case 'update/fbPageLiked':k=k.set('fbPageLiked',l.value);break;case 'update/gatelogic':k=k.set('gatelogic',l.value);break;case 'update/locales':k=k.set('locales',l.value);break;case 'update/locationPageID':k=k.set('locationPageID',l.value);if(l.value===null)k=k.set('placeDescription',null);break;case 'update/location':k=k.set('location',l.value);break;case 'update/locationTarget':k=k.set('locationTarget',l.value);break;case 'update/name':k=k.set('name',l.value);break;case 'update/offlineOnly':k=k.set('offlineOnly',l.value);break;case 'update/productVisibilityPolicy':k=k.set('productVisibilityPolicy',l.value);break;case 'update/selectedInstagramAttributionID':k=k.set('selectedInstagramAttributionID',l.value);break;case 'update/selectedOwnerID':k=k.set('selectedOwnerID',l.value);break;case 'update/selfBirthday':k=k.set('selfBirthday',l.value);break;case 'update/thumbnail':k=k.set('thumbnail',l.thumbnail);break;case 'update/timingSchedule':k=k.set('timingSchedule',l.value);break;case 'update/adsTargetingSpec':k=k.set('adsTargetingSpec',l.adsTargetingSpec);break;case 'update/scheduleRange':k=k.set('startTime',l.startTime).set('endTime',l.endTime).set('timezone',l.timezone);break;case 'update/nameValidation':k=k.set('hasFrameNameError',l.isError);break;case 'init/effectMetadata':var s=Object.assign({},l.data.activationJSData);s=Object.assign(s,l.data.metadataJSData);if(s.startTime)s.startTime=new Date(s.startTime*1000);if(s.endTime)s.endTime=new Date(s.endTime*1000);if(s.locationPageID)s.locationTarget='targeted';if(s.location){s.locationTarget='targeted';s.location.distance_unit=c('LocationConstants').KILOMETER_UNIT;s.location=new (c('MediaEffectPlaceDescriptionRecord'))(s.location)}k=new (c('MediaEffectMetadataRecord'))(s);break;case 'update/effectHasText':k=k.set('effectHasText',l.value);break;case 'update/humanReadableDescription':k=k.set('humanReadableDescription',l.value);break;case 'update/productionVerification':k=k.set('productionVerification',l.value);break;case 'set/placeDescription':k=k.set('placeDescription',l.placeDescription);break;case 'select/templateCategoryID':k=k.set('selectedTemplateCategoryID',l.value);break;case 'select/attributedOwnerID':k=k.set('attributedOwnerID',l.value);break;case 'remove/inspirationCategoryNames':o=l.value;p=k.get('inspirationCategoryNames');p=p.filter(function(t){return t!==o});k=k.set('inspirationCategoryNames',p);break;case 'add/inspirationCategoryNames':o=l.value;p=k.get('inspirationCategoryNames');p.push(o);k=k.set('inspirationCategoryNames',p);break;case 'update/setUseOwnerSelector':k=k.set('use_owner_selector',l.value);break;}return k};j.prototype.getUseOwnerSelector=function(){return this.getState().get('use_owner_selector')};j.prototype.hasEffectID=function(){return this.getState().get('id')!==null};j.prototype.getRequestData=function(k){var l=this.getState(),m=l.get('selectedOwnerID'),n=l.get('location'),o=n?{page_id:n.key||undefined,location:n.manual_geo?{latitude:n.latitude,longitude:n.longitude,radius_km:n.radius}:undefined,constrain_eligibility:!!n.constrain_eligibility}:undefined,p={connected_app_id:l.get('connectAppID'),effect_description:c('MediaEffectMaskUploadDataStore').getState().effectDescription,end_time:l.get('endTime')?Math.floor(l.get('endTime').getTime()/1000):undefined,flow_type:c('MediaEffectFrameCreateDialogDataStore').getState().flowType,instagram_attribution_id:l.get('selectedInstagramAttributionID'),media_effect_category:l.get('selectedCategoryID'),media_effect_owner:m,media_effect_save_as_draft:l.get('saveAsDraft'),media_effect_tags:l.get('tags').map(function(s){return s.title}),name:l.get('name'),start_time:l.get('startTime')?Math.floor(l.get('startTime').getTime()/1000):undefined,source_template_id:l.get('sourceTemplateID'),targeting_place_page:l.get('locationPageID'),targeting_place:o,timezone:l.get('timezone'),ads_targeting_spec:l.get('adsTargetingSpec')};if(!k)return p;var q=l.get('selectedTemplateCategoryID');if(q!==null){q=[q]}else q=[];p=Object.assign(p,{fb_catalog_gks:l.get('fbCatalogGKs').length>0?l.get('fbCatalogGKs'):undefined,fb_eligibility_gks:l.get('fbEligibilityGKs').length>0?l.get('fbEligibilityGKs'):undefined,fb_only_media_restriction:l.get('fbOnlyMediaRestriction'),fb_page_liked:l.get('fbPageLiked')||undefined,fb_ranking_boosted:l.get('fbBoosted'),fb_ranking_weight:l.get('fbRankWeight'),fb_whitelisted_user_ids:l.get('fbWhitelistedUsers').map(function(s){return s.uniqueID}),fb_whitelist_check_eligibility:l.get('fbWhitelistCheckEligibility'),gatelogic:l.get('gatelogic'),has_text:l.get('effectHasText'),human_readable_description:l.get('humanReadableDescription'),locales:l.get('locales'),meida_effect_instruction:l.get('selectedInstructionID'),media_effect_template_categories:q,offline_only:!!l.get('offlineOnly'),product_visibility_policy:l.get('productVisibilityPolicy'),self_birthday:!!l.get('selfBirthday'),timing_schedule:l.get('timingSchedule'),thumbnail:l.get('thumbnail'),ads_targeting_spec:l.get('adsTargetingSpec'),inspiration_category_names:l.get('inspirationCategoryNames')});var r=l.get('attributedOwnerID');if(r!==null){p.attributed_owner=r}else delete p.attributed_owner;return p};j.prototype.isBasicMetadataValid=function(){var k=this.getState(),l=c('MediaEffectFrameCreateDialogDataStore').getState().flowType===c('MediaEffectFlowType').TEMPLATE;if(k.get('hasFrameNameError'))return false;if(!c('MediaEffectMetadataValidationUtils').validateTimeRange(k.get('startTime'),k.get('endTime')))return false;if(k.get('locationTarget')==='targeted'&&!c('MediaEffectMetadataValidationUtils').validateLocationPageID(k.get('locationPageID'))&&!c('MediaEffectMetadataValidationUtils').validateLocation(k.get('location')))return false;if(l&&k.selectedTemplateCategoryID===null)return false;return true};j.prototype.isOwnerValid=function(){var k=this.getState(),l=k.get('selectedOwnerID'),m=!k.get('id');if(!c('MediaEffectMetadataValidationUtils').validateOwnerID(l))return false;if(m){var n=k.get('productionVerification'),o=c('MediaEffectMetadataViewStore').getOwner(l);if(o&&o.isProductionFirstParty&&!n)return false;}return true};j.prototype.isNameValid=function(){return c('MediaEffectMetadataValidationUtils').validateName(this.getState().get('name'))};j.prototype.isAllMetadataValid=function(){if(!this.isNameValid())return false;if(!this.isOwnerValid())return false;return this.isBasicMetadataValid()};function j(){h.apply(this,arguments)}f.exports=new j(c('MediaEffectFrameEditorDispatcher'))}),null);
__d("XMediaEffectTagsDataSourceController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/datasource\/tags\/",{is_featured:{type:"Bool",defaultValue:false},value:{type:"String"}})}),null);
__d('MediaEffectMetadataTagsTypeahead.react',['fbt','MediaEffectEditorFunnelLogger','React','SearchableEntry','WebAsyncSearchSource','XMediaEffectTagsDataSourceController','XUITokenizer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=10;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.componentDidUpdate=function(){if(this.state.resetQueryString)this.setState({resetQueryString:false});};function m(n){j.constructor.call(this,n);this.searchSource=new (c('WebAsyncSearchSource'))({queryRequests:[{uri:c('XMediaEffectTagsDataSourceController').getURIBuilder().setBool('is_featured',false).getURI()}]});this.state={resetQueryString:false}}m.prototype.render=function(){return c('React').createElement(c('XUITokenizer.react'),{disabled:this.props.disabled,entries:this.props.tags.map(function(n){return new (c('SearchableEntry'))({title:n.title,uniqueID:n.uniqueID||n.title})}),limit:l,onAddEntryAttempt:this.$MediaEffectMetadataTagsTypeahead1.bind(this),onEnterWithoutSelection:this.$MediaEffectMetadataTagsTypeahead2.bind(this),onRemoveEntryAttempt:this.$MediaEffectMetadataTagsTypeahead3.bind(this),placeholder:h._("Add up to 10 keywords"),queryString:this.state.resetQueryString?'':undefined,searchSource:this.searchSource,tokenizeQueryStringOnBlur:this.$MediaEffectMetadataTagsTypeahead2.bind(this)})};m.prototype.$MediaEffectMetadataTagsTypeahead1=function(n){this.$MediaEffectMetadataTagsTypeahead2();if(this.props.tags.length>=l)return;var o=n.getTitle();if(!o||!o.length)return;var p=this.props.tags.map(function(r){return r.title});if(p.includes(o))return;var q=n.getUniqueID();this.$MediaEffectMetadataTagsTypeahead4();this.props.onAddTag({uniqueID:q,title:o})};m.prototype.$MediaEffectMetadataTagsTypeahead3=function(n){this.$MediaEffectMetadataTagsTypeahead2();var o=n.getUniqueID(),p=n.getTitle();this.$MediaEffectMetadataTagsTypeahead4();this.props.onRemoveTag({uniqueID:o,title:p})};m.prototype.$MediaEffectMetadataTagsTypeahead2=function(){this.setState({resetQueryString:true})};m.prototype.$MediaEffectMetadataTagsTypeahead4=function(){c('MediaEffectEditorFunnelLogger').logChangeTag()};m.propTypes={disabled:k.bool,tags:k.array,onAddTag:k.func.isRequired,onRemoveTag:k.func.isRequired};m.defaultProps={tags:[]};f.exports=m}),null);
__d("XMediaEffectHubEditSettingsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/edit_settings\/async\/",{table_results_per_page:{type:"Int"},hub_actor:{type:"FBID"},view_all:{type:"Bool",defaultValue:false},table_layout:{type:"String"},table_columns:{type:"StringVector"}})}),null);
__d('MediaEffectOwnerSelectorContainer.react',['cx','fbt','AsyncRequest','FluxContainer','Image.react','MediaEffectHubDispatcher','MediaEffectMetadataActionCreators','MediaEffectMetadataStore','MediaEffectMetadataViewStore','React','XMediaEffectHubEditSettingsAsyncController','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISingleSelector.react').Option;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectOwnerSelectorContainer2=function(s){this.$MediaEffectOwnerSelectorContainer1(s.value)}.bind(this),o}m.getStores=function(){return [c('MediaEffectMetadataViewStore'),c('MediaEffectMetadataStore')]};m.calculateState=function(){var n=c('MediaEffectMetadataStore').getState().get('selectedOwnerID'),o=c('MediaEffectMetadataViewStore').getState().get('ownersData');return {selectedOwner:c('MediaEffectMetadataViewStore').getOwner(n),ownersData:o}};m.prototype.$MediaEffectOwnerSelectorContainer1=function(n){c('MediaEffectMetadataActionCreators').changeOwner(n);c('MediaEffectMetadataActionCreators').resetLocation();var o=this.state.ownersData.find(function(r){return r.id===n});if(o===undefined)return;var p=c('XMediaEffectHubEditSettingsAsyncController').getURIBuilder();if(o.type!=='event'){p.setFBID('hub_actor',n).setBool('view_all',false);c('MediaEffectHubDispatcher').dispatch({type:'view_store/update_actor',payload:o});c('MediaEffectHubDispatcher').dispatch({type:'update/view_all',payload:false})}else{c('MediaEffectHubDispatcher').dispatch({type:'update/view_all',payload:true});p.setBool('view_all',true)}var q=p.getURI();new (c('AsyncRequest'))().setURI(q).send()};m.prototype.render=function(){var n=0,o=this.state,p=o.ownersData,q=o.selectedOwner,r=this.props.disabled,s=p.map(function(v){return c('React').createElement(l,{icon:c('React').createElement(c('Image.react'),{className:"_5hh3",src:v.src}),key:v.id,value:v.id},v.name)}),t=c('React').createElement(l,{value:n},i._("Select Owner")),u=q?q.id:n;return c('React').createElement(c('XUISingleSelector.react'),{defaultValue:u,disabled:r,maxheight:500,maxwidth:268,onChange:this.$MediaEffectOwnerSelectorContainer2,size:'xlarge',value:u},u===n?t:null,s)};f.exports=c('FluxContainer').create(m,{withProps:true})}),null);
__d('MediaEffectColorPaletteComponentRecord',['immutable','colr-convert'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;function k(q){return ('00'+q.toString(16)).substr(-2)}function l(q,r){var s=q||0,t=r||r===0?r:1;return t+n()*(s-t)}function m(q,r){var s=q||0,t=r||r===0?r:1,u=2*Math.random()-1,v=(u*u*u+1)/2;return s+v*(t-s)}function n(q,r){var s=q||0,t=r||r===0?r:1,u=Math.random(),v=u*u;return s+v*(t-s)}function o(q,r){var s=q||0,t=r||r===0?r:1;return s+Math.random()*(t-s)}h=babelHelpers.inherits(p,j({hue:.5,saturation:1,lightness:.5,hueVariation:.05,saturationVariation:.3,lightnessVariation:.3}));i=h&&h.prototype;p.random=function(){return new p({hue:o(),saturation:l(),lightness:m(),hueVariation:n(.05,.4),saturationVariation:o(.2,1),lightnessVariation:o(.2,1)})};p.prototype.toRGB=function(){var q=c('colr-convert').hsl.rgb([this.hue*360,this.saturation*100,this.lightness*100]).map(Math.floor);return '#'+q.map(k).join('')};p.prototype.toString=function(){return [this.hue.toFixed(3)+'+'+this.hueVariation.toFixed(3),this.saturation.toFixed(3)+'+'+this.saturationVariation.toFixed(3),this.lightness.toFixed(3)+'+'+this.lightnessVariation.toFixed(3)].join(':')};function p(){h.apply(this,arguments)}f.exports=p}),null);
__d('MediaEffectColorPaletteRecord',['immutable','MediaEffectColorPaletteComponentRecord'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=c('immutable').Record;h=babelHelpers.inherits(l,k({components:j()}));i=h&&h.prototype;l.random=function(){return new l({components:j.of(c('MediaEffectColorPaletteComponentRecord').random(),c('MediaEffectColorPaletteComponentRecord').random(),c('MediaEffectColorPaletteComponentRecord').random(),c('MediaEffectColorPaletteComponentRecord').random())})};l.prototype.getMainColor=function(){if(this.components.size===0)return null;return this.components.get(0).toRGB()};l.prototype.toString=function(){return this.components.map(function(m){return m.toString()}).join(',')};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectReactFrameEditorScalarSizeRecord',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;h=babelHelpers.inherits(k,j({canvas_size_percentage:50,pixels:0}));i=h&&h.prototype;k.canonical=function(l,m,n){return new k({canvas_size_percentage:100*m/l})};k.prototype.toAbsolute=function(l){return this.canvas_size_percentage/100*l+this.pixels};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectReactFrameEditorSize',['immutable','MediaEffectReactFrameEditorScalarSizeRecord','Vector'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l,m,n,o,p,q,r=c('immutable').Record;h=babelHelpers.inherits(s,r({width:null,height:null}));i=h&&h.prototype;s.canonical=function(x,y){return new s({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.x,x.w(),x.w()/2+x.l),height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.y,x.h(),x.h()/2+x.t)})};s.prototype.isValid=function(){return Boolean(this.width&&this.height)};s.prototype.toAbsolute=function(x){return new (c('Vector'))(this.width.toAbsolute(x.x),this.height.toAbsolute(x.y))};function s(){h.apply(this,arguments)}j=babelHelpers.inherits(t,r({width:null,aspect_ratio:null}));k=j&&j.prototype;t.canonical=function(x,y){return new t({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.x,x.w(),x.w()/2+x.l),aspect_ratio:x.w()/x.h()})};t.prototype.isValid=function(){return Boolean(this.width&&this.aspect_ratio&&this.aspect_ratio>0)};t.prototype.toAbsolute=function(x){var y=this.width.toAbsolute(x.x);return new (c('Vector'))(y,y/this.aspect_ratio)};t.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};t.prototype.getDerivedWidth=function(){return this.width};t.prototype.getDerivedHeight=function(){return new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:this.width.canvas_size_percentage/this.getDerivedAspectRatio()})};t.prototype.getScaledWithWidth=function(){return this};t.prototype.getNotScaledWithWidth=function(){return new w({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};t.prototype.getScaledWithHeight=function(){return new v({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};t.prototype.getNotScaledWithHeight=function(){return this};function t(){j.apply(this,arguments)}l=babelHelpers.inherits(u,r({height:null,aspect_ratio:null}));m=l&&l.prototype;u.canonical=function(x,y){return new s({height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.y,x.h(),x.h()/2+x.t),aspect_ratio:x.w()/x.h()})};u.prototype.isValid=function(){return Boolean(this.height&&this.aspect_ratio&&this.aspect_ratio>0)};u.prototype.toAbsolute=function(x){var y=this.height.toAbsolute(x.y);return new (c('Vector'))(y*this.aspect_ratio,y)};u.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};u.prototype.getDerivedWidth=function(){return new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:this.height.canvas_size_percentage*this.getDerivedAspectRatio()})};u.prototype.getDerivedHeight=function(){return this.height};u.prototype.getScaledWithWidth=function(){return new v({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};u.prototype.getNotScaledWithWidth=function(){return this};u.prototype.getScaledWithHeight=function(){return this};u.prototype.getNotScaledWithHeight=function(){return new w({width:this.getDerivedWidth(),height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};function u(){l.apply(this,arguments)}n=babelHelpers.inherits(v,r({width:null,height:null,aspect_ratio:null}));o=n&&n.prototype;v.canonical=function(x,y){return new s({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.x,x.w(),x.w()/2+x.l),height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.y,x.h(),x.h()/2+x.t),aspect_ratio:x.w()/x.h()})};v.prototype.isValid=function(){return Boolean(this.width&&this.height&&this.aspect_ratio&&this.aspect_ratio>0)};v.prototype.toAbsolute=function(x){var y=this.width.toAbsolute(x.x),z=this.height.toAbsolute(x.y),aa=Math.min(y,z*this.aspect_ratio),ba=Math.min(z,y/this.aspect_ratio);return new (c('Vector'))(aa,ba)};v.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};v.prototype.getDerivedWidth=function(){return this.width};v.prototype.getDerivedHeight=function(){return this.height};v.prototype.getScaledWithWidth=function(){return this};v.prototype.getNotScaledWithWidth=function(){return new u({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};v.prototype.getScaledWithHeight=function(){return this};v.prototype.getNotScaledWithHeight=function(){return new t({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()})};function v(){n.apply(this,arguments)}p=babelHelpers.inherits(w,r({width:null,height:null,aspect_ratio:null}));q=p&&p.prototype;w.canonical=function(x,y){return new s({width:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.x,x.w(),x.w()/2+x.l),height:c('MediaEffectReactFrameEditorScalarSizeRecord').canonical(y.y,x.h(),x.h()/2+x.t),aspect_ratio:x.w()/x.h()})};w.prototype.isValid=function(){return Boolean(this.width&&this.height&&this.aspect_ratio&&this.aspect_ratio>0)};w.prototype.toAbsolute=function(x){var y=this.width.toAbsolute(x.x),z=this.height.toAbsolute(x.y),aa=Math.max(y,z*this.aspect_ratio),ba=Math.max(z,y/this.aspect_ratio);return new (c('Vector'))(aa,ba)};w.prototype.getDerivedAspectRatio=function(){return this.aspect_ratio};w.prototype.getDerivedWidth=function(){return this.width};w.prototype.getDerivedHeight=function(){return this.height};w.prototype.getScaledWithWidth=function(){return new t({width:this.getDerivedWidth(),aspect_ratio:this.getDerivedAspectRatio()})};w.prototype.getNotScaledWithWidth=function(){return this};w.prototype.getScaledWithHeight=function(){return new u({height:this.getDerivedHeight(),aspect_ratio:this.getDerivedAspectRatio()})};w.prototype.getNotScaledWithHeight=function(){return this};function w(){p.apply(this,arguments)}f.exports={Stretch:s,ScaleWidth:t,ScaleHeight:u,Fit:v,Fill:w}}),null);
__d('MediaEffectReactFrameDeserializer',['invariant','immutable','MediaEffectColorPaletteComponentRecord','MediaEffectColorPaletteRecord','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectReactFrameEditorScalarAssetPositionRecord','MediaEffectReactFrameEditorScalarSizeRecord','MediaEffectReactFrameEditorSize','MediaEffectReactFrameEditorTemplateRecord','MediaEffectReactFrameEditorTextAssetRecord'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Map,j=c('immutable').List;function k(v){return !v||v==='0'?null:v}function l(v){var w=v.split('+'),x=parseFloat(w[0]),y=parseFloat(w[1]);x>=0&&x<=1||h(0);y>=0&&y<=1||h(0);return {value:x,variation:y}}function m(v){var w=v.split(':').map(l);w.length===3||h(0);return new (c('MediaEffectColorPaletteComponentRecord'))({hue:w[0].value,saturation:w[1].value,lightness:w[2].value,hueVariation:w[0].variation,saturationVariation:w[1].variation,lightnessVariation:w[2].variation})}function n(v){if(!v)return new (c('MediaEffectColorPaletteRecord'))({components:j()});return new (c('MediaEffectColorPaletteRecord'))({components:j(v.split(',').map(m))})}function o(v,w){var x=v;return new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_asset_size_percentage:x.horizontal_alignment==='center'?50:0,anchor_origin:x.horizontal_alignment==='right'?'asset_end':'asset_start',asset_origin:x.horizontal_alignment==='right'?'canvas_end':'canvas_start',asset_canvas_size_percentage:x.horizontal_alignment==='center'?50:x.horizontal_margin}),y:new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_asset_size_percentage:x.vertical_alignment==='center'?50:0,anchor_origin:x.vertical_alignment==='bottom'?'asset_end':'asset_start',asset_origin:x.vertical_alignment==='bottom'?'canvas_end':'canvas_start',asset_canvas_size_percentage:x.vertical_alignment==='center'?50:x.vertical_margin})})}function p(v,w,x){var y=w.size_dimension==='width',z=v.size_dimension==='height';if(!y&&!z)return new (c('MediaEffectReactFrameEditorSize').Fill)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:v.size}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:w.size}),aspect_ratio:v.size/w.size});if(y&&z)return new (c('MediaEffectReactFrameEditorSize').Fit)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:w.size}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:v.size}),aspect_ratio:w.size/v.size});if(y)return new (c('MediaEffectReactFrameEditorSize').ScaleWidth)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:w.size})});return new (c('MediaEffectReactFrameEditorSize').ScaleHeight)({height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:v.size})})}function q(v,w,x){return new (c('MediaEffectReactFrameEditorSize').Stretch)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:w.textbox_width}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:w.size})})}function r(v){var w=k(v.source_template_asset_id);return new (c('MediaEffectReactFrameEditorImageAssetRecord'))({assetFBID:k(v.asset_id),dynamic_sticker_pack_id:k(v.dynamic_sticker_pack_id),dynamic_sticker_type:v.dynamic_sticker_type,stickerFBID:v.sticker_id,sourceTemplateAssetFBID:w,hostedImageURI:v.sticker_url,position:o(v.landscape_position,v.portrait_position),assetSize:p(v.landscape_position,v.portrait_position,c('MediaEffectReactFrameEditorCanvasDataStore').getState().canvasSize),readOnly:!!w,assocTextAsset:v.assoc_text_asset&&s(v.assoc_text_asset)})}function s(v){var w=v.font_name||v.custom_font_id;!!w||h(0);return new (c('MediaEffectReactFrameEditorTextAssetRecord'))({assetFBID:k(v.asset_id),content:v.content,font:c('MediaEffectReactFrameEditorCanvasDataStore').getFont(w),color:'#'+v.color,sourceTemplateAssetFBID:k(v.source_template_asset_id),textHorizontalAlignment:v.portrait_position.text_horizontal_alignment,position:o(v.landscape_position,v.portrait_position),assetSize:q(v.landscape_position,v.portrait_position,c('MediaEffectReactFrameEditorCanvasDataStore').getState().canvasSize),contentMustBeUpdated:v.content_must_be_updated})}function t(v){var w=i(),x=j().withMutations(function(y){w=w.withMutations(function(z){v.stickers.forEach(function(aa,ba){var ca=r(aa);ca=ca.set('localAssetID',ba+1);if(ca.assocTextAsset)ca=ca.set('assocTextAsset',ca.assocTextAsset.set('localAssetID',ba+1));y.push(ca.localAssetID);z.set(ca.localAssetID,ca)});v.text.forEach(function(aa,ba){var ca=s(aa);ca=ca.set('localAssetID',v.stickers.length+ba+1);y.push(ca.localAssetID);z.set(ca.localAssetID,ca)})})});return {assets:w,assetOrder:x,frameFBID:v.fbid,filterID:v.filter_id,templateFBID:k(v.source_template_id),colorPalette:n(v.color_palette)}}function u(v){return new (c('MediaEffectReactFrameEditorTemplateRecord'))({templateFBID:v.id,previewURL:v.uri,sourceTemplateFBID:v.source_id,variants:j(v.variant_ids),colorPalette:n(v.color_palette)})}f.exports={deserializeData:t,deserializeColorPalette:n,deserializeTemplate:u}}),null);
__d('MediaEffectReactFrameEditorAsset.react',['ix','cx','fbt','DOMQuery','FBDragHandle.react','FBToggleSwitch.react','FileInput.react','InputLabel.react','MediaEffectEditorFunnelLogger','MediaEffectFlowType','MediaEffectMetadataActionCreators','MediaEffectQEUtils','MediaEffectReactFrameEditorCanvasImageAsset.react','MediaEffectReactFrameEditorImageAsset.react','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectReactFrameEditorSize','MediaEffectReactFrameEditorTextAsset.react','MediaEffectReactFrameEditorTextAssetRecord','MountedContextMenu.react','PopoverMenu.react','React','ReactDOM','ReactXUIMenu','MenuSeparator.react','SimpleXUIDialog','XUIPopoverButton.react','XUIError.react','SUIButton.react','SUIGlyphIcon.react','SUIMediaEffectTheme','fbglyph','emptyFunction','immutable'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('ReactXUIMenu').Item,n=c('ReactXUIMenu').ItemNoAction,o=c('immutable').Map;function p(r){return {top:r.t,left:r.l,width:r.w(),height:r.h(),position:'absolute'}}k=babelHelpers.inherits(q,c('React').PureComponent);l=k&&k.prototype;function q(){l.constructor.call(this);this.$MediaEffectReactFrameEditorAsset1=[];this.$MediaEffectReactFrameEditorAsset2=[];this.$MediaEffectReactFrameEditorAsset3=[];this.$MediaEffectReactFrameEditorAsset4=null;this.$MediaEffectReactFrameEditorAsset5=null;this.$MediaEffectReactFrameEditorAsset6=function(){if(!this.props.readOnly&&this.props.enableEditorFreeText)c('MediaEffectMetadataActionCreators').editText(this.props.localAssetID);}.bind(this);this.$MediaEffectReactFrameEditorAsset7=function(){return this.props.initialPositionMap}.bind(this);this.$MediaEffectReactFrameEditorAsset8=function(){var r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return (r=this.props).onDrag.apply(r,[this.props.localAssetID].concat(t))}.bind(this);this.$MediaEffectReactFrameEditorAsset9=function(){c('MediaEffectMetadataActionCreators').raiseAsset(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset10=function(){var r=this.props,s=r.assetData,t=r.localAssetID;c('MediaEffectMetadataActionCreators').removeBackground(t,s.stickerFBID);this.setState({hasProcessed:true});c('MediaEffectEditorFunnelLogger').logApplyAutoBackgroundRemoval(this.props.assetData.stickerFBID)}.bind(this);this.$MediaEffectReactFrameEditorAsset11=function(){c('MediaEffectMetadataActionCreators').raiseAsset(this.props.localAssetID,true)}.bind(this);this.$MediaEffectReactFrameEditorAsset12=function(){c('MediaEffectMetadataActionCreators').lowerAsset(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset13=function(){c('MediaEffectMetadataActionCreators').lowerAsset(this.props.localAssetID,true)}.bind(this);this.$MediaEffectReactFrameEditorAsset14=function(r){r.target.files[0]&&c('MediaEffectMetadataActionCreators').replaceImage(this.props.localAssetID,r.target.files[0])}.bind(this);this.$MediaEffectReactFrameEditorAsset15=function(){c('MediaEffectMetadataActionCreators').duplicateAsset(this.props.localAssetID)}.bind(this);this.$MediaEffectReactFrameEditorAsset16=function(){if(!this.$MediaEffectReactFrameEditorAsset17()){this.$MediaEffectReactFrameEditorAsset18();c('MediaEffectEditorFunnelLogger').logSetScaleWithWidth((!this.$MediaEffectReactFrameEditorAsset19()).toString())}}.bind(this);this.$MediaEffectReactFrameEditorAsset20=function(){if(!this.$MediaEffectReactFrameEditorAsset17()){this.$MediaEffectReactFrameEditorAsset21();c('MediaEffectEditorFunnelLogger').logSetScaleWithHeight((!this.$MediaEffectReactFrameEditorAsset22()).toString())}}.bind(this);this.$MediaEffectReactFrameEditorAsset23=function(){c('SimpleXUIDialog').showConfirm(this.$MediaEffectReactFrameEditorAsset17()?j._("Are you sure you want to delete this text?"):j._("Are you sure you want to delete this art?"),null,function(r){return r?c('MediaEffectMetadataActionCreators').deleteAsset(this.props.localAssetID):null}.bind(this))}.bind(this);this.$MediaEffectReactFrameEditorAsset24=function(event){if(this.props.readOnly)return;if(event.button===0)if(!this.props.selected){if(!event.shiftKey)c('MediaEffectMetadataActionCreators').deselectAll();c('MediaEffectMetadataActionCreators').selectAsset(this.props.localAssetID)}else if(event.shiftKey)c('MediaEffectMetadataActionCreators').deselectAsset(this.props.localAssetID);}.bind(this);this.$MediaEffectReactFrameEditorAsset25=function(){var r=this.props.assetData;if(!(r instanceof c('MediaEffectReactFrameEditorTextAssetRecord')))return;c('MediaEffectMetadataActionCreators').setContentMustBeUpdated(r.localAssetID,!r.contentMustBeUpdated)}.bind(this);this.$MediaEffectReactFrameEditorAsset26=function(){this.setState({isInPreview:true});c('MediaEffectEditorFunnelLogger').logPreviewAutoBackgroundRemoval(this.props.assetData.stickerFBID)}.bind(this);this.$MediaEffectReactFrameEditorAsset27=function(){this.setState({isInPreview:false})}.bind(this);this.state={isInPreview:false,hasProcessed:false}}q.prototype.componentDidUpdate=function(){this.$MediaEffectReactFrameEditorAsset1.forEach(function(r){return r.checked=this.$MediaEffectReactFrameEditorAsset19()}.bind(this));this.$MediaEffectReactFrameEditorAsset2.forEach(function(r){return r.checked=this.$MediaEffectReactFrameEditorAsset22()}.bind(this));this.$MediaEffectReactFrameEditorAsset3.forEach(function(r){return r.checked=this.props.assetData.contentMustBeUpdated}.bind(this))};q.prototype.$MediaEffectReactFrameEditorAsset28=function(r){if(r.button===0){r.stopPropagation();r.preventDefault()}};q.prototype.$MediaEffectReactFrameEditorAsset29=function(r,s){var t=r||this.props.assetData.assetSize,u=s||this.props.assetData.position;if(!t||!t.isValid())return null;var v=t.toAbsolute(this.props.canvasSize),w=u.toAbsolute(this.props.canvasSize,v);return w};q.prototype.$MediaEffectReactFrameEditorAsset30=function(r){return this.props.assetData instanceof c('MediaEffectReactFrameEditorImageAssetRecord')?this.$MediaEffectReactFrameEditorAsset31(this.props.assetData,r&&r.h()):this.$MediaEffectReactFrameEditorAsset32(this.props.assetData,r&&r.h())};q.prototype.$MediaEffectReactFrameEditorAsset31=function(r,s){if(r.assocTextAsset&&(this.props.selected||this.props.editedTextID===this.props.localAssetID))return this.$MediaEffectReactFrameEditorAsset32(r.assocTextAsset,s);return this.props.isInCanvas?c('React').createElement(c('MediaEffectReactFrameEditorCanvasImageAsset.react'),{imageRecord:r,isInPreview:this.state.isInPreview,key:this.props.localAssetID,localAssetID:this.props.localAssetID}):c('React').createElement(c('MediaEffectReactFrameEditorImageAsset.react'),{imageRecord:r,isInPreview:this.state.isInPreview,key:this.props.localAssetID,localAssetID:this.props.localAssetID})};q.prototype.$MediaEffectReactFrameEditorAsset33=function(){var r=this.props.assetData;if(r instanceof c('MediaEffectReactFrameEditorImageAssetRecord')){var s=r.validationResult;if(s&&!s.success)return s.reason;}if(r instanceof c('MediaEffectReactFrameEditorTextAssetRecord')&&this.props.flowType!==c('MediaEffectFlowType').TEMPLATE)return this.props.isValidating&&r.contentMustBeUpdated?j._("Please change this text to continue"):null;return null};q.prototype.$MediaEffectReactFrameEditorAsset32=function(r,s){return c('React').createElement(c('MediaEffectReactFrameEditorTextAsset.react'),{assetData:r,canvasSize:this.props.canvasSize,editing:this.props.editedTextID===this.props.localAssetID,enableFontSettingsDialog:this.props.enableFontSettingsDialog,key:this.props.localAssetID,localAssetID:this.props.localAssetID,readOnly:this.props.readOnly,textboxHeight:s})};q.prototype.$MediaEffectReactFrameEditorAsset34=function(r,s){if(this.props.readOnly)return;var t=c('ReactDOM').findDOMNode(r);if(!(t instanceof HTMLElement))return;var u=c('React').createElement(c('MountedContextMenu.react'),{menu:s,mountedTriggerElem:t}),v=t.children[0];c('ReactDOM').render(u,v)};q.prototype.$MediaEffectReactFrameEditorAsset35=function(){var r=this.$MediaEffectReactFrameEditorAsset17(),s=this.props.flowType===c('MediaEffectFlowType').TEMPLATE;return c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset9},j._("Bring forward")),c('React').createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset11},j._("Bring to front")),c('React').createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset12},j._("Send backward")),c('React').createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset13},j._("Send to back")),c('React').createElement(c('MenuSeparator.react'),null),!r&&c('React').createElement(m,{renderas:'label'},c('React').createElement(c('FileInput.react'),{accept:'image/x-png, image/jpeg, image/png',multiple:false,onChange:this.$MediaEffectReactFrameEditorAsset14},c('React').createElement('a',{style:{color:'inherit',textDecoration:'none'}},j._("Replace Art")))),c('React').createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset15},j._("Duplicate")),c('React').createElement(m,{onclick:this.$MediaEffectReactFrameEditorAsset23},j._("Delete")),c('React').createElement(c('MenuSeparator.react'),null),c('React').createElement(n,{onclick:this.$MediaEffectReactFrameEditorAsset16},c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:this.$MediaEffectReactFrameEditorAsset19(),disabled:r,ref:function(t){return t&&this.$MediaEffectReactFrameEditorAsset1.push(c('DOMQuery').find(c('ReactDOM').findDOMNode(t),'input'))}.bind(this)}),c('React').createElement('label',null,j._("Shrink with width")))),c('React').createElement(n,{onclick:this.$MediaEffectReactFrameEditorAsset20},c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:this.$MediaEffectReactFrameEditorAsset22(),disabled:r,ref:function(t){return t&&this.$MediaEffectReactFrameEditorAsset2.push(c('DOMQuery').find(c('ReactDOM').findDOMNode(t),'input'))}.bind(this)}),c('React').createElement('label',null,j._("Shrink with height")))),s?this.$MediaEffectReactFrameEditorAsset36(r):null)};q.prototype.$MediaEffectReactFrameEditorAsset36=function(r){var s=this.props.assetData;if(!r)return null;return c('React').createElement(n,{onclick:this.$MediaEffectReactFrameEditorAsset25},c('React').createElement(c('InputLabel.react'),null,c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:s.contentMustBeUpdated,ref:function(t){return t&&this.$MediaEffectReactFrameEditorAsset3.push(c('DOMQuery').find(c('ReactDOM').findDOMNode(t),'input'))}.bind(this)}),c('React').createElement('label',null,j._("Require user to update text"))))};q.prototype.$MediaEffectReactFrameEditorAsset19=function(){var r=this.props.assetData.assetSize;if(this.$MediaEffectReactFrameEditorAsset17()||!r)return false;if(!r)return true;return r instanceof c('MediaEffectReactFrameEditorSize').Fit||r instanceof c('MediaEffectReactFrameEditorSize').ScaleWidth};q.prototype.$MediaEffectReactFrameEditorAsset22=function(){var r=this.props.assetData.assetSize;if(this.$MediaEffectReactFrameEditorAsset17())return true;if(!r)return true;return r instanceof c('MediaEffectReactFrameEditorSize').Fit||r instanceof c('MediaEffectReactFrameEditorSize').ScaleHeight};q.prototype.$MediaEffectReactFrameEditorAsset18=function(){var r=this.props.assetData.assetSize;if(!r)return;var s=this.$MediaEffectReactFrameEditorAsset19()?r.getNotScaledWithWidth():r.getScaledWithWidth();if(s===r)return;c('MediaEffectMetadataActionCreators').updateAssetSize(this.props.localAssetID,s)};q.prototype.$MediaEffectReactFrameEditorAsset21=function(){var r=this.props.assetData.assetSize;if(!r)return;var s=this.$MediaEffectReactFrameEditorAsset22()?r.getNotScaledWithHeight():r.getScaledWithHeight();if(s===r)return;c('MediaEffectMetadataActionCreators').updateAssetSize(this.props.localAssetID,s)};q.prototype.$MediaEffectReactFrameEditorAsset17=function(){return this.props.assetData.assetType()==='MediaEffectReactFrameEditorTextAssetRecord'};q.prototype.$MediaEffectReactFrameEditorAsset37=function(){var r=this.props.assetData;if(r instanceof c('MediaEffectReactFrameEditorImageAssetRecord'))return !!r.processedImageURI;return false};q.prototype.$MediaEffectReactFrameEditorAsset38=function(){if(!this.$MediaEffectReactFrameEditorAsset37()||this.state.hasProcessed)return false;return true};q.prototype.render=function(){var r=this.$MediaEffectReactFrameEditorAsset29(),s=r?p(r):{display:'none'};if(r){if(!this.$MediaEffectReactFrameEditorAsset4)this.$MediaEffectReactFrameEditorAsset4=this.$MediaEffectReactFrameEditorAsset35();if(!this.$MediaEffectReactFrameEditorAsset5)this.$MediaEffectReactFrameEditorAsset5=this.$MediaEffectReactFrameEditorAsset35();}var t=c('React').createElement('div',{style:s},this.$MediaEffectReactFrameEditorAsset30(r)),u=this.$MediaEffectReactFrameEditorAsset33();if(!this.props.readOnly&&this.props.editedTextID!==this.props.localAssetID){return c('React').createElement('div',{onDoubleClick:this.$MediaEffectReactFrameEditorAsset6,onMouseDown:this.$MediaEffectReactFrameEditorAsset24},c('React').createElement(c('FBDragHandle.react'),{horizontal:true,initialData:this.$MediaEffectReactFrameEditorAsset7,key:this.props.localAssetID,onChange:this.$MediaEffectReactFrameEditorAsset8,onEnd:this.props.onDrop,stopOnLeave:false,vertical:true},t,c('React').createElement(c('XUIError.react'),{xuiError:u},c('React').createElement('div',{className:"_sdt",ref:function(v){return v&&this.$MediaEffectReactFrameEditorAsset5&&this.$MediaEffectReactFrameEditorAsset34(v,this.$MediaEffectReactFrameEditorAsset5)}.bind(this),style:s},c('React').createElement('div',null),c('React').createElement('div',{className:"_1ytk"},c('React').createElement('div',{className:"_1ytl"}),this.$MediaEffectReactFrameEditorAsset4?c('React').createElement('div',null,c('React').createElement(c('PopoverMenu.react'),{alignh:'center',alignv:'top',className:"_1ytm",menu:this.$MediaEffectReactFrameEditorAsset4,onMouseDown:this.$MediaEffectReactFrameEditorAsset28},c('React').createElement(c('XUIPopoverButton.react'),null)),this.$MediaEffectReactFrameEditorAsset38()?c('React').createElement('div',{className:"_d2q"},c('React').createElement(c('SUIButton.react'),{className:"_d2q",icon:c('React').createElement(c('SUIGlyphIcon.react'),{srcDefault:h("115218")}),label:j._("Make the background transparent"),labelIsHidden:true,onClick:this.$MediaEffectReactFrameEditorAsset10,onMouseLeave:this.$MediaEffectReactFrameEditorAsset27,onMouseOver:this.$MediaEffectReactFrameEditorAsset26,theme:c('SUIMediaEffectTheme'),tooltip:j._("Make the background transparent"),tooltipDelay:200,use:'special'})):null):null)))))}else return c('React').createElement(c('XUIError.react'),{xuiError:u},t);};q.defaultProps={onDrag:c('emptyFunction'),onDrop:c('emptyFunction'),initialPositionMap:o(),isValidating:false,readOnly:false,selected:false,editedTextID:null,enableFontSettingsDialog:false,enableEditorFreeText:false,flowType:null,isInCanvas:false};f.exports=q}),null);
__d('MediaEffectReactFrameEditorCamera.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement('div',{style:{position:'absolute',overflow:'hidden',left:'50%',top:'50%',marginLeft:-(this.props.width/2),marginTop:-(this.props.height/2)}},c('React').createElement('video',{autoPlay:true,ref:'video',style:{width:this.props.width,height:this.props.height,objectFit:'cover'},src:this.props.videoSrc}))};j.prototype.componentDidUpdate=function(k){if(k.cameraPaused&&!this.props.cameraPaused){this.refs.video.play()}else if(!k.cameraPaused&&this.props.cameraPaused)this.refs.video.pause();};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MediaEffectReactFrameEditorCameraContainer.react',['FluxContainer','MediaEffectReactFrameEditorCamera.react','MediaEffectReactFrameEditorCanvasDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorCanvasDataStore')]};j.calculateState=function(k,l){var m=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {cameraPaused:m.cameraPaused,videoSrc:m.cameraSource}};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectReactFrameEditorCamera.react'),k)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectCanvasEducation.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){return c('React').createElement('div',{className:"_3fsi"},c('React').createElement('div',{className:"_vzg"},c('React').createElement('div',{className:"_3fsj"},i._("Drag and Drop PNGs")),c('React').createElement('div',{className:"_3fso"},i._("or use the Upload Art button"))))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("AssetVerticalAlignmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TOP:"top",BOTTOM:"bottom",CENTER:"center"})}),null);
__d('MediaEffectReactFrameEditorGridlines.react',['cx','fbt','AssetHorizontalAlignmentType','AssetVerticalAlignmentType','MediaEffectFrameEditorConstants','React','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.asset.get('assetSize').toAbsolute(this.props.canvasSize),o=this.props.asset.get('position').toAbsolute(this.props.canvasSize,n),p=this.$MediaEffectReactFrameEditorGridlines1(this.props.asset,this.props.canvasSize);return this.props.type==='vertical'?this.$MediaEffectReactFrameEditorGridlines2(o,n,p):this.$MediaEffectReactFrameEditorGridlines3(o,n,p)};m.prototype.$MediaEffectReactFrameEditorGridlines2=function(n,o,p){var q={},r={};q.left=-5+l+n.l+o.x/2+'px';q.height=Math.max(p.vMargin-2,0)+'px';if(q.height==='0px')q.borderBottom='0px';if(p.vMargin<40){if(p.assetVAlign===c('AssetVerticalAlignmentType').TOP){r.top='-20px'}else r.bottom='-20px';r.left='-3px'}else{r.right='10px';r.top=p.vMargin/2-8+'px'}if(p.assetVAlign===c('AssetVerticalAlignmentType').CENTER)return c('React').createElement('div',null,this.$MediaEffectReactFrameEditorGridlines4(babelHelpers['extends']({},q,{top:l}),r,'Centered'),this.$MediaEffectReactFrameEditorGridlines4(babelHelpers['extends']({},q,{bottom:l}),r,'Centered'));if(p.assetVAlign===c('AssetVerticalAlignmentType').TOP){q.top=l}else q.bottom=l;return this.$MediaEffectReactFrameEditorGridlines4(q,r,p.relativeVMargin.toFixed(0)+'%')};m.prototype.$MediaEffectReactFrameEditorGridlines4=function(n,o,p){return c('React').createElement('div',{style:n,className:"_4ro5"},c('React').createElement('div',{className:"_4ro6"}),c('React').createElement('div',{className:"_4ro7"}),c('React').createElement('div',{style:o,className:"_4ro8"},p==='Centered'?i._("Centered"):p))};m.prototype.$MediaEffectReactFrameEditorGridlines3=function(n,o,p){var q={},r={};q.top=-5+l+n.t+o.y/2+'px';q.width=Math.max(p.hMargin-2,0)+'px';if(q.width==='0px')q.borderRight='0px';if(p.hMargin<40){if(p.assetHAlign===c('AssetHorizontalAlignmentType').LEFT){r.left='-23px'}else r.right='-23px';r.top='-3px'}else{r.top='-15px';r.left=p.hMargin/3+'px'}if(p.assetHAlign===c('AssetHorizontalAlignmentType').CENTER)return c('React').createElement('div',null,this.$MediaEffectReactFrameEditorGridlines5(babelHelpers['extends']({},q,{left:l}),r,'Centered'),this.$MediaEffectReactFrameEditorGridlines5(babelHelpers['extends']({},q,{right:l}),r,'Centered'));if(p.assetHAlign===c('AssetHorizontalAlignmentType').LEFT){q.left=l}else q.right=l;return this.$MediaEffectReactFrameEditorGridlines5(q,r,p.relativeHMargin.toFixed(0)+'%')};m.prototype.$MediaEffectReactFrameEditorGridlines5=function(n,o,p){return c('React').createElement('div',{style:n,className:"_4ro9"},c('React').createElement('div',{className:"_4roa"}),c('React').createElement('div',{className:"_4rob"}),c('React').createElement('div',{style:o,className:"_4ro8"},p==='Centered'?i._("Centered"):p))};m.prototype.$MediaEffectReactFrameEditorGridlines1=function(n,o){var p=c('nullthrows')(n.assetSize).toAbsolute(o),q=n.position,r=q.toAbsolute(o,p);return {assetHAlign:q.x.asset_origin==='canvas_start'?q.x.anchor_asset_size_percentage===50?c('AssetHorizontalAlignmentType').CENTER:c('AssetHorizontalAlignmentType').LEFT:c('AssetHorizontalAlignmentType').RIGHT,assetVAlign:q.y.asset_origin==='canvas_start'?q.y.anchor_asset_size_percentage===50?c('AssetVerticalAlignmentType').CENTER:c('AssetVerticalAlignmentType').TOP:c('AssetVerticalAlignmentType').BOTTOM,hMargin:q.x.asset_origin==='canvas_start'?r.l:o.x-r.r,vMargin:q.y.asset_origin==='canvas_start'?r.t:o.y-r.b,relativeHMargin:q.x.asset_canvas_size_percentage,relativeVMargin:q.y.asset_canvas_size_percentage}};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d('MediaEffectReactFrameEditorCanvas.react',['cx','fbt','Image.react','immutable','LayerAutoFocusReact','LayerFadeOnHide','LayerHideOnBlur','LayerHideOnEscape','MediaEffectCanvasEducation.react','MediaEffectFrameEditorConstants','MediaEffectFrameRenderer','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorAsset.react','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorCameraContainer.react','MediaEffectReactFrameEditorGridlines.react','MediaEffectReactFrameEditorSelectionBoxContainer.react','MountedContextMenu.react','React','ReactDOM','ReactXUIMenu','nullthrows','Rect','SimpleXUIDialog','throttle','Vector','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUIError.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('immutable').Map,m=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE,n=c('ReactXUIMenu').Item,o=10,p=l({Delete:'DELETE',Backspace:'DELETE',Escape:'UNSELECT',ArrowLeft:'NUDGELEFT',ArrowRight:'NUDGERIGHT',ArrowUp:'NUDGEUP',ArrowDown:'NUDGEDOWN'}),q=l({'?':'SHOWKEY_BINDINGS'});function r(t){return c('React').createElement('div',{style:{margin:'0 auto 8px auto',width:t.width+2*m}},c('React').createElement(c('XUIText.react'),{className:"_38wf _1e6t"},i._("Canvas")))}j=babelHelpers.inherits(s,c('React').PureComponent);k=j&&j.prototype;function s(){var t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];(t=k.constructor).call.apply(t,[this].concat(v));this.state={canvasErrorMessage:null,showKeyBindings:false};this.$MediaEffectReactFrameEditorCanvas26=c('throttle')(function(x){c('MediaEffectFrameRenderer').percentageCovered(x.assets,x.assetOrder,new (c('Vector'))(x.canvasWidth,x.canvasHeight)).then(function(y){this.props.updateCoverage(y);if(y>.5){this.setState({canvasErrorMessage:i._("Your frame covers more than 50\u0025 of the canvas, please consider freeing more space.")})}else this.setState({canvasErrorMessage:null});}.bind(this)).done()}.bind(this),1000);this.$MediaEffectReactFrameEditorCanvas30=function(){if(!this.$MediaEffectReactFrameEditorCanvas4&&!this.props.editedTextID)c('MediaEffectMetadataActionCreators').deselectAll();}.bind(this);this.$MediaEffectReactFrameEditorCanvas31=function(x){setTimeout(!x&&this.$MediaEffectReactFrameEditorCanvas28(),0)}.bind(this);this.$MediaEffectReactFrameEditorCanvas34=function(){c('MediaEffectMetadataActionCreators').addText(null,this.$MediaEffectReactFrameEditorCanvas6,this.$MediaEffectReactFrameEditorCanvas7)}.bind(this);this.$MediaEffectReactFrameEditorCanvas16=function(event){if(event.button===0&&this.$MediaEffectReactFrameEditorCanvas17&&(event.target===this.$MediaEffectReactFrameEditorCanvas1||event.target===this.$MediaEffectReactFrameEditorCanvas17)){c('MediaEffectMetadataActionCreators').deselectAll()}else if(this.props.editedTextID){return}else if(event.button===2&&event.target===this.$MediaEffectReactFrameEditorCanvas1){var x=c('ReactDOM').findDOMNode(this.$MediaEffectReactFrameEditorCanvas1).getBoundingClientRect(),y=event.clientX-x.left,z=event.clientY-x.top;this.$MediaEffectReactFrameEditorCanvas6=y/this.props.canvasWidth*100;this.$MediaEffectReactFrameEditorCanvas7=z/this.props.canvasHeight*100}this.$MediaEffectReactFrameEditorCanvas29();event.preventDefault()}.bind(this);this.$MediaEffectReactFrameEditorCanvas29=function(){if(this.$MediaEffectReactFrameEditorCanvas17)this.$MediaEffectReactFrameEditorCanvas17.focus();}.bind(this);this.$MediaEffectReactFrameEditorCanvas13=function(event){var x=p.get(event.key);this.$MediaEffectReactFrameEditorCanvas35(x,event)}.bind(this);this.$MediaEffectReactFrameEditorCanvas14=function(event){var x=q.get(event.key);this.$MediaEffectReactFrameEditorCanvas35(x,event)}.bind(this);this.$MediaEffectReactFrameEditorCanvas10=function(x,y,z,aa,ba,ca){return this.$MediaEffectReactFrameEditorCanvas37(x,null,null,y,z,aa,ba,ca)}.bind(this);this.$MediaEffectReactFrameEditorCanvas12=function(x){x.preventDefault();if(!x.dataTransfer||this.props.readOnly)return;var y=x.dataTransfer.files;if(y)for(var z=0;z<y.length;z++){var aa=y.item(z);aa&&c('MediaEffectMetadataActionCreators').addImage(aa)}}.bind(this);this.$MediaEffectReactFrameEditorCanvas5=l({DELETE:function(event){return this.$MediaEffectReactFrameEditorCanvas18(event)}.bind(this),UNSELECT:function(event){return this.$MediaEffectReactFrameEditorCanvas19(event)}.bind(this),NUDGELEFT:function(event){return this.$MediaEffectReactFrameEditorCanvas20(event)}.bind(this),NUDGERIGHT:function(event){return this.$MediaEffectReactFrameEditorCanvas21(event)}.bind(this),NUDGEUP:function(event){return this.$MediaEffectReactFrameEditorCanvas22(event)}.bind(this),NUDGEDOWN:function(event){return this.$MediaEffectReactFrameEditorCanvas23(event)}.bind(this),SHOWKEY_BINDINGS:function(event){return this.$MediaEffectReactFrameEditorCanvas24(event)}.bind(this)});this.$MediaEffectReactFrameEditorCanvas8=this.$MediaEffectReactFrameEditorCanvas8.bind(this);this.$MediaEffectReactFrameEditorCanvas9=this.$MediaEffectReactFrameEditorCanvas9.bind(this);this.$MediaEffectReactFrameEditorCanvas2=this.$MediaEffectReactFrameEditorCanvas25();this.$MediaEffectReactFrameEditorCanvas4=false}s.prototype.componentWillReceiveProps=function(t){if(!this.props.assets.equals(t.assets)&&t.assets.every(function(u){return !!u.assetSize}))this.$MediaEffectReactFrameEditorCanvas26(t);};s.prototype.$MediaEffectReactFrameEditorCanvas9=function(t){this.$MediaEffectReactFrameEditorCanvas27(t.target)};s.prototype.$MediaEffectReactFrameEditorCanvas28=function(){this.setState({showKeyBindings:false});this.$MediaEffectReactFrameEditorCanvas29()};s.prototype.$MediaEffectReactFrameEditorCanvas32=function(){if(!this.state.showKeyBindings)return null;return c('React').createElement(c('XUIDialog.react'),{autohide:5000,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerAutoFocusReact:c('LayerAutoFocusReact'),LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape')},onToggle:this.$MediaEffectReactFrameEditorCanvas31,shown:this.state.showKeyBindings,titleID:'frame-editor-key-bindings',width:445},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,'Keyboard Shortcut Help')),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('ul',null,c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'\u2190'),',',c('React').createElement('span',{className:"_5hbk"},'\u2192'),',',c('React').createElement('span',{className:"_5hbk"},'\u2191'),',',c('React').createElement('span',{className:"_5hbk"},'\u2193'),'\u2014 move selected items'),c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'Ctrl'),'+',c('React').createElement('span',{className:"_5hbk"},'\u2190'),',',c('React').createElement('span',{className:"_5hbk"},'\u2192'),',',c('React').createElement('span',{className:"_5hbk"},'\u2191'),',',c('React').createElement('span',{className:"_5hbk"},'\u2193'),'\u2014 move selected items by 10%'),c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'Delete'),',',c('React').createElement('span',{className:"_5hbk"},'Backspace'),'\u2014 delete selected items'),c('React').createElement('li',null,c('React').createElement('span',{className:"_5hbk"},'Escape'),'\u2014 unselect all'))))};s.prototype.$MediaEffectReactFrameEditorCanvas27=function(t){var u=t.files;if(u)for(var v=0;v<u.length;v++){var w=u.item(v);w&&c('MediaEffectMetadataActionCreators').addImage(w,this.$MediaEffectReactFrameEditorCanvas6,this.$MediaEffectReactFrameEditorCanvas7)}t.value=''};s.prototype.$MediaEffectReactFrameEditorCanvas33=function(t,u){var v=c('ReactDOM').findDOMNode(t);if(!(v instanceof HTMLElement))return;var w=c('React').createElement(c('MountedContextMenu.react'),{menu:u,mountedTriggerElem:v}),x=v.children[0];c('ReactDOM').render(w,x)};s.prototype.$MediaEffectReactFrameEditorCanvas25=function(){return c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(n,{onclick:this.$MediaEffectReactFrameEditorCanvas8},i._("Add new art here")),this.props.enableEditorFreeText?c('React').createElement(n,{onclick:this.$MediaEffectReactFrameEditorCanvas34},i._("Insert Text")):null)};s.prototype.$MediaEffectReactFrameEditorCanvas8=function(){var t=new MouseEvent('click');c('nullthrows')(this.$MediaEffectReactFrameEditorCanvas3).dispatchEvent(t)};s.prototype.$MediaEffectReactFrameEditorCanvas11=function(event){event.preventDefault()};s.prototype.$MediaEffectReactFrameEditorCanvas35=function(t,event){if(t&&!this.props.editedTextID){var u=this.$MediaEffectReactFrameEditorCanvas5.get(t);if(u){u(event);event.preventDefault()}}};s.prototype.$MediaEffectReactFrameEditorCanvas15=function(event){var t=p.get(event.key);if(t)switch(t){case 'NUDGELEFT':case 'NUDGERIGHT':case 'NUDGEUP':case 'NUDGEDOWN':c('MediaEffectMetadataActionCreators').setIsDragging(false);break;default:break;}};s.prototype.$MediaEffectReactFrameEditorCanvas19=function(event){c('MediaEffectMetadataActionCreators').deselectAll()};s.prototype.$MediaEffectReactFrameEditorCanvas18=function(event){if(this.props.selectedAssets.size===0)return;var t=this.props.selectedAssets,u=t.count(function(x){return this.props.assets.get(x).assetType()==='MediaEffectReactFrameEditorTextAssetRecord'}.bind(this)),v=t.count(function(x){return this.props.assets.get(x).assetType()==='MediaEffectReactFrameEditorImageAssetRecord'}.bind(this)),w=null;if(v===0){w=u>1?i._("Are you sure you want to delete these text items?"):i._("Are you sure you want to delete this text item?")}else if(u===0){w=v>1?i._("Are you sure you want to delete these art assets?"):i._("Are you sure you want to delete this art asset?")}else w=i._("Are you sure you want to delete these assets?");this.$MediaEffectReactFrameEditorCanvas4=true;c('SimpleXUIDialog').showConfirm(w,null,function(x){if(x)t.forEach(function(y){c('MediaEffectMetadataActionCreators').deleteAsset(y)});this.$MediaEffectReactFrameEditorCanvas4=false;this.$MediaEffectReactFrameEditorCanvas29()}.bind(this),null)};s.prototype.$MediaEffectReactFrameEditorCanvas22=function(event){this.$MediaEffectReactFrameEditorCanvas36(new (c('Vector'))(0,-1),event)};s.prototype.$MediaEffectReactFrameEditorCanvas23=function(event){this.$MediaEffectReactFrameEditorCanvas36(new (c('Vector'))(0,1),event)};s.prototype.$MediaEffectReactFrameEditorCanvas20=function(event){this.$MediaEffectReactFrameEditorCanvas36(new (c('Vector'))(-1,0),event)};s.prototype.$MediaEffectReactFrameEditorCanvas21=function(event){this.$MediaEffectReactFrameEditorCanvas36(new (c('Vector'))(1,0),event)};s.prototype.$MediaEffectReactFrameEditorCanvas36=function(t,event){var u=event.ctrlKey?10:1,v=t.mul(u).mul(this.props.canvasWidth/100,this.props.canvasHeight/100);this.$MediaEffectReactFrameEditorCanvas37(null,true,u!==1,v.x,v.y,null,null,this.$MediaEffectReactFrameEditorCanvas38())};s.prototype.$MediaEffectReactFrameEditorCanvas24=function(event){this.setState({showKeyBindings:true})};s.prototype.$MediaEffectReactFrameEditorCanvas37=function(t,u,v,w,x,y,z,aa){var ba=l().withMutations(function(ga){aa.forEach(function(ha,ia){if(ia===t||this.props.selectedAssets.has(ia))ga.set(ia,ha);}.bind(this))}.bind(this)),ca=c('Rect').minimumBoundingBox(ba.toArray());if(!u){var da=this.$MediaEffectReactFrameEditorCanvas39(w,x,ca);w=da[0];x=da[1]}else if(!v){var ea=this.$MediaEffectReactFrameEditorCanvas40(w,x,ca);w=ea[0];x=ea[1]}var fa=this.$MediaEffectReactFrameEditorCanvas41(w,x,ba);w=fa[0];x=fa[1];aa.forEach(function(ga,ha){if(ha!==t&&!this.props.selectedAssets.has(ha))return;var ia=ga.add(w,x),ja=c('MediaEffectReactFrameEditorAssetPositionRecord').canonical(ia,this.$MediaEffectReactFrameEditorCanvas42());['x','y'].map(function(ka){return ja=ja.set(ka,ja[ka].set('asset_canvas_size_percentage',Math.round(ja[ka].asset_canvas_size_percentage)))});c('MediaEffectMetadataActionCreators').updateAssetPosition(ha,ja)}.bind(this));c('MediaEffectMetadataActionCreators').setIsDragging(true)};s.prototype.$MediaEffectReactFrameEditorCanvas43=function(){c('MediaEffectMetadataActionCreators').setIsDragging(false)};s.prototype.$MediaEffectReactFrameEditorCanvas39=function(t,u,v){var w=v.getCenter(),x=v.add(t,u),y=this.$MediaEffectReactFrameEditorCanvas42().div(2),z=x.getCenter(),aa=z.sub(y);if(Math.abs(aa.x)<o)t=y.x-w.x;if(Math.abs(aa.y)<o)u=y.y-w.y;return [t,u]};s.prototype.$MediaEffectReactFrameEditorCanvas40=function(t,u,v){var w=v.getCenter(),x=v.add(t,u),y=this.$MediaEffectReactFrameEditorCanvas42().div(2),z=x.getCenter(),aa=w.sub(y),ba=z.sub(y);if(ba.x*aa.x<0)t=-aa.x;if(ba.y*aa.y<0)u=-aa.y;if(aa.x===0){var ca=100*v.l/this.props.canvasWidth;t=this.props.canvasWidth/100*Math.sign(t)*(1+ca-Math.ceil(ca))}if(aa.y===0){var da=100*v.t/this.props.canvasHeight;u=this.props.canvasHeight/100*Math.sign(u)*(1+da-Math.ceil(da))}return [t,u]};s.prototype.$MediaEffectReactFrameEditorCanvas41=function(t,u,v){v.forEach(function(w,x){var y=w.add(t,u);if(y.l>this.props.canvasWidth)t-=y.l-this.props.canvasWidth;if(y.t>this.props.canvasHeight)u-=y.t-this.props.canvasHeight;if(y.l+y.w()<0)t-=y.l+y.w();if(y.t+y.h()<0)u-=y.t+y.h();}.bind(this));return [t,u]};s.prototype.$MediaEffectReactFrameEditorCanvas38=function(){return this.props.assets.map(function(t){return t.assetSize&&t.position.toAbsolute(this.$MediaEffectReactFrameEditorCanvas42(),t.assetSize.toAbsolute(this.$MediaEffectReactFrameEditorCanvas42()))}.bind(this))};s.prototype.$MediaEffectReactFrameEditorCanvas44=function(){return l().withMutations(function(t){this.props.selectedAssets.forEach(function(u){if(this.props.assets.has(u)){var v=this.props.assets.get(u);if(v.assetSize&&v.position)t.set(u,v.position.toAbsolute(this.$MediaEffectReactFrameEditorCanvas42(),v.assetSize.toAbsolute(this.$MediaEffectReactFrameEditorCanvas42())));}}.bind(this))}.bind(this))};s.prototype.$MediaEffectReactFrameEditorCanvas42=function(){return new (c('Vector'))(this.props.canvasWidth,this.props.canvasHeight)};s.prototype.render=function(){var t=this.props.assets.count()===0?c('React').createElement(c('MediaEffectCanvasEducation.react'),null):null,u=this.props.includesPhoneFrame,v=this.props.canvasHeight/c('MediaEffectFrameEditorConstants').PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO,w=this.props.canvasWidth/c('MediaEffectFrameEditorConstants').PHONE_SCREEN_TO_FRAME_WIDTH_RATIO,x=u?(v-this.props.canvasHeight)/2:m,y=u?(w-this.props.canvasWidth)/2:m;return c('React').createElement('div',null,this.$MediaEffectReactFrameEditorCanvas32(),this.props.showTitle?c('React').createElement(r,{width:this.props.canvasWidth}):null,c('React').createElement('div',{className:"_384m"+(u?' '+"_3fqm":''),onBlur:this.$MediaEffectReactFrameEditorCanvas30,onDragOver:this.$MediaEffectReactFrameEditorCanvas11,onDrop:this.$MediaEffectReactFrameEditorCanvas12,onKeyDown:this.$MediaEffectReactFrameEditorCanvas13,onKeyPress:this.$MediaEffectReactFrameEditorCanvas14,onKeyUp:this.$MediaEffectReactFrameEditorCanvas15,onMouseDown:this.$MediaEffectReactFrameEditorCanvas16,ref:function(z){if(z)this.$MediaEffectReactFrameEditorCanvas17=z;}.bind(this),style:{width:this.props.canvasWidth+2*y,height:this.props.canvasHeight+2*x},tabIndex:0},u?c('React').createElement(c('Image.react'),{className:"_3fqn",src:'/images/media_effect/frame_preview/phone_portrait.png',style:{width:Math.floor(this.props.canvasWidth/c('MediaEffectFrameEditorConstants').PHONE_SCREEN_TO_FRAME_WIDTH_RATIO),height:Math.floor(this.props.canvasHeight/c('MediaEffectFrameEditorConstants').PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO)}}):null,c('React').createElement('div',{className:"_ymq"+(' '+"_2z_m")+(u?' '+"_3fqo":''),style:{backgroundColor:this.props.backgroundColor,width:this.props.canvasWidth,height:this.props.canvasHeight,left:y-1,top:x-1}},this.props.cameraEnabled?c('React').createElement(c('MediaEffectReactFrameEditorCameraContainer.react'),{height:this.props.canvasHeight,width:this.props.canvasWidth}):null,c('React').createElement(c('XUIError.react'),{xuiError:this.state.canvasErrorMessage},c('React').createElement('div',{className:"_384n",ref:function(z){if(z&&!this.props.readOnly){this.$MediaEffectReactFrameEditorCanvas1=z;this.$MediaEffectReactFrameEditorCanvas33(z,this.$MediaEffectReactFrameEditorCanvas2)}}.bind(this),style:{backgroundImage:this.props.backgroundImage?'url(\''+this.props.backgroundImage.uri+'\')':null,backgroundSize:this.props.backgroundImage?'cover':null,backgroundPosition:this.props.backgroundImage?'center':null,width:this.props.canvasWidth,height:this.props.canvasHeight}},c('React').createElement('div',null),t,this.props.assetOrder.map(function(z){var aa=this.props.assets.get(z);return c('React').createElement(c('MediaEffectReactFrameEditorAsset.react'),{assetData:aa,canvasSize:this.$MediaEffectReactFrameEditorCanvas42(),editedTextID:this.props.editedTextID,enableEditorFreeText:this.props.enableEditorFreeText,enableFontSettingsDialog:this.props.enableFontSettingsDialog,flowType:this.props.flowType,focusCanvas:this.$MediaEffectReactFrameEditorCanvas29,initialPositionMap:this.$MediaEffectReactFrameEditorCanvas38(),isInCanvas:true,isValidating:this.props.isValidating,key:z,localAssetID:z,onDrag:this.$MediaEffectReactFrameEditorCanvas10,onDrop:this.$MediaEffectReactFrameEditorCanvas43,readOnly:this.props.readOnly||aa.readOnly,selected:this.props.selectedAssets.has(z)})}.bind(this))))),c('React').createElement(c('MediaEffectReactFrameEditorSelectionBoxContainer.react'),{canvasHeight:this.props.canvasHeight,canvasWidth:this.props.canvasWidth,includesPhoneFrame:this.props.includesPhoneFrame,selectedAssets:this.props.selectedAssets}),c('React').createElement('div',{className:(!u?"_34j2":'')+(u?' '+"_3fqp":'')+(' '+"_34j3"),style:{top:x-1,width:y-1,height:this.props.canvasHeight+2}}),c('React').createElement('div',{className:(!u?"_34j2":'')+(u?' '+"_3fqp":'')+(' '+"_34j4"),style:{top:x-1,width:y-1,height:this.props.canvasHeight+2}}),c('React').createElement('div',{className:(!u?"_34j2":'')+(u?' '+"_3fqp":'')+(' '+"_34j6"),style:{width:this.props.canvasWidth+2*y,height:x-1}}),c('React').createElement('div',{className:(!u?"_34j2":'')+(u?' '+"_3fqp":'')+(' '+"_34j7"),style:{width:this.props.canvasWidth+2*y,height:x-1}}),this.props.isDragging?this.props.selectedAssets.map(function(z){var aa=this.props.assets.get(z);return c('React').createElement('div',{key:z},c('React').createElement(c('MediaEffectReactFrameEditorGridlines.react'),{asset:aa,canvasSize:this.$MediaEffectReactFrameEditorCanvas42(),type:'vertical'}),c('React').createElement(c('MediaEffectReactFrameEditorGridlines.react'),{asset:aa,canvasSize:this.$MediaEffectReactFrameEditorCanvas42(),type:'horizontal'}))}.bind(this)):null),c('React').createElement('input',{accept:'image/x-png, image/jpeg, image/png',multiple:true,onChange:this.$MediaEffectReactFrameEditorCanvas9,ref:function(z){this.$MediaEffectReactFrameEditorCanvas3=z}.bind(this),style:{display:'none'},type:'file'}))};f.exports=s}),null);
__d('MediaEffectAssetValidationStore',['FluxMapStore','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxMapStore'));i=h&&h.prototype;j.prototype.reduce=function(k,l){switch(l.type){case 'asset/validate':return k.set(l.stickerFBID,l.result);default:return k;}};function j(){h.apply(this,arguments)}f.exports=new j(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectImageSnappingUtils',['immutable','Map','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorScalarAssetPositionRecord','MediaEffectReactFrameEditorScalarSizeRecord','MediaEffectReactFrameEditorSize','Set','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=.1,i=200,j=c('keyMirror')({TOP:null,LEFT:null,BOTTOM:null,RIGHT:null}),k=j.TOP,l=j.LEFT,m=j.RIGHT,n=j.BOTTOM;function o(w){return c('immutable').Map().withMutations(function(x){return x.set(c('immutable').Set([k,l]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:q(),y:q()})}).set(c('immutable').Set([k,m]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:r(),y:q()})}).set(c('immutable').Set([l,n]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:q(),y:r()})}).set(c('immutable').Set([m,n]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:r(),y:r()})}).set(c('immutable').Set([l,m,k]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:s(),y:q()}),size:t(w)}).set(c('immutable').Set([k]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:s(),y:q()}),size:t(w)}).set(c('immutable').Set([l,m,n]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:s(),y:r()}),size:t(w)}).set(c('immutable').Set([n]),{position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))({x:s(),y:r()}),size:t(w)})})}var p=new (c('Map'))();function q(){return new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_origin:'asset_start',anchor_asset_size_percentage:0,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:0,asset_pixel_offset:0})}function r(){return new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_origin:'asset_end',anchor_asset_size_percentage:0,anchor_pixel_offset:0,asset_origin:'canvas_end',asset_canvas_size_percentage:0,asset_pixel_offset:0})}function s(){return new (c('MediaEffectReactFrameEditorScalarAssetPositionRecord'))({anchor_origin:'asset_start',anchor_asset_size_percentage:50,anchor_pixel_offset:0,asset_origin:'canvas_start',asset_canvas_size_percentage:50,asset_pixel_offset:0})}function t(w){return new (c('MediaEffectReactFrameEditorSize').ScaleWidth)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:100}),aspect_ratio:w}).getScaledWithHeight()}function u(w,x){if(p.get(w)!==undefined)return p.get(w);var y=document.createElement('canvas'),z=x.width,aa=x.height;if(z===0||aa===0)return null;var ba=Math.min(z,200);aa=ba*aa/z;z=ba;y.width=z;y.height=aa;var ca=y.getContext('2d');ca.drawImage(x,0,0,z,aa);var da=new (c('Map'))();Object.keys(j).forEach(function(ma){return da.set(ma,0)});var ea=new (c('Set'))(),fa=Math.ceil(z/i),ga=Math.floor(z/fa),ha=ga*255*h;for(var ia=0;ia<z;ia+=fa){if(!ea.has(k)){da.set(k,da.get(k)+ca.getImageData(ia,0,1,1).data[3]);if(Number(da.get(k))>ha)ea.add(k);}if(!ea.has(n)){da.set(n,da.get(n)+ca.getImageData(ia,aa-1,1,1).data[3]);if(Number(da.get(n))>ha)ea.add(n);}}fa=Math.ceil(aa/i);ga=Math.floor(aa/fa);var ja=ga*255*h;for(var ka=0;ka<aa;ka+=fa){if(!ea.has(l)){da.set(l,da.get(l)+ca.getImageData(0,ka,1,1).data[3]);if(Number(da.get(l))>ja)ea.add(l);}if(!ea.has(m)){da.set(m,da.get(m)+ca.getImageData(z-1,ka,1,1).data[3]);if(Number(da.get(m))>ja)ea.add(m);}}ca.clearRect(0,0,z,aa);ca.restore();var la=o(z/aa).get(c('immutable').Set(ea));p.set(w,la);return la}function v(){p.clear()}f.exports={ImageEdges:j,getSnappingSpecs:u,init:v}}),null);
__d('MediaEffectReactFrameEditorCanvasContainer.react',['FluxContainer','MediaEffectAssetValidationStore','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameEditorConstants','MediaEffectFrameEditorDispatcher','MediaEffectImageSnappingUtils','MediaEffectReactFrameEditorCanvas.react','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorImageAssetRecord','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore'),c('MediaEffectFrameCreateDialogDataStore'),c('MediaEffectAssetValidationStore')]};k.calculateState=function(l,m){var n=c('MediaEffectReactFrameEditorDataStore').getState(),o=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),p=c('MediaEffectFrameCreateDialogDataStore').getState(),q=n.assets.withMutations(function(t){t.forEach(function(u,v){if(u instanceof c('MediaEffectReactFrameEditorImageAssetRecord')){var w=null;if(u.stickerFBID)w=c('MediaEffectAssetValidationStore').get(u.stickerFBID);var x=u.set('validationResult',w);t.set(v,x)}})}),r=m.width?m.width-2*j:o.canvasWidth,s=m.height?m.height-2*j:o.canvasHeight;return {assets:q,assetOrder:n.assetOrder,backgroundColor:o.backgroundColor,backgroundImage:o.backgroundImage,cameraEnabled:!!o.cameraSource,canvasHeight:s,canvasWidth:r,editedTextID:o.editedTextID,selectedAssets:o.selectedAssets,isDragging:o.isDragging,flowType:p.flowType,isValidating:c('MediaEffectFrameCreateDialogDataStore').isValidating()}};k.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores());c('MediaEffectImageSnappingUtils').init()};k.prototype.$MediaEffectFrameEditorCanvasContainer1=function(l){c('MediaEffectFrameEditorDispatcher').dispatch({type:'coverage/update',canvasCoverage:l})};k.prototype.render=function(){var l=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectReactFrameEditorCanvas.react'),babelHelpers['extends']({},l,{updateCoverage:this.$MediaEffectFrameEditorCanvasContainer1}))};function k(){h.apply(this,arguments)}k.defaultProps={readOnly:false,enableFontSettingsDialog:false,enableEditorFreeText:false,showTitle:false,includesPhoneFrame:false};f.exports=c('FluxContainer').create(k,{withProps:true})}),null);
__d('MediaEffectFrameEditorFont',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Map,m=c('immutable').Record;h=babelHelpers.inherits(n,m({id:null,name:null,source:null}));i=h&&h.prototype;n.prototype.getName=function(){return this.name};n.prototype.getFontFamily=function(){return "'"+this.id+"'"};n.prototype.getID=function(){return this.id};n.prototype.getSystemFontName=function(){return null};n.prototype.getCustomFontID=function(){return this.id};n.prototype.getSource=function(){return this.source};function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,m({fontFamily:null,name:null}));k=j&&j.prototype;o.prototype.getName=function(){return this.name||this.fontFamily};o.prototype.getFontFamily=function(){return this.fontFamily};o.prototype.getID=function(){return this.fontFamily};o.prototype.getSystemFontName=function(){return this.fontFamily};o.prototype.getCustomFontID=function(){return null};o.prototype.getSource=function(){return null};function o(){j.apply(this,arguments)}f.exports.CustomFontRecord=n;f.exports.SystemFontRecord=o}),null);
__d("XMediaEffectAsyncFontController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/async_fonts\/",{font_ids:{type:"FBIDSet"}})}),null);
__d('MediaEffectReactFrameEditorCanvasDataStore',['AsyncRequest','FluxReduceStore','immutable','MediaEffectFrameEditorConstants','MediaEffectFrameEditorDispatcher','MediaEffectFrameEditorFont','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectMetadataActionCreators','MediaEffectQEUtils','MediaEffectReactFrameDeserializer','MediaEffectReactFrameEditorDataStore','XMediaEffectAsyncFontController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').Map,m=c('immutable').List,n=c('immutable').OrderedMap,o=c('immutable').Record,p=c('immutable').Set,q=400,r=400,s=2400;h=babelHelpers.inherits(t,o({selectedAssets:p(),editedTextID:null,isDragging:false,unsavedChanges:false,fullImageSize:s,cameraSource:null,cameraPaused:false,canvasWidth:q,canvasHeight:r,backgroundColor:'#ffffff',backgroundImage:null,fonts:l(),templates:l(),templateCategories:n(),canvasCoverage:0}));i=h&&h.prototype;t.prototype.getTemplate=function(v){if(!v)return null;return this.templates.get(v)};t.prototype.getTemplateVariants=function(v){var w=this.getTemplate(v);if(!w)return null;var x=w.sourceTemplateFBID?this.getTemplate(w.sourceTemplateFBID):w;if(!x)return null;var y=x.variants.splice(0,0,x.templateFBID),z=y.map(function(aa){return this.getTemplate(aa)}.bind(this));return m(z.toArray().filter(Boolean))};function t(){h.apply(this,arguments)}j=babelHelpers.inherits(u,c('FluxReduceStore'));k=j&&j.prototype;u.prototype.getInitialState=function(){return new t()};u.prototype.reduce=function(v,w){switch(w.type){case 'select/assetOnly':v=v.set('selectedAssets',p([w.localAssetID])).set('editedTextID',null);break;case 'select/asset':v=v.set('selectedAssets',v.selectedAssets.add(w.localAssetID)).set('editedTextID',null);break;case 'delete/asset':v=v.set('unsavedChanges',true).set('selectedAssets',v.selectedAssets.remove(w.localAssetID)).set('editedTextID',null);break;case 'duplicate/asset':v=v.set('selectedAssets',p([c('MediaEffectReactFrameEditorDataStore').getState().assets.map(function(ba){return ba.localAssetID}).max()]));break;case 'deselect/asset':v=v.set('selectedAssets',v.selectedAssets.remove(w.localAssetID)).set('editedTextID',null);break;case 'deselect/all':v=v.set('selectedAssets',v.selectedAssets.clear()).set('editedTextID',null);break;case 'edit/text':var x=w.localAssetID;v=v.set('editedTextID',x);if(x&&c('MediaEffectReactFrameEditorDataStore').getState().assets.get(x).get('assocTextAsset'))v=v.set('selectedAssets',v.selectedAssets.remove(x));break;case 'select/all':v=v.set('selectedAssets',p.fromKeys(c('MediaEffectReactFrameEditorDataStore').getState().assets));v.set('editedTextID',null);break;case 'init/frameData':v=v.set('selectedAssets',p()).set('canvasCoverage',0).set('isDragging',false).set('unsavedChanges',false);break;case 'add/fontData':if(w.data)v=v.set('fonts',this.$MediaEffectReactFrameEditorCanvasDataStore1(v.fonts,w.data));break;case 'add/templateData':v=this.$MediaEffectReactFrameEditorCanvasDataStore2(v,w.data,w.variants);break;case 'set/isDragging':v=v.set('isDragging',w.isDragging);break;case 'coverage/update':v=v.set('canvasCoverage',w.canvasCoverage);break;case 'save':v=v.set('unsavedChanges',false);break;case 'add/image':case 'add/text':case 'update/assetPosition':case 'update/assetSize':case 'update/asset/raise':case 'update/asset/lower':case 'update/textContent':case 'update/textFonts':v=v.set('unsavedChanges',true);break;case 'set/cameraSource':v=v.set('cameraSource',w.cameraSource);break;case 'pause/camera':v=v.set('cameraPaused',true);break;case 'resume/camera':v=v.set('cameraPaused',false);break;case 'update/backgroundColor':v=v.set('backgroundColor',w.color);break;case 'update/backgroundImage':v=v.set('backgroundImage',w.image);break;case 'set/screenDimensions':var y=c('MediaEffectFullscreenFrameEditorSizingUtils').getCanvasSize(w.screenWidth,w.dialogHeight),z=c('MediaEffectQEUtils').shouldDefaultToPortrait(w.flowType),aa=y;if(z){y*=c('MediaEffectFrameEditorConstants').PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO;aa=y*c('MediaEffectFrameEditorConstants').PORTRAIT_CANVAS_RATIO}v=v.set('canvasWidth',aa).set('canvasHeight',y);break;case 'apply/template':v=this.$MediaEffectReactFrameEditorCanvasDataStore3(v,w.templateFBID,w.frameData);break;case 'bootstrap/fontData':this.$MediaEffectReactFrameEditorCanvasDataStore4();break;}return v};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore4=function(){var v=c('XMediaEffectAsyncFontController').getURIBuilder().getURI();new (c('AsyncRequest'))(v).setHandler(function(w){return c('MediaEffectMetadataActionCreators').addFontData(w.getPayload())}).send()};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore3=function(v,w,x){return v.setIn(['templates',w,'frameData'],x)};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore1=function(v,w){var x=[],y=v.withMutations(function(z){w.forEach(function(aa){var ba=new (c('MediaEffectFrameEditorFont').CustomFontRecord)({id:aa.id,name:aa.name,source:aa.uri}),ca=z.get(ba.getID());if(!ca||ca.id!==ba.id||ca.name!==ba.name||ca.source!==ba.source){x.push(aa);z.set(ba.getID(),ba)}})});this.$MediaEffectReactFrameEditorCanvasDataStore5(x);return y};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore2=function(v,w,x){return v.withMutations(function(y){Object.keys(w).forEach(function(z){var aa=w[z];this.$MediaEffectReactFrameEditorCanvasDataStore6(y,aa);var ba=aa.map(function(ca){return ca.id});y.setIn(['templateCategories',z],m(ba))}.bind(this));this.$MediaEffectReactFrameEditorCanvasDataStore6(y,x)}.bind(this))};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore6=function(v,w){w.forEach(function(x){if(!v.templates.has(x.id)){var y=c('MediaEffectReactFrameDeserializer').deserializeTemplate(x);v.setIn(['templates',x.id],y)}})};u.prototype.$MediaEffectReactFrameEditorCanvasDataStore5=function(v){var w=document.getElementById('custom_frame_fonts'),x=w||document.createElement('style');if(!w)x.setAttribute('id','custom_frame_fonts');var y=p(v.map(function(ca){return '@font-face { '+"font-family: '"+ca.id+"'; "+"src: url('"+ca.uri+"') format('opentype');"+'}'}));for(var z=0;z<x.childNodes.length;++z){var aa=x.childNodes.item(z);if(aa instanceof Text)y['delete'](aa.data);}y.forEach(function(ca){return x.appendChild(document.createTextNode(ca))});if(!w){var ba=document.head||document.getElementsByTagName('head')[0];ba&&ba.appendChild(x)}};u.prototype.hasUnsavedChanges=function(){return this.getState().unsavedChanges};u.prototype.getFont=function(v){var w=this.getState().fonts,x=w.get(v);return x||w.first()};u.prototype.getFonts=function(){return this.getState().fonts.toArray().sort(function(v,w){return v.getName().toLowerCase().localeCompare(w.getName().toLowerCase())})};u.prototype.getInitialImageScale=function(){var v=this.getState().fullImageSize;return 100/v};function u(){j.apply(this,arguments)}f.exports=new u(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectReactFrameEditorCanvasImageAsset.react',['MediaEffectEditorFunnelLogger','MediaEffectImageSnappingUtils','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorImageAsset.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MediaEffectReactFrameEditorCanvasImageAsset1=function(p){var q=c('ReactDOM').findDOMNode(p);if(q instanceof HTMLImageElement){var r=c('MediaEffectImageSnappingUtils').getSnappingSpecs(this.props.localAssetID,q);if(r){var s=r.size?'banner':'corner';c('MediaEffectEditorFunnelLogger').logAutoSnapping(s);c('MediaEffectMetadataActionCreators').setAutoSnapping(this.props.localAssetID,s,r)}}}.bind(this),l}j.prototype.render=function(){return c('React').createElement(c('MediaEffectReactFrameEditorImageAsset.react'),babelHelpers['extends']({},this.props,{adjustPosition:this.$MediaEffectReactFrameEditorCanvasImageAsset1}))};f.exports=j}),null);
__d('MediaEffectValidationTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ASSET_NUMBER_LIMIT:'',CANVAS_COVERAGE_LIMIT:''});f.exports=h}),null);
__d('MediaEffectReactFrameEditorDataStore',['fbt','regeneratorRuntime','Promise','FluxReduceStore','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameEditorDataRecord','MediaEffectFrameEditorDispatcher','MediaEffectMetadataActionCreators','MediaEffectReactFrameDeserializer','MediaEffectReactFrameEditorAssetPositionRecord','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectReactFrameEditorScalarSizeRecord','MediaEffectReactFrameEditorSize','MediaEffectReactFrameEditorTextAssetRecord','MediaEffectTemplateDataStore','MediaEffectValidationTypes','Vector','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=1,l='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=';function m(){return k++}i=babelHelpers.inherits(n,c('FluxReduceStore'));j=i&&i.prototype;n.prototype.getInitialState=function(){return new (c('MediaEffectFrameEditorDataRecord'))()};n.prototype.$MediaEffectReactFrameEditorDataStore1=function(o){var p=this.getInitialState();if(o){var q=c('MediaEffectReactFrameDeserializer').deserializeData(o);p=p.set('assets',q.assets).set('assetOrder',q.assetOrder).set('frameFBID',q.frameFBID).set('filterID',q.filterID).set('templateFBID',q.templateFBID)}var r=p.assets.size>0?Math.max.apply(Math,p.assets.map(function(s){return s.localAssetID}).toArray()):0;k=r+1;return p};n.prototype.reduce=function(o,p){var q,r;switch(p.type){case 'init/frameData':o=this.$MediaEffectReactFrameEditorDataStore1(p.data);break;case 'save':if(p.effectID)o=o.set('frameFBID',p.effectID);break;case 'add/image':if(o.assets.size>15){c('setImmediate')(function(){return c('MediaEffectMetadataActionCreators').addValidation(c('MediaEffectValidationTypes').ASSET_NUMBER_LIMIT)})}else (function(){var za=m(),ab=new (c('MediaEffectReactFrameEditorImageAssetRecord'))({localAssetID:za,file:p.imageFile,localImageURI:URL.createObjectURL(p.imageFile),position:p.position?p.position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))(),assetSize:null});o=o.withNewAsset(za,ab);ab.upload()['catch'](function(bb){});c('setImmediate')(function(){c('MediaEffectMetadataActionCreators').deselectAll();c('MediaEffectMetadataActionCreators').selectAsset(za)})})();break;case 'replace/image':var s=o.assets.get(p.localAssetID)||new (c('MediaEffectReactFrameEditorImageAssetRecord'))(),t=new (c('MediaEffectReactFrameEditorImageAssetRecord'))({localAssetID:p.localAssetID,file:p.imageFile,localImageURI:URL.createObjectURL(p.imageFile),position:s.position,assetSize:s.assetSize});o=o.replaceAsset(p.localAssetID,t);t.upload()['catch'](function(za){});break;case 'update/image':{var u=o.assets.get(p.localAssetID);if(u){var v=u.set('processedImageURI',p.imageURI);o=o.replaceAsset(p.localAssetID,v)}break}case 'replace/startRemovingBackground':{var w=o.assets.get(p.localAssetID);if(w){var x=w.set('stickerFBID',null);o=o.replaceAsset(p.localAssetID,x)}break}case 'replace/imageBackground':{var y=o.assets.get(p.localAssetID);if(y){var z=y.set('localImageURI',p.imageURI).set('stickerFBID',p.imageID).set('processApplied',true);o=o.replaceAsset(p.localAssetID,z)}break}case 'update/textImage':var aa=p.localAssetID,ba=p.localImageURI,ca=p.file,da=p.textContent,ea=p.assetSize,fa=o.assets.get(aa);if(!fa)break;var ga=fa.assocTextAsset;if(!ga||ba===fa.localImageURI&&da===ga.content)break;var ha=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),ia=ha.canvasWidth,ja=ha.canvasHeight,ka=new (c('MediaEffectReactFrameEditorSize').Fit)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:ea.x/ia*100}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:ea.y/ja*100}),aspect_ratio:ea.y?ea.x/ea.y:1});o=o.withAssetMutation(aa,function(za){return za.set('localImageURI',ba).set('file',ca).set('assetSize',ka)});o=o.withTextAssetMutation(p.localAssetID,function(za){return za.set('content',da).set('dirty',true)});break;case 'add/text':var la=p.content?this.newTextAsset(p.content,p.position):this.newTextImageAsset(p.position);if(la instanceof c('MediaEffectReactFrameEditorImageAssetRecord'))window.setTimeout(function(){c('MediaEffectMetadataActionCreators').deselectAll();window.setTimeout(function(){c('MediaEffectMetadataActionCreators').selectAsset(la.localAssetID)})},0);o=o.withNewAsset(la.localAssetID,la);break;case 'duplicate/asset':var ma=m(),na=this.$MediaEffectReactFrameEditorDataStore2(ma,o.assets.get(p.localAssetID));if(na)o=o.withNewAsset(ma,na);break;case 'update/assetPosition':var oa=p.position;o=o.withAssetMutation(p.localAssetID,function(za){return za.set('position',oa).set('autoSnappedType',null)});break;case 'update/assetSize':var pa=p.size;o=o.withAssetMutation(p.localAssetID,function(za){return za.set('assetSize',pa).set('autoSnappedType',null)});break;case 'update/autoSnapping':(function(){var za=p.autoSnappedType,ab=p.specs,bb=ab.size,cb=ab.position;o=o.withAssetMutation(p.localAssetID,function(db){return db.set('assetSize',bb?bb:db.assetSize).set('position',cb?cb:db.position).set('autoSnappedType',za)})})();break;case 'update/assetNativeSize':o=this.$MediaEffectReactFrameEditorDataStore3(o,p.localAssetID,p.size);break;case 'update/stickerFBID':var qa=p.stickerFBID,ra=p.localTemplateID?p.localTemplateID:null;if(!c('MediaEffectFrameCreateDialogDataStore').isTemplateFlow()||ra===c('MediaEffectTemplateDataStore').getState().currentTemplateVariationID){o=o.withAssetMutation(p.localAssetID,function(za){return za.set('stickerFBID',qa)});o=o.withTextAssetMutation(p.localAssetID,function(za){return za.set('dirty',false)})}break;case 'update/asset/raise':var sa=p.toTop;o=o.withRaisedAsset(p.localAssetID,sa);break;case 'update/asset/lower':var ta=p.toBottom;o=o.withLoweredAsset(p.localAssetID,ta);break;case 'delete/asset':o=o.withDeletedAsset(p.localAssetID);break;case 'update/textContent':var ua=p.content;o=o.withTextAssetMutation(p.localAssetID,function(za){return za.set('content',ua).set('contentMustBeUpdated',false)});break;case 'update/textFonts':var va=p.font;p.localTextIDs.forEach(function(za){return o=o.withTextAssetMutation(za,function(ab){return ab.set('font',va)})});break;case 'update/textColors':var wa=p.color;p.localTextIDs.forEach(function(za){return o=o.withTextAssetMutation(za,function(ab){return ab.set('color',wa)})});break;case 'update/textAlignments':var xa=p.textAlignment;p.localTextIDs.forEach(function(za){return o=o.withTextAssetMutation(za,function(ab){return ab.set('textHorizontalAlignment',xa)})});break;case 'update/frameFilterID':o=o.set('filterID',p.filterID);break;case 'apply/template':o=this.$MediaEffectReactFrameEditorDataStore4(o,p.templateFBID,p.frameData);break;case 'clear/template':o=this.$MediaEffectReactFrameEditorDataStore5(o);break;case 'update/asset/contentMustBeUpdated':var ya=p.contentMustBeUpdated;o=o.withAssetMutation(p.localAssetID,function(za){return za.set('contentMustBeUpdated',ya)});break;case 'change/step':if(c('MediaEffectFrameCreateDialogDataStore').isTemplateFlow())o=c('MediaEffectTemplateDataStore').getFrameData(null);break;case 'set/currentTemplateVariation':o=c('MediaEffectTemplateDataStore').getFrameData(p.localTemplateID);break;}return o};n.prototype.$MediaEffectReactFrameEditorDataStore5=function(o){o.assets.forEach(function(p){if(p.sourceTemplateAssetFBID)o=o.withDeletedAsset(p.localAssetID);});return o.set('templateFBID',null)};n.prototype.$MediaEffectReactFrameEditorDataStore4=function(o,p,q){o=this.$MediaEffectReactFrameEditorDataStore5(o);o=o.set('templateFBID',q.frameFBID).set('filterID',q.filterID);q.assetOrder.forEach(function(r){var s=m(),t=q.assets.get(r),u=t.set('localAssetID',s).set('sourceTemplateAssetFBID',t.assetFBID).set('assetFBID',null).set('readOnly',t instanceof c('MediaEffectReactFrameEditorImageAssetRecord'));o=o.withNewAsset(s,u)});return o};n.prototype.$MediaEffectReactFrameEditorDataStore2=function(o,p){if(p.assetType()==='MediaEffectReactFrameEditorImageAssetRecord'){if(!p.stickerFBID)return null;return new (c('MediaEffectReactFrameEditorImageAssetRecord'))({assetSize:p.assetSize,file:p.file,hostedImageURI:p.hostedImageURI,localImageURI:p.localImageURI,nativeSize:p.nativeSize,stickerFBID:p.stickerFBID,assetFBID:null,localAssetID:o,position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))()})}else return new (c('MediaEffectReactFrameEditorTextAssetRecord'))({assetSize:p.assetSize,color:p.color,content:p.content,font:p.font,textHorizontalAlignment:p.textHorizontalAlignment,assetFBID:null,localAssetID:o,position:new (c('MediaEffectReactFrameEditorAssetPositionRecord'))()});};n.prototype.getEffectID=function(){return this.getState().frameFBID};n.prototype.areAllImageAssetsUploaded=function(){var o=this.getState().assets;return o.every(function(p){var q=p instanceof c('MediaEffectReactFrameEditorTextAssetRecord');return q||!!p.stickerFBID||!!p.assocTextAsset})};n.prototype.hasAssets=function(){var o=this.getState().assets;return o.size>0};n.prototype.isValidForSubmit=function(){var o=this.getState().assets,p=c('MediaEffectFrameCreateDialogDataStore').isTemplateFlow();return o.size>0&&o.every(function(q){var r=q instanceof c('MediaEffectReactFrameEditorTextAssetRecord');return r&&(p||!q.contentMustBeUpdated)||!r&&(!!q.stickerFBID||!!q.assocTextAsset)})};n.prototype.newTextAsset=function(o,p){var q=m();return new (c('MediaEffectReactFrameEditorTextAssetRecord'))({localAssetID:q,position:p||new (c('MediaEffectReactFrameEditorAssetPositionRecord'))(),font:c('MediaEffectReactFrameEditorCanvasDataStore').getState().fonts.first(),fontName:c('MediaEffectReactFrameEditorCanvasDataStore').getState().fonts.first().getName(),content:o,assetSize:new (c('MediaEffectReactFrameEditorSize').Stretch)({height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:10}),width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:100})}),color:'#ffffff',textHorizontalAlignment:'center'})};n.prototype.newTextImageAsset=function(o){var p=h._("Enter text here").toString(),q=m(),r=new (c('MediaEffectReactFrameEditorTextAssetRecord'))({localAssetID:q,font:c('MediaEffectReactFrameEditorCanvasDataStore').getState().fonts.first(),fontName:c('MediaEffectReactFrameEditorCanvasDataStore').getState().fonts.first().getName(),content:p,color:'#ffffff',textHorizontalAlignment:'center'}),s=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),t=s.canvasHeight,u=s.canvasWidth;return new (c('MediaEffectReactFrameEditorImageAssetRecord'))({localAssetID:q,localImageURI:l,position:o||new (c('MediaEffectReactFrameEditorAssetPositionRecord'))(),assocTextAsset:r,assetSize:new (c('MediaEffectReactFrameEditorSize').Fit)({height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:10}),width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:100}),aspect_ratio:100*u/10*t})})};n.prototype.$MediaEffectReactFrameEditorDataStore3=function(o,p,q){var r;o=o.withAssetMutation(p,function(x){return x.set('nativeSize',q)});var s=o.assets.get(p).assetSize,t=!!o.assets.get(p).assocTextAsset;if(q.y){var u=q.x/q.y;if(!s){var v=t?100/c('MediaEffectReactFrameEditorCanvasDataStore').getState().canvasHeight:c('MediaEffectReactFrameEditorCanvasDataStore').getInitialImageScale();s=new (c('MediaEffectReactFrameEditorSize').Fit)({width:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:q.x*v}),height:new (c('MediaEffectReactFrameEditorScalarSizeRecord'))({canvas_size_percentage:q.y*v}),aspect_ratio:u})}else s=s.set('aspect_ratio',u);}o=o.withAssetMutation(p,function(x){return x.set('assetSize',s)});var w=o.assets.get(p).position;if(s&&s.isValid()&&w&&!w.isBackendCompatible())(function(){var x=c('MediaEffectReactFrameEditorCanvasDataStore').getState(),y=x.canvasWidth,z=x.canvasHeight,aa=new (c('Vector'))(y,z),ba=c('MediaEffectReactFrameEditorAssetPositionRecord').canonical(w.toAbsolute(aa,s.toAbsolute(aa)),aa);o=o.withAssetMutation(p,function(ca){return ca.set('position',ba)})})();return o};n.prototype.genFlushDirtyTextImageAssetIfAny=function o(){var p,q,r;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:p=this.getState().assets;q=p.filter(function(u){return u instanceof c('MediaEffectReactFrameEditorImageAssetRecord')&&u.assocTextAsset&&u.assocTextAsset.dirty});if(!(q.size===0)){t.next=4;break}return t.abrupt('return');case 4:r=q.map(function(u){return u.upload()});t.next=7;return c('regeneratorRuntime').awrap(c('Promise').all(r.toArray()));case 7:case 'end':return t.stop();}},null,this)};function n(){i.apply(this,arguments)}f.exports=new n(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectReactFrameEditorImageAsset.react',['cx','Image.react','MediaEffectMetadataActionCreators','MediaEffectQEUtils','React','ReactDOM','Vector','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectReactFrameEditorImageAsset4=function(){this.$MediaEffectReactFrameEditorImageAsset2=true;if(this.$MediaEffectReactFrameEditorImageAsset1){this.$MediaEffectReactFrameEditorImageAsset5();if(this.$MediaEffectReactFrameEditorImageAsset6())this.props.adjustPosition&&this.props.adjustPosition(this.$MediaEffectReactFrameEditorImageAsset1);}}.bind(this),m}k.prototype.$MediaEffectReactFrameEditorImageAsset5=function(){if(this.$MediaEffectReactFrameEditorImageAsset3)return;this.$MediaEffectReactFrameEditorImageAsset3=true;var l=c('ReactDOM').findDOMNode(this.$MediaEffectReactFrameEditorImageAsset1);c('MediaEffectMetadataActionCreators').updateAssetNativeSize(this.props.localAssetID,new (c('Vector'))(l.width,l.height))};k.prototype.$MediaEffectReactFrameEditorImageAsset6=function(){if(this.props.imageRecord.assocTextAsset)return false;if(this.props.imageRecord.stickerFBID)return false;return c('MediaEffectQEUtils').shouldSnap()};k.prototype.render=function(){var l=this.props.imageRecord.stickerFBID===null&&!this.props.imageRecord.assocTextAsset&&!c('MediaEffectQEUtils').shouldUseNewUploader();return c('React').createElement('div',null,l?c('React').createElement('div',{className:"_1h9r"}):null,l?c('React').createElement(c('XUISpinner.react'),{className:"_1h9s",size:'large'}):null,c('React').createElement(c('Image.react'),{className:"_55jn _4u2a",onLoad:this.$MediaEffectReactFrameEditorImageAsset4,ref:function(m){this.$MediaEffectReactFrameEditorImageAsset1=m;this.$MediaEffectReactFrameEditorImageAsset1&&this.$MediaEffectReactFrameEditorImageAsset2&&this.$MediaEffectReactFrameEditorImageAsset5()}.bind(this),src:this.props.isInPreview&&this.props.imageRecord.processedImageURI?this.props.imageRecord.processedImageURI:this.props.imageRecord.getURI()}))};f.exports=k}),null);
__d('AsyncRequestUtil',['Promise'],(function a(b,c,d,e,f,g){'use strict';var h={send:function i(j){return new (c('Promise'))(function(k,l){return j.setHandler(k).setErrorHandler(l).send()})}};f.exports=h}),null);
__d("MediaEffectArtValidationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MEDIA_EFFECT_ART_VALID:"media_effect_art_valid",MEDIA_EFFECT_ART_IS_EVENT_COVER_PHOTO:"media_effect_art_is_event_cover_photo",MEDIA_EFFECT_ART_IS_PHOTO:"media_effect_art_is_photo"})}),null);
__d("XGetUploadedImageForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/upload_poll\/",{job_id:{type:"String",required:true}})}),null);
__d("XUploadImageForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/upload\/",{})}),null);
__d("XUploadImageWithConversionForFrameEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/swipeable_frame\/image\/upload_convert\/",{})}),null);
__d('retry',['regeneratorRuntime','asyncSleep'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,Error);i=h&&h.prototype;function j(ga,ha,ia,ja){i.constructor.call(this,ga);this.message=ga;this.values=ha;this.errors=ia;this.options=ja}function k(ga){this.$Retry1=babelHelpers['extends']({},k.RETRY_OPTION_DEFAULTS,ga);this.$Retry2=0;this.$Retry3=false;this.$Retry4=false;this.$Retry5=[];this.$Retry6=[];this.$Retry7=null;this.$Retry8=0;this.$Retry9()}k.prototype.$Retry9=function(){if(this.$Retry1.interval&&this.$Retry1.interval<0)throw new j("C'mon, interval < 0 makes no sense.",[],[],this.$Retry1);if(this.$Retry1.backoff&&this.$Retry1.backoff<1)throw new j('backoff must be >= 1',[],[],this.$Retry1);if(this.$Retry1.jitter&&(this.$Retry1.jitter<0||this.$Retry1.jitter>1))throw new j('jitter must be in range [0, 1]',[],[],this.$Retry1);};k.prototype.onValue=function(){if(!this.$Retry1.retryValues)this.$Retry1.retryValues=[];for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];this.$Retry1.retryValues=this.$Retry1.retryValues.concat(ha);return this};k.prototype.untilValue=function(){for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];return this.untilValueMatches(function(ja){return ha.indexOf(ja)!==-1})};k.prototype.onFalsy=function(){return this.onValueMatches(function(ga){return !ga})};k.prototype.onTruthy=function(){return this.onValueMatches(function(ga){return !!ga})};k.prototype.untilTruthy=function(){return this.onFalsy()};k.prototype.untilFalsy=function(){return this.onTruthy()};k.prototype.onNull=function(){return this.onValueMatches(function(ga){return ga===null})};k.prototype.onUndefined=function(){return this.onValueMatches(function(ga){return ga===undefined})};k.prototype.onValueMatches=function(){if(!this.$Retry1.retryValueMatchers)this.$Retry1.retryValueMatchers=[];for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];this.$Retry1.retryValueMatchers=this.$Retry1.retryValueMatchers.concat(ha);return this};k.prototype.untilValueMatches=function(){for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];return this.onValueMatches.apply(this,ha.map(function(ja){return function(ka){return !ja(ka)}}))};k.prototype.onError=function(){for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];if(ha.length===0)return this.onErrorMatches(function(ja){return true});if(!this.$Retry1.retryErrorClasses)this.$Retry1.retryErrorClasses=[];this.$Retry1.retryErrorClasses=this.$Retry1.retryErrorClasses.concat(ha);return this};k.prototype.onErrorMatches=function(){if(!this.$Retry1.retryErrorMatchers)this.$Retry1.retryErrorMatchers=[];for(var ga=arguments.length,ha=Array(ga),ia=0;ia<ga;ia++)ha[ia]=arguments[ia];this.$Retry1.retryErrorMatchers=this.$Retry1.retryErrorMatchers.concat(ha);return this};k.prototype.limit=function(ga){this.$Retry1.retries=ga;this.$Retry9();return this};k.prototype.once=function(){return this.limit(1)};k.prototype.twice=function(){return this.limit(2)};k.prototype.withInterval=function(ga){this.$Retry1.interval=ga;this.$Retry9();return this};k.prototype.withMaxInterval=function(ga){this.$Retry1.maxInterval=ga;return this};k.prototype.withMinInterval=function(ga){this.$Retry1.minInterval=ga;return this};k.prototype.withBackoff=function(ga){this.$Retry1.backoff=ga;this.$Retry9();return this};k.prototype.withJitter=function(ga){this.$Retry1.jitter=ga;this.$Retry9();return this};k.prototype.abort=function(){this.$Retry3=true};k.prototype.getCallCount=function(){return this.$Retry2};k.prototype.getValues=function(){return this.$Retry5};k.prototype.getErrors=function(){return this.$Retry6};k.prototype.isRunning=function(){return this.$Retry4};k.prototype.call=function ga(ha){var ia,ja;return c('regeneratorRuntime').async(function ka(la){while(1)switch(la.prev=la.next){case 0:if(!this.$Retry4){la.next=2;break}throw new j('Cannot reuse a retry object while it is still running!',[],[],this.$Retry1);case 2:this.$Retry4=true;la.prev=3;this.$Retry7=ha;this.$Retry6=[];this.$Retry5=[];case 7:if(!(!this.$Retry1.retries||this.$Retry2<this.$Retry1.retries+1)){la.next=33;break}if(!(this.$Retry2>0)){la.next=12;break}ia=this.$Retry10();la.next=12;return c('regeneratorRuntime').awrap(c('asyncSleep')(ia));case 12:if(!this.$Retry3){la.next=14;break}throw new j('Retry aborted.',this.$Retry5,this.$Retry6,this.$Retry1);case 14:la.prev=14;this.$Retry2++;la.next=18;return c('regeneratorRuntime').awrap(ha());case 18:ja=la.sent;this.$Retry5.push(ja);if(!this.$Retry11(ja)){la.next=22;break}return la.abrupt('continue',7);case 22:return la.abrupt('return',ja);case 25:la.prev=25;la.t0=la['catch'](14);this.$Retry6.push(la.t0);if(!this.$Retry12(la.t0)){la.next=30;break}return la.abrupt('continue',7);case 30:throw la.t0;case 31:la.next=7;break;case 33:throw new j('Max call count exceeded.',this.$Retry5,this.$Retry6,this.$Retry1);case 34:la.prev=34;this.$Retry4=false;return la.finish(34);case 37:case 'end':return la.stop();}},null,this,[[3,,34,37],[14,25]])};k.prototype.$Retry10=function(){return Math.max(0,this.$Retry13(this.$Retry14()))};k.prototype.$Retry13=function(ga){var ha=ga;if(this.$Retry1.minInterval)ha=Math.max(ha,this.$Retry1.minInterval);if(this.$Retry1.maxInterval)ha=Math.min(ha,this.$Retry1.maxInterval);return ha};k.prototype.$Retry14=function(){return this.$Retry15()+this.$Retry16()};k.prototype.$Retry17=function(){return this.$Retry1.interval?this.$Retry1.interval:0};k.prototype.$Retry18=function(){return this.$Retry1.backoff?this.$Retry1.backoff:1};k.prototype.$Retry15=function(){var ga=this.$Retry17(),ha=this.$Retry18();return ga*Math.pow(ha,this.$Retry2-1)};k.prototype.$Retry16=function(){var ga=this.$Retry19(),ha=ga-this.$Retry8;this.$Retry8=ga;return ha};k.prototype.$Retry19=function(){var ga=this.$Retry1.jitter;if(!ga)return 0;var ha=Math.random()*2-1,ia=ha*ha*ha*ga/2,ja=this.$Retry17(),ka=this.$Retry18(),la=ka-1;if(la<1e-6)return ja*Math.pow(ka,this.$Retry2)*(ia+la*(ia*ia-ia)/2);return ja*Math.pow(ka,this.$Retry2)*(Math.pow(ka,ia)-1)/(ka-1)};k.prototype.$Retry11=function(ga){return !!this.$Retry1.retryValues&&this.$Retry1.retryValues.indexOf(ga)!==-1||!!this.$Retry1.retryValueMatchers&&this.$Retry1.retryValueMatchers.some(function(ha){return ha(ga)})};k.prototype.$Retry12=function(ga){return !!this.$Retry1.retryErrorClasses&&this.$Retry1.retryErrorClasses.some(function(ha){return ga instanceof ha})||!!this.$Retry1.retryErrorMatchers&&this.$Retry1.retryErrorMatchers.some(function(ha){return ha(ga)})};k.RETRY_OPTION_DEFAULTS={interval:1000,backoff:1,jitter:.25};function l(ga,ha){return c('regeneratorRuntime').async(function ia(ja){while(1)switch(ja.prev=ja.next){case 0:ja.next=2;return c('regeneratorRuntime').awrap(new k(ha).call(ga));case 2:return ja.abrupt('return',ja.sent);case 3:case 'end':return ja.stop();}},null,this)}l.Retry=k;l.RetryError=j;function m(){var ga;return (ga=new k()).onValue.apply(ga,arguments)}l.onValue=m;function n(){var ga;return (ga=new k()).untilValue.apply(ga,arguments)}l.untilValue=n;function o(){return new k().onFalsy()}l.onFalsy=o;function p(){return new k().onTruthy()}l.onTruthy=p;function q(){return new k().untilTruthy()}l.untilTruthy=q;function r(){return new k().untilFalsy()}l.untilFalsy=r;function s(){return new k().onNull()}l.onNull=s;function t(){return new k().onUndefined()}l.onUndefined=t;function u(){var ga;return (ga=new k()).onValueMatches.apply(ga,arguments)}l.onValueMatches=u;function v(){var ga;return (ga=new k()).untilValueMatches.apply(ga,arguments)}l.untilValueMatches=v;function w(){var ga;return (ga=new k()).onError.apply(ga,arguments)}l.onError=w;function x(){var ga;return (ga=new k()).onErrorMatches.apply(ga,arguments)}l.onErrorMatches=x;function y(ga){return new k().limit(ga)}l.limit=y;function z(){return new k().once()}l.once=z;function aa(){return new k().twice()}l.twice=aa;function ba(ga){return new k().withInterval(ga)}l.withInterval=ba;function ca(ga){return new k().withMaxInterval(ga)}l.withMaxInterval=ca;function da(ga){return new k().withMinInterval(ga)}l.withMinInterval=da;function ea(ga){return new k().withBackoff(ga)}l.withBackoff=ea;function fa(ga){return new k().withJitter(ga)}l.withJitter=fa;f.exports=l}),null);
__d('MediaEffectReactFrameEditorImageAssetRecord',['regeneratorRuntime','Promise','AsyncRequest','AsyncRequestUtil','AsyncResponse','AsyncUploadRequest','immutable','MediaEffectArtValidationType','MediaEffectFrameCreateDialogDataStore','MediaEffectImageTransmogrifier','MediaEffectMetadataActionCreators','MediaEffectTemplateDataStore','XGetUploadedImageForFrameEditorController','XUploadImageForFrameEditorController','XUploadImageWithConversionForFrameEditorController','retry'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record;b.URL=b.URL||b.webkitURL;h=babelHelpers.inherits(k,j({localAssetID:null,file:null,localImageURI:null,hostedImageURI:null,processedImageURI:null,processApplied:false,assetSize:null,nativeSize:null,position:null,stickerFBID:null,assetFBID:null,readOnly:false,sourceTemplateAssetFBID:null,validationResult:null,autoSnappedType:null,assocTextAsset:null}));i=h&&h.prototype;k.prototype.getURI=function(){if(this.localImageURI)return this.localImageURI;if(this.hostedImageURI)return this.hostedImageURI;throw new Error('ImageAssetRecord has no URI')};k.prototype.assetType=function(){return 'MediaEffectReactFrameEditorImageAssetRecord'};k.prototype.reColored=function l(m,n){var o,p,q;return c('regeneratorRuntime').async(function r(s){while(1)switch(s.prev=s.next){case 0:o=new (c('MediaEffectImageTransmogrifier').ColorTransform)(this.getURI(),false,m,n);s.next=3;return c('regeneratorRuntime').awrap(o.toBlob());case 3:p=s.sent;q=URL.createObjectURL(p);return s.abrupt('return',this.withMutations(function(t){t.set('file',p);t.set('localImageURI',q);t.set('hostedImageURI',null);t.set('stickerFBID',null);t.set('sourceTemplateAssetFBID',t.assetFBID);t.set('assetFBID',null);t.set('validationResult',null)}));case 6:case 'end':return s.stop();}},null,this)};k.prototype.upload=function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c('regeneratorRuntime').awrap(this.$MediaEffectReactFrameEditorImageAssetRecord1()['catch'](function(o){this.$MediaEffectReactFrameEditorImageAssetRecord2()}.bind(this)));case 2:case 'end':return n.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord2=function l(){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:m=c('MediaEffectTemplateDataStore').getState().currentTemplateVariationID;o.next=3;return c('regeneratorRuntime').awrap(this.$MediaEffectReactFrameEditorImageAssetRecord3(m));case 3:case 'end':return o.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord1=function l(){var m;return c('regeneratorRuntime').async(function n(o){while(1)switch(o.prev=o.next){case 0:m=c('MediaEffectTemplateDataStore').getState().currentTemplateVariationID;o.next=3;return c('regeneratorRuntime').awrap(this.$MediaEffectReactFrameEditorImageAssetRecord4(m));case 3:case 'end':return o.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord5=function l(m,n){return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:return p.abrupt('return',new (c('Promise'))(function(q,r){var s=new (c('AsyncUploadRequest'))(m).setFiles({flist:[n]}).setData({flow_source_id:c('MediaEffectFrameCreateDialogDataStore').getState().sourceID,flow_type:c('MediaEffectFrameCreateDialogDataStore').getState().flowType}).setAllowCrossOrigin(false);s.subscribe('success',function(t,u){return q(u.getResponse().getPayload())});s.subscribe('failure',function(t,u){return r(u.getResponse())});s.send()}));case 1:case 'end':return p.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord3=function l(m){var n,o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:n=c('XUploadImageForFrameEditorController').getURIBuilder().getURI();q.next=3;return c('regeneratorRuntime').awrap(c('retry').onError(c('AsyncResponse')).untilValueMatches(function(r){return !!r.id}).limit(3).call(this.$MediaEffectReactFrameEditorImageAssetRecord5.bind(this,n,this.file)));case 3:o=q.sent;c('MediaEffectMetadataActionCreators').updateStickerFBID(this.localAssetID,o.id.toString(),m);case 5:case 'end':return q.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord4=function l(m){var n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:p.next=2;return c('regeneratorRuntime').awrap(this.$MediaEffectReactFrameEditorImageAssetRecord6());case 2:n=p.sent;p.next=5;return c('regeneratorRuntime').awrap(this.$MediaEffectReactFrameEditorImageAssetRecord7(n,m));case 5:case 'end':return p.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord6=function l(){var m,n;return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:m=c('XUploadImageWithConversionForFrameEditorController').getURIBuilder().getURI();p.next=3;return c('regeneratorRuntime').awrap(c('retry').onError(c('AsyncResponse')).untilValueMatches(function(q){return !!q.job_id}).limit(3).call(this.$MediaEffectReactFrameEditorImageAssetRecord5.bind(this,m,this.file)));case 3:n=p.sent;return p.abrupt('return',n.job_id.toString());case 5:case 'end':return p.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord7=function l(m,n){var o;return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:q.next=2;return c('regeneratorRuntime').awrap(c('retry').withBackoff(1.5).withMaxInterval(10000).onError(c('AsyncResponse')).limit(15).untilValueMatches(function(r){return r&&r.id}).call(this.$MediaEffectReactFrameEditorImageAssetRecord8.bind(this,m,n)));case 2:o=q.sent;c('MediaEffectMetadataActionCreators').updateValidationResult(o.id.toString(),{success:o.validationResult,validateType:o.validationReasons.length?o.validationReasons[0].validateType:c('MediaEffectArtValidationType').MEDIA_EFFECT_ART_VALID,reason:o.validationReasons.length?o.validationReasons[0].reason:''},n);c('MediaEffectMetadataActionCreators').updateStickerFBID(this.localAssetID,o.id.toString(),n);c('MediaEffectMetadataActionCreators').processBackground(this.localAssetID,o.id.toString());case 6:case 'end':return q.stop();}},null,this)};k.prototype.$MediaEffectReactFrameEditorImageAssetRecord8=function l(m,n){var o,p,q;return c('regeneratorRuntime').async(function r(s){while(1)switch(s.prev=s.next){case 0:o=c('XGetUploadedImageForFrameEditorController').getURIBuilder().setString('job_id',m).getURI();p=new (c('AsyncRequest'))(o).setAllowCrossOrigin(false);s.next=4;return c('regeneratorRuntime').awrap(c('AsyncRequestUtil').send(p));case 4:q=s.sent;return s.abrupt('return',q.getPayload());case 6:case 'end':return s.stop();}},null,this)};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectReactFrameEditorPreview.react',['cx','LayerHideOnBlur','MediaEffectFramePhonePreviewContainer.react','MediaEffectFramePreviewConfigs','MediaEffectFramePreviewTypes','MediaEffectReactFrameEditorCameraContainer.react','MediaEffectReactFrameEditorPreviewCanvas.react','React','Vector','XUIContextualDialog.react','XUIContextualDialogBody.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MediaEffectReactFrameEditorPreview4=function(){return this.setState({showFullPreview:true})}.bind(this);this.$MediaEffectReactFrameEditorPreview3=function(){return this.setState({showFullPreview:false})}.bind(this);this.$MediaEffectReactFrameEditorPreview6=function(){return this.thumbnailRoot}.bind(this);this.$MediaEffectReactFrameEditorPreview7=function(m){if(m!==this.state.showFullPreview)this.setState({showFullPreview:m});}.bind(this);this.state={showFullPreview:false}}k.prototype.$MediaEffectReactFrameEditorPreview1=function(){var l=this.props.previewSize,m=l.x,n=l.y;if(m===n){return c('MediaEffectFramePreviewTypes').PROFILE}else if(m>n){return c('MediaEffectFramePreviewTypes').LANDSCAPE}else return c('MediaEffectFramePreviewTypes').PORTRAIT;};k.prototype.$MediaEffectReactFrameEditorPreview2=function(l){var m=this.props.previewSize.x*l,n=this.props.previewSize.y*l;return c('React').createElement('div',{className:"_5gzu",onMouseOut:this.$MediaEffectReactFrameEditorPreview3,onMouseOver:this.$MediaEffectReactFrameEditorPreview4,style:{backgroundColor:this.props.backgroundColor,width:m,height:n}},this.props.cameraEnabled?c('React').createElement(c('MediaEffectReactFrameEditorCameraContainer.react'),{height:n,width:m}):null,c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvas.react'),{assetOrder:this.props.assetOrder,assets:this.props.assets,backgroundColor:this.props.cameraEnabled?'transparent':this.props.backgroundColor,backgroundImage:this.props.backgroundImage,disableBackgroundImage:this.props.cameraEnabled,previewSize:new (c('Vector'))(m,n)}))};k.prototype.$MediaEffectReactFrameEditorPreview5=function(){var l=c('MediaEffectFramePreviewConfigs')[this.$MediaEffectReactFrameEditorPreview1()].label;return c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:this.$MediaEffectReactFrameEditorPreview6,focusContextOnHide:false,key:'contextualDialog',label:l,onToggle:this.$MediaEffectReactFrameEditorPreview7,position:'left',shown:this.state.showFullPreview},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement(c('MediaEffectFramePhonePreviewContainer.react'),c('MediaEffectFramePreviewConfigs')[this.$MediaEffectReactFrameEditorPreview1()].size),c('React').createElement('div',{className:"_4qx4"},l)))};k.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement('div',{ref:function(l){return this.thumbnailRoot=l}.bind(this)},this.$MediaEffectReactFrameEditorPreview2(this.props.previewScale)),this.$MediaEffectReactFrameEditorPreview5())};f.exports=k}),null);
__d('MediaEffectReactFrameEditorPreviewCanvas.react',['cx','fbt','CenteredContainer.react','MediaEffectReactFrameEditorAsset.react','React','VideoComponentWithLoopingPlayback.react','VideoDataContainer.react','VideoPlayer.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.$MediaEffectReactFrameEditorPreviewCanvas1=function(){var m=this.props,n=m.assets,o=m.previewSize;if(n.size!==0)return null;var p=void 0;if(o.x>o.y){p=i._("LANDSCAPE")}else if(o.x===o.y){p=i._("PROFILE")}else p=i._("PORTRAIT");return c('React').createElement('div',{className:"_29ep"},c('React').createElement(c('XUIText.react'),{size:'small'},p))};l.prototype.render=function(){var m=this.props,n=m.backgroundColor,o=m.backgroundImage,p=m.disableBackgroundImage,q=m.previewSize;return c('React').createElement('div',{className:"_5mqu",style:{backgroundColor:n,backgroundImage:p?'none':o&&o.sprited===false?'url(\''+o.uri+'\')':null,backgroundPosition:o?'center':null,backgroundSize:o?'cover':q.x>q.y?q.x/10:q.y/10,height:q.y,width:q.x}},c('React').createElement(c('CenteredContainer.react'),{className:"_207i",fullHeight:true,horizontal:true,vertical:true},this.$MediaEffectReactFrameEditorPreviewCanvas1()),this.props.videoSourceID?c('React').createElement(c('VideoDataContainer.react'),{videoID:this.props.videoSourceID},c('React').createElement(c('VideoPlayer.react'),{autoplay:true,height:q.y,startMuted:true,videoData:c('VideoDataContainer.react').VIDEO_DATA_PLACEHOLDER,width:q.x},c('React').createElement(c('VideoComponentWithLoopingPlayback.react'),{infiniteLooping:true}))):null,this.props.assetOrder.map(function(r){return c('React').createElement(c('MediaEffectReactFrameEditorAsset.react'),{assetData:this.props.assets.get(r),canvasSize:q,key:r,localAssetID:r,readOnly:true})}.bind(this)))};function l(){j.apply(this,arguments)}l.defaultProps={disableBackgroundImage:false};f.exports=l}),null);
__d('MediaEffectReactFrameEditorPreviewCanvasContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorPreviewCanvas.react','React','Vector'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')]};j.calculateState=function(k,l){var m=c('MediaEffectReactFrameEditorDataStore').getState(),n=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {assets:m.assets,assetOrder:m.assetOrder,backgroundColor:n.backgroundColor,backgroundImage:n.backgroundImage,cameraEnabled:n.cameraSource!=null,previewSize:new (c('Vector'))(l.previewWidth,l.previewHeight)}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvas.react'),this.state)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectReactFrameEditorPreviewContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorPreview.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')]};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.calculateState=function(k){var l=c('MediaEffectReactFrameEditorDataStore').getState(),m=c('MediaEffectReactFrameEditorCanvasDataStore').getState();return {assets:l.assets,assetOrder:l.assetOrder,backgroundColor:m.backgroundColor,backgroundImage:m.backgroundImage,cameraEnabled:m.cameraSource!=null}};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectReactFrameEditorPreview.react'),k)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('MediaEffectReactFrameEditorSelectionBox.react',['cx','FBDragHandle.react','immutable','MediaEffectFrameEditorConstants','MediaEffectMetadataActionCreators','MediaEffectReactFrameEditorAssetPositionRecord','React','Rect'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Map,l=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE;function m(q,r,s,t){var u=(q*s+r*t)/(s*s+t*t);return [s*u,t*u]}function n(event){return event&&(event.metaKey||event.ctrlKey)}function o(q,r){var s=(r.r+r.l)/2,t=(r.t+r.b)/2;q.t=Math.min(q.t,t-1);q.r=Math.max(q.r,s+1);q.b=Math.max(q.b,t+1);q.l=Math.min(q.l,s-1)}i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$MediaEffectReactFrameEditorSelectionBox3=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,aa.w(),aa.h());v=ba[0];w=ba[1]}var ca=aa.add(0,0);ca.l+=v;ca.t+=w;ca.l=Math.min(ca.r-1,ca.l);ca.t=Math.min(ca.b-1,ca.t);if(n(event)){ca.r-=v;ca.b-=w;o(ca,aa)}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects)}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox4=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,-aa.w(),aa.h());v=ba[0];w=ba[1]}var ca=aa.add(0,0);ca.r+=v;ca.t+=w;ca.r=Math.max(ca.l+1,ca.r);ca.t=Math.min(ca.b-1,ca.t);if(n(event)){ca.l-=v;ca.b-=w;o(ca,aa)}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects)}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox5=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,aa.w(),-aa.h());v=ba[0];w=ba[1]}var ca=aa.add(0,0);ca.l+=v;ca.b+=w;ca.l=Math.min(ca.r-1,ca.l);ca.b=Math.max(ca.t+1,ca.b);if(n(event)){ca.r-=v;ca.t-=w;o(ca,aa)}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects)}.bind(this),this.$MediaEffectReactFrameEditorSelectionBox6=function(v,w,x,y,z,event){var aa=z.boundingRect;if(this.props.fixedAspectRatio){var ba=m(v,w,-aa.w(),-aa.h());v=ba[0];w=ba[1]}var ca=aa.add(0,0);ca.r+=v;ca.b+=w;ca.r=Math.max(ca.l+1,ca.r);ca.b=Math.max(ca.t+1,ca.b);if(n(event)){ca.l-=v;ca.t-=w;o(ca,aa)}this.$MediaEffectReactFrameEditorSelectionBox7(aa,ca,z.assetRects)}.bind(this),r}p.prototype.render=function(){if(this.props.assets.size===0)return null;var q=this.$MediaEffectReactFrameEditorSelectionBox1(),r=c('Rect').minimumBoundingBox(q.toArray());if(r.x===0||r.y===0)return null;var s={assetRects:q,boundingRect:r},t=function y(){return s},u=this.props.canvasHeight/c('MediaEffectFrameEditorConstants').PHONE_SCREEN_TO_FRAME_HEIGHT_RATIO,v=this.props.canvasWidth/c('MediaEffectFrameEditorConstants').PHONE_SCREEN_TO_FRAME_WIDTH_RATIO,w=this.props.includesPhoneFrame?(u-this.props.canvasHeight)/2:l,x=this.props.includesPhoneFrame?(v-this.props.canvasWidth)/2:l;return c('React').createElement('div',{className:"_2z_m",style:{top:w-1,left:x-1},onMouseDown:this.$MediaEffectReactFrameEditorSelectionBox2},c('React').createElement('div',{className:"_2z_n",style:{top:r.t,left:r.l,width:r.w(),height:r.h()}},c('React').createElement(c('FBDragHandle.react'),{cursor:'nwse-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox3,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_o"})),c('React').createElement(c('FBDragHandle.react'),{cursor:'nesw-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox4,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_p"})),c('React').createElement(c('FBDragHandle.react'),{cursor:'nesw-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox5,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_t"})),c('React').createElement(c('FBDragHandle.react'),{cursor:'nwse-resize',horizontal:true,initialData:t,onChange:this.$MediaEffectReactFrameEditorSelectionBox6,stopOnLeave:false,vertical:true},c('React').createElement('div',{className:"_2z_u"}))))};p.prototype.$MediaEffectReactFrameEditorSelectionBox2=function(event){event.stopPropagation()};p.prototype.$MediaEffectReactFrameEditorSelectionBox1=function(){var q=this.props.assets,r=k();r=r.withMutations(function(s){q.forEach(function(t){t.assetSize&&s.set(t.localAssetID,t.position.toAbsolute(this.props.canvasSize,t.assetSize.toAbsolute(this.props.canvasSize)))}.bind(this))}.bind(this));return r};p.prototype.$MediaEffectReactFrameEditorSelectionBox7=function(q,r,s){var t=function v(w){return r.r*(w-q.l)/q.w()+r.l*(q.r-w)/q.w()},u=function v(w){return r.b*(w-q.t)/q.h()+r.t*(q.b-w)/q.h()};s.forEach(function(v,w){var x=this.props.assets.get(w);if(!x)return;var y=new (c('Rect'))(u(v.t),t(v.r),u(v.b),t(v.l)),z=x.assetSize;if(z){if(z.width&&z.width.pixels!==0){z=z.set('width',z.width.set('pixels',y.w()))}else if(z.width)z=z.set('width',z.width.set('canvas_size_percentage',y.w()*100/this.props.canvasSize.x));if(z.height&&z.height.pixels!==0){z=z.set('height',z.height.set('pixels',y.h()))}else if(z.height)z=z.set('height',z.height.set('canvas_size_percentage',y.h()*100/this.props.canvasSize.y));}c('MediaEffectMetadataActionCreators').updateAssetSize(w,z);var aa=c('MediaEffectReactFrameEditorAssetPositionRecord').canonical(y,this.props.canvasSize);c('MediaEffectMetadataActionCreators').updateAssetPosition(w,aa)}.bind(this))};f.exports=p}),null);
__d('MediaEffectReactFrameEditorSelectionBoxContainer.react',['FluxContainer','immutable','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorSelectionBox.react','React','Vector'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Map;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.getStores=function(){return [c('MediaEffectReactFrameEditorDataStore')]};k.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};k.calculateState=function(l,m){var n=c('MediaEffectReactFrameEditorDataStore').getState().get('assets'),o=j(m.selectedAssets.map(function(q){return [q,n.get(q)]})),p=o.some(function(q){return q.assetSize&&q.assetSize.aspect_ratio!=null});return {assets:o,canvasSize:new (c('Vector'))(m.canvasWidth,m.canvasHeight),fixedAspectRatio:p}};k.prototype.render=function(){var l=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectReactFrameEditorSelectionBox.react'),l)};function k(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(k,{withProps:true})}),null);
__d("XMediaEffectAsyncTemplateLoadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/template\/load\/",{template_id:{type:"FBID"}})}),null);
__d('MediaEffectReactFrameEditorTemplateRecord',['regeneratorRuntime','AsyncRequest','immutable','MediaEffectReactFrameDeserializer','XMediaEffectAsyncTemplateLoadController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=c('immutable').Record;h=babelHelpers.inherits(l,k({templateFBID:null,previewURL:null,frameData:null,sourceTemplateFBID:null,variants:j(),colorPalette:null}));i=h&&h.prototype;l.prototype.getColor=function(){if(!this.colorPalette)return null;return this.colorPalette.getMainColor()};l.prototype.genFrameData=function m(){var n,o,p;return c('regeneratorRuntime').async(function q(r){while(1)switch(r.prev=r.next){case 0:if(!this.frameData){r.next=2;break}return r.abrupt('return',this.frameData);case 2:n=c('XMediaEffectAsyncTemplateLoadController').getURIBuilder().getURI();r.next=5;return c('regeneratorRuntime').awrap(new (c('AsyncRequest'))().setURI(n).setData({template_id:this.templateFBID}).exec());case 5:o=r.sent;p=o.payload.frameData;return r.abrupt('return',c('MediaEffectReactFrameDeserializer').deserializeData(p));case 8:case 'end':return r.stop();}},null,this)};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectReactFrameEditorTextAsset.react',['cx','CanvasToBlobImpl','DOMQuery','MediaEffectFrameEditorTextPropertiesDialogContainer.react','MediaEffectMetadataActionCreators','React','ReactDOM','Rect','Vector','debounce','html2canvas','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=.5,l=.1;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(n,o){j.constructor.call(this,n,o);this.$MediaEffectReactFrameEditorTextAsset6=function(p){if(this.props.readOnly)return;if(!this.props.editing)return;this.$MediaEffectReactFrameEditorTextAsset3=p.target.textContent;this.$MediaEffectReactFrameEditorTextAsset7()}.bind(this);this.$MediaEffectReactFrameEditorTextAsset8=function(p){if(this.props.readOnly)return;if(!this.props.editing)return;if(p.key==='Enter'||p.key==='Escape'){this.doneEditing();p.preventDefault()}}.bind(this);this.$MediaEffectReactFrameEditorTextAsset9=function(p){if(this.props.readOnly)return;if(!this.props.editing)return;this.doneEditing()}.bind(this);this.$MediaEffectReactFrameEditorTextAsset7=c('debounce')(function(){return this.updateAssetImage(false)}.bind(this),500);this.$MediaEffectReactFrameEditorTextAsset2=null;this.$MediaEffectReactFrameEditorTextAsset1=null;this.$MediaEffectReactFrameEditorTextAsset5=function(){};this.$MediaEffectReactFrameEditorTextAsset3=n.assetData.content;this.$MediaEffectReactFrameEditorTextAsset4=0;this.state={contextReady:false}}m.prototype.$MediaEffectReactFrameEditorTextAsset10=function(){return this.props.assetData.isDynamicText()};m.prototype.$MediaEffectReactFrameEditorTextAsset11=function(){this.$MediaEffectReactFrameEditorTextAsset4=window.getSelection().anchorOffset||0};m.prototype.$MediaEffectReactFrameEditorTextAsset12=function(){if(this.$MediaEffectReactFrameEditorTextAsset4===0||!this.isElementRendered())return;var n=c('DOMQuery').find(this.$MediaEffectReactFrameEditorTextAsset1,'div.text-node');if(n.childNodes.length===0)return;var o=document.createRange(),p=window.getSelection(),q=Math.min(n.childNodes[0].length,this.$MediaEffectReactFrameEditorTextAsset4);o.setStart(n.childNodes[0],q);o.collapse(true);p.removeAllRanges();p.addRange(o)};m.prototype.doneEditing=function(){this.$MediaEffectReactFrameEditorTextAsset5();setTimeout(function(){c('MediaEffectMetadataActionCreators').editText(null);setTimeout(function(){return c('MediaEffectMetadataActionCreators').deselectAll()},0)},0)};m.prototype.updateAssetImage=function(n){var o,p=this;if(this.props.readOnly)return;var q=this.$MediaEffectReactFrameEditorTextAsset3;if(!this.$MediaEffectReactFrameEditorTextAsset10()&&this.$MediaEffectReactFrameEditorTextAsset1&&this.isElementRendered()&&q){var o=function(){var r=new (c('Rect'))(p.$MediaEffectReactFrameEditorTextAsset1);if(!r.getWidth()||!r.getHeight())return {v:void 0};var s=new (c('Vector'))(r.getWidth(),r.getHeight());p.$MediaEffectReactFrameEditorTextAsset11();c('html2canvas')(p.$MediaEffectReactFrameEditorTextAsset1,{onrendered:function(t){var u=t.toDataURL('image/png');this.$MediaEffectReactFrameEditorTextAsset12();this.$MediaEffectReactFrameEditorTextAsset5=function(){this.$MediaEffectReactFrameEditorTextAsset5=function(){};c('MediaEffectMetadataActionCreators').updateTextImage(this.props.assetData.localAssetID,q,u,c('CanvasToBlobImpl').getBlob(u,'image/png'),s)}.bind(this);if(n)this.$MediaEffectReactFrameEditorTextAsset5();}.bind(p),background:undefined,useCORS:true})}();if(typeof o==="object")return o.v;}};m.prototype.componentWillUnmount=function(){if(this.props.readOnly)return;if(this.$MediaEffectReactFrameEditorTextAsset10()&&this.props.assetData.content!==this.$MediaEffectReactFrameEditorTextAsset3){c('MediaEffectMetadataActionCreators').updateTextContent(this.props.localAssetID,this.$MediaEffectReactFrameEditorTextAsset3);return}if(this.$MediaEffectReactFrameEditorTextAsset3)this.$MediaEffectReactFrameEditorTextAsset5();};m.prototype.componentDidUpdate=function(n,o){if(this.props.readOnly)return;if(this.isElementRendered())this.$MediaEffectReactFrameEditorTextAsset2=this.$MediaEffectReactFrameEditorTextAsset2||setTimeout(function(){this.updateAssetImage(true)}.bind(this),200);if(this.props!==n)this.$MediaEffectReactFrameEditorTextAsset7();};m.prototype.isElementRendered=function(){return !!c('ReactDOM').findDOMNode(this.$MediaEffectReactFrameEditorTextAsset1)};m.prototype.render=function(){var n=this.props.textboxHeight||60,o=n*k,p=n*(1-k)/2,q=o*l,r=this.props.assetData&&this.props.assetData.font?this.props.assetData.font.getFontFamily():'',s=this.$MediaEffectReactFrameEditorTextAsset10()?"_3lz7":"_1kg8",t=!this.props.readOnly&&this.props.editing;if(t)s=c('joinClasses')("_1r26",s);var u=this.$MediaEffectReactFrameEditorTextAsset10()?{padding:p+'px '+q+'px'}:{padding:p+'px '+q+'px',textAlign:'justify'};return c('React').createElement('div',{className:s,contentEditable:t,onBlur:this.$MediaEffectReactFrameEditorTextAsset9,onInput:this.$MediaEffectReactFrameEditorTextAsset6,onKeyDown:this.$MediaEffectReactFrameEditorTextAsset8,ref:function(v){this.$MediaEffectReactFrameEditorTextAsset1=v;this.setState({contextReady:true})}.bind(this),style:{color:this.props.assetData.color,fontFamily:r,fontSize:o,textAlign:this.props.assetData.textHorizontalAlignment,lineHeight:o+'px'}},c('React').createElement('div',{className:'text-node',style:u},this.props.assetData.content),this.state.contextReady&&this.$MediaEffectReactFrameEditorTextAsset1&&!this.props.readOnly&&this.props.editing&&this.props.enableFontSettingsDialog?c('React').createElement(c('MediaEffectFrameEditorTextPropertiesDialogContainer.react'),{assetData:this.props.assetData,context:this.$MediaEffectReactFrameEditorTextAsset1,localAssetID:this.props.localAssetID,shown:true}):null)};f.exports=m}),null);
__d('MediaEffectReactFrameEditorTextAssetRecord',['regeneratorRuntime','immutable','MediaEffectReactFrameEditorDataStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=/^\%.*\%$/;h=babelHelpers.inherits(l,j({assetSize:null,color:null,content:null,font:null,localAssetID:null,position:null,textHorizontalAlignment:null,readOnly:false,sourceTemplateAssetFBID:null,contentMustBeUpdated:false,assetFBID:null,dirty:false}));i=h&&h.prototype;l.prototype.assetType=function(){return 'MediaEffectReactFrameEditorTextAssetRecord'};l.prototype.getParentImageAsset=function(){var m=c('MediaEffectReactFrameEditorDataStore').getState().assets.get(this.localAssetID);return m===this?null:m};l.prototype.isDynamicText=function(){return k.test(this.content)};l.prototype.reColored=function m(n,o){return c('regeneratorRuntime').async(function p(q){while(1)switch(q.prev=q.next){case 0:return q.abrupt('return',this);case 1:case 'end':return q.stop();}},null,this)};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectReactFrameSerializer',['MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectReactFrameEditorSize','MediaEffectReactFrameEditorTextAssetRecord','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(p){var q=p.position;return {horizontal_alignment:q.x.anchor_asset_size_percentage!==0?'center':q.x.asset_origin==='canvas_start'?'left':'right',horizontal_margin:q.x.asset_canvas_size_percentage,vertical_alignment:q.y.anchor_asset_size_percentage!==0?'center':q.y.asset_origin==='canvas_start'?'top':'bottom',vertical_margin:q.y.asset_canvas_size_percentage}}function i(p,q){var r=c('nullthrows')(p.assetSize),s=h(p);if(r instanceof c('MediaEffectReactFrameEditorSize').Fill||r instanceof c('MediaEffectReactFrameEditorSize').ScaleWidth){return babelHelpers['extends']({},s,{size:r.width.canvas_size_percentage,size_dimension:'width'})}else if(r instanceof c('MediaEffectReactFrameEditorSize').Fit||r instanceof c('MediaEffectReactFrameEditorSize').ScaleHeight){return babelHelpers['extends']({},s,{size:r.height.canvas_size_percentage,size_dimension:'height'})}else throw new Error('Unserializable frame.');}function j(p,q){var r=c('nullthrows')(p.assetSize),s=h(p);if(r instanceof c('MediaEffectReactFrameEditorSize').Fit||r instanceof c('MediaEffectReactFrameEditorSize').ScaleWidth){return babelHelpers['extends']({},s,{size:r.width.canvas_size_percentage,size_dimension:'width'})}else if(r instanceof c('MediaEffectReactFrameEditorSize').Fill||r instanceof c('MediaEffectReactFrameEditorSize').ScaleHeight){return babelHelpers['extends']({},s,{size:r.height.canvas_size_percentage,size_dimension:'height'})}else throw new Error('Unserializable frame.');}function k(p){var q=p.getParentImageAsset();if(q){var r=h(q);return babelHelpers['extends']({},r,{size:0,textbox_width:0,text_horizontal_alignment:p.textHorizontalAlignment,size_dimension:'height'})}var s=p.assetSize,t=h(p);if(!s||!(s instanceof c('MediaEffectReactFrameEditorSize').Stretch))throw new Error('Unserializable frame.');return babelHelpers['extends']({},t,{size:s.height?s.height.canvas_size_percentage:0,textbox_width:s.width?s.width.canvas_size_percentage:0,text_horizontal_alignment:p.textHorizontalAlignment,size_dimension:'height'})}function l(p,q){var r=c('MediaEffectReactFrameEditorCanvasDataStore').getState().canvasSize;return {landscape_position:i(p,r),portrait_position:j(p,r),rotation:0,source_template_asset_id:p.sourceTemplateAssetFBID,z_index:q}}function m(p,q){var r=k(p);return {portrait_position:r,landscape_position:r,asset_id:p.assetFBID||-p.localAssetID,content:p.content,font_name:p.font.getSystemFontName(),font_size:r.size,custom_font_id:p.font.getCustomFontID(),color:p.color.substr(1),text_horizontal_alignment:p.textHorizontalAlignment,rotation:0,content_must_be_updated:p.contentMustBeUpdated,source_template_asset_id:p.sourceTemplateAssetFBID,z_index:q}}function n(p,q){return babelHelpers['extends']({},l(p,q),{sticker_id:p.stickerFBID,is_face_sticker:false,dynamic_sticker_pack_id:null,dynamic_sticker_type:null,asset_id:p.assetFBID||-p.localAssetID,assoc_text_asset:p.assocTextAsset&&m(p.assocTextAsset,q)})}function o(p){var q=[],r={},s=[],t={},u=p.assetOrder,v=p.assets;u.forEach(function(w,x){var y=v.get(w);if(y instanceof c('MediaEffectReactFrameEditorTextAssetRecord')){var z=m(y,x);s.push(z);t[z.asset_id]=z}else if(y instanceof c('MediaEffectReactFrameEditorImageAssetRecord')){var aa=n(y,x);q.push(aa);r[aa.asset_id]=aa}});return {stickers:q,sticker_edges:r,text:s,text_edges:t,fbid:p.frameFBID,filter_id:p.filterID}}f.exports={serializeFrame:o}}),null);
__d('MediaEffectTargetingFramePreview.react',['cx','fbt','MediaEffectQEUtils','MediaEffectReactFrameEditorPreviewContainer.react','React','Vector','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Preview")),c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(400,625)}),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(400,400)})),c('MediaEffectQEUtils').shouldHideLandscapePreview()?null:c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewContainer.react'),{previewScale:.3,previewSize:new (c('Vector'))(625,400)})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectMaskPreview.react',['cx','fbt','MediaEffectSquircleImage.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=this.props,n=m.cameraIconSrc,o=m.screencastSrc,p=m.showTitles;return c('React').createElement('div',null,n?c('React').createElement('div',null,p?c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Camera Icon")):null,c('React').createElement(c('MediaEffectSquircleImage.react'),{height:72,src:n,width:72})):null,o?c('React').createElement('div',null,p?c('React').createElement(c('XUIText.react'),{className:"_38wf",display:'block'},i._("Screencast")):null,c('React').createElement('video',{controls:true,src:o,width:'240px'})):null)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectMaskPreviewContainer.react',['FluxContainer','MediaEffectMaskPreview.react','MediaEffectMaskUploadDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectMaskUploadDataStore')]};j.calculateState=function(k){var l=c('MediaEffectMaskUploadDataStore').getState();return {cameraIconSrc:l.get('effectThumbnailSrc'),screencastSrc:l.get('screencastSrc')}};j.prototype.render=function(){var k=this.state,l=k.cameraIconSrc,m=k.screencastSrc;return c('React').createElement(c('MediaEffectMaskPreview.react'),{cameraIconSrc:l,screencastSrc:m,showTitles:this.props.showTitles})};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j)}),null);
__d('MediaEffectTargetingStep.react',['cx','MediaEffectFlowType','MediaEffectMaskPreviewContainer.react','MediaEffectMetadataContainer.react','MediaEffectTargetingFramePreview.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.context,n=l.bootstrapData,o=l.flowType;return c('React').createElement('div',{className:"_2i5k"},c('React').createElement('div',{className:"_2i5l"},c('React').createElement(c('MediaEffectMetadataContainer.react'),{bootstrapData:n,context:{allowLocationFrameCreation:m.allowLocationFrameCreation,explainFBOnly:m.explainFBOnly,includesFBOnly:m.includesFBOnly,canThirdPartyMaskLocation:m.canThirdPartyMaskLocation},flowType:this.props.flowType})),o===c('MediaEffectFlowType').MASK?c('React').createElement(c('MediaEffectMaskPreviewContainer.react'),{showTitles:true}):c('React').createElement(c('MediaEffectTargetingFramePreview.react'),null))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectFrameEditorTemplatePaletteComponentEditor.react',['cx','Event','FBSimpleSlider.react','React','SubscriptionsHandler','chroma','color-picker'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement('span',null,this.props.label),c('React').createElement(c('FBSimpleSlider.react'),{max:1,min:0,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,value:this.props.value}))};function m(){i.apply(this,arguments)}k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor4=function(p){var q=this.props.component;if(!q)return;var r=c('chroma').hex(p).hsl();if(isNaN(r[0]))r[0]=q.hue;this.props.onComponentChange(q.set('hue',r[0]/360).set('saturation',r[1]).set('lightness',r[2]))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor5=function(p){var q=this.props.component;if(!q)return;this.props.onComponentChange(q.set('hueVariation',p/2))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor6=function(p){var q=this.props.component;if(!q)return;this.props.onComponentChange(q.set('saturationVariation',p))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor7=function(p){var q=this.props.component;if(!q)return;this.props.onComponentChange(q.set('lightnessVariation',p))}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8=function(){if(this.props.onHighlightComponent)this.props.onHighlightComponent(this.props.componentIndex);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor2=true}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3=function(){if(this.$MediaEffectFrameEditorTemplatePaletteComponentEditor2){if(this.props.onHighlightComponent)this.props.onHighlightComponent(null);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor2=false}}.bind(this);this.$MediaEffectFrameEditorTemplatePaletteComponentEditor1=new (c('SubscriptionsHandler'))()}n.prototype.componentWillMount=function(){this.$MediaEffectFrameEditorTemplatePaletteComponentEditor1.addSubscriptions(c('Event').listen(document.body,'mouseup',this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3))};n.prototype.componentWillUnmount=function(){this.$MediaEffectFrameEditorTemplatePaletteComponentEditor1.release()};n.prototype.render=function(){var o=this.props.component;return c('React').createElement('div',{className:"_1m8o"},o?c('React').createElement('div',null,c('React').createElement('div',{className:"_5-nq",onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8},c('React').createElement(c('color-picker'),{color:o.toRGB(),onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor4})),this.props.showVariation?c('React').createElement('div',null,c('React').createElement(m,{label:'Hue Variation',onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor5,onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8,onMouseUp:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3,value:o.hueVariation*2}),c('React').createElement(m,{label:'Saturation Variation',onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor6,onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8,onMouseUp:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3,value:o.saturationVariation}),c('React').createElement(m,{label:'Lightness Variation',onChange:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor7,onMouseDown:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor8,onMouseUp:this.$MediaEffectFrameEditorTemplatePaletteComponentEditor3,value:o.lightnessVariation})):null):null)};n.defaultProps={showVariation:true,onHighlightComponent:null};f.exports=n}),null);
__d('MediaEffectFrameEditorTemplatePaletteComponentSelector.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=4;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$PaletteComponentButton1=function(){this.props.onButtonClick(this.props.index)}.bind(this),this.$PaletteComponentButton2=function(){if(this.props.onHighlightComponent)this.props.onHighlightComponent(this.props.index);}.bind(this),this.$PaletteComponentButton3=function(){if(this.props.onHighlightComponent)this.props.onHighlightComponent(null);}.bind(this),q}n.prototype.render=function(){return c('React').createElement('a',{className:"_wru"+(' '+"_2w6x")+(this.props.selected?' '+"_2w6_":'')+(' '+"_3-fi"),href:'#',onClick:this.$PaletteComponentButton1,onMouseEnter:this.$PaletteComponentButton2,onMouseLeave:this.$PaletteComponentButton3,style:{backgroundColor:this.props.color}},this.props.index)};k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){return c('React').createElement('div',{className:"_2__5"},this.props.colorPalette.components.map(function(p,q){return c('React').createElement(n,{color:p.toRGB(),index:q+1,key:q+1,onButtonClick:this.props.onButtonClick,onHighlightComponent:this.props.onHighlightComponent,selected:this.props.selectedComponentIndex===q+1})}.bind(this)),this.props.onAddComponent&&this.props.colorPalette.components.size<m?c('React').createElement('a',{className:"_wru",href:'#',onClick:this.props.onAddComponent},'+'):null)};function o(){k.apply(this,arguments)}o.defaultProps={onAddComponent:null,onHighlightComponent:null};f.exports=o}),null);
__d('MediaEffectTemplateColorStep.react',['cx','MediaEffectColorPaletteComponentRecord','MediaEffectFrameEditorPixelCanvasContainer.react','MediaEffectFrameEditorTemplatePaletteComponentEditor.react','MediaEffectFrameEditorTemplatePaletteComponentSelector.react','MediaEffectFrameEditorTemplatePaletteSelectorContainer.react','MediaEffectMetadataActionCreators','React','colr-convert'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MediaEffectTemplateColorStep1=[];this.$MediaEffectTemplateColorStep2=function(m){if(m[3]===0)return;this.$MediaEffectTemplateColorStep1.push(m);if(this.state.selectedComponentIndex)c('MediaEffectMetadataActionCreators').setTemplateSourceColorPalette(this.props.colorPalette.set('components',this.props.colorPalette.components.set(this.state.selectedComponentIndex-1,this.$MediaEffectTemplateColorStep3())));}.bind(this);this.$MediaEffectTemplateColorStep4=function(){this.$MediaEffectTemplateColorStep1=[]}.bind(this);this.$MediaEffectTemplateColorStep5=function(m){this.setState({selectedComponentIndex:m})}.bind(this);this.$MediaEffectTemplateColorStep6=function(){var m=this.props.colorPalette.set('components',this.props.colorPalette.components.push(new (c('MediaEffectColorPaletteComponentRecord'))()));c('MediaEffectMetadataActionCreators').setTemplateSourceColorPalette(m);this.setState({selectedComponentIndex:m.components.size})}.bind(this);this.$MediaEffectTemplateColorStep7=function(m){var n=this.state.selectedComponentIndex;if(!n)return;var o=this.props.colorPalette.set('components',this.props.colorPalette.components.set(n-1,m));c('MediaEffectMetadataActionCreators').setTemplateSourceColorPalette(o)}.bind(this);this.$MediaEffectTemplateColorStep8=function(m){this.setState({transformPalette:m})}.bind(this);this.$MediaEffectTemplateColorStep9=function(m){this.setState({highlightComponent:m})}.bind(this);this.state={selectedComponentIndex:this.props.colorPalette.components.size>0?1:null,transformPalette:null,highlightComponent:null}}k.prototype.$MediaEffectTemplateColorStep3=function(){var l=this.$MediaEffectTemplateColorStep1.map(c('colr-convert').rgb.hsl),m=l.map(function(x){return x[0]/360}).sort(),n=l.map(function(x){return x[1]/100}),o=l.map(function(x){return x[2]/100}),p=n.reduce(function(x,y){return Math.max(x,y)}),q=n.reduce(function(x,y){return Math.min(x,y)}),r=o.reduce(function(x,y){return Math.max(x,y)}),s=o.reduce(function(x,y){return Math.min(x,y)}),t=m.map(function(x,y){return y===m.length-1?m[0]-x+1:m[y+1]-x}),u=t.indexOf(Math.max.apply(Math,t)),v=1-t[u],w=m[u]-v/2;if(w<0)w+=1;return new (c('MediaEffectColorPaletteComponentRecord'))({hue:w,saturation:(p+q)/2,lightness:(r+s)/2,hueVariation:Math.min(v*1.1+.05,.5),saturationVariation:Math.min((p-q)/2*1.1+.1,1),lightnessVariation:Math.min((r-s)/2*1.1+.1,1)})};k.prototype.render=function(){return c('React').createElement('div',{className:"_2yb8"},c('React').createElement('div',{className:"_2yb9"},c('React').createElement('div',{className:"_2yba"},c('React').createElement(c('MediaEffectFrameEditorPixelCanvasContainer.react'),{highlightComponent:this.state.highlightComponent,onAddSample:this.$MediaEffectTemplateColorStep2,onSamplingStart:this.$MediaEffectTemplateColorStep4,sourcePalette:this.props.colorPalette,transformPalette:this.state.transformPalette})),c('React').createElement(c('MediaEffectFrameEditorTemplatePaletteComponentSelector.react'),{colorPalette:this.props.colorPalette,onAddComponent:this.$MediaEffectTemplateColorStep6,onButtonClick:this.$MediaEffectTemplateColorStep5,onHighlightComponent:this.$MediaEffectTemplateColorStep9,selectedComponentIndex:this.state.selectedComponentIndex}),c('React').createElement(c('MediaEffectFrameEditorTemplatePaletteComponentEditor.react'),{component:this.state.selectedComponentIndex?this.props.colorPalette.components.get(this.state.selectedComponentIndex-1):null,componentIndex:this.state.selectedComponentIndex,onComponentChange:this.$MediaEffectTemplateColorStep7,onHighlightComponent:this.$MediaEffectTemplateColorStep9})),c('React').createElement(c('MediaEffectFrameEditorTemplatePaletteSelectorContainer.react'),{onPaletteSelect:this.$MediaEffectTemplateColorStep8}))};f.exports=k}),null);
__d('MediaEffectTemplateColorStepContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectTemplateColorStep.react','MediaEffectTemplateDataStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectTemplateDataStore')]};j.calculateState=function(k,l){var m=c('MediaEffectTemplateDataStore').getState();return {colorPalette:m.sourceColorPalette}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c('React').createElement(c('MediaEffectTemplateColorStep.react'),this.state)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j)}),null);
__d('MediaEffectTemplateDataStore',['FluxReduceStore','immutable','MediaEffectColorPaletteRecord','MediaEffectFrameCreateDialogDataStore','MediaEffectFrameEditorDispatcher','MediaEffectReactFrameDeserializer','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameEditorImageAssetRecord','MediaEffectTemplateVariationRecord'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('immutable').List,m=c('immutable').Map,n=c('immutable').Record,o=1,p=3;function q(){return o++}h=babelHelpers.inherits(r,n({systemColorPalettes:l(),userColorPalettes:l(),sourceColorPalette:new (c('MediaEffectColorPaletteRecord'))({components:l()}),templateVariations:m(),currentTemplateVariationID:null,sourceFrameData:c('MediaEffectReactFrameEditorDataStore').getInitialState()}));i=h&&h.prototype;r.prototype.withSystemColorPalettes=function(t){var u=this.systemColorPalettes.withMutations(function(v){t.forEach(function(w){var x=c('MediaEffectReactFrameDeserializer').deserializeColorPalette(w);if(!v.contains(x))v.push(x);})});while(u.size<p)u=u.push(c('MediaEffectColorPaletteRecord').random());return this.set('systemColorPalettes',u)};r.prototype.withVariationMutation=function(t,u){var v=this.templateVariations,w=v.get(t);if(!w)return this;return this.set('templateVariations',v.set(t,w.withMutations(u)))};r.prototype.reset=function(){return new r().set('systemColorPalettes',this.systemColorPalettes)};function r(){h.apply(this,arguments)}j=babelHelpers.inherits(s,c('FluxReduceStore'));k=j&&j.prototype;s.prototype.getInitialState=function(){return new r()};s.prototype.reduce=function(t,u){if(!c('MediaEffectFrameCreateDialogDataStore').isTemplateFlow())return t;switch(u.type){case 'add/systemColorPalettes':t=t.withSystemColorPalettes(u.paletteData);break;case 'set/userColorPalette':t=t.set('userColorPalettes',t.userColorPalettes.set(u.index-1,u.palette));break;case 'set/currentTemplateVariation':t=t.set('currentTemplateVariationID',u.localTemplateID);break;case 'change/step':t=t.set('currentTemplateVariationID',null);break;case 'set/templateSourceColorPalette':t=t.set('sourceColorPalette',u.palette);break;case 'new/templateVariation':var v=q(),w=u.templateVariation.set('localTemplateID',v);t=t.set('templateVariations',t.templateVariations.set(v,w));t=t.set('currentTemplateVariationID',v);w.frameData.assets.forEach(function(aa){if(aa instanceof c('MediaEffectReactFrameEditorImageAssetRecord'))aa.uploadForVariation(v);});break;case 'init/frameData':t=this.$MediaEffectTemplateDataStore1(t.reset());var x=u.data;if(x){t=t.set('sourceColorPalette',c('MediaEffectReactFrameDeserializer').deserializeColorPalette(x.color_palette));x.variations.forEach(function(aa){var ba=q();t=t.set('templateVariations',t.templateVariations.set(ba,new (c('MediaEffectTemplateVariationRecord'))({localTemplateID:ba,colorPalette:c('MediaEffectReactFrameDeserializer').deserializeColorPalette(aa.color_palette),templateVariationFBID:aa.fbid,frameData:c('MediaEffectReactFrameDeserializer').deserializeData(aa)})))})}break;case 'add/image':case 'replace/image':case 'add/text':case 'duplicate/asset':case 'update/assetPosition':case 'update/assetSize':case 'update/assetNativeSize':case 'update/asset/raise':case 'update/asset/lower':case 'delete/asset':case 'update/textContent':case 'update/textFonts':case 'update/textColors':case 'update/textAlignments':case 'update/asset/contentMustBeUpdated':t=this.$MediaEffectTemplateDataStore1(t);break;case 'update/stickerFBID':var y=u.localAssetID,z=u.stickerFBID;if(!u.localTemplateID){t.set('sourceFrameData',t.sourceFrameData.withAssetMutation(y,function(aa){return aa.set('stickerFBID',z)}))}else t=t.withVariationMutation(u.localTemplateID,function(aa){return aa.set('frameData',aa.frameData.withAssetMutation(y,function(ba){return ba.set('stickerFBID',z)}))});break;}return t};s.prototype.$MediaEffectTemplateDataStore1=function(t){c('MediaEffectFrameEditorDispatcher').waitFor([c('MediaEffectReactFrameEditorDataStore').getDispatchToken()]);if(!t.currentTemplateVariationID){t=t.set('sourceFrameData',c('MediaEffectReactFrameEditorDataStore').getState())}else t=t.withVariationMutation(t.currentTemplateVariationID,function(u){return u.set('frameData',c('MediaEffectReactFrameEditorDataStore').getState())});return t};s.prototype.getFrameData=function(t){var u=this.getState();if(!t){return u.sourceFrameData}else return u.templateVariations.get(t).frameData;};function s(){j.apply(this,arguments)}f.exports=new s(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectTemplatePalettePicker.react',['cx','MediaEffectColorPaletteWheel.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(t){this.props.previewPalette(t?this.props.palette:null)}.bind(this),this.$PaletteWheelSelector2=function(){this.props.selectPalette(this.props.palette,this.props.userIndex)}.bind(this),p}m.prototype.render=function(){return c('React').createElement('div',{className:"_4xob"},c('React').createElement(c('MediaEffectColorPaletteWheel.react'),{onClick:this.$PaletteWheelSelector2,onHover:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;n.prototype.render=function(){return c('React').createElement('div',{className:"_w63"},c('React').createElement(m,{palette:this.props.sourcePalette,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:null}),this.props.systemPalettes.map(function(o,p){return c('React').createElement(m,{key:p,palette:o,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:null})}.bind(this)),this.props.userPalettes.map(function(o,p){return c('React').createElement(m,{key:p,palette:o,previewPalette:this.props.previewPalette,selectPalette:this.props.selectPalette,userIndex:p+1})}.bind(this)))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d('MediaEffectTemplateNewColorStep.react',['cx','MediaEffectFrameEditorPixelCanvasContainer.react','MediaEffectFrameEditorTemplatePaletteComponentEditor.react','MediaEffectFrameEditorTemplatePaletteComponentSelector.react','MediaEffectMetadataActionCreators','MediaEffectTemplatePalettePicker.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MediaEffectTemplateNewColorStep1=function(m){this.setState({selectedComponentIndex:m})}.bind(this);this.$MediaEffectTemplateNewColorStep2=function(m){var n=this.state.selectedComponentIndex;if(!n)return;var o=this.state.selectedPalette.set('components',this.state.selectedPalette.components.set(n-1,m)),p=this.state.selectedUserPaletteIndex,q=p?p:this.props.userPalettes.size+1;c('MediaEffectMetadataActionCreators').setUserColorPalette(o,q);this.setState({selectedUserPaletteIndex:q,selectedPalette:o})}.bind(this);this.$MediaEffectTemplateNewColorStep3=function(m,n){this.setState({selectedPalette:m,selectedUserPaletteIndex:n,selectedComponentIndex:1})}.bind(this);this.$MediaEffectTemplateNewColorStep4=function(m){this.setState({previewPalette:m})}.bind(this);this.state={selectedComponentIndex:this.props.sourcePalette.components.size>0?1:null,previewPalette:null,selectedUserPaletteIndex:null,selectedPalette:l.sourcePalette}}k.prototype.render=function(){return c('React').createElement('div',{className:"_2yb9"},c('React').createElement(c('MediaEffectTemplatePalettePicker.react'),{previewPalette:this.$MediaEffectTemplateNewColorStep4,selectPalette:this.$MediaEffectTemplateNewColorStep3,sourcePalette:this.props.sourcePalette,systemPalettes:this.props.systemPalettes,userPalettes:this.props.userPalettes}),c('React').createElement(c('MediaEffectFrameEditorTemplatePaletteComponentSelector.react'),{colorPalette:this.state.selectedPalette,onButtonClick:this.$MediaEffectTemplateNewColorStep1,selectedComponentIndex:this.state.selectedComponentIndex}),c('React').createElement(c('MediaEffectFrameEditorTemplatePaletteComponentEditor.react'),{component:this.state.selectedComponentIndex&&this.state.selectedPalette?this.state.selectedPalette.components.get(this.state.selectedComponentIndex-1):null,componentIndex:this.state.selectedComponentIndex,onComponentChange:this.$MediaEffectTemplateNewColorStep2,showVariation:false}),c('React').createElement('div',{className:"_2yba"},c('React').createElement(c('MediaEffectFrameEditorPixelCanvasContainer.react'),{sourcePalette:this.props.sourcePalette,transformPalette:this.state.previewPalette?this.state.previewPalette:this.state.selectedPalette})))};f.exports=k}),null);
__d('MediaEffectTemplateNewColorStepContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectTemplateDataStore','MediaEffectTemplateNewColorStep.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectTemplateDataStore')]};j.calculateState=function(k,l){var m=c('MediaEffectTemplateDataStore').getState();return {sourcePalette:m.sourceColorPalette,systemPalettes:m.systemColorPalettes,userPalettes:m.userColorPalettes}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){return c('React').createElement(c('MediaEffectTemplateNewColorStep.react'),this.state)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j)}),null);
__d('MediaEffectTemplateVariationCanvas.react',['cx','MediaEffectReactFrameEditorCanvasContainer.react','React','ResponsiveBlock.react','Vector','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$MediaEffectTemplateVariationCanvas2=function(m,n){this.setState({size:new (c('Vector'))(m,n)})}.bind(this);this.state={size:null}}k.prototype.componentDidMount=function(){this.$MediaEffectTemplateVariationCanvas1=true};k.prototype.componentWillUnmount=function(){this.$MediaEffectTemplateVariationCanvas1=false};k.prototype.setState=function(l){if(this.$MediaEffectTemplateVariationCanvas1)j.setState.call(this,l);};k.prototype.$MediaEffectTemplateVariationCanvas3=function(){var l=this.state.size;if(!l)return null;return c('React').createElement('div',{className:"_3g0k"},c('React').createElement(c('MediaEffectReactFrameEditorCanvasContainer.react'),{enableEditorFreeText:c('mediaEffectGKCheck')('media_effect_template')||c('mediaEffectGKCheck')('media_effect_frame_editor_free_text'),enableFontSettingsDialog:c('mediaEffectGKCheck')('media_effect_font_settings_dialog'),height:l.y,width:l.x}))};k.prototype.render=function(){return c('React').createElement('div',{className:"_2yba"},c('React').createElement(c('ResponsiveBlock.react'),{className:"_3g0j",onResize:this.$MediaEffectTemplateVariationCanvas2},this.$MediaEffectTemplateVariationCanvas3()))};f.exports=k}),null);
__d('MediaEffectTemplateVariationRecord',['regeneratorRuntime','Promise','immutable','MediaEffectColorPaletteRecord','MediaEffectReactFrameEditorDataStore','MediaEffectTemplateDataStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Map,k=c('immutable').Record;h=babelHelpers.inherits(l,k({localTemplateID:null,colorPalette:c('MediaEffectColorPaletteRecord'),templateVariationFBID:null,frameData:c('MediaEffectReactFrameEditorDataStore').getInitialState()}));i=h&&h.prototype;l.fromSourceTemplate=function m(n){var o,p,q,r,s,t,u;return c('regeneratorRuntime').async(function v(w){while(1)switch(w.prev=w.next){case 0:o=c('MediaEffectTemplateDataStore').getState();p=o.sourceColorPalette;q=o.sourceFrameData;r=q.assets.valueSeq().toArray().map(function(x){return x.reColored(p,n)});w.next=6;return c('regeneratorRuntime').awrap(c('Promise').all(r));case 6:s=w.sent;t=j(s.map(function(x){return [x.localAssetID,x]}));u=q.withMutations(function x(y){return c('regeneratorRuntime').async(function z(aa){while(1)switch(aa.prev=aa.next){case 0:y.set('frameFBID',null);y.set('templateFBID',null);y.set('assets',t);case 3:case 'end':return aa.stop();}},null,this)});return w.abrupt('return',new l({colorPalette:n,frameData:u}));case 10:case 'end':return w.stop();}},null,this)};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectTemplateVariationAvailablePalettePicker.react',['cx','MediaEffectColorPaletteWheel.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(t){this.props.previewPalette(t?this.props.palette:null)}.bind(this),this.$PaletteWheelSelector2=function(){this.props.createVariation(this.props.palette)}.bind(this),p}m.prototype.render=function(){return c('React').createElement('div',{className:"_4xob"},c('React').createElement(c('MediaEffectColorPaletteWheel.react'),{onClick:this.$PaletteWheelSelector2,onHover:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;n.prototype.render=function(){return c('React').createElement('div',{className:"_w63"},this.props.colorPalettes.map(function(o,p){return c('React').createElement(m,{createVariation:this.props.createVariation,key:p,palette:o,previewPalette:this.props.previewPalette})}.bind(this)))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d('MediaEffectTemplateVariationSelector.react',['cx','MediaEffectColorPaletteWheel.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$PaletteWheelSelector1=function(){if(!this.props.onVariationSelect)return;this.props.onVariationSelect(this.props.localTemplateID)}.bind(this),p}m.prototype.render=function(){return c('React').createElement('div',{className:"_4xob"},c('React').createElement(c('MediaEffectColorPaletteWheel.react'),{onClick:this.$PaletteWheelSelector1,palette:this.props.palette}))};k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectTemplateVariationSelector1=function(){if(!this.props.onVariationSelect)return;this.props.onVariationSelect(null)}.bind(this),p}n.prototype.render=function(){return c('React').createElement('div',{className:"_w64"},c('React').createElement('div',{className:"_4xob"},c('React').createElement(c('MediaEffectColorPaletteWheel.react'),{onClick:this.$MediaEffectTemplateVariationSelector1,palette:this.props.sourceColorPalette})),this.props.templateVariations.valueSeq().map(function(o){return c('React').createElement(m,{key:o.localTemplateID,localTemplateID:o.localTemplateID,onVariationSelect:this.props.onVariationSelect,palette:o.colorPalette,selected:this.props.currentTemplateVariationID===o.localTemplateID})}.bind(this)))};f.exports=n}),null);
__d('MediaEffectTemplateVariationStep.react',['cx','immutable','MediaEffectFrameEditorConstants','MediaEffectFrameEditorPixelCanvasContainer.react','MediaEffectMetadataActionCreators','MediaEffectTemplateVariationAvailablePalettePicker.react','MediaEffectTemplateVariationCanvas.react','MediaEffectTemplateVariationSelector.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').OrderedSet,l=c('MediaEffectFrameEditorConstants').EDITOR_BUFFER_SIZE;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$MediaEffectTemplateVariationStep1=function(o){c('MediaEffectMetadataActionCreators').setCurrentTemplateVariation(o);this.$MediaEffectTemplateVariationStep2(null)}.bind(this);this.$MediaEffectTemplateVariationStep3=function(o){c('MediaEffectMetadataActionCreators').createNewTemplateVariation(o);this.$MediaEffectTemplateVariationStep2(null)}.bind(this);this.$MediaEffectTemplateVariationStep2=function(o){this.setState({previewPalette:o})}.bind(this);this.state={previewPalette:null}}m.prototype.render=function(){var n=k(this.props.templateVariations.valueSeq().map(function(p){return p.colorPalette})),o=k(this.props.systemPalettes).union(this.props.userPalettes).subtract(n).toList();return c('React').createElement('div',{className:"_w62"},c('React').createElement(c('MediaEffectTemplateVariationAvailablePalettePicker.react'),{colorPalettes:o,createVariation:this.$MediaEffectTemplateVariationStep3,previewPalette:this.$MediaEffectTemplateVariationStep2}),c('React').createElement(c('MediaEffectTemplateVariationSelector.react'),{currentTemplateVariationID:this.props.currentTemplateVariationID,onVariationSelect:this.$MediaEffectTemplateVariationStep1,sourceColorPalette:this.props.sourceColorPalette,templateVariations:this.props.templateVariations}),this.state.previewPalette?c('React').createElement('div',{className:"_2yba"},c('React').createElement('div',{style:{position:'absolute',top:l,bottom:l,left:l,right:l}},c('React').createElement(c('MediaEffectFrameEditorPixelCanvasContainer.react'),{sourcePalette:this.props.sourceColorPalette,transformPalette:this.state.previewPalette?this.state.previewPalette:this.props.sourceColorPalette}))):c('React').createElement(c('MediaEffectTemplateVariationCanvas.react'),null))};f.exports=m}),null);
__d('MediaEffectTemplateVariationStepContainer.react',['FluxContainer','MediaEffectFrameEditorDispatcher','MediaEffectTemplateDataStore','MediaEffectTemplateVariationStep.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MediaEffectTemplateDataStore')]};j.calculateState=function(k,l){var m=c('MediaEffectTemplateDataStore').getState();return {systemPalettes:m.systemColorPalettes,userPalettes:m.userColorPalettes,sourceColorPalette:m.sourceColorPalette,templateVariations:m.templateVariations,currentTemplateVariationID:m.currentTemplateVariationID}};j.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};j.prototype.render=function(){var k=babelHelpers['extends']({},this.props,this.state);return c('React').createElement(c('MediaEffectTemplateVariationStep.react'),k)};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j)}),null);
__d('MediaEffectDialogValidationConfigs',['fbt','MediaEffectValidationTypes'],(function a(b,c,d,e,f,g,h){'use strict';var i,j=(i={},i[c('MediaEffectValidationTypes').CANVAS_COVERAGE_LIMIT]={title:h._("Please Review Your Frame"),content:h._("Frames can't cover more than 85\u0025 of the canvas with opaque pixels.")},i[c('MediaEffectValidationTypes').ASSET_NUMBER_LIMIT]={title:h._("Please Review Your Frame"),content:h._("Please limit the number of images in a frame to no more than 15.")},i),k=[c('MediaEffectValidationTypes').CANVAS_COVERAGE_LIMIT,c('MediaEffectValidationTypes').ASSET_NUMBER_LIMIT];function l(m){return j[m]}f.exports={getContentByType:l,blockingTypes:k}}),null);
__d('MediaEffectValidationStore',['FluxReduceStore','immutable','MediaEffectDialogValidationConfigs','MediaEffectFrameEditorDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return c('immutable').Set()};j.prototype.reduce=function(k,l){switch(l.type){case 'validation/add':return k.add(l.validation);case 'validation/remove':return k.remove(l.validation);case 'init/dialog':return c('immutable').Set();}return k};j.prototype.getBlockingValidation=function(){for(var k=c('MediaEffectDialogValidationConfigs').blockingTypes,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}var o=n;if(this.getState().has(o))return o;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('MediaEffectFrameEditorDispatcher'))}),null);
__d('MediaEffectValidationDialogContainer.react',['fbt','FluxContainer','MediaEffectDialogValidationConfigs','MediaEffectFrameEditorDispatcher','MediaEffectMetadataActionCreators','MediaEffectValidationStore','React','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogTitle.react','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$MediaEffectValidationDialogContainer1=function(){this.state.validationType&&c('MediaEffectMetadataActionCreators').removeValidation(this.state.validationType)}.bind(this),m}k.getStores=function(){return [c('MediaEffectValidationStore')]};k.calculateState=function(){return {validationType:c('MediaEffectValidationStore').getBlockingValidation()}};k.prototype.componentWillMount=function(){c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.constructor.getStores())};k.prototype.render=function(){return this.state.validationType?c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,shown:true,width:445},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('MediaEffectDialogValidationConfigs').getContentByType(this.state.validationType).title),c('React').createElement(c('XUIDialogBody.react'),null,c('MediaEffectDialogValidationConfigs').getContentByType(c('nullthrows')(this.state.validationType)).content),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{label:h._("OK"),onClick:this.$MediaEffectValidationDialogContainer1,use:'confirm'}))):null};f.exports=c('FluxContainer').create(k)}),null);
__d("FXInspirationsCategoryName",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TOP:"top",PRECAPTURE_TOP:"precapture_top",POSTCAPTURE_TOP:"postcapture_top",MOST_RECENT:"most_recent",PRECAPTURE_MOST_RECENT:"precapture_most_recent",POSTCAPTURE_MOST_RECENT:"postcapture_most_recent",MASKS:"masks",STYLE:"style",PRECAPTURE_STYLE:"precapture_style",POSTCAPTURE_STYLE:"postcapture_style",FRAMES:"frames",PRECAPTURE_FRAMES:"precapture_frames",POSTCAPTURE_FRAMES:"postcapture_frames",FB_ONLY:"fb_only",PRECAPTURE_FB_ONLY:"precapture_fb_only",POSTCAPTURE_FB_ONLY:"postcapture_fb_only",SELF:"self",DOODLES:"doodles",ADJUSTMENT_MODES:"adjustment_modes",EDITING:"editing"})}),null);
__d('InspirationsCategoryNameFBOnly.react',['cx','FXInspirationsCategoryName','MediaEffectCard.react','MediaEffectMetadataActionCreators','React','XUICheckboxInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.$InspirationsCategoryNameFBOnly1=function(event){event.target.checked?c('MediaEffectMetadataActionCreators').addInspirationCategoryNames(event.target.value):c('MediaEffectMetadataActionCreators').removeInspirationCategoryNames(event.target.value)};k.prototype.$InspirationsCategoryNameFBOnly2=function(){return [c('FXInspirationsCategoryName').MASKS,c('FXInspirationsCategoryName').FRAMES,c('FXInspirationsCategoryName').STYLE]};k.prototype.render=function(){var l=this.$InspirationsCategoryNameFBOnly2(),m=[];l.forEach(function(n){m.push(c('React').createElement('div',{className:"_3-8w",key:n},c('React').createElement(c('XUICheckboxInput.react'),{defaultChecked:this.props.suggested_category_names&&this.props.suggested_category_names.includes(n),onChange:this.$InspirationsCategoryNameFBOnly1,value:n}),n))}.bind(this));return c('React').createElement(c('MediaEffectCard.react'),{title:'Category Type',tooltip:'If you would like to override effect category types. Please check the types listed as below.'},m)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectProfileOwnerTile.react',['cx','ProfileTile.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement(c('ProfileTile.react'),{id:k.owner.id,imageProps:{className:"_etu"},name:k.owner.name,tileProps:{className:"_etv"},titleProps:{className:"_eu3"}})};f.exports=i}),null);
__d('MediaEffectOwnerByline.react',['MediaEffectEventOwnerBylineTileContainer.react','MediaEffectProfileOwnerTile.react','React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){switch(j.owner.type){case 'event':return c('React').createElement(c('MediaEffectEventOwnerBylineTileContainer.react'),null);default:return c('React').createElement(c('MediaEffectProfileOwnerTile.react'),{owner:j.owner});}};f.exports=h}),null);
__d('MediaEffectReviewPreviewSection.react',['cx','MediaEffectFramePhonePreviewContainer.react','MediaEffectFullscreenFrameEditorSizingUtils','MediaEffectOwnerByline.react','MediaEffectQEUtils','MediaEffectReactFrameEditorPreviewCanvasContainer.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=c('MediaEffectFullscreenFrameEditorSizingUtils').getSquareReviewPreviewWidth(k.dialogWidth,k.dialogHeight),m=16*l/9;return c('React').createElement('div',{className:"_2pio",style:{position:'relative'}},c('React').createElement('div',{style:{position:'absolute',width:'100%'}},c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{className:"_1d1g"},k.frameName)),k.owner?c('React').createElement(c('MediaEffectOwnerByline.react'),{owner:k.owner}):null),c('React').createElement('div',{className:"_3s-9"},c('React').createElement('div',{className:"_5gzu _fh0 _3-98"},c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvasContainer.react'),{previewHeight:l,previewWidth:l})),c('MediaEffectQEUtils').shouldHideLandscapePreview()?null:c('React').createElement('div',{className:"_fh0"},c('React').createElement(c('MediaEffectFramePhonePreviewContainer.react'),{previewHeight:l,previewWidth:m})),c('React').createElement('div',{className:"_fh0"},c('React').createElement(c('MediaEffectFramePhonePreviewContainer.react'),{previewHeight:m,previewWidth:l}))))};f.exports=i}),null);
__d('MediaEffectLocationTargetingPageTypeahead.react',['cx','fbt','CameraEffectsPOITypeaheadSearchGK','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','MediaEffectEditorFunnelLogger','MediaEffectMetadataValidationUtils','MediaEffectPlaceDescriptionRecord','PlaceSearchConstants','PlaceSearchSuppressionVersion','React','ReactComposerLocationSearchSource','SearchableEntry','XUISpinner.react','XUITextInput.react','XUITypeahead.react','idx','mediaEffectGKCheck'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$MediaEffectLocationTargetingPageTypeahead5=function(n,o){var p=n.getUniqueID();c('MediaEffectEditorFunnelLogger').logChangeLocation();this.setState({query:n.getTitle()},function(){return this.props.onLocationSelected(p)}.bind(this))}.bind(this);this.$MediaEffectLocationTargetingPageTypeahead6=function(event){this.setState({query:event.target.value})}.bind(this);this.$MediaEffectLocationTargetingPageTypeahead7=function(){this.props.onLocationSelected(null);this.setState({query:''})}.bind(this);this.state=this.$MediaEffectLocationTargetingPageTypeahead1()}l.prototype.componentWillReceiveProps=function(m){var n={};if(this.props.selectedOwner.id!==m.selectedOwner.id){var o=this.$MediaEffectLocationTargetingPageTypeahead2(this.props.selectedOwner),p=this.$MediaEffectLocationTargetingPageTypeahead2(m.selectedOwner);if(o!==p){n.searchSource=this.$MediaEffectLocationTargetingPageTypeahead3(m.selectedOwner);if(this.props.location&&!p)m.onLocationSelected(null);}}this.setState(n)};l.prototype.$MediaEffectLocationTargetingPageTypeahead2=function(m){m.isFirstParty||c('mediaEffectGKCheck')('media_effect_allow_country_location_targeting')};l.prototype.$MediaEffectLocationTargetingPageTypeahead3=function(m){var n={event_name:c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,event_specific_data:{context:'places_typeahead:'+c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,source:c('PlaceSearchConstants').SOURCE_CAMERA_MEDIA_EFFECT_UPLOAD,ref:'MediaEffectMetadataLocation.react'}};return c('ReactComposerLocationSearchSource')({},{hide_geo:false,allow_poi:c('CameraEffectsPOITypeaheadSearchGK').gkResult,allow_country:this.$MediaEffectLocationTargetingPageTypeahead2(m),suppression_version:c('PlaceSearchSuppressionVersion').CAMERA_LOCATION_FRAMES},n)};l.prototype.$MediaEffectLocationTargetingPageTypeahead1=function(){var m;return {query:((m=this.props.location)!=null?m.name:m)||'',searchSource:this.$MediaEffectLocationTargetingPageTypeahead3(this.props.selectedOwner)}};l.prototype.$MediaEffectLocationTargetingPageTypeahead4=function(){var m,n=this.props,o=n.isValidating,p=n.location;if(o&&this.props.isLoading)return i._("Loading location data");var q=c('MediaEffectMetadataValidationUtils').validateLocationPageID((m=p)!=null?m.key:m);if(o&&!q)return i._("Please select a location");return null};l.prototype.render=function(){if(this.state.isLoading||this.props.location&&this.props.location.key&&!this.props.location.name)return c('React').createElement(c('FBOverlayContainer.react'),{className:"_3_kx"},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement(c('XUITextInput.react'),{className:"_3_kx",defaultValue:this.state.query,disabled:true,height:'tall',xuiError:this.$MediaEffectLocationTargetingPageTypeahead4()})),c('React').createElement(c('FBOverlayElement.react'),{horizontal:'right'},c('React').createElement(c('XUISpinner.react'),{className:"_61s8",size:'large'})));var m=this.props.location&&this.props.location.key&&this.props.location.name?new (c('SearchableEntry'))({uniqueID:this.props.location.key,title:this.props.location.name,type:this.props.location.type}):null;return c('React').createElement(c('XUITypeahead.react'),{className:"_3_kx",clearable:true,disabled:this.props.disabled,highlightOnSelect:true,onChange:this.$MediaEffectLocationTargetingPageTypeahead6,onClear:this.$MediaEffectLocationTargetingPageTypeahead7,onSelectAttempt:this.$MediaEffectLocationTargetingPageTypeahead5,placeholder:i._("Choose a location"),queryString:this.state.query,searchSource:this.state.searchSource,selectedEntry:m,showEntriesOnFocus:true,tallInput:true,viewStyle:'rich',xuiError:this.$MediaEffectLocationTargetingPageTypeahead4()})};f.exports=l}),null);
__d('MediaEffectLocationTargetingGeoCoordinateTypeahead.react',['cx','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','GeoCoordinates','MediaEffectLocationStrings','React','XUICloseButton.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('FBOverlayContainer.react'),{className:"_3_kx"},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement(c('XUITextInput.react'),{className:"_3_kx",disabled:true,height:'tall',value:c('MediaEffectLocationStrings').geoLocation(this.props.location.latitude,this.props.location.longitude).toString()})),c('React').createElement(c('FBOverlayElement.react'),{horizontal:'right'},c('React').createElement(c('XUICloseButton.react'),{className:"_61te"+(this.props.disabled?' '+"hidden_elem":''),onClick:this.props.onClear,size:'medium',type:'button'})))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MediaEffectLocationTargetingTypeahead.react',['GeoCoordinates','MediaEffectLocationTargetingGeoCoordinateTypeahead.react','MediaEffectLocationTargetingPageTypeahead.react','MediaEffectPlaceDescriptionRecord','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MediaEffectLocationTargetingTypeahead1=function(){return this.props.onLocationSelected(null)}.bind(this),l}j.prototype.render=function(){if(this.props.location&&this.props.location.latitude&&this.props.location.longitude&&!this.props.location.key)return c('React').createElement(c('MediaEffectLocationTargetingGeoCoordinateTypeahead.react'),{disabled:this.props.disabled,location:new (c('GeoCoordinates'))(this.props.location.latitude,this.props.location.longitude),onClear:this.$MediaEffectLocationTargetingTypeahead1});return c('React').createElement(c('MediaEffectLocationTargetingPageTypeahead.react'),{disabled:this.props.disabled,isLoading:this.props.isLoading,isValidating:this.props.isValidating,location:this.props.location,onLocationSelected:this.props.onLocationSelected,selectedOwner:this.props.selectedOwner})};f.exports=j}),null);
__d('MediaEffectLocationRadiusSlider.react',['cx','fbt','FBSimpleSlider.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=.05,m=100;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MediaEffectLocationRadiusSlider1=function(t){this.props.onChange(Math.max(l,Math.min(m,Math.pow(10,t))))}.bind(this),p}n.prototype.render=function(){var o=c('joinClasses')("_13tx",this.props.className);return c('React').createElement('div',{className:o},c('React').createElement('span',{className:"_13ty"},i._("Adjust Radius:")),c('React').createElement('span',{className:"_13uk"},c('React').createElement(c('FBSimpleSlider.react'),{max:Math.log10(m),min:Math.log10(l),onChange:this.$MediaEffectLocationRadiusSlider1,value:Math.log10(this.props.radius)})))};f.exports=n}),null);
__d('MediaEffectLocationTargetingEnabledSelector.react',['fbt','React','XUIRadioList.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUIRadioList.react').Item;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('XUIRadioList.react'),{disabled:this.props.disabled,onValueChange:this.props.onTypeSelected,selectedValue:this.props.locationTargetType},c('React').createElement(k,{disabled:this.props.disabled,value:'everyone'},c('React').createElement(c('XUIText.react'),{display:'block'},h._("People in any location"))),c('React').createElement(k,{disabled:this.props.disabled,value:'targeted'},c('React').createElement(c('XUIText.react'),{display:'block',key:'title'},h._("People in a specific location"))))};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectPageFetcherQuery.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],kind:"Fragment",metadata:null,name:"MediaEffectPageFetcherQuery",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"id",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"InlineFragment",type:"Page",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"MultiPolygon",name:"geo_polygon",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Polygon",name:"polygons",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Location",name:"points",plural:true,selections:[{kind:"ScalarField",alias:"lat",args:null,name:"latitude",storageKey:null},{kind:"ScalarField",alias:"lng",args:null,name:"longitude",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}],storageKey:null}],type:"Query"},id:"1749336131764185",kind:"Batch",metadata:{},name:"MediaEffectPageFetcherQuery",query:{argumentDefinitions:[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],kind:"Root",name:"MediaEffectPageFetcherQuery",operation:"query",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"id",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"InlineFragment",type:"Page",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"MultiPolygon",name:"geo_polygon",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Polygon",name:"polygons",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Location",name:"points",plural:true,selections:[{kind:"ScalarField",alias:"lat",args:null,name:"latitude",storageKey:null},{kind:"ScalarField",alias:"lng",args:null,name:"longitude",storageKey:null}],storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}]}],storageKey:null}]},text:null};f.exports=h}),null);
__d('MediaEffectPageFetcher',['Promise','GraphAPI','RelayFBEnvironment','RelayModern','idx','MediaEffectPageFetcherQuery.graphql'],(function a(b,c,d,e,f,g){'use strict';var h=c('RelayModern').fetchQuery,i=c('RelayModern').graphql,j=function l(){return c('MediaEffectPageFetcherQuery.graphql')},k={fetchLocation:function l(m){return c('Promise').all([c('GraphAPI')('2.5').object('page',m).get({fields:'name, location, place_type'}),h(c('RelayFBEnvironment'),j,{id:m})]).then(function(n){var o,p,q=n[0],r=(o=n[1])!=null?(o=o.node)!=null?(o=o.geo_polygon)!=null?o.polygons:o:o:o;if(((p=q)!=null?p.location:p)&&r)q.location.geo_polygon=r.map(function(s){var t;return (t=s)!=null?t.points:t});return q})}};f.exports=k}),null);
__d('MediaEffectMetadataLocationV2.react',['cx','fbt','GeoCoordinates','InputLabel.react','LocationConstants','Log','MediaEffectCard.react','MediaEffectLocationRadiusSlider.react','MediaEffectLocationTargetingEnabledSelector.react','MediaEffectLocationTargetingMap.react','MediaEffectLocationTargetingTypeahead.react','MediaEffectPageFetcher','MediaEffectPlaceDescriptionRecord','React','XUICheckboxInput.react','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=.4;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$MediaEffectMetadataLocationV23=function(o){if(o==='everyone')this.props.onLocationSelected(null);this.props.onLocationTargetTypeSelected(o)}.bind(this);this.$MediaEffectMetadataLocationV24=function(o){this.props.onLocationSelected(o?new (c('MediaEffectPlaceDescriptionRecord'))({key:o}):null)}.bind(this);this.$MediaEffectMetadataLocationV25=function(o){this.props.onLocationSelected(new (c('MediaEffectPlaceDescriptionRecord'))({latitude:o.latitude,longitude:o.longitude,radius:l,manual_geo:true}))}.bind(this);this.$MediaEffectMetadataLocationV26=function(o){if(this.props.location)this.props.onLocationSelected(this.props.location.merge({radius:o,manual_geo:true}));}.bind(this);this.$MediaEffectMetadataLocationV27=function(o){if(this.props.location)this.props.onLocationSelected(this.props.location.merge({manual_geo:o}));}.bind(this);this.$MediaEffectMetadataLocationV28=function(){if(this.props.location)this.props.onLocationSelected(this.props.location.merge({constrain_eligibility:!this.props.location.constrain_eligibility}));}.bind(this);this.state={isLoading:false}}m.prototype.componentDidMount=function(){this.$MediaEffectMetadataLocationV21()};m.prototype.componentWillReceiveProps=function(n){var o,p;if(this.state.isLoading&&(((o=n.location)!=null?o.name:o)||!((p=n.location)!=null?p.name:p)))this.setState({isLoading:false});};m.prototype.componentDidUpdate=function(n,o){this.$MediaEffectMetadataLocationV21()};m.prototype.$MediaEffectMetadataLocationV21=function(){if(this.props.location&&this.props.location.key&&!(this.props.location.name&&this.props.location.latitude&&this.props.location.longitude)&&!this.state.isLoading)this.$MediaEffectMetadataLocationV22(this.props.location.key);};m.prototype.$MediaEffectMetadataLocationV22=function(n){this.setState({isLoading:true},function(){c('MediaEffectPageFetcher').fetchLocation(n).done(function(o){this.props.onLocationSelected(new (c('MediaEffectPlaceDescriptionRecord'))({name:o.name,key:o.id,latitude:o.location.latitude,longitude:o.location.longitude,polygons:o.location.geo_polygon,radius:l,manual_geo:false}))}.bind(this),function(){c('Log').info('Failed to fetch Page %s',n);this.props.onLocationSelected(null)}.bind(this))}.bind(this))};m.prototype.render=function(){var n,o=this.props.location,p=i._("Choose whether your effect can be discovered anywhere or only at a specific location.");return c('React').createElement('div',null,c('React').createElement(c('MediaEffectCard.react'),{title:i._("Location"),tooltip:p},c('React').createElement(c('MediaEffectLocationTargetingEnabledSelector.react'),{disabled:!!this.props.disabled,locationTargetType:this.props.locationTargetType,onTypeSelected:this.$MediaEffectMetadataLocationV23})),this.props.locationTargetType==='targeted'?c('React').createElement('div',null,c('React').createElement(c('MediaEffectLocationTargetingTypeahead.react'),{disabled:this.props.disabled,isLoading:this.state.isLoading,isValidating:this.props.isValidating,location:this.props.location,onLocationSelected:this.$MediaEffectMetadataLocationV24,selectedOwner:this.props.selectedOwner}),!this.props.disabled&&o&&o.latitude&&o.longitude&&(o.manual_geo||!o.polygons)?c('React').createElement(c('MediaEffectLocationRadiusSlider.react'),{className:"_4szz _4sz-",onChange:this.$MediaEffectMetadataLocationV26,radius:o.radius||l}):null,c('React').createElement(c('MediaEffectLocationTargetingMap.react'),{className:"_4szz _4sz_",disabled:this.props.disabled,isLoading:this.state.isLoading,location:this.props.location,onLocationSelected:this.$MediaEffectMetadataLocationV25,onManualLocationToggled:this.$MediaEffectMetadataLocationV27}),c('React').createElement(c('InputLabel.react'),{className:"_t2f"},c('React').createElement(c('XUICheckboxInput.react'),{checked:(n=this.props.location)!=null?n.constrain_eligibility:n,disabled:this.props.disabled,onClick:this.$MediaEffectMetadataLocationV28}),c('React').createElement('label',null,i._("This effect can only be used by people at this location.")))):null)};f.exports=m}),null);
__d("XMediaEffectFrameAsyncSubmitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/effects\/frame\/submit\/",{flow_type:{type:"Enum",required:true,enumType:1},creation_referrer:{type:"Enum",enumType:1},source_id:{type:"FBID"},action_context:{type:"String"},active_tab:{type:"Enum",enumType:1},preview_on_camera:{type:"Bool",defaultValue:false}})}),null);
__d("XMediaEffectMaskAsyncUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/effects\/ar_effect\/upload\/",{effect_id:{type:"FBID"},preview_on_camera:{type:"Bool",defaultValue:false},need_update_review:{type:"Bool",defaultValue:false},review_job_id:{type:"FBID"}})}),null);
__d('MediaEffectRequestBuilder',['invariant','regeneratorRuntime','AsyncResponse','AsyncUploadRequest','FXEntMediaEffectSubmissionStatus','immutable','MediaEffectFrameCreateDialogDataStore','MediaEffectMaskUploadDataStore','MediaEffectMetadataActionCreators','MediaEffectMetadataStore','MediaEffectReactFrameEditorDataStore','MediaEffectReactFrameSerializer','MediaEffectTemplateDataStore','MediaEffectUserContext','XMediaEffectAsyncEditController','XMediaEffectFrameAsyncSubmitController','XMediaEffectMaskAsyncUploadController','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m,n,o,p,q,r;function s(y){this.effectID=y;this.fbOnly=c('MediaEffectUserContext').includesFBOnly;this.previewOnCamera=false;this.onSuccessComplete=c('emptyFunction');this.onFailureComplete=c('emptyFunction')}s.forCreate=function(){return new this(null)};s.forUpdate=function(y){return new this(y)};s.prototype.setOnSuccessComplete=function(y){this.onSuccessComplete=y;return this};s.prototype.setOnFailureComplete=function(y){this.onFailureComplete=y;return this};s.prototype.setSendPreviewNotification=function(y){this.previewOnCamera=y;return this};s.prototype.getRequest=function(){throw new Error('Abstract method!')};s.prototype.genSend=function y(){return c('regeneratorRuntime').async(function z(aa){while(1)switch(aa.prev=aa.next){case 0:this.getRequest().send();case 1:case 'end':return aa.stop();}},null,this)};i=babelHelpers.inherits(t,s);j=i&&i.prototype;t.prototype.getFrameData=function(y,z,aa){return c('immutable').Map(c('MediaEffectMetadataStore').getRequestData(this.fbOnly)).withMutations(function(ba){y.toSeq().forEach(function(ca,da){ba.set(da,ca)});if(z)ba.set('color_palette',z);if(aa)ba.set('variant_of_template',aa);})};t.prototype.getFrameUploadRequest=function(y){var z=c('MediaEffectFrameCreateDialogDataStore').getState(),aa=c('XMediaEffectFrameAsyncSubmitController').getURIBuilder().setString('action_context',JSON.stringify(z.eventDialogContext.actionContext)).setEnum('active_tab',z.eventDialogContext.activeTab).setFBID('source_id',z.sourceID).setEnum('flow_type',z.flowType).setEnum('creation_referrer',z.creationReferrer).setBool('preview_on_camera',this.previewOnCamera).getURI(),ba=y.toObject();String(ba.fbid)===String(this.effectID)||h(0);var ca={thumbnail_file:ba.thumbnail};return new (c('AsyncUploadRequest'))().setURI(aa).setAllowCrossOrigin(false).setData(ba).setFiles(ca)};function t(){i.apply(this,arguments)}k=babelHelpers.inherits(u,t);l=k&&k.prototype;u.prototype.genSend=function y(){return c('regeneratorRuntime').async(function z(aa){while(1)switch(aa.prev=aa.next){case 0:aa.next=2;return c('regeneratorRuntime').awrap(c('MediaEffectReactFrameEditorDataStore').genFlushDirtyTextImageAssetIfAny());case 2:this.getRequest().send();case 3:case 'end':return aa.stop();}},null,this)};u.prototype.getRequest=function(){var y=c('immutable').Map(c('MediaEffectReactFrameSerializer').serializeFrame(c('MediaEffectReactFrameEditorDataStore').getState())),z=this.getFrameUploadRequest(this.getFrameData(y,null));z.subscribe('success',function(aa,ba){this.onSuccessComplete(ba.getResponse())}.bind(this));z.subscribe('failure',function(aa,ba){this.onFailureComplete(ba.getResponse())}.bind(this));return z};function u(){k.apply(this,arguments)}m=babelHelpers.inherits(v,t);n=m&&m.prototype;v.prototype.getRequest=function(){var y=c('MediaEffectTemplateDataStore').getState(),z=c('immutable').Map(c('MediaEffectReactFrameSerializer').serializeFrame(c('MediaEffectReactFrameEditorDataStore').getState())),aa=this.getFrameUploadRequest(this.getFrameData(z,y.sourceColorPalette.toString()));aa.subscribe('success',function(ba,ca){var da=0,ea=ca.getResponse(),fa=ea.payload;y.templateVariations.forEach(function(ga){var ha=this.getFrameUploadRequest(this.getFrameData(c('immutable').Map(c('MediaEffectReactFrameSerializer').serializeFrame(ga.frameData)),ga.colorPalette.toString(),fa.effect.id));ha.subscribe('success',function(ia,ja){da++;if(da===y.templateVariations.count())this.onSuccessComplete(ca.getResponse());}.bind(this));ha.send()}.bind(this))}.bind(this));aa.subscribe('failure',function(ba,ca){this.onFailureComplete(ca.getResponse())}.bind(this));return aa};function v(){m.apply(this,arguments)}o=babelHelpers.inherits(w,s);p=o&&o.prototype;w.prototype.getRequest=function(){var y=c('XMediaEffectMaskAsyncUploadController').getURIBuilder().setFBID('effect_id',this.effectID).setBool('preview_on_camera',this.previewOnCamera).getURI(),z=c('MediaEffectMetadataStore').getState(),aa=c('MediaEffectMetadataStore').getRequestData(this.fbOnly),ba=aa.media_effect_save_as_draft,ca=Object.assign({},aa);aa.media_effect_save_as_draft=true;var da=c('MediaEffectMaskUploadDataStore').getRequestFiles(),ea=da.effect_review_material_id,fa=da.thumbnail_file,ga=babelHelpers.objectWithoutProperties(da,['effect_review_material_id','thumbnail_file']);ca.effect_review_material_id=ea;ca.need_update_review=ga.mask_files&&ga.mask_files.length>0&&this.effectID&&z.submissionStatus===c('FXEntMediaEffectSubmissionStatus').APPROVED;var ha=new (c('AsyncUploadRequest'))().setURI(y).setAllowCrossOrigin(false).setData(ca).setFiles({mask_thumbnail_file:fa});ha.subscribe('failure',function(ia,ja){this.onFailureComplete(ja.getResponse())}.bind(this));ha.subscribe('success',function(ia,ja){var ka=ja.getResponse().payload.effect.id;c('MediaEffectMetadataActionCreators').updateEffectID(ka);var la=ja.getResponse().payload.updateReviewJobID,ma=c('XMediaEffectMaskAsyncUploadController').getURIBuilder().setFBID('effect_id',ka).setFBID('review_job_id',la).getURI(),na=new (c('AsyncUploadRequest'))().setURI(ma).setAllowCrossOrigin(false).setData(ca).setFiles(ga);na.subscribe('complete',function(oa,pa){var qa=pa.find(function(sa){return !sa.isSuccess()});if(qa){this.onFailureComplete(qa.getResponse());return}if(!ba){ca.media_effect_save_as_draft=false;var ra=new (c('AsyncUploadRequest'))().setURI(ma).setAllowCrossOrigin(false).setData(ca);ra.subscribe('success',function(sa,ta){this.onSuccessComplete(ta.getResponse())}.bind(this));ra.subscribe('failure',function(sa,ta){this.onFailureComplete(ta.getResponse())}.bind(this));ra.send()}else this.onSuccessComplete(pa.length?pa[pa.length-1].getResponse():ja.getResponse());}.bind(this));na.send()}.bind(this));return ha};function w(){o.apply(this,arguments)}q=babelHelpers.inherits(x,s);r=q&&q.prototype;x.prototype.getRequest=function(){var y=c('XMediaEffectAsyncEditController').getURIBuilder().setFBID('media_effect_id',this.effectID).getURI(),z=c('MediaEffectMetadataStore').getRequestData(this.fbOnly),aa={thumbnail_file:z.thumbnail},ba=new (c('AsyncUploadRequest'))().setURI(y).setAllowCrossOrigin(false).setData(z).setFiles(aa);ba.subscribe('success',function(ca,da){this.onSuccessComplete(da.getResponse())}.bind(this));ba.subscribe('failure',function(ca,da){this.onFailureComplete(da.getResponse())}.bind(this));return ba};function x(){q.apply(this,arguments)}f.exports={forMask:w,forFrame:u,forTemplate:v,forMetadata:x}}),null);
__d('EventPermalinkCameraFramesCreateWithDefaultFrame.react',['cx','fbt','ix','MediaEffectMetadataActionCreators','AsyncDialog','AsyncRequest','Button.react','DialogX','EventsActionsLogger','EventPermalinkCameraFramesLogging','FBToggleSwitch.react','FXEntMediaEffectStatus','Image.react','MediaEffectFlowType','MediaEffectCreateStep','MediaEffectHubViewTab','MediaEffectOwnerHubHeader.react','MediaEffectCreationReferrer','React','XMediaEffectCreateDialogController','XUICard.react','XUIText.react','XUICardSection.react','BackgroundImage.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=100,n=158;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$EventPermalinkCameraFramesCreateWithDefaultFrame1=function(){c('EventPermalinkCameraFramesLogging').logClick(c('EventsActionsLogger').Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var u=c('XMediaEffectCreateDialogController').getURIBuilder().setEnum('flow_type',c('MediaEffectFlowType').EVENT).setFBID('source_id',this.props.eventID).setEnum('step',c('MediaEffectCreateStep').CREATE).setEnum('ref',c('MediaEffectCreationReferrer').EVENT_PAGE).getURI(),v=this.props.effect.effectData.id;c('AsyncDialog').send(new (c('AsyncRequest'))(u),function(w){w.subscribe(['hide','success'],function(x,event){this.props.effectUpdateHandler(v)}.bind(this))}.bind(this))}.bind(this),q}o.prototype.componentWillMount=function(){c('MediaEffectMetadataActionCreators').initFrameData(this.props.effect.effectEditorData)};o.prototype.isToggleEnabled=function(){var p=this.props.effect.effectData.status;return p===c('FXEntMediaEffectStatus').INACTIVE||p===c('FXEntMediaEffectStatus').ACTIVE};o.prototype.render=function(){var p=this.props.effect.effectData,q=p.status;return c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('MediaEffectOwnerHubHeader.react'),{title:this.props.title,hubLinkTab:c('MediaEffectHubViewTab').LEARN}),c('React').createElement(c('XUICardSection.react'),null,c('React').createElement('div',{className:"_46ca"},p.hasEnabledActivations?c('React').createElement(c('Image.react'),{src:j("353079")}):c('React').createElement(c('Image.react'),{src:j("353078")}),c('React').createElement('div',{className:"_46cb"},this.isToggleEnabled()?c('React').createElement(c('FBToggleSwitch.react'),{checked:q===c('FXEntMediaEffectStatus').ACTIVE,animate:true,onToggle:function(){return this.props.toggleEventHandler(p.id,q===c('FXEntMediaEffectStatus').INACTIVE)}.bind(this),tooltip:q===c('FXEntMediaEffectStatus').ACTIVE?i._("Your camera frame is on"):i._("Your camera frame is off")}):null),c('React').createElement('div',{className:"_46cd"},c('React').createElement(c('BackgroundImage.react'),{backgroundSize:'contain',height:n,src:p.thumbnailPortrait,width:m})),c('React').createElement('div',{className:"_46cf"},c('React').createElement(c('XUIText.react'),{size:'medium',weight:'bold',className:"_46cg"},i._("Help people share at your event")),c('React').createElement('p',{className:"_46ch"},i._("You can use the default camera frame or create a custom one for your guests to use in photos and videos they share.")),c('React').createElement('div',{className:"_46ci"},c('React').createElement(c('Button.react'),{onClick:this.$EventPermalinkCameraFramesCreateWithDefaultFrame1,use:'default',label:i._("Upload New")}))))))};f.exports=o}),null);
__d('MediaEffectAnalyticsStats.react',['cx','fbt','React','XUIText.react','intlSummarizeNumber'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(l){return c('React').createElement('div',{className:"_1rem"},c('React').createElement(c('XUIText.react'),{className:"_4vei",size:l.size,weight:l.weight},i._("{count}",[i.param('count',c('intlSummarizeNumber')(l.count))])),c('React').createElement(c('XUIText.react'),null,l.label))};f.exports=j}),null);
__d('MediaEffectStatusIndicator.react',['cx','fbt','AsyncDialog','AsyncRequest','FXEntMediaEffectStatus','Link.react','MediaEffectAnalyticsStats.react','MediaEffectCreateStep','MediaEffectCreationReferrer','MediaEffectFlowType','MediaEffectHubStrings','React','SUIText.react','XMediaEffectCreateDialogController','XUIButton.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogTitle.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectStatusIndicator1=function(event){event.preventDefault();var s=c('XMediaEffectCreateDialogController').getURIBuilder().setEnum('flow_type',c('MediaEffectFlowType').BASIC_HUB).setEnum('step',c('MediaEffectCreateStep').EDIT).setFBID('media_effect_id',this.props.mediaEffect.id).setEnum('ref',c('MediaEffectCreationReferrer').HUB).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(s))}.bind(this),o}l.prototype.render=function(){var n=this.props.mediaEffect,o=m(n.id),p=n.errors&&n.errors.length>0?c('React').createElement('span',{className:"_2pck"},c('MediaEffectHubStrings').getNeedsAttention()):c('MediaEffectHubStrings').getTextForStatus(n.status),q=void 0,r=void 0,s=void 0,t=null,u=null;switch(n.status){case c('FXEntMediaEffectStatus').ACTIVE:q="_2l7j";break;case c('FXEntMediaEffectStatus').ARCHIVED:q="_2l7k";break;case c('FXEntMediaEffectStatus').COMPLETED:q="_2l7n";break;case c('FXEntMediaEffectStatus').DRAFT:q="_2l85";break;case c('FXEntMediaEffectStatus').INACTIVE:q="_2l86";break;case c('FXEntMediaEffectStatus').IN_REVIEW:q="_2l87";break;case c('FXEntMediaEffectStatus').SCHEDULED:q="_2l88";break;case c('FXEntMediaEffectStatus').NOT_APPROVED:q="_2l89";break;case c('FXEntMediaEffectStatus').NEEDS_ATTENTION:q="_2pck";if(n.needsAttentionReason==='will_deprecate_soon')u={title:i._("Your Effect is Out of Date"),text:i._("This effect was created an old version of AR Studio which will be deprecated soon. Please update AR Studio to the latest version and resubmit your effect.")};break;case c('FXEntMediaEffectStatus').DEPRECATED:q="_fd8";u={title:i._("Your Effect Requires an Update"),text:i._("This effect was created with an AR Studio version that was deprecated. To have your effect appear in the camera again, update AR Studio to the latest version and resubmit the effect.")};break;}var v=null;if(u)v=c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,contextRef:function w(){return t},hoverContextRef:function w(){return t},width:260},c('React').createElement(c('XUIContextualDialogTitle.react'),null,u.title),c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('div',{className:"_1fw7"},u.text),c('React').createElement('div',{className:"_61ud"},c('React').createElement(c('XUIButton.react'),{href:o,label:i._("Update Effect"),onClick:this.$MediaEffectStatusIndicator1,use:'confirm'}))));if(n.rejectedReasons&&n.rejectedReasons.length>0){r=n.rejectedReasons[0].trim();s=n.rejectedReasons.length>1?i._({"*":"+ {number} more reasons","_1":"+ 1 more reason"},[i.plural(n.rejectedReasons.length-1,'number')]):null;p=c('React').createElement(c('Link.react'),{href:o,onClick:this.$MediaEffectStatusIndicator1},p)}return c('React').createElement('div',{className:"_2l7i"+(this.props.showOneLine?' '+"_oer":''),style:{width:this.props.width}},c('React').createElement('div',{ref:function w(x){return t=x}},c('React').createElement('span',{className:c('joinClasses')(q,"_3-8_"+(n.status!==c('FXEntMediaEffectStatus').ARCHIVED?' '+"_2l7h":''))}),p),v,this.props.showReasons?this.props.showOneLine?c('React').createElement(c('SUIText.react'),{className:"_3-99",display:'truncate',shade:'light'},r,' ',s):c('React').createElement('div',{className:"_28gq"},c('React').createElement('div',null,r),s):null,this.props.showOneLine&&n.status!==c('FXEntMediaEffectStatus').NOT_APPROVED&&n.activateCount>0?c('React').createElement(c('MediaEffectAnalyticsStats.react'),{count:n.activateCount,label:i._({"*":"Uses","_1":"Use"},[i.plural(n.activateCount)])}):null)};l.defaultProps={showReasons:true};function m(n){if(document.location.hash){return document.location.hash+'&effect_id='+n}else return '#effect_id='+n;}f.exports=l}),null);
__d("MediaEffectShareReferrer",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONFIRM_DIALOG:"confirm_dialog",DETAIL_DIALOG:"detail_dialog",HUB_EFFECT_PREVIEW:"hub_effect_preview"})}),null);
__d("XMediaEffectAsyncRequestEffectNotificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/async\/request_notification\/",{effect_id:{type:"FBID"},share_actor_id:{type:"FBID"},share_target_id:{type:"FBID"}})}),null);
__d("XMediaEffectDeeplinkFallbackController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/tryit\/{effect_id}\/",{effect_id:{type:"FBID",required:true}})}),null);
__d("XMediaEffectHubEffectArchiveAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/effects\/async\/archive\/",{effect_ids:{type:"FBIDVector",required:true}})}),null);
__d("XMediaEffectShareEffectDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/media_effect\/share\/dialog\/",{page_id:{type:"FBID"},effect_id:{type:"FBID"},ref:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d('MediaEffectHubEffectActionConfig',['fbt','AsyncDialog','AsyncRequest','AsyncResponse','Clipboard','immutable','MediaEffectCreateStep','MediaEffectCreationReferrer','MediaEffectFlowType','MediaEffectHubDispatcher','MediaEffectHubFunnelLogger','MediaEffectMetadataDataLoader','MediaEffectShareReferrer','React','SimpleXUIDialog','XMediaEffectAsyncRequestEffectNotificationController','XMediaEffectCreateDialogController','XMediaEffectDeeplinkFallbackController','XMediaEffectHubEffectArchiveAsyncController','XMediaEffectShareEffectDialogController','XProfilePictureOverlayLandingController','XUIDialogButton.react','XUIDialogCancelButton.react','goURI'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Set;function j(u,v,w,x){c('MediaEffectHubFunnelLogger').logActionWithTag('HUB_EFFECT_ACTIVE_STATUS_CHANGE','send:'+(u?'enable':'disable'));c('MediaEffectMetadataDataLoader').changeActiveStatus(u,v).then(function(y){var z=y.payload.effects;c('MediaEffectHubFunnelLogger').logActionWithTag('HUB_EFFECT_ACTIVE_STATUS_CHANGE','receive');c('MediaEffectHubDispatcher').dispatch({type:'effects_edited',payload:{effects:z}});w&&w()})['catch'](function(y){c('AsyncResponse').defaultErrorHandler(y);x&&x()}).done()}function k(u,v,w){c('MediaEffectHubFunnelLogger').logActionWithTag('HUB_EFFECT_ARCHIVE','send');var x=c('XMediaEffectHubEffectArchiveAsyncController').getURIBuilder().setFBIDVector('effect_ids',u.toSeq().map(function(y){return y.id}).toArray()).getURI();new (c('AsyncRequest'))().setURI(x).setHandler(function(y){var z=y.payload.effects;c('MediaEffectHubFunnelLogger').logActionWithTag('HUB_EFFECT_ARCHIVE','receive');c('MediaEffectHubDispatcher').dispatch({type:'effects_edited',payload:{effects:z}});c('MediaEffectHubDispatcher').dispatch({type:'effects_selected',payload:{effectIDs:i()}});v&&v()}).setErrorHandler(function(y){c('AsyncResponse').defaultErrorHandler(y);w&&w()}).send()}var l={getLabel:function u(){return h._("Turn On")},onClick:j.bind(null,true)},m={getLabel:function u(){return h._("Turn Off")},onClick:j.bind(null,false)},n={getLabel:function u(){return h._("Edit")},onClick:function u(v){c('MediaEffectHubFunnelLogger').logActionWithTag('HUB_EFFECT_OPEN','menu-edit');var w=c('XMediaEffectCreateDialogController').getURIBuilder().setEnum('flow_type',c('MediaEffectFlowType').BASIC_HUB).setEnum('step',c('MediaEffectCreateStep').EDIT).setFBID('media_effect_id',v.id).setEnum('ref',c('MediaEffectCreationReferrer').HUB).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(w))}},o={getLabel:function u(){return h._("Duplicate")},onClick:function u(v){c('MediaEffectHubFunnelLogger').logActionWithTag('HUB_EFFECT_DUPLICATE');var w=c('XMediaEffectCreateDialogController').getURIBuilder().setEnum('flow_type',c('MediaEffectFlowType').BASIC_HUB).setEnum('step',c('MediaEffectCreateStep').DUPLICATE).setFBID('media_effect_id',v.id).setEnum('ref',c('MediaEffectCreationReferrer').HUB).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(w))}},p={getLabel:function u(){return h._("Archive")},onClick:function u(v,w,x){return c('SimpleXUIDialog').showEx(h._("Once you archive a frame, it will be unavailable for people to use. You won't be able to make the frame active again."),h._({"*":"Archive Frames?","_1":"Archive Frame?"},[h.plural(v.size)]),c('React').createElement('div',null,c('React').createElement(c('XUIDialogCancelButton.react'),{action:'cancel'}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:h._("Archive"),onClick:function y(){return k(v,w,x)},use:'confirm'})))}},q={getLabel:function u(){return h._("Add to Profile Picture")},onClick:function u(v){c('MediaEffectHubFunnelLogger').logActionWithTag('HUB_EFFECT_CHANGE_PROFILE_PICTURE');var w=v.profileFrame&&v.profileFrame.id;if(w){var x=c('XProfilePictureOverlayLandingController').getURIBuilder().setInt('selected_overlay_id',w).setInt('profile_id',v.owner.id).getURI();c('goURI')(x)}}},r={getLabel:function u(){return h._("Preview On Mobile")},onClick:function u(v){var w=c('XMediaEffectAsyncRequestEffectNotificationController').getURIBuilder().setFBID('effect_id',v).getURI();new (c('AsyncRequest'))(w).setHandler(function(x){c('SimpleXUIDialog').show(h._("Check your notification on mobile to preview the frame."))}).setErrorHandler(function(x){c('SimpleXUIDialog').show(h._("There was a problem sending the notification."))}).send()}},s={getLabel:function u(){return h._("Share as Page")},onClick:function u(v){var w=c('XMediaEffectShareEffectDialogController').getURIBuilder().setFBID('page_id',v.owner.id.toString()).setFBID('effect_id',v.id.toString()).setEnum('ref',c('MediaEffectShareReferrer').HUB_EFFECT_PREVIEW).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(w))}},t={getLabel:function u(){return h._("Get Shareable Link")},onClick:function u(v){var w=c('XMediaEffectDeeplinkFallbackController').getURIBuilder().setFBID('effect_id',v).getURI().setDomain('www.facebook.com').toString();c('Clipboard').copy(w)}};f.exports={activate:l,archive:p,changeActiveStatus:j,changeProfilePicture:q,deactivate:m,duplicate:o,edit:n,getShareableLink:t,previewOnMobile:r,shareEffect:s}}),null);
__d("MediaEffectGenerationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTO_GENERATED:"auto_generated",USER_GENERATED:"user_generated"})}),null);
__d('MediaEffectOwnerHubEffectCard.react',['cx','fbt','AsyncDialog','AsyncRequest','ContextualDialogArrow','ContextualLayerAutoFlip','FXEntMediaEffectStatus','Layout.react','List.react','MediaEffectMetadataActionCreators','Link.react','Log','MediaEffectCreateStep','MediaEffectHubViewTab','MediaEffectOwnerHubHeader.react','MediaEffectReactFrameEditorPreviewCanvasContainer.react','MediaEffectStatusIndicator.react','PopoverMenu.react','React','ReactXUIMenu','XMediaEffectCreateDialogController','XUICard.react','XUICardSection.react','XUIText.react','MediaEffectCreationReferrer'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('ReactXUIMenu').Item,o='archive',p='toggle';j=babelHelpers.inherits(q,c('React').PureComponent);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.onEffectLinkClick=function(){var w=c('XMediaEffectCreateDialogController').getURIBuilder().setEnum('flow_type',this.props.flowType).setEnum('step',c('MediaEffectCreateStep').EDIT).setFBID('media_effect_id',this.props.effectID).setEnum('ref',c('MediaEffectCreationReferrer').HUB).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(w),function(x){x.subscribe(['hide','success'],function(y,event){this.props.effectUpdateHandler(this.props.effectID)}.bind(this))}.bind(this))}.bind(this),this.onMenuItemClick=function(event,w){var x=w.item.getValue();switch(x){case p:if(this.isToggleEnabled())this.props.toggleEventHandler(this.props.effectID,this.props.effect.effectData.status===c('FXEntMediaEffectStatus').INACTIVE);break;case o:this.props.archiveEventHandler(this.props.effect.effectData);break;default:c('Log').warn('Unexpected action sent to this handler: '+x);}}.bind(this),s}q.prototype.componentWillMount=function(){c('MediaEffectMetadataActionCreators').initFrameData(this.props.effect.effectEditorData)};q.prototype.buildMenu=function(){var r=this.props.effect.effectData.status,s=r===c('FXEntMediaEffectStatus').INACTIVE?i._("Turn On"):i._("Turn Off"),t=this.isToggleEnabled();return c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.onMenuItemClick},c('React').createElement(n,{value:p},c('React').createElement('span',{className:(t?"_2ugo":'')+(!t?' '+"_2ugp":'')},s)),c('React').createElement(n,{value:o},i._("Archive")))};q.prototype.isToggleEnabled=function(){var r=this.props.effect.effectData.status;return r===c('FXEntMediaEffectStatus').INACTIVE||r===c('FXEntMediaEffectStatus').ACTIVE};q.prototype.render=function(){return c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('MediaEffectOwnerHubHeader.react'),{hubLinkTab:c('MediaEffectHubViewTab').MANAGE,title:this.props.title}),c('React').createElement(c('XUICardSection.react'),null,c('React').createElement(c('Layout.react'),{className:"_2ugq"},c('React').createElement(l,null,c('React').createElement(c('MediaEffectReactFrameEditorPreviewCanvasContainer.react'),{previewHeight:80,previewWidth:80})),c('React').createElement(m,{className:"_2ugr"},c('React').createElement(c('List.react'),{border:'none',spacing:'small'},c('React').createElement('li',null,c('React').createElement(c('Link.react'),{href:'#',onClick:this.onEffectLinkClick},c('React').createElement(c('XUIText.react'),null,this.props.effect.effectData.name))),c('React').createElement('li',null,c('React').createElement(c('MediaEffectStatusIndicator.react'),{className:"_2ugs",mediaEffect:this.props.effect.effectData})),c('React').createElement('li',null,c('React').createElement(c('XUIText.react'),null,i._({"*":{"*":"{activateCount} Uses","_1":"{activateCount} Use"}},[i.param('activateCount',this.props.effect.effectData.activateCount,[0]),i.plural(this.props.effect.effectData.activateCount)]))))),c('React').createElement(l,{className:"_2ugt"},c('React').createElement(c('PopoverMenu.react'),{alignh:'right',behaviors:[c('ContextualDialogArrow')],layerBehaviors:[c('ContextualLayerAutoFlip')],menu:this.buildMenu(),position:'below'},c('React').createElement('div',{className:"_2ugu"}))))))};f.exports=q}),null);
__d('MediaEffectOwnerHubNullStateCard.react',['cx','invariant','EventPermalinkCameraFramesCreate.react','EventPermalinkCameraFramesCreateWithDefaultFrame.react','MediaEffectFlowType','MediaEffectGenerationType','MediaEffectOwnerHubHeader.react','React','XUICard.react','XUICardSection.react','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m;switch(this.props.flowType){case c('MediaEffectFlowType').EVENT:var n=(m=this.props)!=null?(m=m.optionalData)!=null?m.eventActionContext:m:m;n||i(0);var o=this.props.effect;if(o&&o.effectData&&o.effectData.generationType===c('MediaEffectGenerationType').AUTO_GENERATED){return c('React').createElement(c('EventPermalinkCameraFramesCreateWithDefaultFrame.react'),{actionContext:n,effect:o,effectUpdateHandler:this.props.effectUpdateHandler,eventID:this.props.owner,flowType:this.props.flowType,key:'EffectCard'+o.effectData.id,title:this.props.title,toggleEventHandler:this.props.toggleEventHandler})}else return c('React').createElement(c('EventPermalinkCameraFramesCreate.react'),{actionContext:n,eventID:this.props.owner,title:this.props.title});default:return c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('MediaEffectOwnerHubHeader.react'),{title:this.props.title}),c('React').createElement(c('XUICardSection.react'),null,c('React').createElement('div',{className:"_fw6"},'No data!')));}};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('MediaEffectStoreSharedDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("XMediaEffectAsyncFetchEffectController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/async_load_effect\/",{effect_ids:{type:"FBIDSet"}})}),null);
__d('MediaEffectStore',['AsyncRequest','FluxLoadObjectStore','LoadObject','MediaEffectGenerationType','MediaEffectStoreSharedDispatcher','XMediaEffectAsyncFetchEffectController','idx'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxLoadObjectStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);k.explicitlyRegisterStore(this)}j.prototype.reduce=function(k,l){switch(l.action){case 'media_effect/add':return this.__handleOne(k,l.key,l.value);case 'media_effect_saved':var m=k.filter(function(p,q){var r,s=p.getValue();return ((r=s)!=null?(r=r.effectData)!=null?r.generationType:r:r)===c('MediaEffectGenerationType').USER_GENERATED});return this.__handleOne(m,l.effect.effectData.id,l.effect);case 'media_effect/bootstrap':l.bootstrapData.forEach(function(p){k.set(p.effect,c('LoadObject').withValue(p.data))});break;case 'media_effect/error':return this.__handleOne(k,l.key,l.error);case 'media_effect/reload':this.__load(l.key);return k.remove(l.key);case 'media_effect/remove':return k.remove(l.key);case 'media_effect/update_effect':var n=k.get(l.key).getValue();if(n){var o=Object.assign({},n);o.effectData=l.effectData;return this.__handleOne(k.remove(l.key),l.key,o)}break;}return k};j.prototype.__load=function(k){var l=c('XMediaEffectAsyncFetchEffectController').getURIBuilder().setFBIDSet('effect_ids',[k]).getURI();new (c('AsyncRequest'))(l).setHandler(function(m){c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect/add',key:k,value:m.getPayload().effects[0]})}).setErrorHandler(function(m){c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect/error',key:k,error:m.getError()})}).send()};f.exports=new j(c('MediaEffectStoreSharedDispatcher'))}),null);
__d("XMediaEffectAsyncFetchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/fbcameraeffects\/async_load\/",{owner_ids:{type:"FBIDSet"},creator_ids:{type:"FBIDSet"},statuses:{type:"EnumSet",enumType:null},types:{type:"EnumSet",enumType:null},creation_date_range:{type:"StringToIntMap"},effect_id:{type:"FBID"},effect_name:{type:"String"},effect_tag:{type:"String"},whitelisted:{type:"Bool",defaultValue:false},gatekeeper:{type:"String"}})}),null);
__d('MediaEffectOwnerStore',['AsyncRequest','FluxLoadObjectStore','FXEntMediaEffectStatus','LoadObject','MediaEffectStore','MediaEffectStoreSharedDispatcher','XMediaEffectAsyncFetchController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[c('FXEntMediaEffectStatus').ACTIVE,c('FXEntMediaEffectStatus').COMPLETED,c('FXEntMediaEffectStatus').DRAFT,c('FXEntMediaEffectStatus').IN_REVIEW,c('FXEntMediaEffectStatus').INACTIVE,c('FXEntMediaEffectStatus').NOT_APPROVED,c('FXEntMediaEffectStatus').SCHEDULED];h=babelHelpers.inherits(k,c('FluxLoadObjectStore'));i=h&&h.prototype;function k(l){i.constructor.call(this,l);l.explicitlyRegisterStore(this)}k.prototype.reduce=function(l,m){switch(m.action){case 'media_effect_owner/add':return this.__handleOne(l,m.key,{ownerID:m.key,effects:m.effects});case 'media_effect_owner/bootstrap':m.bootstrapData.forEach(function(s){l.set(s.ownerID,c('LoadObject').withValue(s))});break;case 'media_effect_owner/error':return this.__handleOne(l,m.key,m.error);case 'media_effect_owner/reload':this.__load(m.key);return l.remove(m.key);case 'media_effect_owner/remove':return l.remove(m.key);case 'media_effect_owner/update_add_effect':var n=l.get(m.key).getValue();if(n){n.effects.push(m.effect);return this.__handleOne(l,m.key,{ownerID:m.key,effects:n.effects})}break;case 'media_effect_saved':var o=m.effect.effectData.owner.id,p=l.get(o).getValue();if(p){this.$MediaEffectOwnerStore1();return this.__handleOne(l,o,{ownerID:o,effects:c('MediaEffectStore').getState().keySeq().toArray()})}break;case 'media_effect_owner/update_remove_effect':var q=l.get(m.key).getValue();if(q)if(q.effects.indexOf(m.effect)>=0){var r=q.effects;r.splice(r.indexOf(m.effect),1);return this.__handleOne(l,m.key,{ownerID:m.key,effects:r})}break;}return l};k.prototype.$MediaEffectOwnerStore1=function(){c('MediaEffectStoreSharedDispatcher').waitFor([c('MediaEffectStore').getDispatchToken()])};k.prototype.__load=function(l){var m=c('XMediaEffectAsyncFetchController').getURIBuilder().setFBIDSet('owner_ids',[l]).setEnumSet('statuses',j).getURI();new (c('AsyncRequest'))(m).setHandler(function(n){c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect_owner/add',key:l,effects:n.payload.effects.map(function(o){return o.id})})}).setErrorHandler(function(n){c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect_owner/error',key:l,error:n.getError()})}).send()};f.exports=new k(c('MediaEffectStoreSharedDispatcher'))}),null);
__d('MediaEffectStoresBootstrapper',['MediaEffectFrameEditorDispatcher','MediaEffectMetadataActionCreators','MediaEffectOwnerStore','MediaEffectReactFrameEditorCanvasDataStore','MediaEffectReactFrameEditorDataStore','MediaEffectStore','MediaEffectStoreSharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h=[c('MediaEffectReactFrameEditorDataStore'),c('MediaEffectReactFrameEditorCanvasDataStore')],i=[c('MediaEffectStore'),c('MediaEffectOwnerStore')],j={isBootstrapped:false,getEditorStores:function k(){return h},getMediaEffectStores:function k(){return i},bootstrap:function k(){if(this.isBootstrapped)return;c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.getEditorStores());c('MediaEffectStoreSharedDispatcher').explicitlyRegisterStores(this.getMediaEffectStores());this.bootstrapFontData();this.isBootstrapped=true},bootstrapWithData:function k(l){if(this.isBootstrapped)return;c('MediaEffectFrameEditorDispatcher').explicitlyRegisterStores(this.getEditorStores());c('MediaEffectStoreSharedDispatcher').explicitlyRegisterStores(this.getMediaEffectStores());if(l.fontData){c('MediaEffectMetadataActionCreators').addFontData(l.fontData)}else this.bootstrapFontData();if(l.ownerData)c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect_owner/bootstrap',bootstrapData:l.ownerData});if(l.effectData)c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect/bootstrap',bootstrapData:l.effectData});this.isBootstrapped=true},bootstrapFontData:function k(){c('MediaEffectMetadataActionCreators').bootstrapFontData()}};f.exports=j}),null);
__d('MediaEffectOwnerHubContainer.react',['cx','AsyncRequest','AsyncResponse','CenteredContainer.react','FluxContainer','immutable','MediaEffectFlowType','MediaEffectGenerationType','MediaEffectHubEffectActionConfig','MediaEffectOwnerHubEffectCard.react','MediaEffectOwnerHubHeader.react','MediaEffectOwnerHubNullStateCard.react','MediaEffectOwnerStore','MediaEffectStore','MediaEffectStoresBootstrapper','MediaEffectStoreSharedDispatcher','React','XMediaEffectHubEffectActivationAsyncController','XUICard.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m,n,o=c('immutable').Set;i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;p.prototype.render=function(){return c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('MediaEffectOwnerHubHeader.react'),{title:this.props.title}),c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('CenteredContainer.react'),{className:"_60ll"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))))};function p(){i.apply(this,arguments)}k=babelHelpers.inherits(q,c('React').PureComponent);l=k&&k.prototype;q.prototype.render=function(){return c('React').createElement(c('XUICard.react'),null,c('React').createElement(c('MediaEffectOwnerHubHeader.react'),{title:this.props.title}),c('React').createElement(c('XUICard.react'),null,c('React').createElement('div',{className:"_5-nb"},this.props.errorMessage)))};function q(){k.apply(this,arguments)}m=babelHelpers.inherits(r,c('React').PureComponent);n=m&&m.prototype;r.getStores=function(){return [c('MediaEffectStore'),c('MediaEffectOwnerStore')]};r.calculateState=function(s){var t={isLoading:true};if(!s)return t;var u=c('MediaEffectOwnerStore').get(s.ownerID);if(u.hasError()){var v=u.getError();if(v)t={errorMessage:v.message,isError:true,isLoading:false};}if(!u.hasValue())return t;var w=s.defaultFlowType,x=u.getValueEnforcing().effects;if(x.length===0){t={effectData:null,effectIDs:[],flowType:w,isError:false,isLoading:false,selectedEffectIndex:-1}}else{var y=s.selectedEffectIndex<x.length&&s.selectedEffectIndex>=0?s.selectedEffectIndex:0,z=c('MediaEffectStore').get(x[y]);if(z.hasError()){var aa=z.getError();if(aa)t={errorMessage:aa.message,isError:true,isLoading:false};}else if(z.hasValue()){var ba=z.getValueEnforcing();w=ba.effectData.flowType;t={effectData:ba,effectIDs:x,flowType:w,isError:false,isLoading:false,selectedEffectIndex:y}}else t={isLoading:true};}return t};function r(s){n.constructor.call(this,s);this.effectUpdateHandler=function(v){var w=this.state.effectIDs.length>0&&this.state.selectedEffectIndex>=0?this.state.effectIDs[this.state.selectedEffectIndex]:'';if(v===w)this.setState({isLoading:true});c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect/reload',key:v})}.bind(this);this.toggleEventHandler=function(v,w){var x=c('XMediaEffectHubEffectActivationAsyncController').getURIBuilder().setBool('activate',w).setFBIDVector('effect_ids',[v]).getURI();new (c('AsyncRequest'))().setURI(x).setHandler(function(y){var z=y.getPayload().effects;z.map(function(aa){c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect/update_effect',key:aa.id,effectData:aa})})}).setErrorHandler(function(y){c('AsyncResponse').defaultErrorHandler(y)}).send()};this.archiveEventHandler=function(v){c('MediaEffectHubEffectActionConfig').archive.onClick(o([v]),function(){this.setState({isLoading:true});c('MediaEffectStoreSharedDispatcher').dispatch({action:'media_effect_owner/update_remove_effect',key:this.state.ownerID,effect:v.id})}.bind(this))}.bind(this);var t={defaultFlowType:s.flowType?s.flowType:c('MediaEffectFlowType').BASIC_HUB,effectData:null,effectIDs:[],errorMessage:'',flowType:s.flowType?s.flowType:c('MediaEffectFlowType').BASIC_HUB,isError:false,isLoading:true,ownerID:s.owner,selectedEffectIndex:-1},u=r.calculateState(t);this.state=Object.assign({},t,u)}r.prototype.componentWillMount=function(){c('MediaEffectStoresBootstrapper').bootstrap()};r.prototype.render=function(){var s=this.props,t=s.title,u=s.optionalData,v=this.state,w=v.effectData,x=v.effectIDs,y=v.errorMessage,z=v.flowType,aa=v.isError,ba=v.isLoading,ca=v.ownerID;if(aa){return c('React').createElement(q,{errorMessage:y,title:t})}else if(ba){return c('React').createElement(p,{title:t})}else if(x.length>0&&w&&w.effectData.generationType===c('MediaEffectGenerationType').USER_GENERATED){var da=w;return c('React').createElement(c('MediaEffectOwnerHubEffectCard.react'),{archiveEventHandler:this.archiveEventHandler,effect:da,effectID:da.effectData.id,effectUpdateHandler:this.effectUpdateHandler,flowType:z,key:'EffectCard'+da.effectData.id,title:t,toggleEventHandler:this.toggleEventHandler})}else return c('React').createElement(c('MediaEffectOwnerHubNullStateCard.react'),{effect:w,effectUpdateHandler:this.effectUpdateHandler,flowType:z,optionalData:u,owner:ca,title:t,toggleEventHandler:this.toggleEventHandler});};f.exports=c('FluxContainer').create(r)}),null);
__d('MediaEffectOwnerHubWidgetInit',['MediaEffectOwnerHubContainer.react','MediaEffectStoresBootstrapper','React','ReactRenderer'],(function a(b,c,d,e,f,g){'use strict';var h={init:function i(j){if(j.bootstrapData){c('MediaEffectStoresBootstrapper').bootstrapWithData(j.bootstrapData)}else c('MediaEffectStoresBootstrapper').bootstrap();c('ReactRenderer').renderComponent(c('React').createElement(c('MediaEffectOwnerHubContainer.react'),j.ownerWidgetProps),j.root)}};f.exports=h}),null);