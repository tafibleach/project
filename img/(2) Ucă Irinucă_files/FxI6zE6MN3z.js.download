if (self.CavalryLogger) { CavalryLogger.start_js(["1\/aj6"]); }

__d('SphericalMediaPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:SphericalMediaPerformanceLoggerConfig',this.$SphericalMediaPerformanceTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:SphericalMediaPerformanceLoggerConfig',this.$SphericalMediaPerformanceTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$SphericalMediaPerformanceTypedLogger1={};return this};h.prototype.updateData=function(j){this.$SphericalMediaPerformanceTypedLogger1=babelHelpers['extends']({},this.$SphericalMediaPerformanceTypedLogger1,j);return this};h.prototype.setComputationTimeMs=function(j){this.$SphericalMediaPerformanceTypedLogger1.computation_time_ms=j;return this};h.prototype.setEndTimestampS=function(j){this.$SphericalMediaPerformanceTypedLogger1.end_timestamp_s=j;return this};h.prototype.setEvent=function(j){this.$SphericalMediaPerformanceTypedLogger1.event=j;return this};h.prototype.setFallbackDuration=function(j){this.$SphericalMediaPerformanceTypedLogger1.fallback_duration=j;return this};h.prototype.setFallbackReason=function(j){this.$SphericalMediaPerformanceTypedLogger1.fallback_reason=j;return this};h.prototype.setNormalizedFrameTime=function(j){this.$SphericalMediaPerformanceTypedLogger1.normalized_frame_time=j;return this};h.prototype.setNumSpatialAudioStutters=function(j){this.$SphericalMediaPerformanceTypedLogger1.num_spatial_audio_stutters=j;return this};h.prototype.setProductName=function(j){this.$SphericalMediaPerformanceTypedLogger1.product_name=j;return this};h.prototype.setSpatialReactionsCacheUsed=function(j){this.$SphericalMediaPerformanceTypedLogger1.spatial_reactions_cache_used=j;return this};h.prototype.setSpatialReactionsClustersCount=function(j){this.$SphericalMediaPerformanceTypedLogger1.spatial_reactions_clusters_count=j;return this};h.prototype.setSpatialReactionsCount=function(j){this.$SphericalMediaPerformanceTypedLogger1.spatial_reactions_count=j;return this};h.prototype.setStartTimestampS=function(j){this.$SphericalMediaPerformanceTypedLogger1.start_timestamp_s=j;return this};h.prototype.setVideoID=function(j){this.$SphericalMediaPerformanceTypedLogger1.video_id=j;return this};var i={computation_time_ms:true,end_timestamp_s:true,event:true,fallback_duration:true,fallback_reason:true,normalized_frame_time:true,num_spatial_audio_stutters:true,product_name:true,spatial_reactions_cache_used:true,spatial_reactions_clusters_count:true,spatial_reactions_count:true,start_timestamp_s:true,video_id:true};f.exports=h}),null);
__d('ElementVisibilityObserver',['EventEmitter','getElementRect'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={notvisible:'notvisible',visible:'visible',fullyvisible:'fullyvisible'},k={visiblestart:'visiblestart',visibleend:'visibleend',fullyvisiblestart:'fullyvisiblestart',fullyvisibleend:'fullyvisibleend'};function l(n,o){var p=(n?1:0)+(o?1:0);switch(p){case 0:return j.notvisible;case 1:return j.visible;case 2:return j.fullyvisible;}throw new Error('This cannot happen but keeps flow happy. Happy flow.')}h=babelHelpers.inherits(m,c('EventEmitter'));i=h&&h.prototype;function m(n){i.constructor.call(this);this.$ElementVisibilityObserver1=n;this.$ElementVisibilityObserver2=false;this.$ElementVisibilityObserver3=false}m.prototype.getCurrentState=function(){return l(this.$ElementVisibilityObserver2,this.$ElementVisibilityObserver3)};m.prototype.onMove=function(n){var o=c('getElementRect')(this.$ElementVisibilityObserver1),p=o.top>n.top&&o.top<n.bottom,q=o.bottom>n.top&&o.bottom<n.bottom,r=l(this.$ElementVisibilityObserver2,this.$ElementVisibilityObserver3),s=l(q,p);if(r==s)return;switch(r){case j.notvisible:this.emit(k.visiblestart);break;case j.fullyvisible:this.emit(k.fullyvisibleend);break;}switch(s){case j.notvisible:this.emit(k.visibleend);break;case j.fullyvisible:this.emit(k.fullyvisiblestart);break;}this.$ElementVisibilityObserver2=q;this.$ElementVisibilityObserver3=p};f.exports.ElementVisibilityObserver=m;f.exports.VISIBILITY=j;f.exports.VISIBILITY_CHANGE=k}),null);
__d('VisibilityObserver',['ElementVisibilityObserver','onViewportChanged'],(function a(b,c,d,e,f,g){'use strict';var h=c('ElementVisibilityObserver').ElementVisibilityObserver;function i(){this.$VisibilityObserver1=[];var j=c('onViewportChanged')(this.$VisibilityObserver4.bind(this));this.$VisibilityObserver2=j.scheduleCheck;this.$VisibilityObserver3=j.remove}i.prototype.removeSubscriptions=function(){this.$VisibilityObserver3()};i.prototype.addListener=function(j,k,l){var m=this.$VisibilityObserver5(j);return m.addListener(k,l)};i.prototype.once=function(j,k,l){var m=this.$VisibilityObserver5(j);return m.once(k,l)};i.prototype.getCurrentState=function(j){return this.$VisibilityObserver5(j).getCurrentState()};i.prototype.$VisibilityObserver5=function(j){for(var k=this.$VisibilityObserver1,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}var o=n;if(o.element===j)return o;}var p=new h(j);this.$VisibilityObserver1.push(p);this.$VisibilityObserver2();return p};i.prototype.$VisibilityObserver4=function(j){this.$VisibilityObserver1.forEach(function(k){return k.onMove(j)})};f.exports.instance=new i();f.exports.VISIBILITY=c('ElementVisibilityObserver').VISIBILITY;f.exports.VISIBILITY_CHANGE=c('ElementVisibilityObserver').VISIBILITY_CHANGE}),null);
__d('ExposureTimers',['performanceNow','Visibility','VisibilityObserver'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('VisibilityObserver').instance;function m(p,q,r){this.$ExposureTimer1=p;this.$ExposureTimer3=q;this.$ExposureTimer2=0;this.$ExposureTimer4=false;this.$ExposureTimer6=!c('Visibility').isHidden();this.$ExposureTimer7=true;this.$ExposureTimer8=r.isState('playing');this.$ExposureTimer9=null;this.$ExposureTimer10=[];this.$ExposureTimer11=r;this.addSubscription(c('Visibility').addListener(c('Visibility').VISIBLE,function(){return this.$ExposureTimer12()}.bind(this)));this.addSubscription(c('Visibility').addListener(c('Visibility').HIDDEN,function(){return this.$ExposureTimer13()}.bind(this)));this.addSubscription(r.addListener('stateChange',function(){return this.$ExposureTimer14()}.bind(this)));this.$ExposureTimer15()}m.prototype.onElementInViewport=function(){this.$ExposureTimer7=true;this.$ExposureTimer15()};m.prototype.onElementNotInViewport=function(){this.$ExposureTimer7=false;this.$ExposureTimer15()};m.prototype.$ExposureTimer12=function(){this.$ExposureTimer6=true;this.$ExposureTimer15()};m.prototype.$ExposureTimer13=function(){this.$ExposureTimer6=false;this.$ExposureTimer15()};m.prototype.$ExposureTimer14=function(){this.$ExposureTimer8=this.$ExposureTimer11.isState('playing');this.$ExposureTimer15()};m.prototype.$ExposureTimer15=function(){var p=this.$ExposureTimer6&&this.$ExposureTimer7,q=this.$ExposureTimer8,r=this.$ExposureTimer9!==null;if(p&&q&&!r){this.$ExposureTimer16()}else if((!p||!q)&&r)this.$ExposureTimer17();};m.prototype.$ExposureTimer16=function(){var p=this.$ExposureTimer1-this.$ExposureTimer2;if(p>0){this.$ExposureTimer9=window.setTimeout(function(){return this.$ExposureTimer18()}.bind(this),p);this.$ExposureTimer5=c('performanceNow')()}else this.$ExposureTimer19();};m.prototype.$ExposureTimer17=function(){if(this.$ExposureTimer9!==null){window.clearTimeout(this.$ExposureTimer9);this.$ExposureTimer9=null;var p=c('performanceNow')(),q=p-this.$ExposureTimer5;this.$ExposureTimer2+=q;if(this.$ExposureTimer2>=this.$ExposureTimer1)this.$ExposureTimer19();}};m.prototype.$ExposureTimer18=function(){this.$ExposureTimer19()};m.prototype.$ExposureTimer19=function(){if(!this.$ExposureTimer4){this.$ExposureTimer4=true;this.$ExposureTimer3();this.$ExposureTimer20();if(this.$ExposureTimer9!==null)window.clearTimeout(this.$ExposureTimer9);}};m.prototype.addSubscription=function(p){this.$ExposureTimer10.push(p)};m.prototype.$ExposureTimer20=function(){this.$ExposureTimer10.forEach(function(p){return p.remove()});this.$ExposureTimer10=[]};m.prototype.cancel=function(){this.$ExposureTimer4=true;this.$ExposureTimer20();this.$ExposureTimer17()};m.prototype.setElementVisibility=function(p){this.$ExposureTimer7=p;this.$ExposureTimer15()};h=babelHelpers.inherits(n,m);i=h&&h.prototype;function n(p,q,r,s){i.constructor.call(this,q,r,s);this.$FullVisibilityExposureTimer1=p;this.setElementVisibility(this.getElementVisibility());this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.fullyvisiblestart,function(){return this.onElementInViewport()}.bind(this)));this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.fullyvisibleend,function(){return this.onElementNotInViewport()}.bind(this)))}n.prototype.getElementVisibility=function(){return l.getCurrentState(this.$FullVisibilityExposureTimer1)===c('VisibilityObserver').VISIBILITY.fullyvisible};j=babelHelpers.inherits(o,m);k=j&&j.prototype;function o(p,q,r,s){k.constructor.call(this,q,r,s);this.$PartialVisibilityExposureTimer1=p;this.setElementVisibility(this.getElementVisibility());this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.visiblestart,function(){return this.onElementInViewport()}.bind(this)));this.addSubscription(l.addListener(p,c('VisibilityObserver').VISIBILITY_CHANGE.visibleend,function(){return this.onElementNotInViewport()}.bind(this)))}o.prototype.getElementVisibility=function(){return l.getCurrentState(this.$PartialVisibilityExposureTimer1)!==c('VisibilityObserver').VISIBILITY.notvisible};f.exports={createFullElementVisibilityTimer:function p(q,r,s,t){return new n(q,r,s,t)},createPartialElementVisibilityTimer:function p(q,r,s,t){return new o(q,r,s,t)},createViewportVisibilityTimer:function p(q,r,s){return new m(q,r,s)},ExposureTimer:m}}),null);
__d('VideoWithPlayerVersionInvariant',['VideoPlayerStates'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$VideoWithPlayerVersionInvariant1=i;this.$VideoWithPlayerVersionInvariant2=j;this.$VideoWithPlayerVersionInvariant3=i.addListener('stateChange',function(){return this.$VideoWithPlayerVersionInvariant4()}.bind(this))}h.prototype.$VideoWithPlayerVersionInvariant4=function(){'use strict';if(!this.$VideoWithPlayerVersionInvariant1.isState(c('VideoPlayerStates').READY))return;if(!this.$VideoWithPlayerVersionInvariant1.isPlayerVersion(this.$VideoWithPlayerVersionInvariant2))this.$VideoWithPlayerVersionInvariant1.setState(c('VideoPlayerStates').FALLBACK);this.$VideoWithPlayerVersionInvariant3.remove()};f.exports=h}),null);
__d('SphericalGyroOverlay',['cx','CSS','DOM','EventEmitter'],(function a(b,c,d,e,f,g,h){var i,j,k=800;i=babelHelpers.inherits(l,c('EventEmitter'));j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this);this.$SphericalGyroOverlay2=false;this.$SphericalGyroOverlay3=true;this.$SphericalGyroOverlay4=n;this.$SphericalGyroOverlay1=m}l.prototype.startAnimation=function(){'use strict';if(!this.$SphericalGyroOverlay2&&this.$SphericalGyroOverlay3){this.$SphericalGyroOverlay2=true;this.emit('animationStarted');this.$SphericalGyroOverlay5();c('CSS').addClass(this.$SphericalGyroOverlay1,"_2dz7")}};l.prototype.pauseAnimation=function(){'use strict';if(this.$SphericalGyroOverlay2&&this.$SphericalGyroOverlay3){this.$SphericalGyroOverlay2=false;c('CSS').addClass(this.$SphericalGyroOverlay1,"_4z8p")}};l.prototype.restartAnimation=function(){'use strict';if(this.$SphericalGyroOverlay2)return;if(this.$SphericalGyroOverlay3){this.$SphericalGyroOverlay2=true;c('CSS').removeClass(this.$SphericalGyroOverlay1,"_4z8p")}};l.prototype.$SphericalGyroOverlay5=function(){'use strict';var m=c('DOM').create('div',{className:"_4z8q"});this.$SphericalGyroOverlay1.appendChild(m);var n=c('DOM').create('div',{className:"_4z8r"});if(this.$SphericalGyroOverlay4)c('CSS').addClass(this.$SphericalGyroOverlay1,"_4z8s");m.appendChild(n);var o=c('DOM').create('div',{className:"_4z8t"});n.appendChild(o);var p=c('DOM').create('div',{className:"_4z8u"});n.appendChild(p);var q=c('DOM').create('div',{className:"_4z8v"});m.appendChild(q);var r=c('DOM').create('span',{className:"_4z8w"},'360');q.appendChild(r)};l.prototype.$SphericalGyroOverlay6=function(){'use strict';if(this.$SphericalGyroOverlay1.parentElement){this.$SphericalGyroOverlay1.parentElement.removeChild(this.$SphericalGyroOverlay1);this.emit('animationFinished')}};l.prototype.stopAnimation=function(){'use strict';if(this.$SphericalGyroOverlay2&&this.$SphericalGyroOverlay3){c('CSS').removeClass(this.$SphericalGyroOverlay1,"_2dz7");setTimeout(function(){this.$SphericalGyroOverlay2=false;this.$SphericalGyroOverlay3=false;this.$SphericalGyroOverlay6();this.emit('animationFinished')}.bind(this),k)}};f.exports=l}),null);
__d('SphericalMouseOverlay',['cx','fbt','CSS','DOM','Event','EventEmitter'],(function a(b,c,d,e,f,g,h,i){var j,k,l=800;j=babelHelpers.inherits(m,c('EventEmitter'));k=j&&j.prototype;function m(n,o){'use strict';k.constructor.call(this);this.$SphericalMouseOverlay10=false;this.$SphericalMouseOverlay11=true;this.$SphericalMouseOverlay12=[];this.$SphericalMouseOverlay1=n;this.$SphericalMouseOverlay13=o}m.prototype.$SphericalMouseOverlay14=function(){'use strict';this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay1);this.$SphericalMouseOverlay2=c('DOM').create('div',{className:"_2661"});this.$SphericalMouseOverlay1.appendChild(this.$SphericalMouseOverlay2);this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay2);var n=this.$SphericalMouseOverlay13?i._("Click and drag to find where people reacted"):i._("Click and drag to look around");this.$SphericalMouseOverlay3=c('DOM').create('div',{className:"_2662"},n);this.$SphericalMouseOverlay1.appendChild(this.$SphericalMouseOverlay3);this.$SphericalMouseOverlay4=c('DOM').create('div',{className:"_2663"});this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay4);this.$SphericalMouseOverlay2.appendChild(this.$SphericalMouseOverlay4);this.$SphericalMouseOverlay5=c('DOM').create('div',{className:"_2664"});this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay5);this.$SphericalMouseOverlay4.appendChild(this.$SphericalMouseOverlay5);var o=c('DOM').create('div',{className:"_15nj"});this.$SphericalMouseOverlay5.appendChild(o);this.$SphericalMouseOverlay6=c('DOM').create('div',{className:"_2665"});this.$SphericalMouseOverlay5.appendChild(this.$SphericalMouseOverlay6);this.$SphericalMouseOverlay7=c('DOM').create('div',{className:"_2666"});this.$SphericalMouseOverlay6.appendChild(this.$SphericalMouseOverlay7);this.$SphericalMouseOverlay12.push(this.$SphericalMouseOverlay7);this.$SphericalMouseOverlay8=c('DOM').create('div',{className:"_2667"});this.$SphericalMouseOverlay6.appendChild(this.$SphericalMouseOverlay8);this.$SphericalMouseOverlay9=c('DOM').create('div',{className:"_266m"});this.$SphericalMouseOverlay5.appendChild(this.$SphericalMouseOverlay9)};m.prototype.$SphericalMouseOverlay15=function(){'use strict';if(this.$SphericalMouseOverlay1.parentElement)this.$SphericalMouseOverlay1.parentElement.removeChild(this.$SphericalMouseOverlay1);this.emit('animationFinished')};m.prototype.updatePosition=function(n){'use strict';if(!this.$SphericalMouseOverlay11)return;this.$SphericalMouseOverlay1.style.bottom=12+n+'px'};m.prototype.startAnimation=function(){'use strict';if(!this.$SphericalMouseOverlay10&&this.$SphericalMouseOverlay11){this.$SphericalMouseOverlay10=true;this.emit('animationStarted');this.$SphericalMouseOverlay14();this.$SphericalMouseOverlay12.forEach(function(n){return c('CSS').addClass(n,"_2dz7")})}};m.prototype.stopAnimation=function(){'use strict';if(this.$SphericalMouseOverlay10){c('CSS').removeClass(this.$SphericalMouseOverlay1,"_2dz7");this.$SphericalMouseOverlay10=false;this.$SphericalMouseOverlay11=false;var n=c('Event').listen(this.$SphericalMouseOverlay1,'transitionend',function(){this.$SphericalMouseOverlay15();n.remove()}.bind(this));window.setTimeout(function(){return this.$SphericalMouseOverlay15()}.bind(this),l)}};m.prototype.cancelAnimation=function(){'use strict';this.$SphericalMouseOverlay11=false;this.stopAnimation()};f.exports=m}),null);
__d('SphericalVideoComponentDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d('SphericalVideoComponentActions',['SphericalVideoComponentDispatcher'],(function a(b,c,d,e,f,g){var h={registerVideoPlayerController:function i(j){var k={type:'SphericalVideoComponent/registerVideoPlayerController',controller:j,id:j.getVideoPlayerID()};c('SphericalVideoComponentDispatcher').dispatch(k)},updateVideoPlayerState:function i(j,k){var l={type:'SphericalVideoComponent/updateVideoPlayerState',id:j,state:k};c('SphericalVideoComponentDispatcher').dispatch(l)},togglePlay:function i(j,k){var l={type:'SphericalVideoComponent/togglePlay',id:j,nextIsPlaying:k};c('SphericalVideoComponentDispatcher').dispatch(l)},toggleChannelView:function i(j,k){var l={type:'SphericalVideoComponent/toggleChannelView',id:j,isInChannelView:k};c('SphericalVideoComponentDispatcher').dispatch(l)},toggleTahoe:function i(j,k){var l={type:'SphericalVideoComponent/toggleTahoe',id:j,isInTahoe:k};c('SphericalVideoComponentDispatcher').dispatch(l)},setCurrentVideoTime:function i(j,k){var l={type:'SphericalVideoComponent/setCurrentPlaytime',id:j,time:k};c('SphericalVideoComponentDispatcher').dispatch(l)},setVideoDuration:function i(j,k){var l={type:'SphericalVideoComponent/setVideoDuration',id:j,durationSeconds:k};c('SphericalVideoComponentDispatcher').dispatch(l)},seekStart:function i(j){var k={type:'SphericalVideoComponent/seekStart',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},registerSphericalViewportControl:function i(j,k,l){var m={type:'SphericalVideoComponent/registerSphericalViewportControl',id:j,sphericalViewportControl:k,viewport:l};c('SphericalVideoComponentDispatcher').dispatch(m)},changeViewport:function i(j,k,l,m){var n={type:'SphericalVideoComponent/changeViewport',id:j,yaw:k,pitch:l,fieldOfView:m};c('SphericalVideoComponentDispatcher').dispatch(n)},toggleViewportGrabbed:function i(j){var k={type:'SphericalVideoComponent/toggleViewportGrabbed',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},updateViewportDimensions:function i(j,k,l){var m={type:'SphericalVideoComponent/updateViewportDimensions',id:j,width:k,height:l};c('SphericalVideoComponentDispatcher').dispatch(m)},setUserIsInactive:function i(j){var k={type:'SphericalVideoComponent/setUserIsInactive',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},setInitialViewport:function i(j,k,l){var m={type:'SphericalVideoComponent/setInitialViewport',id:j,yaw:k,pitch:l};c('SphericalVideoComponentDispatcher').dispatch(m)},registerNewSpatialReactionsState:function i(j){var k={type:'SphericalVideoComponent/registerNewSpatialReactionsState',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},addSpatialReactionClusters:function i(j,k){var l={type:'SphericalVideoComponent/addSpatialReactions',id:j,reactionClusters:k};c('SphericalVideoComponentDispatcher').dispatch(l)},tickAnimation:function i(j){var k={type:'SphericalVideoComponent/tickAnimation',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},startAnimationForFrame:function i(j,k,l,m,n,o,p){var q={type:'SphericalVideoComponent/startAnimationForFrame',id:j,timestamp:k,yaw:l,pitch:m,fieldOfView:n,viewportWidth:o,viewportHeight:p};c('SphericalVideoComponentDispatcher').dispatch(q)},setMouseDown:function i(j,k,l){var m={type:'SphericalVideoComponent/setMouseDown',id:j,reactionCenter:k,wasVideoPlaying:l};c('SphericalVideoComponentDispatcher').dispatch(m)},setMouseUp:function i(j,k){var l={type:'SphericalVideoComponent/setMouseUp',id:j,reactionCenter:k};c('SphericalVideoComponentDispatcher').dispatch(l)},setIsDragging:function i(j,k){var l={type:'SphericalVideoComponent/setIsDragging',id:j,isDragging:k};c('SphericalVideoComponentDispatcher').dispatch(l)},setShouldLeaveReactionMenuOpen:function i(j,k){var l={type:'SphericalVideoComponent/setShouldLeaveReactionMenuOpen',id:j,leaveOpen:k};c('SphericalVideoComponentDispatcher').dispatch(l)},clickReaction:function i(j,k){var l={type:'SphericalVideoComponent/clickReaction',id:j,reactionType:k};c('SphericalVideoComponentDispatcher').dispatch(l)},dropReaction:function i(j,k,l,m,n,o,p,q,r,s){var t={type:'SphericalVideoComponent/dropReaction',id:j,reactionType:k,reactionOutsideViewport:l,recordMouseLocation:m,viewportWidth:n,viewportHeight:o,viewportYaw:p,viewportPitch:q,viewportFieldOfView:r,recordReactionCallback:s};c('SphericalVideoComponentDispatcher').dispatch(t)},clickLikeButton:function i(j){var k={type:'SphericalVideoComponent/clickLikeButton',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},openReactionMenu:function i(j){var k={type:'SphericalVideoComponent/openReactionMenu',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},closeReactionMenu:function i(j){var k={type:'SphericalVideoComponent/closeReactionMenu',id:j};c('SphericalVideoComponentDispatcher').dispatch(k)},registerExperimentConfig:function i(j,k){var l={type:'SphericalVideoComponent/registerExperimentConfig',id:j,config:k};c('SphericalVideoComponentDispatcher').dispatch(l)}};f.exports=h}),null);
__d('SphericalVideoComponentConstants',[],(function a(b,c,d,e,f,g){var h={ACTIONS:{REGISTER_VIDEO_PLAYER_CONTROLLER:'SphericalVideoComponent/registerVideoPlayerController',UPDATE_VIDEO_PLAYER_STATE:'SphericalVideoComponent/updateVideoPlayerState',TOGGLE_PLAY:'SphericalVideoComponent/togglePlay',SET_CURRENT_PLAY_TIME:'SphericalVideoComponent/setCurrentPlaytime',SET_VIDEO_DURATION:'SphericalVideoComponent/setVideoDuration',TOGGLE_CHANNEL_VIEW:'SphericalVideoComponent/toggleChannelView',TOGGLE_TAHOE:'SphericalVideoComponent/toggleTahoe',SEEK_START:'SphericalVideoComponent/seekStart',REGISTER_SPHERICAL_VIEWPORT_CONTROL:'SphericalVideoComponent/registerSphericalViewportControl',CHANGE_VIEWPORT:'SphericalVideoComponent/changeViewport',TOGGLE_VIEWPORT_GRABBED:'SphericalVideoComponent/toggleViewportGrabbed',UPDATE_VIEWPORT_DIMENSIONS:'SphericalVideoComponent/updateViewportDimensions',SET_USER_IS_INACTIVE:'SphericalVideoComponent/setUserIsInactive',SET_INITIAL_VIEWPORT:'SphericalVideoComponent/setInitialViewport',REGISTER_NEW_REACTIONS_STATE:'SphericalVideoComponent/registerNewSpatialReactionsState',ADD_SPATIAL_REACTIONS:'SphericalVideoComponent/addSpatialReactions',SET_MOUSE_DOWN:'SphericalVideoComponent/setMouseDown',SET_MOUSE_UP:'SphericalVideoComponent/setMouseUp',SET_IS_DRAGGING:'SphericalVideoComponent/setIsDragging',SET_SHOULD_LEAVE_REACTION_MENU_OPEN:'SphericalVideoComponent/setShouldLeaveReactionMenuOpen',CLICK_REACTION:'SphericalVideoComponent/clickReaction',DROP_REACTION:'SphericalVideoComponent/dropReaction',TICK_ANIMATION:'SphericalVideoComponent/tickAnimation',START_ANIMATION_FOR_FRAME:'SphericalVideoComponent/startAnimationForFrame',CLICK_LIKE_BUTTON:'SphericalVideoComponent/clickLikeButton',OPEN_REACTION_MENU:'SphericalVideoComponent/openReactionMenu',CLOSE_REACTION_MENU:'SphericalVideoComponent/closeReactionMenu',REGISTER_EXPERIMENT_CONFIG:'SphericalVideoComponent/registerExperimentConfig'}};f.exports=h}),null);
__d('SphericalViewportControlStore',['SphericalVideoComponentActions','SphericalVideoComponentDispatcher','immutable','FluxMapStore','SphericalVideoComponentConstants','Rect','Vector','curry','throttle','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l={fieldOfView:-1,initialPitch:-1,initialYaw:-1,isInChannelView:false,isInTahoe:false,pitch:-1,viewport:null,viewportGrabbed:false,viewportHeight:0,viewportInactivityTimeout:0,viewportPanStart:false,viewportWidth:0,yaw:-1},m=5000;h=babelHelpers.inherits(n,c('immutable').Record(l));i=h&&h.prototype;function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,c('FluxMapStore'));k=j&&j.prototype;o.prototype.getInitialState=function(){return c('immutable').Map({sphericalViewportControls:c('immutable').Map({}),sphericalViewportControlStates:c('immutable').Map({})})};o.prototype.reduce=function(p,q){var r=q.id;switch(q.type){case c('SphericalVideoComponentConstants').ACTIONS.REGISTER_SPHERICAL_VIEWPORT_CONTROL:var s=q.sphericalViewportControl,t=q.viewport;p=this.$SphericalViewportStore1(p,r,s,t);break;case c('SphericalVideoComponentConstants').ACTIONS.CHANGE_VIEWPORT:var u=q.yaw,v=q.pitch,w=q.fieldOfView;p=this.$SphericalViewportStore2(p,r,u,v,w);break;case c('SphericalVideoComponentConstants').ACTIONS.TOGGLE_VIEWPORT_GRABBED:p=this.$SphericalViewportStore3(p,r);break;case c('SphericalVideoComponentConstants').ACTIONS.UPDATE_VIEWPORT_DIMENSIONS:var x=q.width,y=q.height;p=this.$SphericalViewportStore4(p,r,x,y);break;case c('SphericalVideoComponentConstants').ACTIONS.TOGGLE_CHANNEL_VIEW:var z=q.isInChannelView;p=this.$SphericalViewportStore5(p,r,z);break;case c('SphericalVideoComponentConstants').ACTIONS.TOGGLE_TAHOE:var aa=q.isInTahoe;p=this.$SphericalViewportStore6(p,r,aa);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_USER_IS_INACTIVE:p=this.$SphericalViewportStore7(p,r);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_INITIAL_VIEWPORT:p=this.$SphericalViewportStore8(p,r,q.yaw,q.pitch);break;default:break;}return p};o.prototype.getSphericalViewportControl=function(p){var q=this.get('sphericalViewportControls');if(q&&q.has(p)){return q.get(p)}else throw new Error('Video player controller with id '+p+' is not registered');};o.prototype.getOrientation=function(p){var q=this.$SphericalViewportStore9(this.getState(),p),r=q.yaw,s=q.pitch;return {yaw:r,pitch:s}};o.prototype.getUserIsActive=function(p){var q=this.$SphericalViewportStore9(this.getState(),p);return q.viewportInactivityTimeout!==0};o.prototype.getFieldOfView=function(p){return this.$SphericalViewportStore9(this.getState(),p).fieldOfView};o.prototype.getViewportGrabbed=function(p){return this.$SphericalViewportStore9(this.getState(),p).viewportGrabbed};o.prototype.getInitialYaw=function(p){return this.$SphericalViewportStore9(this.getState(),p).initialYaw};o.prototype.getInitialPitch=function(p){return this.$SphericalViewportStore9(this.getState(),p).initialPitch};o.prototype.getIsInChannelView=function(p){return this.$SphericalViewportStore9(this.getState(),p).isInChannelView};o.prototype.getIsInTahoe=function(p){return this.$SphericalViewportStore9(this.getState(),p).isInTahoe};o.prototype.getViewportDimensions=function(p){return {width:this.$SphericalViewportStore9(this.getState(),p).viewportWidth,height:this.$SphericalViewportStore9(this.getState(),p).viewportHeight}};o.prototype.getViewportPositionVector=function(p){var q=this.$SphericalViewportStore9(this.getState(),p);return new (c('Rect'))(q.viewport).getPositionVector()};o.prototype.getViewportCenterVector=function(p){var q=this.getViewportPositionVector(p),r=this.getViewportDimensions(p),s=r.width,t=r.height,u=new (c('Vector'))(s/2,t/2);return q.add(u)};o.prototype.onViewportGrabbed=function(p){c('SphericalVideoComponentActions').toggleViewportGrabbed(p)};o.prototype.onViewportPanStart=function(p,q){return};o.prototype.onViewportPanEnd=function(p){c('SphericalVideoComponentActions').toggleViewportGrabbed(p)};o.prototype.onViewportChange=function(p,q,r,s){c('SphericalVideoComponentActions').changeViewport(p,q,r,s)};o.prototype.$SphericalViewportStore1=function(p,q,r,s){var t=p.get('sphericalViewportControls');if(t.has(q))return p;t=t.set(q,r);p=p.set('sphericalViewportControls',t);var u=p.get('sphericalViewportControlStates'),v=new n({yaw:r.getOrientation().x,pitch:r.getOrientation().y,fieldOfView:r.getVerticalFieldOfView(),viewport:s});u=u.set(q,v);p=p.set('sphericalViewportControlStates',u);r.addListener('viewportChange',c('throttle')(c('curry')(this.onViewportChange,q),16));r.addListener('updateViewportBegin',c('curry')(this.onViewportGrabbed,q));r.addListener('updateViewportEnd',c('curry')(this.onViewportPanEnd,q));return p};o.prototype.$SphericalViewportStore2=function(p,q,r,s,t){var u=[['yaw',r],['pitch',s],['fieldOfView',t]];for(var v=u,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var y;if(w){if(x>=v.length)break;y=v[x++]}else{x=v.next();if(x.done)break;y=x.value}var z=y,aa=z[0],ba=z[1];p=this.$SphericalViewportStore10(p,q,aa,ba)}var ca=this.getSphericalViewportControl(q);ca.setSphericalOrientation(r,s);ca.setFieldOfView(t);var da=this.$SphericalViewportStore9(p,q).get('viewportInactivityTimeout');clearTimeout(da);p=this.$SphericalViewportStore10(p,q,'viewportInactivityTimeout',this.$SphericalViewportStore11(q));return p};o.prototype.$SphericalViewportStore11=function(p){return c('setTimeout')(function(){return c('SphericalVideoComponentActions').setUserIsInactive(p)},m)};o.prototype.$SphericalViewportStore7=function(p,q){p=this.$SphericalViewportStore10(p,q,'viewportInactivityTimeout',0);return p};o.prototype.$SphericalViewportStore8=function(p,q,r,s){p=this.$SphericalViewportStore10(p,q,'initialYaw',r);p=this.$SphericalViewportStore10(p,q,'initialPitch',s);return p};o.prototype.$SphericalViewportStore4=function(p,q,r,s){p=this.$SphericalViewportStore10(p,q,'viewportWidth',r);p=this.$SphericalViewportStore10(p,q,'viewportHeight',s);return p};o.prototype.$SphericalViewportStore3=function(p,q){var r=this.$SphericalViewportStore9(p,q).viewportGrabbed;return this.$SphericalViewportStore10(p,q,'viewportGrabbed',!r)};o.prototype.$SphericalViewportStore5=function(p,q,r){return this.$SphericalViewportStore10(p,q,'isInChannelView',r)};o.prototype.$SphericalViewportStore6=function(p,q,r){return this.$SphericalViewportStore10(p,q,'isInTahoe',r)};o.prototype.$SphericalViewportStore10=function(p,q,r,s){var t=this.$SphericalViewportStore9(p,q),u=p.get('sphericalViewportControlStates');t=t.set(r,s);u=u.set(q,t);return p.set('sphericalViewportControlStates',u)};o.prototype.$SphericalViewportStore9=function(p,q){var r=p.get('sphericalViewportControlStates').get(q);if(!r)this.$SphericalViewportStore12(q);return r};o.prototype.$SphericalViewportStore12=function(p){throw new Error('Viewport control with id '+p+' does not exist')};function o(){j.apply(this,arguments)}f.exports=new o(c('SphericalVideoComponentDispatcher'))}),null);
__d('VideoPlayerControllerStore',['SphericalVideoComponentActions','SphericalVideoComponentDispatcher','immutable','FluxMapStore','SphericalVideoComponentConstants','VideoPlayerStates','curry'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k;h=babelHelpers.inherits(l,c('immutable').Record({currentTime:-1,currentVideoPlayerState:c('VideoPlayerStates').UNKNOWN,durationSeconds:-1,videoId:'',unpauseOnMouseUp:false}));i=h&&h.prototype;function l(){h.apply(this,arguments)}j=babelHelpers.inherits(m,c('FluxMapStore'));k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onVideoPlayerControllerStateChange=function(s){var t=s.getVideoPlayerID(),u=this.$VideoPlayerControllerStore7(this.getState(),t),v=u.videoPlayerState,w=s.getState();if(v!==w)c('SphericalVideoComponentActions').updateVideoPlayerState(t,w);}.bind(this),o}m.prototype.getInitialState=function(){return c('immutable').Map({videoPlayerControllers:c('immutable').Map({}),videoPlayerControllerStates:c('immutable').Map({})})};m.prototype.reduce=function(n,o){var p=o.id,q=void 0;switch(o.type){case c('SphericalVideoComponentConstants').ACTIONS.REGISTER_VIDEO_PLAYER_CONTROLLER:var r=o.controller;n=this.$VideoPlayerControllerStore1(n,r,p);break;case c('SphericalVideoComponentConstants').ACTIONS.UPDATE_VIDEO_PLAYER_STATE:n=this.$VideoPlayerControllerStore2(n,p,o.state);break;case c('SphericalVideoComponentConstants').ACTIONS.TOGGLE_PLAY:n=this.$VideoPlayerControllerStore3(n,p,o.nextIsPlaying);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_CURRENT_PLAY_TIME:n=this.$VideoPlayerControllerStore4(n,p,o.time);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_VIDEO_DURATION:n=this.$VideoPlayerControllerStore5(n,p,o.durationSeconds);break;case c('SphericalVideoComponentConstants').ACTIONS.SET_MOUSE_DOWN:var s=o.wasVideoPlaying;if(s){n=this.$VideoPlayerControllerStore6(n,p,'unpauseOnMouseUp',s);n=this.$VideoPlayerControllerStore3(n,p,false)}break;case c('SphericalVideoComponentConstants').ACTIONS.DROP_REACTION:q=this.$VideoPlayerControllerStore7(n,p);if(q.unpauseOnMouseUp){n=this.$VideoPlayerControllerStore3(n,p,true);n=this.$VideoPlayerControllerStore6(n,p,'unpauseOnMouseUp',false)}break;default:break;}return n};m.prototype.getVideoPlayerController=function(n){var o=this.get('videoPlayerControllers');if(o&&o.has(n)){return o.get(n)}else throw new Error('Video player controller with id '+n+' is not registered');};m.prototype.getIsVideoPlayable=function(n){var o=this.$VideoPlayerControllerStore7(this.getState(),n).currentVideoPlayerState;return o!==c('VideoPlayerStates').FALLBACK&&o!==c('VideoPlayerStates').DESTROYED&&o!==c('VideoPlayerStates').UNKNOWN};m.prototype.getIsPlaying=function(n){var o=this.getVideoPlayerController(n).isBuffering(),p=this.$VideoPlayerControllerStore7(this.getState(),n).currentVideoPlayerState;return p===c('VideoPlayerStates').PLAYING&&!o};m.prototype.getCurrentTime=function(n){return this.$VideoPlayerControllerStore7(this.getState(),n).currentTime};m.prototype.getVideoID=function(n){return this.$VideoPlayerControllerStore7(this.getState(),n).videoId};m.prototype.$VideoPlayerControllerStore1=function(n,o,p){var q=n.get('videoPlayerControllers');if(q.has(p))return n;q=q.set(p,o);n=n.set('videoPlayerControllers',q);var r=n.get('videoPlayerControllerStates'),s=new l({isPlaying:o.isState(c('VideoPlayerStates').PLAYING),currentTime:o.getCurrentTimePosition(),videoId:o.getVideoID()});r=r.set(p,s);n=n.set('videoPlayerControllerStates',r);o.addListener('stateChange',c('curry')(this.onVideoPlayerControllerStateChange,o));o.addListener('updateStatus',c('curry')(this.onTimeUpdate,o));o.addListener('updateMetadata',c('curry')(this.onUpdateMetaData,o));o.addListener('VideoChannelController/pendingElementsShown',c('curry')(this.onToggleChannelView,o,true));o.addListener('VideoChannelController/exitChannel',c('curry')(this.onToggleChannelView,o,false));o.addListener('seekRequested',c('curry')(this.onSeekStart,o));o.addListener('TahoeController/enterTahoe',c('curry')(this.onToggleTahoe,o,true));o.addListener('TahoeController/exitTahoe',c('curry')(this.onToggleTahoe,o,false));return n};m.prototype.onTimeUpdate=function(n,event){c('SphericalVideoComponentActions').setCurrentVideoTime(n.getVideoPlayerID(),event.position)};m.prototype.onSeekStart=function(n){c('SphericalVideoComponentActions').seekStart(n.getVideoPlayerID())};m.prototype.onUpdateMetaData=function(n){c('SphericalVideoComponentActions').setVideoDuration(n.getVideoPlayerID(),n.getPlaybackDuration())};m.prototype.onToggleChannelView=function(n,o){c('SphericalVideoComponentActions').toggleChannelView(n.getVideoPlayerID(),o)};m.prototype.onToggleTahoe=function(n,o){c('SphericalVideoComponentActions').toggleTahoe(n.getVideoPlayerID(),o)};m.prototype.$VideoPlayerControllerStore3=function(n,o,p){var q=this.getVideoPlayerController(o),r=this.$VideoPlayerControllerStore7(this.getState(),o),s=r.currentVideoPlayerState;if(s===c('VideoPlayerStates').PLAYING&&!p||s===c('VideoPlayerStates').PAUSED&&p)p?q.play():q.pause();return n};m.prototype.$VideoPlayerControllerStore4=function(n,o,p){return this.$VideoPlayerControllerStore6(n,o,'currentTime',p)};m.prototype.$VideoPlayerControllerStore2=function(n,o,p){return this.$VideoPlayerControllerStore6(n,o,'currentVideoPlayerState',p)};m.prototype.$VideoPlayerControllerStore5=function(n,o,p){return this.$VideoPlayerControllerStore6(n,o,'durationSeconds',p)};m.prototype.$VideoPlayerControllerStore7=function(n,o){var p=n.get('videoPlayerControllerStates').get(o);if(!p)this.$VideoPlayerControllerStore8(o);return p};m.prototype.$VideoPlayerControllerStore6=function(n,o,p,q){var r=n.get('videoPlayerControllerStates'),s=this.$VideoPlayerControllerStore7(n,o);s=s.set(p,q);r=r.set(o,s);return n.set('videoPlayerControllerStates',r)};m.prototype.$VideoPlayerControllerStore8=function(n){throw new Error('Video player controller with id '+n+' does not exist')};f.exports=new m(c('SphericalVideoComponentDispatcher'))}),null);
__d('SphericalVideoErrorCTA',['cx','fbt','CSS','React','ReactDOM','UFIVideoPlayerRegistry','VideoPlayerFallbackEvents','VideoPlayerLoggerEvent','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){function j(k,l){var m,n=this;'use strict';this.$SphericalVideoErrorCTA5=function(){this.$SphericalVideoErrorCTA1.logEvent(c('VideoPlayerLoggerEvent').SPHERICAL_VIDEO_FALLBACK_CTA_CLICKED)}.bind(this);this.$SphericalVideoErrorCTA2=k;var o=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(k,l);if(o){this.$SphericalVideoErrorCTA1=o;this.$SphericalVideoErrorCTA3()}else (function(){var p=function(){o=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(k,l);if(o){this.$SphericalVideoErrorCTA1=o;c('UFIVideoPlayerRegistry').removeOnRegisterListener(p);this.$SphericalVideoErrorCTA3()}}.bind(n);c('UFIVideoPlayerRegistry').addOnRegisterListener(p)})();}j.prototype.$SphericalVideoErrorCTA3=function(){var k,l=this;'use strict';if(this.$SphericalVideoErrorCTA1.getOption('SphericalVideoPlayer','isUnavailable')){this.$SphericalVideoErrorCTA4()}else (function(){var m=l.$SphericalVideoErrorCTA1.addListener(c('VideoPlayerFallbackEvents').ENTER,function(){m.remove();this.$SphericalVideoErrorCTA4()}.bind(l))})();};j.prototype.$SphericalVideoErrorCTA4=function(){'use strict';c('CSS').show(this.$SphericalVideoErrorCTA2);var k=this.$SphericalVideoErrorCTA1.getLastError(),l=void 0;if(k&&(k.error==='SPHERICAL_SETUP_FAILED'||k.error==='SPHERICAL_RENDER_ERROR')){l=i._("360 videos are not available on this browser. Click to learn more.")}else l=i._("There was an issue playing this video. Please refresh the page and try again.");c('ReactDOM').render(c('React').createElement('div',{className:"_4tgy"},c('React').createElement('div',{className:"_4th5"},l),c('React').createElement('div',{className:"_4th6"},c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SphericalVideoErrorCTA5,label:i._("Learn More"),href:'https://www.facebook.com/help/851697264925946',target:'_blank'}))),this.$SphericalVideoErrorCTA2)};f.exports=j}),null);
__d('ComposerVideoUploadSphericalEvents',[],(function a(b,c,d,e,f,g){'use strict';f.exports={GUIDE:{KEYFRAMES_UPDATE:'ComposerVideoUploadSphericalVideoPreviewGuide/keyframesUpdate',CURRENT_POI_UPDATE:'ComposerVideoUploadSphericalVideoPreviewGuide/currentPOIUpdate'},PREVIEW:{INITAL_VIEWPORT_UPDATE:'ComposerVideoUploadSphericalVideoPreview/initialViewportUpdate',GUIDE_KEYFRAMES_UPDATE:'ComposerVideoUploadSphericalVideoPreview/guideKeyframesUpdate',GUIDE_STATE_UPDATE:'ComposerVideoUploadSphericalVideoPreview/guideStateUpdate',KEYFRAME_EDITING_STATE_UPDATE:'ComposerVideoUploadSphericalVideoPreview/keyframeEditingStateUpdate',FIELD_OF_VIEW_UPDATE:'ComposerVideoUploadSphericalVideoPreview/fieldOfViewUpdate'},OVERLAY_BUTTONS:{ADD_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/addPOI',SAVE_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/savePOI',EDIT_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/editPOI',REMOVE_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/removePOI',CLEAR_POI:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/clearPOI',CREATE_THUMBNAIL:'ComposerVideoUploadSphericalVideoPreviewOverlayButtons/createThumbnail'},VIEWPORT_CONTROL:{VIEWPORT_UPDATE:'ComposerVideoUploadSphericalVideoPreviewViewportControl/viewportUpdate',FIELD_OF_VIEW_UPDATE:'ComposerVideoUploadSphericalVideoPreviewViewportControl/fieldOfViewUpdate'}}}),null);
__d('SphericalMediaUtils',[],(function a(b,c,d,e,f,g){'use strict';var h={getDPR:function i(){return Math.max(window.devicePixelRatio||1,1)}};f.exports=h}),null);
__d('easeInOutInterpolate',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){k>=0&&k<=1||h(0);return Math.cos((k+1)*Math.PI)/2+.5};f.exports=i}),null);
__d('SphericalMediaHeadingIndicator.react',['cx','EventListener','React','SphericalMediaConstants','SphericalMediaUtils','SphericalPhotoProjectionUtils','SubscriptionsHandler','degToRad','easeInOutInterpolate','requestAnimationFrame','uniqueID'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('SphericalMediaConstants').HI_SIZE_NORMAL,l=c('SphericalMediaConstants').HI_SIZE_FULL,m=c('SphericalMediaConstants').HI_ALPHA_BG,n=c('SphericalMediaConstants').HI_ALPHA_ELEMENT,o=c('SphericalMediaConstants').HI_ALPHA_DURATION,p=c('SphericalMediaConstants').HI_FADE_OUT_DELAY,q=c('SphericalMediaConstants').HI_BLINK_ARC_RAD,r=c('SphericalMediaConstants').HI_BLINK_DURATION,s=c('SphericalMediaUtils').getDPR,t=function x(y){return y!==undefined&&y!==null},u=function x(y,z,aa,ba){y.beginPath();y.arc(z.x,z.y,aa*s(),0,2*Math.PI,false);y.fillStyle=ba;y.lineWidth=0;y.fill()},v=function x(y,z,aa,ba,ca,da,ea){var fa=s();y.beginPath();y.arc(z.x,z.y,aa*fa,ba,ca,false);y.lineWidth=da*fa;y.strokeStyle=ea;y.stroke()};i=babelHelpers.inherits(w,c('React').Component);j=i&&i.prototype;function w(x){j.constructor.call(this,x);this.$SphericalMediaHeadingIndicator24=function(){var z=this.__getDrawData();if(!t(z.poiYaw)){this.$SphericalMediaHeadingIndicator11=false;this.draw(z);return}var aa=(Date.now()-this.__blinkStartTime)%r<r/2;if(this.$SphericalMediaHeadingIndicator11!==aa){this.$SphericalMediaHeadingIndicator11=aa;this.draw(z)}c('requestAnimationFrame')(this.$SphericalMediaHeadingIndicator24)}.bind(this);this.$SphericalMediaHeadingIndicator14=function(){if(this.$SphericalMediaHeadingIndicator6===m.end)return;this.$SphericalMediaHeadingIndicator25(m.start,m.end,n.start,n.end)}.bind(this);this.$SphericalMediaHeadingIndicator15=function(){if(this.$SphericalMediaHeadingIndicator6===m.start)return;this.$SphericalMediaHeadingIndicator25(m.end,m.start,n.end,n.start)}.bind(this);this.$SphericalMediaHeadingIndicator2=c('uniqueID')();this.$SphericalMediaHeadingIndicator5=0;this.$SphericalMediaHeadingIndicator6=m.start;this.$SphericalMediaHeadingIndicator7=n.start;this.$SphericalMediaHeadingIndicator8=0;this.$SphericalMediaHeadingIndicator9=false;this.$SphericalMediaHeadingIndicator10=false;this.$SphericalMediaHeadingIndicator11=false;if(!this.constructor.__subClassMethods)throw new Error('Must implement "static __subClassMethods"');for(var y in this.constructor.__subClassMethods)if(typeof this[y]!=='function')throw new Error('Must implement "'+y+'"');}w.prototype.componentWillReceiveProps=function(x){var y=x.isActive&&x.isPanning!==this.props.isPanning;if(y)this.$SphericalMediaHeadingIndicator13(x.isPanning);};w.prototype.shouldComponentUpdate=function(x){var y=x.aspectRatio!==this.props.aspectRatio||x.isActive!==this.props.isActive||x.isFullScreen!==this.props.isFullScreen||x.isGuideAuto!==this.props.isGuideAuto;return y};w.prototype.$SphericalMediaHeadingIndicator13=function(x){var y=arguments.length<=1||arguments[1]===undefined?true:arguments[1];this.$SphericalMediaHeadingIndicator5+=x?1:-1;if(x){this.$SphericalMediaHeadingIndicator8>0&&clearTimeout(this.$SphericalMediaHeadingIndicator8);this.$SphericalMediaHeadingIndicator14()}else if(this.$SphericalMediaHeadingIndicator5===0)this.$SphericalMediaHeadingIndicator8=setTimeout(function(){this.$SphericalMediaHeadingIndicator8=0;this.$SphericalMediaHeadingIndicator15()}.bind(this),y?p:0);};w.prototype.$SphericalMediaHeadingIndicator16=function(){var x=this.$SphericalMediaHeadingIndicator17(),y=s();return {width:x.width*y,height:x.height*y}};w.prototype.$SphericalMediaHeadingIndicator17=function(){return this.props.isFullScreen?l:k};w.prototype.$SphericalMediaHeadingIndicator18=function(){var x=this.$SphericalMediaHeadingIndicator16();return {x:x.width/2,y:x.height/2}};w.prototype.draw=function(x){if(!this.$SphericalMediaHeadingIndicator1)return;var y=this.$SphericalMediaHeadingIndicator1,z=this.$SphericalMediaHeadingIndicator16();if(y.width!==z.width||y.height!==z.height){y.width=z.width;y.height=z.height}var aa=y.getContext('2d');if(!aa)return;aa.save();aa.clearRect(0,0,z.width,z.height);this.$SphericalMediaHeadingIndicator19(aa,x);this.$SphericalMediaHeadingIndicator20(aa,x);this.$SphericalMediaHeadingIndicator21(aa,x);aa.restore()};w.prototype.$SphericalMediaHeadingIndicator19=function(x,y){var z=this.$SphericalMediaHeadingIndicator17(),aa=this.$SphericalMediaHeadingIndicator18(),ba=y.fov*this.props.aspectRatio,ca=c('degToRad')(ba)/2;u(x,aa,z.background_radius,this.$SphericalMediaHeadingIndicator22());if(this.props.isGuideAuto){var da=z.inner_radius+z.inner_stroke/2-z.center_radius;v(x,aa,z.center_radius+da/2,0,2*Math.PI,da,this.$SphericalMediaHeadingIndicator23())}else{u(x,aa,z.center_radius,this.$SphericalMediaHeadingIndicator23());var ea=this.props,fa=ea.partialLeftDegrees,ga=ea.partialRightDegrees;if(fa&&ga){v(x,aa,z.inner_radius,0,2*Math.PI,z.inner_stroke,this.getPartialPanoElementColor());var ha=270-y.initialYaw,ia=c('degToRad')(fa*-1+ha+ca),ja=c('degToRad')(ga+ha-ca);v(x,aa,z.inner_radius,ia||0,ja||0,z.inner_stroke,this.$SphericalMediaHeadingIndicator23())}else v(x,aa,z.inner_radius,0,2*Math.PI,z.inner_stroke,this.$SphericalMediaHeadingIndicator23());}};w.prototype.$SphericalMediaHeadingIndicator21=function(x,y){var z=this.$SphericalMediaHeadingIndicator17(),aa=this.$SphericalMediaHeadingIndicator18();if(this.$SphericalMediaHeadingIndicator11){var ba=c('degToRad')((y.poiYaw||0)-y.initialYaw)-Math.PI/2;v(x,aa,z.rim_radius,ba-q/2,ba+q/2,z.rim_stroke,this.$SphericalMediaHeadingIndicator23())}var ca=s(),da=z.triangle[0]*ca,ea=z.triangle[1]*ca,fa=z.triangle[2]*ca;x.translate(aa.x,aa.y);if(y.pointerYaw){var ga=y.pointerYaw-y.initialYaw;x.rotate(c('degToRad')(ga||0))}x.beginPath();x.moveTo(0,da-aa.y);x.lineTo(-ea,fa-aa.y);x.lineTo(ea,fa-aa.y);x.fillStyle=this.$SphericalMediaHeadingIndicator23();x.fill()};w.prototype.$SphericalMediaHeadingIndicator20=function(x,y){var z=this.$SphericalMediaHeadingIndicator17(),aa=this.$SphericalMediaHeadingIndicator18(),ba=this.props,ca=ba.partialLeftDegrees,da=ba.partialRightDegrees,ea=ba.partialTopDegrees,fa=ba.partialBottomDegrees,ga=ba.aspectRatio,ha=ba.showNewPhotoRenderer,ia=y.yaw-y.initialYaw,ja=y.fov*this.props.aspectRatio,ka=c('degToRad')(ja)/2;if(ha){var la=c('SphericalPhotoProjectionUtils').getRelativeHfov(y.fov,ga,{partialLeftDegrees:ca,partialRightDegrees:da,partialTopDegrees:ea,partialBottomDegrees:fa});ka=la/2}var ma=c('degToRad')(ia)-Math.PI/2,na=this.props.isGuideAuto;if(na){var oa=s();x.save();x.beginPath();x.lineWidth=z.arc_stroke*oa;x.arc(aa.x,aa.y,(z.arc_radius+z.arc_stroke/2)*oa,ma-ka,ma+ka,false);x.arc(aa.x,aa.y,(z.arc_radius-z.arc_stroke/2)*oa,ma+ka,ma-ka,true);x.clip();var pa=this.$SphericalMediaHeadingIndicator16();x.clearRect(0,0,pa.width,pa.height);x.restore()}v(x,aa,z.arc_radius,ma-ka,ma+ka,z.arc_stroke,na?this.$SphericalMediaHeadingIndicator22():this.$SphericalMediaHeadingIndicator23())};w.prototype.getPartialPanoElementColor=function(){return 'rgba(255, 255, 255, '+this.$SphericalMediaHeadingIndicator7*.4+')'};w.prototype.$SphericalMediaHeadingIndicator23=function(){return 'rgba(255, 255, 255, '+this.$SphericalMediaHeadingIndicator7+')'};w.prototype.$SphericalMediaHeadingIndicator22=function(){return 'rgba(0, 0, 0, '+this.$SphericalMediaHeadingIndicator6+')'};w.prototype.$SphericalMediaHeadingIndicator25=function(x,y,z,aa){this.$SphericalMediaHeadingIndicator10=this.$SphericalMediaHeadingIndicator9;this.$SphericalMediaHeadingIndicator9=true;var ba=Date.now(),ca=function(fa){var ga=Date.now();if(this.$SphericalMediaHeadingIndicator10){this.$SphericalMediaHeadingIndicator10=false;return}if(ga-ba>o){this.$SphericalMediaHeadingIndicator9=false;this.$SphericalMediaHeadingIndicator6=y;this.$SphericalMediaHeadingIndicator7=aa;return}c('requestAnimationFrame')(function(){ca(fa)});var ha=c('easeInOutInterpolate')((ga-ba)/o),ia=fa.deltaAlphaBG*ha+fa.startAlphaBG,ja=fa.deltaAlphaElement*ha+fa.startAlphaElement;this.$SphericalMediaHeadingIndicator6=ia;this.$SphericalMediaHeadingIndicator7=ja;this.draw(this.__getDrawData())}.bind(this),da=y-x,ea=aa-z;c('requestAnimationFrame')(function(){ca({startAlphaBG:x,deltaAlphaBG:da,startAlphaElement:z,deltaAlphaElement:ea})})};w.prototype.componentDidMount=function(){if(this.props.isActive)this.draw(this.__getDrawData());if(this.props.useNativeListeners){this.$SphericalMediaHeadingIndicator12=new (c('SubscriptionsHandler'))();this.$SphericalMediaHeadingIndicator12.addSubscriptions(c('EventListener').listen(this.$SphericalMediaHeadingIndicator4,'click',function(event){return this.__onClick(event)}.bind(this)),c('EventListener').listen(this.$SphericalMediaHeadingIndicator4,'mouseover',function(){return this.$SphericalMediaHeadingIndicator13(true)}.bind(this)),c('EventListener').listen(this.$SphericalMediaHeadingIndicator4,'mouseout',function(){return this.$SphericalMediaHeadingIndicator13(false,false)}.bind(this)))}};w.prototype.componentDidUpdate=function(){if(this.props.isActive)this.draw(this.__getDrawData());c('requestAnimationFrame')(this.$SphericalMediaHeadingIndicator24)};w.prototype.componentWillUnmount=function(){this.$SphericalMediaHeadingIndicator1=null;if(this.props.useNativeListeners)this.$SphericalMediaHeadingIndicator12.release();};w.prototype.render=function(){var x=this.$SphericalMediaHeadingIndicator17(),y=this.props.isActive,z={};if(!this.props.useNativeListeners){z.onClick=function(event){return this.__onClick(event)}.bind(this);z.onMouseOver=function(){return this.$SphericalMediaHeadingIndicator13(true)}.bind(this);z.onMouseOut=function(){return this.$SphericalMediaHeadingIndicator13(false,false)}.bind(this)}return c('React').createElement('button',babelHelpers['extends']({},z,{ref:function(aa){return this.$SphericalMediaHeadingIndicator4=aa}.bind(this),className:"_17az"+(' '+"sphericalHeadingIndicator")+(!y?' '+"hidden_elem":''),style:{width:x.width,height:x.height}}),c('React').createElement('div',{className:"_17a-",ref:function(aa){return this.$SphericalMediaHeadingIndicator3=aa}.bind(this)},c('React').createElement('canvas',{className:"_5nxw _17ay",ref:function(aa){return this.$SphericalMediaHeadingIndicator1=aa}.bind(this)})))};f.exports=w}),null);
__d('SphericalVideoHeadingIndicator.react',['cx','fbt','BasicFBNux','ComposerVideoUploadSphericalEvents','React','SphericalVideoExperiments','SphericalViewportControlStore','SphericalMediaHeadingIndicator.react','SubscriptionsHandler','VideoPlayerStates','XUIAmbientNUX.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l,m,n=4320,o=4596,p=i._("Preview your points of interest. Viewers will automatically see this guided version."),q=i._("You're watching only the best views from this 360 video. You can swipe or drag the video to watch it manually."),r=function u(v){return v!==undefined&&v!==null};j=babelHelpers.inherits(s,c('SphericalMediaHeadingIndicator.react'));k=j&&j.prototype;s.prototype.__onClick=function(event){'use strict';this.props.onClick(event)};s.prototype.__getDrawData=function(){'use strict';return {fov:this.props.fov,initialYaw:this.props.initialYaw,pointerYaw:this.props.pointerYaw,poiYaw:this.props.poiYaw,yaw:this.props.yaw}};s.prototype.$SphericalHeadingIndicatorImpl1=function(u){'use strict';return {fov:u.fov,initialYaw:u.initialYaw,pointerYaw:u.pointerYaw,poiYaw:u.poiYaw,yaw:u.yaw}};s.prototype.componentWillReceiveProps=function(u){'use strict';k.componentWillReceiveProps.call(this,u);if(!r(this.props.poiYaw)&&r(u.poiYaw))this.__blinkStartTime=Date.now();var v=u.isActive===this.props.isActive&&(u.initialYaw!==this.props.initialYaw||u.aspectRatio!==this.props.aspectRatio||u.fov!==this.props.fov||u.yaw!==this.props.yaw||u.pointerYaw!==this.props.pointerYaw||u.poiYaw!==this.props.poiYaw);if(v)this.draw(this.$SphericalHeadingIndicatorImpl1(u));};s.prototype.shouldComponentUpdate=function(u){'use strict';var v=k.shouldComponentUpdate.call(this,u)||u.poiYaw!==this.props.poiYaw;return v};function s(){'use strict';j.apply(this,arguments)}s.__subClassMethods={__onClick:true,__getDrawData:true};l=babelHelpers.inherits(t,c('React').Component);m=l&&l.prototype;function t(u){'use strict';m.constructor.call(this,u);this.$SphericalVideoHeadingIndicator6=false;this.$SphericalVideoHeadingIndicator1=u.controller;this.$SphericalVideoHeadingIndicator5=u.isComposer;if(this.$SphericalVideoHeadingIndicator5){this.$SphericalVideoHeadingIndicator3=o;this.$SphericalVideoHeadingIndicator4=c('React').createElement(c('XUIText.react'),{size:'small',display:'block'},p)}else{this.$SphericalVideoHeadingIndicator3=n;this.$SphericalVideoHeadingIndicator4=q}this.$SphericalVideoHeadingIndicator2=new (c('SubscriptionsHandler'))()}t.prototype.componentDidMount=function(){'use strict';if(this.$SphericalVideoHeadingIndicator1.getOption('SphericalVideoPlayer','isReady')){this.$SphericalVideoHeadingIndicator7()}else this.$SphericalVideoHeadingIndicator2.addSubscriptions(this.$SphericalVideoHeadingIndicator1.once('SphericalVideoPlayer/ready',function(){return this.$SphericalVideoHeadingIndicator7()}.bind(this)));};t.prototype.componentWillUnmount=function(){'use strict';this.$SphericalVideoHeadingIndicator2.release()};t.prototype.$SphericalVideoHeadingIndicator7=function(){'use strict';var u=this.$SphericalVideoHeadingIndicator1.getVideoPlayerID();this.$SphericalVideoHeadingIndicator2.addSubscriptions(this.$SphericalVideoHeadingIndicator1.addListener('PhotoSnowlift/enterSnowlift',function(){return this.$SphericalVideoHeadingIndicator8(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('PhotoSnowlift/exitSnowlift',function(){return this.$SphericalVideoHeadingIndicator8(false)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('toggleFullscreen',function(){return this.$SphericalVideoHeadingIndicator9()}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('beginPlayback',function(){return this.$SphericalVideoHeadingIndicator10(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('finishPlayback',function(){return this.$SphericalVideoHeadingIndicator10(false)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoChannelController/enterChannel',function(){return this.$SphericalVideoHeadingIndicator11(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoChannelController/exitChannel',function(){return this.$SphericalVideoHeadingIndicator11(false)}.bind(this)),c('SphericalViewportControlStore').addListener(function(){var v=c('SphericalViewportControlStore'),w=v.getOrientation(u),x=w.pitch,y=w.yaw;this.setState({isActive:v.getViewportGrabbed(u),pitch:x,yaw:y,fov:v.getFieldOfView(u)})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('SphericalVideoRecenterControl/animationStart',function(){return this.$SphericalVideoHeadingIndicator12(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('SphericalVideoRecenterControl/animationEnd',function(){return this.$SphericalVideoHeadingIndicator12(false)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoControls/visibilityUpdate',function(v){var w=v.areControlsVisible;return this.$SphericalVideoHeadingIndicator12(w)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('viewportChange',function(v,w){return this.forceUpdate()}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuide/viewportChange',function(v){return this.setState({pointerYaw:v})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuide/intervalUpdate',function(v){var w=v.deltaPitch===0&&v.deltaYaw===0;this.setState({poiYaw:w?undefined:v.baseYaw+v.deltaYaw,isActive:!w})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuide/toggle',function(v){return this.setState({isGuideAuto:v})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener('VideoWithSphericalGuide/stateToggle',function(v){if(!v)this.setState({isGuideAuto:false,poiYaw:undefined,pointerYaw:0});}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener(c('ComposerVideoUploadSphericalEvents').PREVIEW.GUIDE_KEYFRAMES_UPDATE,function(v){return this.setState({numGuidePoints:v.length})}.bind(this)));this.setState({isVisible:this.$SphericalVideoHeadingIndicator1.isState(c('VideoPlayerStates').PLAYING),isActive:false,inChannel:this.$SphericalVideoHeadingIndicator1.getIsInChannel(),inSnowlift:this.$SphericalVideoHeadingIndicator1.getOption('PhotoSnowlift','isInSnowlift'),inFullscreen:this.$SphericalVideoHeadingIndicator1.isFullscreen(),isGuideAuto:this.$SphericalVideoHeadingIndicator1.getOption('VideoWithSphericalGuide','auto'),showGuideNux:c('SphericalVideoExperiments').showGuideNux,showComposerNux:c('SphericalVideoExperiments').showComposerNux,numGuidePoints:0,pitch:c('SphericalViewportControlStore').getOrientation(u).pitch,yaw:c('SphericalViewportControlStore').getOrientation(u).yaw,fov:c('SphericalViewportControlStore').getFieldOfView(u)});this.$SphericalVideoHeadingIndicator6=true};t.prototype.$SphericalVideoHeadingIndicator10=function(u){'use strict';this.setState({isVisible:u})};t.prototype.$SphericalVideoHeadingIndicator9=function(){'use strict';this.setState({inFullscreen:this.$SphericalVideoHeadingIndicator1.isFullscreen()})};t.prototype.$SphericalVideoHeadingIndicator11=function(u){'use strict';this.setState({inChannel:u})};t.prototype.$SphericalVideoHeadingIndicator8=function(u){'use strict';this.setState({inSnowlift:u})};t.prototype.$SphericalVideoHeadingIndicator12=function(u){'use strict';this.setState({isActive:u})};t.prototype.$SphericalVideoHeadingIndicator13=function(){'use strict';this.setState({showGuideNux:false,showComposerNux:false});c('BasicFBNux').onDismiss(this.$SphericalVideoHeadingIndicator5?o:n)};t.prototype.render=function(){'use strict';if(!this.$SphericalVideoHeadingIndicator6)return null;var u=this.$SphericalVideoHeadingIndicator1.getOption('SphericalVideoPlayer','getDimensions'),v=u.width,w=u.height,x=!this.state.inChannel&&!this.state.inSnowlift&&!this.state.inFullscreen,y=this.$SphericalVideoHeadingIndicator1.getOption('VideoWithSphericalGuide','enabled'),z=void 0;if(this.$SphericalVideoHeadingIndicator5){z=this.state.showComposerNux&&this.state.numGuidePoints>2}else z=this.state.showGuideNux&&y;var aa=this.$SphericalVideoHeadingIndicator1.getOption('SphericalVideoPlayer','getIsSingleFisheye');if(aa){var ba=this.$SphericalVideoHeadingIndicator1.getOption('SphericalVideoPlayer','getOriginalFOV');if(ba!==null&&ba!==0)return c('React').createElement('div',{className:"_3ldo"+(x?' '+"_42a0":'')},c('React').createElement(s,{ref:'compass',aspectRatio:v/w,initialYaw:this.props.initialYaw,isActive:this.state.isVisible,fov:this.state.fov,pitch:this.state.pitch,yaw:this.state.yaw,onClick:this.props.onClick,isFullScreen:this.state.inFullscreen,isPanning:this.state.isActive,isGuideAuto:this.state.isGuideAuto,pointerYaw:this.state.pointerYaw,poiYaw:this.state.poiYaw,partialLeftDegrees:ba/2,partialRightDegrees:ba/2}),c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.compass}.bind(this),shown:z,position:'left',onCloseButtonClick:function(){return this.$SphericalVideoHeadingIndicator13()}.bind(this)},this.$SphericalVideoHeadingIndicator4));}return c('React').createElement('div',{className:"_3ldo"+(x?' '+"_42a0":'')},c('React').createElement(s,{ref:'compass',aspectRatio:v/w,initialYaw:this.props.initialYaw,isActive:this.state.isVisible,fov:this.state.fov,pitch:this.state.pitch,yaw:this.state.yaw,onClick:this.props.onClick,isFullScreen:this.state.inFullscreen,isPanning:this.state.isActive,isGuideAuto:this.state.isGuideAuto,pointerYaw:this.state.pointerYaw,poiYaw:this.state.poiYaw}),c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.compass}.bind(this),shown:z,position:'left',onCloseButtonClick:function(){return this.$SphericalVideoHeadingIndicator13()}.bind(this)},this.$SphericalVideoHeadingIndicator4))};f.exports=t}),null);
__d("MovingAverage",[],(function a(b,c,d,e,f,g){function h(i,j){"use strict";j=j||0;this.$MovingAverage1=0;this.$MovingAverage2=j*i;this.$MovingAverage3=i;this.$MovingAverage4=[];for(var k=0;k<i;k++)this.$MovingAverage4[k]=j;}h.prototype.add=function(i){"use strict";this.$MovingAverage2-=this.$MovingAverage4[this.$MovingAverage1];this.$MovingAverage2+=i;this.$MovingAverage4[this.$MovingAverage1]=i;this.$MovingAverage1=(this.$MovingAverage1+1)%this.$MovingAverage3;return this};h.prototype.get=function(i){"use strict";i=i===undefined?0:i;var j=(this.$MovingAverage1-i-1+this.$MovingAverage3)%this.$MovingAverage3;return this.$MovingAverage4[j]};h.prototype.getAvg=function(){"use strict";return this.$MovingAverage2/this.$MovingAverage3};h.prototype.getMax=function(){"use strict";return Math.max.apply(Math,this.$MovingAverage4)};h.prototype.getMin=function(){"use strict";return Math.min.apply(Math,this.$MovingAverage4)};g.MovingAverage=h}),null);
__d("SpatialAudioFallbackReasons",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANNEL:"channel",SCROLL:"scroll"})}),null);
__d("SphericalMediaPerformanceEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SNAPSHOT:"snapshot",AUDIO_FALLBACK:"audio_fallback",SPATIAL_REACTIONS_CLUSTERS_COMPUTATION:"spatial_reactions_clusters_computation",SPATIAL_REACTIONS_CACHE_REBUILD:"spatial_reactions_cache_rebuild",LIVE_SPATIAL_REACTIONS_REGION_COUNT:"live_spatial_reactions_region_count"})}),null);
__d("SphericalMediaProductNames",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPHERICAL_VIDEO:"spherical_video",SPATIAL_AUDIO:"spatial_audio",SPATIAL_REACTIONS:"spatial_reactions"})}),null);
__d('SphericalVideoPerformanceTracker',['MovingAverage','SpatialAudioFallbackReasons','SphericalMediaPerformanceTypedLogger','SphericalMediaPerformanceEvents','SphericalMediaProductNames','Visibility','performance'],(function a(b,c,d,e,f,g){var h=c('MovingAverage').MovingAverage,i=60,j=1000,k=10*j,l=15,m=j/i;function n(){'use strict';n.$SphericalVideoPerformanceTracker1=false;this.$SphericalVideoPerformanceTracker8=new h(500,m);this.$SphericalVideoPerformanceTracker9=new (c('SphericalMediaPerformanceTypedLogger'))();this.$SphericalVideoPerformanceTracker10=false;this.$SphericalVideoPerformanceTracker6=-1;this.$SphericalVideoPerformanceTracker5=false;var o=function(){this.$SphericalVideoPerformanceTracker4=false;this.$SphericalVideoPerformanceTracker13()}.bind(this),p=function(){this.$SphericalVideoPerformanceTracker4=true}.bind(this);c('Visibility').isHidden()?o():p();c('Visibility').addListener(c('Visibility').HIDDEN,o);c('Visibility').addListener(c('Visibility').VISIBLE,p)}n.get=function(){'use strict';if(!n.$SphericalVideoPerformanceTracker2)n.$SphericalVideoPerformanceTracker2=new n();return n.$SphericalVideoPerformanceTracker2};n.prototype.addFrameAtTime=function(o){'use strict';if(!this.$SphericalVideoPerformanceTracker4)return;if(o!==this.$SphericalVideoPerformanceTracker7){n.$SphericalVideoPerformanceTracker1=true;this.$SphericalVideoPerformanceTracker7=o;if(!this.$SphericalVideoPerformanceTracker3){this.$SphericalVideoPerformanceTracker3=o}else{var p=o-this.$SphericalVideoPerformanceTracker3;this.$SphericalVideoPerformanceTracker3=o;this.$SphericalVideoPerformanceTracker8.add(p);if(!this.$SphericalVideoPerformanceTracker10){this.$SphericalVideoPerformanceTracker14();this.$SphericalVideoPerformanceTracker10=true}}}};n.prototype.trackSpatialAudioMetrics=function(){'use strict';this.$SphericalVideoPerformanceTracker5=true;this.$SphericalVideoPerformanceTracker12=0};n.prototype.isTrackingSpatialAudioMetrics=function(){'use strict';return this.$SphericalVideoPerformanceTracker5};n.prototype.addAudioStutter=function(){'use strict';if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();this.$SphericalVideoPerformanceTracker12++};n.prototype.enterSpatialAudioFallback=function(){'use strict';if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();this.$SphericalVideoPerformanceTracker6=c('performance').now()};n.prototype.exitSpatialAudioFallback=function(){'use strict';if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();if(this.$SphericalVideoPerformanceTracker6>0){var o=Math.trunc(c('performance').now()-this.$SphericalVideoPerformanceTracker6);this.$SphericalVideoPerformanceTracker6=-1;this.$SphericalVideoPerformanceTracker9.setProductName(c('SphericalMediaProductNames').SPATIAL_AUDIO).setEvent(c('SphericalMediaPerformanceEvents').AUDIO_FALLBACK).setFallbackDuration(o).setFallbackReason(c('SpatialAudioFallbackReasons').CHANNEL).log();this.$SphericalVideoPerformanceTracker9.clear()}};n.prototype.isOne360VideoActive=function(){'use strict';return n.$SphericalVideoPerformanceTracker1};n.prototype.log=function(){'use strict';if(!this.isOne360VideoActive()){return}else{var o=Math.trunc(this.$SphericalVideoPerformanceTracker15()*Math.pow(10,l));this.$SphericalVideoPerformanceTracker9.setProductName(c('SphericalMediaProductNames').SPHERICAL_VIDEO).setEvent(c('SphericalMediaPerformanceEvents').SNAPSHOT).setNormalizedFrameTime(o);if(this.$SphericalVideoPerformanceTracker5){this.$SphericalVideoPerformanceTracker9.setProductName(c('SphericalMediaProductNames').SPATIAL_AUDIO).setNumSpatialAudioStutters(this.$SphericalVideoPerformanceTracker12);this.$SphericalVideoPerformanceTracker12=0}this.$SphericalVideoPerformanceTracker9.log();this.$SphericalVideoPerformanceTracker9.clear()}this.$SphericalVideoPerformanceTracker13()};n.prototype.destroy=function(){'use strict';clearInterval(this.$SphericalVideoPerformanceTracker11);n.$SphericalVideoPerformanceTracker2=null};n.prototype.$SphericalVideoPerformanceTracker15=function(){'use strict';return this.$SphericalVideoPerformanceTracker8.getAvg()/m};n.prototype.$SphericalVideoPerformanceTracker13=function(){'use strict';this.$SphericalVideoPerformanceTracker3=null;n.$SphericalVideoPerformanceTracker1=false};n.prototype.$SphericalVideoPerformanceTracker14=function(){'use strict';this.$SphericalVideoPerformanceTracker11=setInterval(this.log.bind(this),k)};f.exports=n}),null);
__d('SphericalRenderer',['DOM','EventEmitter','EventListener','GLMatrix','VideoProjection','VideoStereoFormat','getErrorNameFromWebGLErrorCode'],(function a(b,c,d,e,f,g){var h,i,j=c('GLMatrix').glMatrix,k=c('GLMatrix').mat4,l=c('GLMatrix').vec3,m=Math.max(window.devicePixelRatio||1,1);h=babelHelpers.inherits(n,c('EventEmitter'));i=h&&h.prototype;function n(o,p,q){'use strict';i.constructor.call(this);this.$SphericalRenderer2=q;this.$SphericalRenderer20=q.fieldOfView;this.$SphericalRenderer15=true;this.$SphericalRenderer14=o;this.$SphericalRenderer1=p;this.$SphericalRenderer9=k.create();this.$SphericalRenderer10=k.create();this.$SphericalRenderer11=k.create();this.$SphericalRenderer3=false;this.$SphericalRenderer17=[];this.$SphericalRenderer19=null;this.$SphericalRenderer18=null;this.$SphericalRenderer16=q.projectionType===c('VideoProjection').UNPADDED_CUBESTRIP;this.$SphericalRenderer8=q.projectionType===c('VideoProjection').ROTATED_CUBEMAP;this.$SphericalRenderer7=q.projectionType===c('VideoProjection').CDS_BARREL;this.$SphericalRenderer4=this.$SphericalRenderer22.bind(this);this.$SphericalRenderer5=this.$SphericalRenderer23.bind(this);this.$SphericalRenderer1.addEventListener('webglcontextlost',this.$SphericalRenderer4);this.$SphericalRenderer1.addEventListener('webglcontextrestored',this.$SphericalRenderer5);this.$SphericalRenderer24()}n.prototype.destroy=function(){'use strict';this.removeAllListeners();this.$SphericalRenderer1.removeEventListener('webglcontextlost',this.$SphericalRenderer4);this.$SphericalRenderer1.removeEventListener('webglcontextrestored',this.$SphericalRenderer5)};n.prototype.reconfigure=function(o,p){var q=arguments.length<=2||arguments[2]===undefined?false:arguments[2];'use strict';if(q){this.$SphericalRenderer17=[];this.$SphericalRenderer19=null;this.$SphericalRenderer18=null}this.$SphericalRenderer20=p.fieldOfView;this.$SphericalRenderer14=o;this.$SphericalRenderer2=p;this.$SphericalRenderer16=p.projectionType===c('VideoProjection').UNPADDED_CUBESTRIP;this.$SphericalRenderer8=p.projectionType===c('VideoProjection').ROTATED_CUBEMAP;this.$SphericalRenderer7=p.projectionType===c('VideoProjection').CDS_BARREL;this.$SphericalRenderer24()};n.prototype.hasRenderingContext=function(){'use strict';return !this.$SphericalRenderer3};n.prototype.$SphericalRenderer22=function(o){'use strict';o.preventDefault();this.emit('renderingContextLost');this.$SphericalRenderer3=true};n.prototype.$SphericalRenderer23=function(o){'use strict';this.$SphericalRenderer3=false;this.$SphericalRenderer24();this.emit('renderingContextRestore')};n.prototype.setAutoUpdateTexture=function(o){'use strict';this.$SphericalRenderer15=o};n.prototype.updateFieldOfView=function(o){'use strict';if(this.$SphericalRenderer20!==o){this.$SphericalRenderer20=o;this.$SphericalRenderer25()}};n.prototype.updateViewportDimensions=function(o,p){'use strict';this.$SphericalRenderer1.width=o*m;this.$SphericalRenderer1.height=p*m;this.$SphericalRenderer25()};n.prototype.$SphericalRenderer25=function(){'use strict';k.perspective(this.$SphericalRenderer9,j.toRadian(this.$SphericalRenderer20),this.$SphericalRenderer1.width/this.$SphericalRenderer1.height,.1,100);this.$SphericalRenderer6.viewport(0,0,this.$SphericalRenderer6.drawingBufferWidth,this.$SphericalRenderer6.drawingBufferHeight)};n.prototype.$SphericalRenderer24=function(){'use strict';this.$SphericalRenderer26();this.updateViewportDimensions(this.$SphericalRenderer1.clientWidth,this.$SphericalRenderer1.clientHeight);this.$SphericalRenderer21={x:this.$SphericalRenderer2.stereoFormat===c('VideoStereoFormat').LEFT_RIGHT?2:1,y:this.$SphericalRenderer2.stereoFormat===c('VideoStereoFormat').TOP_BOTTOM?2:1};if(!this.$SphericalRenderer27())throw new Error('Failed to intialize shaders: '+c('getErrorNameFromWebGLErrorCode')(this.$SphericalRenderer6.getError()));this.$SphericalRenderer28();this.$SphericalRenderer6.clearColor(0,0,0,1);this.$SphericalRenderer14.setAttribute('crossorigin','anonymous')};n.prototype.getScreenshotDataURL=function(o,p,q,r){'use strict';if(!this.$SphericalRenderer6||this.$SphericalRenderer3)return '';this.render(o,p);return this.$SphericalRenderer1.toDataURL(q,r)};n.prototype.$SphericalRenderer26=function(){'use strict';if(this.$SphericalRenderer6&&!this.$SphericalRenderer3)return;if(!b.WebGLRenderingContext)throw new Error('WebGLRenderingContext not available.');var o=['webgl','experimental-webgl','webkit-3d','moz-webgl'],p=null,q=null,r=c('EventListener').listen(this.$SphericalRenderer1,'webglcontextcreationerror',function(t){return q=t.statusMessage});for(var s=0;s<o.length;s++){try{p=this.$SphericalRenderer1.getContext(o[s])}catch(t){}if(p)break;}r.remove();if(!p){if(!q)q='Unknown error.';throw new Error('Failed to acquire 3D rendering context: '+q)}this.$SphericalRenderer6=p;this.$SphericalRenderer3=false};n.prototype.$SphericalRenderer27=function(){'use strict';var o=this.$SphericalRenderer29();if(!o)return false;var p=this.$SphericalRenderer30();if(!p)return false;this.$SphericalRenderer13=this.$SphericalRenderer6.createProgram();this.$SphericalRenderer6.attachShader(this.$SphericalRenderer13,o);this.$SphericalRenderer6.attachShader(this.$SphericalRenderer13,p);this.$SphericalRenderer6.linkProgram(this.$SphericalRenderer13);if(!this.$SphericalRenderer6.getProgramParameter(this.$SphericalRenderer13,this.$SphericalRenderer6.LINK_STATUS))return false;this.$SphericalRenderer6.useProgram(this.$SphericalRenderer13);this.$SphericalRenderer13.vertexPositionAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer13,'aVertexPosition');this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer13.vertexPositionAttribute);this.$SphericalRenderer13.pMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer13,'uPMatrix');this.$SphericalRenderer13.mvMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer13,'uMVMatrix');this.$SphericalRenderer13.samplerUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer13,'uSampler');if(!this.$SphericalRenderer16){this.$SphericalRenderer13.textureCoordAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer13,'aTextureCoord');this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer13.textureCoordAttribute)}return true};n.prototype.$SphericalRenderer28=function(){'use strict';this.$SphericalRenderer12=this.$SphericalRenderer6.createTexture();this.$SphericalRenderer12.image=this.$SphericalRenderer14;var o=this.$SphericalRenderer16?this.$SphericalRenderer6.TEXTURE_CUBE_MAP:this.$SphericalRenderer6.TEXTURE_2D;this.$SphericalRenderer6.bindTexture(o,this.$SphericalRenderer12);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_MAG_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_MIN_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_WRAP_S,this.$SphericalRenderer6.CLAMP_TO_EDGE);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_WRAP_T,this.$SphericalRenderer6.CLAMP_TO_EDGE);this.$SphericalRenderer6.bindTexture(o,null)};n.prototype.$SphericalRenderer31=function(o){var p=arguments.length<=1||arguments[1]===undefined?30:arguments[1],q=arguments.length<=2||arguments[2]===undefined?30:arguments[2],r=arguments.length<=3||arguments[3]===undefined?Math.PI:arguments[3],s=arguments.length<=4||arguments[4]===undefined?Math.PI*2:arguments[4],t=arguments.length<=5||arguments[5]===undefined?0:arguments[5];'use strict';var u=2,v=[],w=[],x,y;for(x=0;x<=p;x++){var z=(x/p-.5)*r,aa=Math.sin(z),ba=Math.cos(z);for(y=0;y<=q;y++){var ca=(y/q-.5)*s+t,da=Math.sin(ca),ea=Math.cos(ca),fa=ea*ba,ga=aa,ha=da*ba,ia=y/q/this.$SphericalRenderer21.x,ja=x/p/this.$SphericalRenderer21.y;w.push(ia);w.push(ja);v.push(u*fa);v.push(u*ga);v.push(u*ha)}}var ka=[];for(x=0;x<p;x++)for(y=0;y<q;y++){var la=x*(q+1)+y,ma=la+q+1;ka.push(la);ka.push(ma);ka.push(la+1);ka.push(ma);ka.push(ma+1);ka.push(la+1)}this.$SphericalRenderer17[o]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer17[o]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(w),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer17[o].itemSize=2;this.$SphericalRenderer17[o].numItems=w.length/2;this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(v),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=3;this.$SphericalRenderer19.numItems=v.length/3}this.$SphericalRenderer18=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer18);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(ka),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer18){this.$SphericalRenderer18.itemSize=1;this.$SphericalRenderer18.numItems=ka.length}};n.prototype.$SphericalRenderer32=function(o,p){'use strict';var q=20,r=30,s=2,t=[],u=[],v=[],w=[],x,y;for(x=0;x<=q;x++){var z=x/q-.5,aa=z*.5*Math.PI,ba=Math.sin(aa),ca=Math.cos(aa),da=(z/o+.5)/this.$SphericalRenderer21.y;for(y=0;y<=r;y++){var ea=y/r-.5,fa=ea*2*Math.PI,ga=Math.sin(fa),ha=Math.cos(fa),ia=ha*ca*s,ja=ba*s,ka=ga*ca*s,la=(ea/o*.8+.4)/this.$SphericalRenderer21.x;u.push(la);u.push(da);t.push(ia);t.push(ja);t.push(ka);if(x==0||x==q){var ma=Math.sign(1-x),na=(ga*.1/o+.9)/this.$SphericalRenderer21.x,oa=(ha*.25*ma/o+.5+z*.5)/this.$SphericalRenderer21.y;w.push(na);w.push(oa);v.push(ia);v.push(ja);v.push(ka)}}}var pa=t.length/3;u.push.apply(u,w);t.push.apply(t,v);var qa=t.length/3,ra=Math.sin(Math.PI*.25)*s;u.push(.9/this.$SphericalRenderer21.x);u.push(.25/this.$SphericalRenderer21.y);t.push(0);t.push(-ra);t.push(0);u.push(.9/this.$SphericalRenderer21.x);u.push(.75/this.$SphericalRenderer21.y);t.push(0);t.push(ra);t.push(0);var sa=[];for(x=0;x<q;x++)for(y=0;y<r;y++){var ta=x*(r+1)+y,ua=ta+r+1;sa.push(ta);sa.push(ua);sa.push(ta+1);sa.push(ua);sa.push(ua+1);sa.push(ta+1)}for(var va=0;va<2;va++)for(y=0;y<r;y++){sa.push(y+pa+va*(r+1));sa.push(y+pa+va*(r+1)+1);sa.push(qa+va)}this.$SphericalRenderer17[p]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer17[p]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(u),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer17[p].itemSize=2;this.$SphericalRenderer17[p].numItems=u.length/2;this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(t),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=3;this.$SphericalRenderer19.numItems=t.length/3}this.$SphericalRenderer18=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer18);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(sa),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer18){this.$SphericalRenderer18.itemSize=1;this.$SphericalRenderer18.numItems=sa.length}};n.prototype.$SphericalRenderer33=function(o,p,q){'use strict';var r;if(this.$SphericalRenderer8){r=[1,3,7,5,6,7,3,2,0,2,3,1,4,5,7,6,4,6,2,0,0,1,5,4]}else r=[5,1,3,7,0,4,6,2,6,7,3,2,0,1,5,4,4,5,7,6,1,0,2,3];var s=[];for(var t=0;t<r.length;t++){var u=r[t]>>2&1,v=r[t]>>1&1,w=r[t]>>0&1;s.push(u*2-1);s.push(v*2-1);s.push(w*2-1)}this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(s),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=3;this.$SphericalRenderer19.numItems=s.length/3}if(!this.$SphericalRenderer16){var x,y,z,aa,ba,ca=[];if(this.$SphericalRenderer8){var da=this.$SphericalRenderer12.image.videoWidth/2;p=da/(Math.floor(da/32)*32);z=(1-1/p)/2;x=3;y=2;aa=1/y;ba=1/x}else{z=(1-1/p)/2;x=2;y=3;aa=1/y;ba=1/x}for(var ea=0;ea<x;++ea)for(var fa=0;fa<y;++fa){var ga=x-1-ea,ha=fa;ca.push((ha+z)*aa);ca.push((ga+z)*ba);ca.push((ha+1-z)*aa);ca.push((ga+z)*ba);ca.push((ha+1-z)*aa);ca.push((ga+1-z)*ba);ca.push((ha+z)*aa);ca.push((ga+1-z)*ba)}this.$SphericalRenderer17[q]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer17[q]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(ca),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer17[q].itemSize=2;this.$SphericalRenderer17[q].numItems=ca.length/2}var ia=[];for(var ja=0;ja<r.length;ja+=4){ia.push(ja);ia.push(ja+2);ia.push(ja+1);ia.push(ja);ia.push(ja+3);ia.push(ja+2)}this.$SphericalRenderer18=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer18);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(ia),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer18){this.$SphericalRenderer18.itemSize=1;this.$SphericalRenderer18.numItems=ia.length}};n.prototype.$SphericalRenderer29=function(){'use strict';var o=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.VERTEX_SHADER),p='\n      attribute vec3 aVertexPosition;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec3 vVertexDirectionVector;\n\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vVertexDirectionVector = aVertexPosition;\n      }\n    ',q='\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec2 vTextureCoord;\n\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n      }\n    ',r='\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      uniform sampler2D uSampler;\n      // It\'s actually inverse MV matrix\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vPos;\n      varying lowp float vRecompute;\n      varying highp vec2 vOffset;\n\n      highp vec2 EquirectPart( highp vec3 p )\n      {\n        highp float xz = sqrt( p.x * p.x + p.z * p.z );\n        highp float lat = -atan( p.y, xz );\n        highp float t = lat / 1.57079633 / 1.01 + 0.5;\n        highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n        highp vec2 st = vec2(s, t);\n        return st;\n      }\n      highp vec2 FacePart( highp vec3 p )\n      {\n          highp vec2 t = p.xz / p.y;\n          highp float s = sign(p.y);\n          return vec2(0.9 + t.x * s * 0.099009901,\n              0.5 - s * 0.25 - t.y * 0.247524752);\n      }\n\n      highp vec2 parseOffset()\n      {\n        bool off[99];\n        for (int i = 0; i < 36; i += 3) {\n          highp vec4 c = vec4(0.0, 0.0, 0.0, 0.0);\n          for (int j = -1; j <= 1; j += 1) {\n            c += texture2D(uSampler,\n                vec2(float(546 + i * 4 + j) / 1500.0, 1.0));\n          }\n          c /= 3.0;\n          highp float minC = min(0.5, min(c.r, min(c.g, c.b)));\n          highp float diffC = max(0.5, max(c.r, max(c.g, c.b))) - minC + 0.001;\n          off[i + 2] = ((c.r - minC) / diffC) > 0.5;\n          off[i + 1] = ((c.g - minC) / diffC) > 0.5;\n          off[i + 0] = ((c.b - minC) / diffC) > 0.5;\n        }\n        for (int i = 63; i < 99; i += 3) {\n          highp vec4 c = vec4(0.0, 0.0, 0.0, 0.0);\n          for (int j = -1; j <= 1; j += 1) {\n            c += texture2D(uSampler,\n                vec2(float(546 + i * 4 + j) / 1500.0, 1.0));\n          }\n          c /= 3.0;\n          highp float minC = min(0.5, min(c.r, min(c.g, c.b)));\n          highp float diffC = max(0.5, max(c.r, max(c.g, c.b))) - minC + 0.001;\n          off[i + 2] = ((c.r - minC) / diffC) > 0.5;\n          off[i + 1] = ((c.g - minC) / diffC) > 0.5;\n          off[i + 0] = ((c.b - minC) / diffC) > 0.5;\n        }\n        highp float f[3];\n        for (highp int i = 0; i < 3; i += 2) {\n          highp float sig =  -2.0 * float(off[1 + 31 + i * 32]) + 1.0;\n          highp float e = 0.0;\n          for (highp int j = 0; j < 8; ++j) {\n            e += float(off[1 + 23 + i * 32 + j]) * pow(2.0, float(j));\n          }\n          highp float v = 1.0;\n          for (highp int j = 1; j < 24; ++j) {\n            v += float(off[24 + i * 32 - j]) * pow(0.5, float(j));\n          }\n          f[i] = sig * v * pow(2.0, e - 127.0);\n        }\n        return vec2(f[0], -f[2]);\n      }\n\n      const float eps = 0.03;\n\n      void main(void) {\n        gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n        vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n        lowp vec2 tmp = aTextureCoord.xy;\n\n        highp vec3 v = normalize( vPos );\n        vOffset = parseOffset();\n        highp float d = length( v.xz );\n        highp vec2 t = normalize(v.xz / d + vOffset) * d;\n        v = vec3(t.x, v.y, t.y);\n        vRecompute = 0.0;\n        if ( abs(v.y) < 0.707106781 ) {\n          vTextureCoord = EquirectPart( v );\n          vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n              vTextureCoord.x > 0.8 - eps * 0.5 );\n        } else {\n          vTextureCoord = FacePart( v );\n          vRecompute += float( abs(v.y) > 1.0 - eps );\n        }\n        vRecompute += float( abs(v.y) < 0.707106781 + eps &&\n            abs(v.y) > 0.707106781 - eps );\n      }\n    ',s=this.$SphericalRenderer7?r:this.$SphericalRenderer16?p:q;this.$SphericalRenderer6.shaderSource(o,s);this.$SphericalRenderer6.compileShader(o);if(!this.$SphericalRenderer6.getShaderParameter(o,this.$SphericalRenderer6.COMPILE_STATUS))return null;return o};n.prototype.$SphericalRenderer30=function(){'use strict';var o=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.FRAGMENT_SHADER),p='\n      varying highp vec3 vVertexDirectionVector;\n      uniform samplerCube uSampler;\n\n      void main(void) {\n        gl_FragColor = textureCube(uSampler, vVertexDirectionVector);\n      }\n    ',q='\n      varying highp vec2 vTextureCoord;\n\n      uniform sampler2D uSampler;\n\n      void main(void) {\n        gl_FragColor = texture2D(\n          uSampler,\n          vec2(vTextureCoord.s, vTextureCoord.t)\n        );\n      }\n    ',r='\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vPos;\n      varying lowp float vRecompute;\n      varying highp vec2 vOffset;\n\n      uniform sampler2D uSampler;\n\n      highp vec2 EquirectPart( highp vec3 p )\n      {\n        highp float xz = sqrt( p.x * p.x + p.z * p.z );\n        highp float lat = -atan( p.y, xz );\n        highp float t = lat / 1.57079633 / 1.01 + 0.5;\n        highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n        highp vec2 st = vec2(s, t);\n        return st;\n      }\n\n      highp vec2 FacePart( highp vec3 p )\n      {\n          highp vec2 t = p.xz / p.y;\n          highp float s = sign(p.y);\n          return vec2(0.9 + t.x * s * 0.099009901,\n              0.5 - s * 0.25 - t.y * 0.247524752);\n      }\n\n      void main()\n      {\n        if (vRecompute > 0.0) {\n          highp vec3 v = normalize( vPos );\n          highp float d = length( v.xz );\n          highp vec2 t = normalize(v.xz / d + vOffset) * d;\n          v = vec3(t.x, v.y, t.y);\n          highp vec2 o;\n          if ( abs(v.y) < 0.707106781 ) {\n            o = EquirectPart( v );\n          } else {\n            o = FacePart( v );\n          }\n          gl_FragColor = texture2D( uSampler, o );\n        } else {\n          gl_FragColor = texture2D( uSampler, vTextureCoord );\n        }\n      }\n    ',s=this.$SphericalRenderer7?r:this.$SphericalRenderer16?p:q;this.$SphericalRenderer6.shaderSource(o,s);this.$SphericalRenderer6.compileShader(o);if(!this.$SphericalRenderer6.getShaderParameter(o,this.$SphericalRenderer6.COMPILE_STATUS))return null;return o};n.prototype.$SphericalRenderer34=function(){'use strict';if(this.$SphericalRenderer16){this.$SphericalRenderer35()}else{this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer12);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,!this.$SphericalRenderer7);try{this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_2D,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer12.image)}catch(o){this.emit('renderingError',o)}this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,null)}};n.prototype.renderWithRotationMatrix=function(o){'use strict';if(this.$SphericalRenderer3)return;if(this.$SphericalRenderer15)this.$SphericalRenderer34();this.$SphericalRenderer10=o;if(this.$SphericalRenderer7)k.rotateY(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(-90));this.$SphericalRenderer36()};n.prototype.render=function(o,p){'use strict';if(this.$SphericalRenderer3)return;if(this.$SphericalRenderer15)this.$SphericalRenderer34();if(this.$SphericalRenderer8){k.identity(this.$SphericalRenderer10);k.rotateX(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(-p));k.rotateY(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(o-135));k.rotateZ(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(45))}else{if(this.$SphericalRenderer7)o-=90;k.identity(this.$SphericalRenderer10);k.rotateX(this.$SphericalRenderer10,this.$SphericalRenderer10,-j.toRadian(p));k.rotateY(this.$SphericalRenderer10,this.$SphericalRenderer10,j.toRadian(o))}this.$SphericalRenderer36()};n.prototype.$SphericalRenderer36=function(){'use strict';this.$SphericalRenderer6.clear(this.$SphericalRenderer6.COLOR_BUFFER_BIT|this.$SphericalRenderer6.DEPTH_BUFFER_BIT);this.$SphericalRenderer6.activeTexture(this.$SphericalRenderer6.TEXTURE0);if(this.$SphericalRenderer16){this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,this.$SphericalRenderer12);if(this.$SphericalRenderer19===null)this.$SphericalRenderer33(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,0);}else{this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer12);var o=this.$SphericalRenderer12.image.videoWidth;if(this.$SphericalRenderer2.projectionType===c('VideoProjection').CUBEMAP||this.$SphericalRenderer2.projectionType===c('VideoProjection').ROTATED_CUBEMAP){if(!(o in this.$SphericalRenderer17))this.$SphericalRenderer33(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,o);}else if(this.$SphericalRenderer2.projectionType===c('VideoProjection').BARREL){if(!(o in this.$SphericalRenderer17))this.$SphericalRenderer32(this.$SphericalRenderer2.expansionCoef||1.01,o);}else if(this.$SphericalRenderer7){if(!(o in this.$SphericalRenderer17))this.$SphericalRenderer31(o,40,40,Math.PI/180*111,Math.PI/180*142,-Math.PI/2);}else if(!(o in this.$SphericalRenderer17))this.$SphericalRenderer31(o);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer17[o]);this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer13.textureCoordAttribute,this.$SphericalRenderer17[o].itemSize,this.$SphericalRenderer6.FLOAT,false,0,0)}this.$SphericalRenderer6.uniform1i(this.$SphericalRenderer13.samplerUniform,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer19);if(this.$SphericalRenderer19)this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer13.vertexPositionAttribute,this.$SphericalRenderer19.itemSize,this.$SphericalRenderer6.FLOAT,false,0,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer18);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer13.pMatrixUniform,false,this.$SphericalRenderer9);if(this.$SphericalRenderer7){k.invert(this.$SphericalRenderer11,this.$SphericalRenderer10);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer13.mvMatrixUniform,false,this.$SphericalRenderer11)}else this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer13.mvMatrixUniform,false,this.$SphericalRenderer10);if(this.$SphericalRenderer18)this.$SphericalRenderer6.drawElements(this.$SphericalRenderer6.TRIANGLES,this.$SphericalRenderer18.numItems,this.$SphericalRenderer6.UNSIGNED_SHORT,0);this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,null)};n.prototype.$SphericalRenderer37=function(){'use strict';var o=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_CUBE_MAP_TEXTURE_SIZE),p=this.$SphericalRenderer12.image.width;return Math.min(o,p)};n.prototype.$SphericalRenderer35=function(){'use strict';var o=this.$SphericalRenderer37(),p=this.$SphericalRenderer12.image.width,q=c('DOM').create('canvas',{width:o,height:o}),r=q.getContext('2d');this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,false);this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,this.$SphericalRenderer12);for(var s=0;s<6;s++){r.drawImage(this.$SphericalRenderer12.image,0,s*p,p,p,0,0,o,o);var t=new Uint8Array(r.getImageData(0,0,o,o).data);this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,this.$SphericalRenderer6.RGBA,o,o,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,t)}this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,null)};f.exports=n}),null);
__d('SphericalVideoPlayer',['cx','invariant','Arbiter','Banzai','CSS','DOM','DOMDimensions','Event','FullScreen','SphericalVideoPerformanceTracker','SphericalMediaCanvasPool','SphericalVideoComponentActions','SphericalVideoPlayerEvents','SphericalViewportControl','SphericalVideoComponentDispatcher','SubscriptionsHandler','SphericalRenderer','VideoPlayerFallbackEvents','VideoPlayerLoggerEvent','VideoPlayerReason','VideoPlayerStates','forwardEvent','requestAnimationFrame','uniqueID','getFullScreenElement','SphericalViewportControlStore','VideoPlayerControllerStore'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='SphericalVideoPlayer',k=2,l=1000;c('SphericalMediaCanvasPool').setLimit(k,j);function m(n,o){this.$SphericalVideoPlayer38=function(){if(!this.$SphericalVideoPlayer1.isState(c('VideoPlayerStates').PAUSED))this.$SphericalVideoPlayer1.pause(c('VideoPlayerReason').SPHERICAL_SWITCH_CANVAS);this.$SphericalVideoPlayer43();this.$SphericalVideoPlayer35()}.bind(this);this.$SphericalVideoPlayer42=function(p){if(!this.$SphericalVideoPlayer13)return;var q=this.$SphericalVideoPlayer13;if(this.$SphericalVideoPlayer2.readyState>=this.$SphericalVideoPlayer2.HAVE_CURRENT_DATA&&(this.$SphericalVideoPlayer33()||this.$SphericalVideoPlayer7)){c('SphericalVideoPerformanceTracker').get().addFrameAtTime(p);this.$SphericalVideoPlayer7=false;var r=this.$SphericalVideoPlayer12.getOrientation();q.render(r.x+90,r.y);if(this.$SphericalVideoPlayer15){this.$SphericalVideoPlayer15.remove();this.$SphericalVideoPlayer15=null}}c('requestAnimationFrame')(this.$SphericalVideoPlayer42)}.bind(this);this.$SphericalVideoPlayer24=function(p,q){this.$SphericalVideoPlayer12.setRelativeSphericalOrientation(p,q)}.bind(this);this.$SphericalVideoPlayer27=function(p,q){this.$SphericalVideoPlayer12.setSphericalOrientation(p,q)}.bind(this);this.$SphericalVideoPlayer28=function(p){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer13.updateFieldOfView(p);this.$SphericalVideoPlayer12.setFieldOfView(p);this.$SphericalVideoPlayer19=p;this.$SphericalVideoPlayer23()}}.bind(this);this.$SphericalVideoPlayer29=function(p){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer10.projectionType=p;this.$SphericalVideoPlayer13.reconfigure(this.$SphericalVideoPlayer2,this.$SphericalVideoPlayer10,true);this.$SphericalVideoPlayer23()}}.bind(this);this.$SphericalVideoPlayer30=function(p){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer10.stereoFormat=p;this.$SphericalVideoPlayer13.reconfigure(this.$SphericalVideoPlayer2,this.$SphericalVideoPlayer10,true);this.$SphericalVideoPlayer23()}}.bind(this);this.$SphericalVideoPlayer25=function(p,q){if(c('FullScreen').isFullScreen()&&(p<this.$SphericalVideoPlayer5.width||q<this.$SphericalVideoPlayer5.height))return;if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer5.width=p;this.$SphericalVideoPlayer5.height=q;this.$SphericalVideoPlayer41(this.$SphericalVideoPlayer13,p,q);if(this.$SphericalVideoPlayer11.useViewportDimension)this.$SphericalVideoPlayer6=c('DOMDimensions').getElementDimensions(this.$SphericalVideoPlayer4);this.$SphericalVideoPlayer23()}else this.$SphericalVideoPlayer5={width:p,height:q};}.bind(this);this.$SphericalVideoPlayer40=function(p,q){p=p>=0?(p+180)%360-180:(p-180)%360+180;this.$SphericalVideoPlayer44(p,q);this.$SphericalVideoPlayer18.yaw=p;this.$SphericalVideoPlayer18.pitch=q;if(!this.$SphericalVideoPlayer13)this.$SphericalVideoPlayer34();this.$SphericalVideoPlayer23()}.bind(this);this.$SphericalVideoPlayer10=n;this.$SphericalVideoPlayer11=Object.assign({viewportClassName:"_2a6s",canvasClassName:"_38vt",placeholderImgClassName:"_44h9",videoID:'',playerID:undefined,eagerPreload:undefined,preventScrollDefaultAction:undefined,useViewportDimension:undefined,useContainerDimensions:undefined},o);this.$SphericalVideoPlayer21=0}m.prototype.enable=function(n){if(this.$SphericalVideoPlayer1)return;this.$SphericalVideoPlayer1=n;if(typeof b.WebGLRenderingContext!=='function'){this.$SphericalVideoPlayer22({error:'SPHERICAL_SETUP_FAILED',message:'WebGLRenderingContext not available.'});return}var o=n.getVideoNode();o instanceof HTMLVideoElement||i(0);this.$SphericalVideoPlayer2=o;this.$SphericalVideoPlayer7=false;this.$SphericalVideoPlayer17=true;this.$SphericalVideoPlayer8=new (c('SubscriptionsHandler'))();this.$SphericalVideoPlayer8.addSubscriptions(c('Event').listen(this.$SphericalVideoPlayer2,'loadeddata',function(){return this.$SphericalVideoPlayer23()}.bind(this)),c('Event').listen(this.$SphericalVideoPlayer2,'seeked',function(){return this.$SphericalVideoPlayer23()}.bind(this)),c('Event').listen(this.$SphericalVideoPlayer2,'ended',function(){return this.$SphericalVideoPlayer24(0,0)}.bind(this)),c('Event').listen(window,'resize',function(){if(c('FullScreen').isFullScreen()&&this.$SphericalVideoPlayer1.getContainerNode()===c('getFullScreenElement')())this.$SphericalVideoPlayer25(window.innerWidth,window.innerHeight);}.bind(this)),n.addListener('stateChange',function(){if(n.isState(c('VideoPlayerStates').DESTROYED))this.$SphericalVideoPlayer26();}.bind(this)),n.addListener(c('VideoPlayerFallbackEvents').RECOVER,function(){this.$SphericalVideoPlayer26();c('CSS').removeClass(this.$SphericalVideoPlayer2,"_3axk");this.$SphericalVideoPlayer1.play()}.bind(this)),n.addListener(c('SphericalVideoPlayerEvents').SET_ABSOLUTE_SPHERICAL_ORIENTATION,this.$SphericalVideoPlayer27),n.addListener(c('SphericalVideoPlayerEvents').SET_RELATIVE_SPHERICAL_ORIENTATION,this.$SphericalVideoPlayer24),n.addListener(c('SphericalVideoPlayerEvents').SET_FIELD_OF_VIEW,this.$SphericalVideoPlayer28),n.addListener(c('SphericalVideoPlayerEvents').SET_VIDEO_PROJECTION,this.$SphericalVideoPlayer29),n.addListener(c('SphericalVideoPlayerEvents').SET_STEREO_MODE,this.$SphericalVideoPlayer30),n.addListener('dimensionsChange',this.$SphericalVideoPlayer25),n.once('changeVolume',function(){return this.$SphericalVideoPlayer17=false}.bind(this)),n.once('muteVideo',function(){return this.$SphericalVideoPlayer17=false}.bind(this)),n.once('unmuteVideo',function(){return this.$SphericalVideoPlayer17=false}.bind(this)),n.addListener('toggleFullscreen',function(){return this.$SphericalVideoPlayer4.focus()}.bind(this)),n.addListener('TahoeController/enterTahoe',function(){return this.$SphericalVideoPlayer4.focus()}.bind(this)));if(this.$SphericalVideoPlayer11.useContainerDimensions){var p=n.getContainerNode();this.$SphericalVideoPlayer5=c('DOMDimensions').getElementDimensions(p)}else{this.$SphericalVideoPlayer5=c('DOMDimensions').getElementDimensions(o);if(this.$SphericalVideoPlayer5.width===0||this.$SphericalVideoPlayer5.height===0)this.$SphericalVideoPlayer5={width:o.width,height:o.height};}this.$SphericalVideoPlayer14=this.$SphericalVideoPlayer1.getVideoPlayerID()||c('uniqueID')();this.$SphericalVideoPlayer18={yaw:this.$SphericalVideoPlayer10.initialHeading,pitch:this.$SphericalVideoPlayer10.initialPitch};this.$SphericalVideoPlayer19=this.$SphericalVideoPlayer10.fieldOfView;var q=n.getVideoProjection();if(q)this.$SphericalVideoPlayer10.projectionType=q;c('CSS').addClass(o,"_3axk");this.$SphericalVideoPlayer31();n.registerOption('SphericalVideoPlayer','getDimensions',function(){return this.$SphericalVideoPlayer11.useViewportDimension?this.$SphericalVideoPlayer6:this.$SphericalVideoPlayer5}.bind(this));n.registerOption('SphericalVideoPlayer','isReady',function(){return !!this.$SphericalVideoPlayer13}.bind(this));n.registerOption('SphericalVideoPlayer','getScreenshotDataURL',function(){return this.$SphericalVideoPlayer32()}.bind(this));n.registerOption('SphericalVideoPlayer','getIsSingleFisheye',function(){return this.$SphericalVideoPlayer10.isSingleFisheye&&this.$SphericalVideoPlayer10.originalFOV!==null}.bind(this));n.registerOption('SphericalVideoPlayer','getOriginalFOV',function(){return this.$SphericalVideoPlayer10.originalFOV}.bind(this));if(this.$SphericalVideoPlayer33()||this.$SphericalVideoPlayer11.eagerPreload){this.$SphericalVideoPlayer34()}else this.$SphericalVideoPlayer35();};m.prototype.disable=function(){this.$SphericalVideoPlayer26()};m.prototype.$SphericalVideoPlayer34=function(){if(this.$SphericalVideoPlayer1.getOption('SphericalVideoPlayer','isUnavailable'))return;if(this.$SphericalVideoPlayer16){this.$SphericalVideoPlayer16.remove();this.$SphericalVideoPlayer16=null}try{this.$SphericalVideoPlayer36()}catch(n){this.$SphericalVideoPlayer22({error:'SPHERICAL_SETUP_FAILED',message:n.message});return}this.$SphericalVideoPlayer1.setStillFrameEnabled(false);this.$SphericalVideoPlayer23();this.$SphericalVideoPlayer1.emit('SphericalVideoPlayer/ready')};m.prototype.$SphericalVideoPlayer35=function(){this.$SphericalVideoPlayer16=this.$SphericalVideoPlayer1.addListener('stateChange',function(){if(this.$SphericalVideoPlayer33())this.$SphericalVideoPlayer34();}.bind(this))};m.prototype.$SphericalVideoPlayer37=function(){if(!this.$SphericalVideoPlayer13)return;var n=this.$SphericalVideoPlayer32(),o=c('DOM').create('img',{width:this.$SphericalVideoPlayer5.width,height:this.$SphericalVideoPlayer5.height,src:n,className:this.$SphericalVideoPlayer11.placeholderImgClassName});c('DOM').insertAfter(this.$SphericalVideoPlayer2,o);if(this.$SphericalVideoPlayer15)this.$SphericalVideoPlayer15.remove();this.$SphericalVideoPlayer15=o;this.$SphericalVideoPlayer38()};m.prototype.$SphericalVideoPlayer32=function(n,o){if(!this.$SphericalVideoPlayer13)return '';var p=this.$SphericalVideoPlayer13,q=this.$SphericalVideoPlayer12.getOrientation(),r=q.x,s=q.y;return p.getScreenshotDataURL(r+90,s,n,o)};m.prototype.$SphericalVideoPlayer31=function(){var n=c('DOM').create('div',{className:this.$SphericalVideoPlayer11.viewportClassName,tabIndex:0}),o={};if(this.$SphericalVideoPlayer10.isSingleFisheye&&this.$SphericalVideoPlayer10.originalFOV){var p=this.$SphericalVideoPlayer10.originalFOV/2;this.$SphericalVideoPlayer10.partialLimits={partialLeftDegrees:p,partialRightDegrees:p,partialTopDegrees:p,partialBottomDegrees:p};o=this.$SphericalVideoPlayer39()}var q=new (c('SphericalViewportControl'))(n,this.$SphericalVideoPlayer10,o);this.$SphericalVideoPlayer8.addSubscriptions(q.addListener('DOM/click',function(s){if(s.button!==0)return;this.$SphericalVideoPlayer1.clickVideo();s.preventDefault()}.bind(this)),q.addListener('viewportChange',this.$SphericalVideoPlayer40),q.addListener('updateViewportBegin',function(){if(this.$SphericalVideoPlayer1.isMuted()&&this.$SphericalVideoPlayer17){this.$SphericalVideoPlayer17=false;this.$SphericalVideoPlayer1.unmute()}this.$SphericalVideoPlayer1.logEvent(c('VideoPlayerLoggerEvent').VIEWPORT_ROTATED)}.bind(this)));this.$SphericalVideoPlayer1.registerOption('SphericalVideoPlayer','getCurrentViewport',function(){return this.$SphericalVideoPlayer18}.bind(this));this.$SphericalVideoPlayer1.registerOption('SphericalVideoPlayer','getFieldOfView',function(){return this.$SphericalVideoPlayer19}.bind(this));var r=['DOM/click','updateViewportBegin','updateViewportMove','updateViewportEnd','wheelScroll','viewportChange'];this.$SphericalVideoPlayer8.addSubscriptions.apply(this.$SphericalVideoPlayer8,r.map(function(s){return c('forwardEvent')(q,this.$SphericalVideoPlayer1,s)}.bind(this)));this.$SphericalVideoPlayer12=q;this.$SphericalVideoPlayer4=n;c('Arbiter').subscribe('VideoChannelView/opened',function(){this.$SphericalVideoPlayer20=true;this.$SphericalVideoPlayer12.disableKeyboard()}.bind(this));c('Arbiter').subscribe('VideoChannelView/closed',function(){this.$SphericalVideoPlayer20=false;this.$SphericalVideoPlayer12.enableKeyboard()}.bind(this));c('FullScreen').subscribe('changed',function(){if(c('FullScreen').isFullScreen()){this.$SphericalVideoPlayer12.enableKeyboard()}else if(this.$SphericalVideoPlayer20)this.$SphericalVideoPlayer12.disableKeyboard();}.bind(this));if(this.$SphericalVideoPlayer11.preventScrollDefaultAction)this.$SphericalVideoPlayer12.setPreventScrollDefaultAction(true);c('DOM').insertAfter(this.$SphericalVideoPlayer2,n);if(this.$SphericalVideoPlayer11.useViewportDimension)this.$SphericalVideoPlayer6=c('DOMDimensions').getElementDimensions(n);c('SphericalVideoComponentDispatcher').explicitlyRegisterStores([c('SphericalViewportControlStore'),c('VideoPlayerControllerStore')]);c('SphericalVideoComponentActions').registerSphericalViewportControl(this.$SphericalVideoPlayer1.getVideoPlayerID(),this.$SphericalVideoPlayer12,this.$SphericalVideoPlayer4)};m.prototype.$SphericalVideoPlayer36=function(){var n={canvasAttrs:{width:this.$SphericalVideoPlayer5.width,height:this.$SphericalVideoPlayer5.height,className:this.$SphericalVideoPlayer11.canvasClassName,tabIndex:0},beforeCanvasLost:function(){return this.$SphericalVideoPlayer37()}.bind(this)},o=c('SphericalMediaCanvasPool').get(this.$SphericalVideoPlayer14,n,j),p=new (c('SphericalRenderer'))(this.$SphericalVideoPlayer2,o,this.$SphericalVideoPlayer10);this.$SphericalVideoPlayer9=new (c('SubscriptionsHandler'))();this.$SphericalVideoPlayer9.addSubscriptions(p.addListener('renderingError',function(q){return this.$SphericalVideoPlayer22({error:'SPHERICAL_RENDER_ERROR',message:q.message})}.bind(this)),p.addListener('renderingContextLost',this.$SphericalVideoPlayer38));this.$SphericalVideoPlayer3=o;this.$SphericalVideoPlayer13=p;c('DOM').insertAfter(this.$SphericalVideoPlayer2,o);this.$SphericalVideoPlayer41(p,this.$SphericalVideoPlayer5.width,this.$SphericalVideoPlayer5.height);c('CSS').show(o);c('requestAnimationFrame')(this.$SphericalVideoPlayer42)};m.prototype.$SphericalVideoPlayer22=function(event){this.$SphericalVideoPlayer1.registerOption('SphericalVideoPlayer','isUnavailable',function(){return true});this.$SphericalVideoPlayer1.logError(event);this.$SphericalVideoPlayer1.emit(c('VideoPlayerLoggerEvent').ERROR,event);this.$SphericalVideoPlayer26()};m.prototype.$SphericalVideoPlayer33=function(){return this.$SphericalVideoPlayer1.isState(c('VideoPlayerStates').PLAYING)};m.prototype.$SphericalVideoPlayer41=function(n,o,p){n.updateViewportDimensions(o,p);c('SphericalVideoComponentActions').updateViewportDimensions(this.$SphericalVideoPlayer1.getVideoPlayerID(),o,p)};m.prototype.$SphericalVideoPlayer23=function(){this.$SphericalVideoPlayer7=true};m.prototype.$SphericalVideoPlayer44=function(n,o){var p=Date.now();if(p-this.$SphericalVideoPlayer21>=l){this.$SphericalVideoPlayer21=p;c('Banzai').post('spherical_video_viewport',{video_fbid:this.$SphericalVideoPlayer1.getVideoID(),yaw_degrees:n,pitch_degrees:o,roll_degrees:0,field_of_view_y:this.$SphericalVideoPlayer10.fieldOfView,aspect_ratio:this.$SphericalVideoPlayer5.height/this.$SphericalVideoPlayer5.width,video_player_position:this.$SphericalVideoPlayer2.currentTime,timestamp:p})}};m.prototype.$SphericalVideoPlayer43=function(){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer13.destroy();this.$SphericalVideoPlayer13=null;this.$SphericalVideoPlayer9.release();this.$SphericalVideoPlayer3.remove()}};m.prototype.$SphericalVideoPlayer26=function(){if(this.$SphericalVideoPlayer8)this.$SphericalVideoPlayer8.release();this.$SphericalVideoPlayer43();if(this.$SphericalVideoPlayer12)this.$SphericalVideoPlayer12.destroy();if(this.$SphericalVideoPlayer4)this.$SphericalVideoPlayer4.remove();c('SphericalVideoPerformanceTracker').get().destroy()};m.prototype.$SphericalVideoPlayer39=function(){return {disableAutoClientSizeUpdate:false,enableGyro:false,enableRubberBanding:false,maxSpringDegrees:0,maxStretchXDegrees:0,maxStretchYDegrees:0,minVFOV:3,rubberBandConstant:0,slipFactor:0,springFactor:0}};f.exports=m}),null);
__d('SphericalVideoRecenterControl',['SubscriptionsHandler','easeInOutInterpolate','requestAnimationFrame'],(function a(b,c,d,e,f,g){var h=1000;function i(j,k,l){'use strict';this.$SphericalVideoRecenterControl2=j;this.$SphericalVideoRecenterControl1=false;this.$SphericalVideoRecenterControl7=this.$SphericalVideoRecenterControl10.bind(this);this.$SphericalVideoRecenterControl6={yaw:k,pitch:l};this.$SphericalVideoRecenterControl5={yaw:k,pitch:l};if(j.getOption('SphericalVideoPlayer','isReady')){this.$SphericalVideoRecenterControl11()}else j.once('SphericalVideoPlayer/ready',function(){return this.$SphericalVideoRecenterControl11()}.bind(this));}i.prototype.$SphericalVideoRecenterControl11=function(){'use strict';this.$SphericalVideoRecenterControl9=new (c('SubscriptionsHandler'))();this.$SphericalVideoRecenterControl9.addSubscriptions(this.$SphericalVideoRecenterControl2.addListener('updateViewportBegin',function(){return this.$SphericalVideoRecenterControl12()}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('SphericalHeadingIndicator/click',function(){return this.$SphericalVideoRecenterControl13()}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('SphericalHeadingIndicator/click',function(){return this.$SphericalVideoRecenterControl13()}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('VideoWithSphericalGuide/intervalUpdate',function(j){return this.updateTargetViewport(j.baseYaw+j.deltaYaw,j.basePitch+j.deltaPitch)}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('VideoWithSphericalGuide/stateToggle',function(j){if(!j){this.$SphericalVideoRecenterControl6.yaw=this.$SphericalVideoRecenterControl5.yaw;this.$SphericalVideoRecenterControl6.pitch=this.$SphericalVideoRecenterControl5.pitch}}.bind(this)),this.$SphericalVideoRecenterControl2.addListener('SphericalVideoViewportTagComment/click',function(j){return this.$SphericalVideoRecenterControl13(j)}.bind(this)))};i.prototype.updateTargetViewport=function(j,k){'use strict';this.$SphericalVideoRecenterControl6.yaw=j;this.$SphericalVideoRecenterControl6.pitch=k};i.prototype.$SphericalVideoRecenterControl13=function(j){'use strict';if(this.$SphericalVideoRecenterControl1||this.$SphericalVideoRecenterControl2.getOption('VideoWithSphericalGuide','enabled')&&this.$SphericalVideoRecenterControl2.isState('playing'))return;this.$SphericalVideoRecenterControl1=true;this.$SphericalVideoRecenterControl3=Date.now();var k=this.$SphericalVideoRecenterControl2.getOption('SphericalVideoPlayer','getCurrentViewport'),l=j||this.$SphericalVideoRecenterControl6,m=l.yaw-k.yaw;if(Math.abs(m)>180)m=m>0?m-360:m+360;this.$SphericalVideoRecenterControl8={basePitch:k.pitch,deltaPitch:l.pitch-k.pitch,baseYaw:k.yaw,deltaYaw:m};this.$SphericalVideoRecenterControl2.emit('SphericalVideoRecenterControl/animationStart');c('requestAnimationFrame')(this.$SphericalVideoRecenterControl7)};i.prototype.$SphericalVideoRecenterControl12=function(){'use strict';this.$SphericalVideoRecenterControl1=false};i.prototype.$SphericalVideoRecenterControl10=function(){'use strict';if(!this.$SphericalVideoRecenterControl1){this.$SphericalVideoRecenterControl2.emit('SphericalVideoRecenterControl/animationEnd');return}var j=Date.now();if(j-this.$SphericalVideoRecenterControl3>h){this.$SphericalVideoRecenterControl1=false;this.$SphericalVideoRecenterControl2.emit('SphericalVideoRecenterControl/animationEnd');return}c('requestAnimationFrame')(this.$SphericalVideoRecenterControl7);var k=this.$SphericalVideoRecenterControl8,l=c('easeInOutInterpolate')((j-this.$SphericalVideoRecenterControl3)/h),m=k.deltaPitch*l+k.basePitch,n=k.deltaYaw*l+k.baseYaw;this.$SphericalVideoRecenterControl2.setSphericalOrientation(n,m)};i.prototype.destroy=function(){'use strict';this.$SphericalVideoRecenterControl9.release()};f.exports=i}),null);
__d('SphericalVideoViewportHotCornerController',['requestAnimationFrame','cancelAnimationFrame'],(function a(b,c,d,e,f,g){'use strict';var h=30,i=60;j.registerCorner=function(k,l,m){new j(k,l,m)};function j(k,l,m){this.$SphericalVideoViewportHotCornerController1=null;var n=function(){return this.$SphericalVideoViewportHotCornerController2(l,m)}.bind(this),o=function(){return this.$SphericalVideoViewportHotCornerController3()}.bind(this);k.addEventListener('mouseover',n,{passive:true});k.addEventListener('mouseleave',o,{passive:true});l.addListener('stateChange',function(){if(l.isState('fallback')){this.$SphericalVideoViewportHotCornerController3();k.removeEventListener('mouseover',n);k.removeEventListener('mouseleave',o);k.remove()}}.bind(this))}j.prototype.$SphericalVideoViewportHotCornerController2=function(k,l){if(!this.$SphericalVideoViewportHotCornerController1)this.$SphericalVideoViewportHotCornerController1=c('requestAnimationFrame')(this.$SphericalVideoViewportHotCornerController4(k,l));};j.prototype.$SphericalVideoViewportHotCornerController3=function(){c('cancelAnimationFrame')(this.$SphericalVideoViewportHotCornerController1);this.$SphericalVideoViewportHotCornerController1=null};j.prototype.$SphericalVideoViewportHotCornerController4=function(k,l){var m=function(){this.$SphericalVideoViewportHotCornerController5(k,l);this.$SphericalVideoViewportHotCornerController1=c('requestAnimationFrame')(m)}.bind(this);return m};j.prototype.$SphericalVideoViewportHotCornerController5=function(k,l){var m=k.getOption('SphericalVideoPlayer','getCurrentViewport'),n=m.yaw,o=m.pitch,p=h/i;k.setSphericalOrientation(n+(l?-p:p),o)};f.exports=j}),null);
__d('VideoSphericalHeadingIndicator',['cx','CSS','React','ReactDOM','SphericalVideoHeadingIndicator.react','VideoPlayerFallbackEvents','VideoPlayerLoggerEvent','destroyOnUnload'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k,l,m,n){var o,p=this,q=arguments.length<=5||arguments[5]===undefined?false:arguments[5];this.$VideoSphericalHeadingIndicator1=j;this.$VideoSphericalHeadingIndicator2=k;this.$VideoSphericalHeadingIndicator3=l;this.$VideoSphericalHeadingIndicator4=q;var r=j.addListener(c('VideoPlayerFallbackEvents').ENTER,function(){r.remove();c('ReactDOM').unmountComponentAtNode(k)});if(j.isState('ready')||j.isState('playing')){this.$VideoSphericalHeadingIndicator5()}else (function(){var s=j.addListener('stateChange',function(){if(this.$VideoSphericalHeadingIndicator1.isState('ready')||this.$VideoSphericalHeadingIndicator1.isState('playing')){s.remove();this.$VideoSphericalHeadingIndicator5()}}.bind(p))})();c('destroyOnUnload')(function(){return c('ReactDOM').unmountComponentAtNode(k)})}i.prototype.$VideoSphericalHeadingIndicator5=function(){this.$VideoSphericalHeadingIndicator1.addListener('toggleFullscreen',this.$VideoSphericalHeadingIndicator6.bind(this));c('ReactDOM').render(c('React').createElement(c('SphericalVideoHeadingIndicator.react'),{initialYaw:this.$VideoSphericalHeadingIndicator3,onClick:this.$VideoSphericalHeadingIndicator7.bind(this),controller:this.$VideoSphericalHeadingIndicator1,isComposer:this.$VideoSphericalHeadingIndicator4}),this.$VideoSphericalHeadingIndicator2)};i.prototype.$VideoSphericalHeadingIndicator6=function(){if(this.$VideoSphericalHeadingIndicator1.isFullscreen()){c('CSS').addClass(this.$VideoSphericalHeadingIndicator2,"_4ubd")}else c('CSS').removeClass(this.$VideoSphericalHeadingIndicator2,"_4ubd");};i.prototype.$VideoSphericalHeadingIndicator7=function(){this.$VideoSphericalHeadingIndicator1.emit('SphericalHeadingIndicator/click');this.$VideoSphericalHeadingIndicator1.logEvent(c('VideoPlayerLoggerEvent').HEADING_RESET)};f.exports=i}),null);
__d('VideoSphericalOverlay',['ExposureTimers','SphericalGyroOverlay','SphericalMouseOverlay','VideoPlayerFallbackEvents','VideoPlayerUIComponentDrawer'],(function a(b,c,d,e,f,g){'use strict';var h=c('ExposureTimers').ExposureTimer,i=4000,j=2000*2,k=2000+300;function l(m,n,o,p){this.$VideoSphericalOverlay1=true;this.$VideoSphericalOverlay2=false;this.$VideoSphericalOverlay3=false;this.$VideoSphericalOverlay4=m;this.$VideoSphericalOverlay5=new (c('SphericalGyroOverlay'))(n,false);this.$VideoSphericalOverlay6=new (c('SphericalMouseOverlay'))(o,p);this.$VideoSphericalOverlay7=null;this.$VideoSphericalOverlay10=this.$VideoSphericalOverlay4.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.SphericalMouseAnimation,12+72);this.$VideoSphericalOverlay8=[this.$VideoSphericalOverlay10.addListener('reposition',function(q){return this.$VideoSphericalOverlay6.updatePosition(q)}.bind(this)),m.addListener('beginPlayback',function(){return this.$VideoSphericalOverlay11()}.bind(this)),m.addListener('pausePlayback',function(){return this.$VideoSphericalOverlay12()}.bind(this)),m.addListener('viewportChange',function(){return this.$VideoSphericalOverlay13()}.bind(this)),m.addListener(c('VideoPlayerFallbackEvents').ENTER,function(){return this.$VideoSphericalOverlay13()}.bind(this)),m.addListener('clickVideo',function(){return this.$VideoSphericalOverlay12()}.bind(this)),m.addListener('stateChange',function(){return this.$VideoSphericalOverlay14()}.bind(this))];this.$VideoSphericalOverlay9=[this.$VideoSphericalOverlay5.addListener('animationStarted',function(){return this.$VideoSphericalOverlay15()}.bind(this)),this.$VideoSphericalOverlay5.addListener('animationFinished',function(){return this.$VideoSphericalOverlay16()}.bind(this)),this.$VideoSphericalOverlay6.addListener('animationStarted',function(){return this.$VideoSphericalOverlay15()}.bind(this)),this.$VideoSphericalOverlay6.addListener('animationFinished',function(){return this.$VideoSphericalOverlay16()}.bind(this))]}l.prototype.$VideoSphericalOverlay15=function(){this.$VideoSphericalOverlay2=true;this.$VideoSphericalOverlay4.emit('VideoSphericalOverlay/animationUpdate',true)};l.prototype.$VideoSphericalOverlay16=function(){this.$VideoSphericalOverlay2=false;this.$VideoSphericalOverlay4.emit('VideoSphericalOverlay/animationUpdate',false);if(this.$VideoSphericalOverlay3){this.$VideoSphericalOverlay9.forEach(function(m){return m.remove()});this.$VideoSphericalOverlay9=[]}};l.prototype.$VideoSphericalOverlay17=function(){this.$VideoSphericalOverlay5.startAnimation();this.$VideoSphericalOverlay7=c('ExposureTimers').createViewportVisibilityTimer(k,function(){return this.$VideoSphericalOverlay18()}.bind(this),this.$VideoSphericalOverlay4)};l.prototype.$VideoSphericalOverlay18=function(){this.$VideoSphericalOverlay5.stopAnimation();this.$VideoSphericalOverlay7=c('ExposureTimers').createViewportVisibilityTimer(i,function(){return this.$VideoSphericalOverlay19()}.bind(this),this.$VideoSphericalOverlay4)};l.prototype.$VideoSphericalOverlay19=function(){this.$VideoSphericalOverlay10.reserve();this.$VideoSphericalOverlay6.startAnimation();this.$VideoSphericalOverlay7=c('ExposureTimers').createViewportVisibilityTimer(j,function(){return this.$VideoSphericalOverlay13()}.bind(this),this.$VideoSphericalOverlay4)};l.prototype.$VideoSphericalOverlay12=function(){this.$VideoSphericalOverlay5.stopAnimation();this.$VideoSphericalOverlay6.stopAnimation();this.$VideoSphericalOverlay10.release()};l.prototype.$VideoSphericalOverlay13=function(){this.$VideoSphericalOverlay1=false;this.$VideoSphericalOverlay5.stopAnimation();this.$VideoSphericalOverlay6.cancelAnimation();this.$VideoSphericalOverlay10.release();this.$VideoSphericalOverlay20()};l.prototype.$VideoSphericalOverlay14=function(){if(this.$VideoSphericalOverlay4.isState('fallback')){this.$VideoSphericalOverlay1=false;this.$VideoSphericalOverlay12()}};l.prototype.$VideoSphericalOverlay11=function(){if(this.$VideoSphericalOverlay1){this.$VideoSphericalOverlay1=false;this.$VideoSphericalOverlay17()}};l.prototype.$VideoSphericalOverlay20=function(){this.$VideoSphericalOverlay8.forEach(function(m){return m.remove()});this.$VideoSphericalOverlay8=[];if(this.$VideoSphericalOverlay7){this.$VideoSphericalOverlay7.cancel();this.$VideoSphericalOverlay7=null}if(!this.$VideoSphericalOverlay2){this.$VideoSphericalOverlay9.forEach(function(m){return m.remove()});this.$VideoSphericalOverlay9=[]}this.$VideoSphericalOverlay3=true};f.exports=l}),null);
__d('VideoWithSphericalErrorMessage',['fbt'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.$VideoWithSphericalErrorMessage1=j;this.$VideoWithSphericalErrorMessage2=j.addListener('optionsChange',function(){return this.$VideoWithSphericalErrorMessage3()}.bind(this));this.$VideoWithSphericalErrorMessage3()}i.prototype.$VideoWithSphericalErrorMessage4=function(j,k){'use strict';this.$VideoWithSphericalErrorMessage1.setOption('VideoErrorOverlay',j,k)};i.prototype.$VideoWithSphericalErrorMessage3=function(){'use strict';if(this.$VideoWithSphericalErrorMessage1.getOption('VideoErrorOverlay','available')){this.$VideoWithSphericalErrorMessage4('message',h._("360 Videos are not available on this browser."));this.$VideoWithSphericalErrorMessage4('linkURL','https://www.facebook.com/help/828417127257368');this.$VideoWithSphericalErrorMessage4('linkTitle',h._("Learn More"));this.$VideoWithSphericalErrorMessage2.remove()}};f.exports=i}),null);