if (self.CavalryLogger) { CavalryLogger.start_js(["qCU\/P"]); }

__d("PollAddOptionMutation.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"QuestionAddOptionData!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Fragment",metadata:null,name:"PollAddOptionMutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionAddOptionData!"}],concreteType:"QuestionAddOptionResponsePayload",name:"question_add_option",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Question",name:"question",plural:false,selections:[{kind:"FragmentSpread",name:"PollAttachmentComponent_node",args:[{kind:"Variable",name:"first",variableName:"first",type:null}]}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"question_options_edge",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"source",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation"},id:"1276105179181984",kind:"Batch",metadata:{},name:"PollAddOptionMutation",query:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"QuestionAddOptionData!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Root",name:"PollAddOptionMutation",operation:"mutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionAddOptionData!"}],concreteType:"QuestionAddOptionResponsePayload",name:"question_add_option",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Question",name:"question",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"response_method",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"poll_answers_state",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"can_viewer_post",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"author",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",name:"options",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"TextWithEntities",name:"text_with_entities",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"text",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"User",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"is_viewer_friend",storageKey:null},{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:"voters{\"first\":10}"},{kind:"LinkedHandle",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],handle:"connection",name:"voters",key:"PollAttachmentComponent_options_voters",filters:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Photo",name:"associated_image",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Image",name:"image",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"height",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"width",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedHandle",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],handle:"connection",name:"options",key:"PollAttachmentComponent_options",filters:[]}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"question_options_edge",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"source",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},text:null};f.exports=h}),null);
__d("PollAddVoteMutation.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"QuestionAddVoteData!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Fragment",metadata:null,name:"PollAddVoteMutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionAddVoteData!"}],concreteType:"QuestionAddVoteResponsePayload",name:"question_add_vote",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"option",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Question",name:"question",plural:false,selections:[{kind:"FragmentSpread",name:"PollAttachmentComponent_node",args:[{kind:"Variable",name:"first",variableName:"first",type:null}]}],storageKey:null}],storageKey:null}],type:"Mutation"},id:"1422846554472199",kind:"Batch",metadata:{},name:"PollAddVoteMutation",query:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"QuestionAddVoteData!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Root",name:"PollAddVoteMutation",operation:"mutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionAddVoteData!"}],concreteType:"QuestionAddVoteResponsePayload",name:"question_add_vote",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"option",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Question",name:"question",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"response_method",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"poll_answers_state",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"can_viewer_post",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"author",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",name:"options",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"TextWithEntities",name:"text_with_entities",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"text",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"User",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"is_viewer_friend",storageKey:null},{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:"voters{\"first\":10}"},{kind:"LinkedHandle",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],handle:"connection",name:"voters",key:"PollAttachmentComponent_options_voters",filters:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Photo",name:"associated_image",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Image",name:"image",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"height",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"width",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedHandle",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],handle:"connection",name:"options",key:"PollAttachmentComponent_options",filters:[]}],storageKey:null}],storageKey:null}]},text:null};f.exports=h}),null);
__d("PollAttachmentComponentRefetchQuery.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"questionID",type:"ID!",defaultValue:null}],kind:"Fragment",metadata:null,name:"PollAttachmentComponentRefetchQuery",selections:[{kind:"LinkedField",alias:"viewer",args:null,concreteType:"Viewer",name:"__viewer_viewer",plural:false,selections:[{kind:"FragmentSpread",name:"PollAttachmentComponent_viewer",args:null}],storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"questionID",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"FragmentSpread",name:"PollAttachmentComponent_node",args:[{kind:"Variable",name:"first",variableName:"first",type:null}]}],storageKey:null}],type:"Query"},id:"2501116766591532",kind:"Batch",metadata:{},name:"PollAttachmentComponentRefetchQuery",query:{argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"questionID",type:"ID!",defaultValue:null}],kind:"Root",name:"PollAttachmentComponentRefetchQuery",operation:"query",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"actor",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"}]}],storageKey:null}],storageKey:null},{kind:"LinkedHandle",alias:null,args:null,handle:"viewer",name:"viewer",key:"",filters:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"questionID",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"InlineFragment",type:"Question",selections:[{kind:"ScalarField",alias:null,args:null,name:"response_method",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"poll_answers_state",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"can_viewer_post",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"author",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",name:"options",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"TextWithEntities",name:"text_with_entities",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"text",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"User",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"is_viewer_friend",storageKey:null},{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:"voters{\"first\":10}"},{kind:"LinkedHandle",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],handle:"connection",name:"voters",key:"PollAttachmentComponent_options_voters",filters:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Photo",name:"associated_image",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Image",name:"image",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"height",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"width",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedHandle",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],handle:"connection",name:"options",key:"PollAttachmentComponent_options",filters:[]}]}],storageKey:null}]},text:null};f.exports=h}),null);
__d("PollAttachmentComponent_node.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5},{kind:"LocalArgument",name:"ordering",type:"[QuestionOptionsOrdering]",defaultValue:["vote_count"]}],kind:"Fragment",metadata:{connection:[{count:null,cursor:null,direction:"forward",path:null},{count:"first",cursor:null,direction:"forward",path:["options"]}]},name:"PollAttachmentComponent_node",selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"response_method",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"poll_answers_state",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"can_viewer_post",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"author",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:"options",args:null,concreteType:"QuestionOptionsConnection",name:"__PollAttachmentComponent_options_connection",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"TextWithEntities",name:"text_with_entities",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"text",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:"voters",args:null,concreteType:"QuestionOptionVotersConnection",name:"__PollAttachmentComponent_options_voters_connection",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"User",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"is_viewer_friend",storageKey:null},{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Photo",name:"associated_image",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Image",name:"image",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"height",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"width",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null}],type:"Question"};f.exports=h}),null);
__d("PollAttachmentComponent_viewer.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PollAttachmentComponent_viewer",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"actor",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"}]}],storageKey:null}],type:"Viewer"};f.exports=h}),null);
__d("PollAttachmentQuery.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"questionID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Fragment",metadata:null,name:"PollAttachmentQuery",selections:[{kind:"LinkedField",alias:"viewer",args:null,concreteType:"Viewer",name:"__viewer_viewer",plural:false,selections:[{kind:"FragmentSpread",name:"PollAttachmentComponent_viewer",args:null}],storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"questionID",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"FragmentSpread",name:"PollAttachmentComponent_node",args:[{kind:"Variable",name:"first",variableName:"first",type:null}]}],storageKey:null}],type:"Query"},id:"1394421920640403",kind:"Batch",metadata:{},name:"PollAttachmentQuery",query:{argumentDefinitions:[{kind:"LocalArgument",name:"questionID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Root",name:"PollAttachmentQuery",operation:"query",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"actor",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"}]}],storageKey:null}],storageKey:null},{kind:"LinkedHandle",alias:null,args:null,handle:"viewer",name:"viewer",key:"",filters:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"questionID",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"InlineFragment",type:"Question",selections:[{kind:"ScalarField",alias:null,args:null,name:"response_method",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"poll_answers_state",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"can_viewer_post",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"author",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",name:"options",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"TextWithEntities",name:"text_with_entities",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"text",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"User",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"is_viewer_friend",storageKey:null},{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:"voters{\"first\":10}"},{kind:"LinkedHandle",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],handle:"connection",name:"voters",key:"PollAttachmentComponent_options_voters",filters:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Photo",name:"associated_image",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Image",name:"image",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"height",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"width",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedHandle",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],handle:"connection",name:"options",key:"PollAttachmentComponent_options",filters:[]}]}],storageKey:null}]},text:null};f.exports=h}),null);
__d("PollRemoveVoteMutation.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"QuestionRemoveVoteData!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Fragment",metadata:null,name:"PollRemoveVoteMutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionRemoveVoteData!"}],concreteType:"QuestionRemoveVoteResponsePayload",name:"question_remove_vote",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"option",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Question",name:"question",plural:false,selections:[{kind:"FragmentSpread",name:"PollAttachmentComponent_node",args:[{kind:"Variable",name:"first",variableName:"first",type:null}]}],storageKey:null}],storageKey:null}],type:"Mutation"},id:"1298305823628976",kind:"Batch",metadata:{},name:"PollRemoveVoteMutation",query:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"QuestionRemoveVoteData!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],kind:"Root",name:"PollRemoveVoteMutation",operation:"mutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionRemoveVoteData!"}],concreteType:"QuestionRemoveVoteResponsePayload",name:"question_remove_vote",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"option",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Question",name:"question",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"response_method",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"poll_answers_state",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"can_viewer_post",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:null,name:"author",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",name:"options",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionsEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOption",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"TextWithEntities",name:"text_with_entities",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"text",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"viewer_has_voted",storageKey:null},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"QuestionOptionVotersConnection",name:"voters",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"count",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"QuestionOptionVotersEdge",name:"edges",plural:true,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"User",name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"name",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"is_viewer_friend",storageKey:null},{kind:"ScalarField",alias:null,args:[{kind:"Literal",name:"site",value:"www",type:"SiteEnum"}],name:"url",storageKey:"url{\"site\":\"www\"}"},{kind:"LinkedField",alias:null,args:[{kind:"Literal",name:"size__width",value:32,type:"Int"}],concreteType:"Image",name:"profile_picture",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:"profile_picture{\"size__width\":32}"},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:"voters{\"first\":10}"},{kind:"LinkedHandle",alias:null,args:[{kind:"Literal",name:"first",value:10,type:"Int"}],handle:"connection",name:"voters",key:"PollAttachmentComponent_options_voters",filters:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Photo",name:"associated_image",plural:false,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Image",name:"image",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"height",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"width",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"uri",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"cursor",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"PageInfo",name:"page_info",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"end_cursor",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedHandle",alias:null,args:[{kind:"Variable",name:"first",variableName:"first",type:"Int"},{kind:"Literal",name:"orderby",value:["vote_count"],type:"[QuestionOptionsOrdering]"}],handle:"connection",name:"options",key:"PollAttachmentComponent_options",filters:[]}],storageKey:null}],storageKey:null}]},text:null};f.exports=h}),null);
__d('PhotoViewState',['ArbiterMixin','PhotoStore','PhotoUtils','SpotlightViewerLoggingEvents','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);var n=m||{};this._viewer=k;this._setID=l;this._position=n.position||0;this._preventPreload=n.preventPreload;this._reverse=n.reverse;this._updateCallback=n.updateCallback;this._preloaded={}}j.prototype._fetchCallback=function(k){'use strict';if(!this._viewer.isOpen())return;this._preload(k);this._log(c('SpotlightViewerLoggingEvents').DATA_FETCH_COMPLETE)};j.prototype._preload=function(k){'use strict';c('PhotoUtils').preload(this._viewer,k,function(l){this._preloaded[c('PhotoUtils').getFBIDFromData(l)]=true}.bind(this))};j.prototype._preloadPhotosInRange=function(k,l){'use strict';var m=[];for(var n=k;n<=l;++n){var o=c('PhotoStore').getByIndexImmediate(this._setID,n);if(o&&!this._isPreloaded(o))m.push(o);}this._preload(m)};j.prototype._isPreloaded=function(k){'use strict';return this._preloaded[c('PhotoUtils').getFBIDFromData(k)]};j.prototype.getPosition=function(){'use strict';return this._position};j.prototype.isValidMovement=function(k){'use strict';if(!c('PhotoStore').hasBeenCreated(this._setID))return false;if(c('PhotoStore').hasLooped(this._setID))return true;var l=this._position+k,m=c('PhotoStore').getAvailableRange(this._setID),n=m.offset+m.length-1;return l>=m.offset-1&&l<=n+1};j.prototype.getRelativeMovement=function(k){'use strict';return c('PhotoStore').getIndexForID(this._setID,k)-this._position};j.prototype.moveCursor=function(k){'use strict';if(!this.isValidMovement(k))return false;this._position+=k;return true};j.prototype._page=function(k){'use strict';if(!this.moveCursor(k))return;this._log(c('SpotlightViewerLoggingEvents').PAGE_BEGIN);var l=c('PhotoStore').getByIndexImmediate(this._setID,this._position);if(!l){this.inform('photo_fetch');this._log(c('SpotlightViewerLoggingEvents').PHOTO_FETCH)}else if(!this._isPreloaded(l))this._preload([l]);c('PhotoStore').getByIndex(this._setID,this._position,this._updateCallback);this._loadMoreIfNecessary(k>0,j.BUFFER_SIZE);this._log(c('SpotlightViewerLoggingEvents').PAGE_COMPLETE)};j.prototype.loadMoreForwardIfNecessary=function(k){'use strict';if(this._preventPreload)return;var l=c('PhotoStore').getAvailableRange(this._setID),m=l.offset+l.length-1,n=this._position+k;if(n>m&&!c('PhotoStore').hasLooped(this._setID)){var o=c('PhotoStore').getCursorByIndexImmediate(this._setID,m);c('PhotoStore').fetchForward(this._setID,o,k,this._fetchCallback.bind(this))}else this._preloadPhotosInRange(this._position+1,n);};j.prototype.loadMoreBackwardIfNecessary=function(k){'use strict';if(this._preventPreload)return;var l=c('PhotoStore').getAvailableRange(this._setID),m=this._position-k;if(m<l.offset&&!c('PhotoStore').hasLooped(this._setID)){var n=c('PhotoStore').getCursorByIndexImmediate(this._setID,l.offset);c('PhotoStore').fetchBackward(this._setID,n,k,this._fetchCallback.bind(this))}else this._preloadPhotosInRange(m,this._position-1);};j.prototype._loadMoreIfNecessary=function(k,l){'use strict';if(k){this.loadMoreForwardIfNecessary(l)}else this.loadMoreBackwardIfNecessary(l);};j.prototype.displayFirst=function(){'use strict';if(!this._viewer.isOpen())return;c('PhotoStore').setPreFetchCallback(this._setID,function(){this._log(c('SpotlightViewerLoggingEvents').DATA_FETCH_BEGIN)}.bind(this));var k=function(l){if(!this._isPreloaded(l))this._preload([l]);this._updateCallback&&this._updateCallback(l)}.bind(this);c('PhotoStore').getByIndex(this._setID,this._position,k);if(this._reverse){this.loadMoreBackwardIfNecessary(j.BUFFER_SIZE)}else this.loadMoreForwardIfNecessary(j.BUFFER_SIZE);};j.prototype.backward=function(){'use strict';this._page(this._reverse?1:-1)};j.prototype.forward=function(){'use strict';this._page(this._reverse?-1:1)};j.prototype._log=function(k){'use strict';this._viewer.log(k)};Object.assign(j,{BUFFER_SIZE:4});f.exports=j}),null);
__d('SpotlightViewerClose',['cx','fbt','React','TooltipLink.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=this.props.position=='left'?"_5wx3":"_5wx4",o=c('React').createElement('span',null,i._("Press Esc to close"));return c('React').createElement(c('TooltipLink.react'),{className:c('joinClasses')("_4-o9 _50-m _51an",n,this.props.isFixed?"_2chv":''),onClick:this.props.onClick,tooltip:o})};function m(){'use strict';j.apply(this,arguments)}m.propTypes={position:l.oneOf(['left','right']),isFixed:l.bool};m.defaultProps={position:'right',isFixed:false};f.exports=m}),null);
__d('SpotlightViewerCoreMixin',['PhotoLogger','PhotoStore','PhotoUtils','PhotoViewState','React','SpotlightViewerImage','SpotlightViewerLoggingEvents'],(function a(b,c,d,e,f,g){var h={_displayFirstPhoto:function i(){c('PhotoStore').executePostCreate(this.props.setid,this.viewState.displayFirst.bind(this.viewState))},_getInitialPosition:function i(){var j;if(!this.props.clearcache)j=c('PhotoStore').getIndexForID(this.props.setid,this.props.photoid);if(j===undefined){c('PhotoStore').clearSetCache(this.props.setid);j=0}return j},__displayPhoto:function i(){var j=this._getInitialPosition();this.viewState=new (c('PhotoViewState'))(this,this.props.setid,{position:j,preventPreload:this.__shouldPreventPhotoPreload,reverse:this.props.reverse,updateCallback:this._updatePhoto});this.inform('open');this._displayFirstPhoto()},componentWillMount:function i(){this._logger=new (c('PhotoLogger'))(this.getViewerID());this.log(c('SpotlightViewerLoggingEvents').OPEN_BEGIN);this.__displayPhoto()},componentDidMount:function i(){this._enableSubscriptions&&this._enableSubscriptions();this.log(c('SpotlightViewerLoggingEvents').OPEN_COMPLETE)},isOpen:function i(){return this.state.open},close:function i(){if(!this.isOpen())return;this.log(c('SpotlightViewerLoggingEvents').CLOSE_BEGIN);this.setState({open:false},function(){this.inform('close');this.log(c('SpotlightViewerLoggingEvents').CLOSE_COMPLETE)})},componentWillUnmount:function i(){this.viewState=null},_onClickViewport:function i(j){j?this.viewState.forward():this.viewState.backward()},_getMedia:function i(j,k){return c('React').createElement(c('SpotlightViewerImage'),{ref:'image',src:j.uri,dimensions:k.imageDimensions})},_getCurrentFBID:function i(){return c('PhotoUtils').getFBIDFromData(this.state.photoData)},_updatePhoto:function i(j){this.log(c('SpotlightViewerLoggingEvents').PHOTO_CHANGE_BEGIN);this.setState({photoData:j},function(){this.inform('photo_change',this.state.photoData);this.log(c('SpotlightViewerLoggingEvents').PHOTO_CHANGE_COMPLETE)})},getLogger:function i(){return this._logger},log:function i(j){this._logger&&this._logger.logEvent(j)}};f.exports=h}),null);
__d('PhotoViewerDimensions',['Event','PhotoUtils','Vector'],(function a(b,c,d,e,f,g){var h={verticalPadding:'number',horizontalPadding:'number',normalResDim:'object'};function i(j){'use strict';this._verticalPadding=40;this._horizontalPadding=60;this._normalResDim={x:960,y:960};this._photoStripHeight=88;for(var k in j){if(!h[k])throw new Error("Unsupported extraData value '"+k+"' should not be used");if(typeof j[k]===h[k])this['_'+k]=j[k];}this._listener=c('Event').listen(window,'resize',this._resetMaxStageDimensions.bind(this))}i.prototype.destroy=function(){'use strict';this._listener.remove()};i.prototype.getStageDimensions=function(j){'use strict';var k=this.getMaxStageDimensions(),l=new (c('Vector'))(Math.min(j.x,k.x),Math.min(j.y,k.y)),m=l.x/l.y,n=j.x/j.y;if(m<n){l.y=Math.round(l.x/n)}else l.x=Math.round(l.y*n);return l};i.prototype.getImageDimensionsForStage=function(j,k){'use strict';var l=j.x,m=j.y,n=k.x,o=k.y;if(l>=n||m>=o){var p=l/m,q=n/o;if(q<p){l=n;m=Math.round(n/p)}else if(q>p){l=Math.round(o*p);m=o}else{l=n;m=o}}return new (c('Vector'))(l,m)};i.prototype.getImageDimensionsForMaxStage=function(j,k){'use strict';var l=j.x,m=j.y,n=k.x,o=k.y-this._photoStripHeight,p=l/m,q=n/o;if(l>=n||m>=o){if(q<p){l=n;m=Math.round(n/p)}else if(q>p){l=Math.round(o*p);m=o}else{l=n;m=o}}else if(p<q){l=Math.round(m*p)}else m=Math.round(l/p);return new (c('Vector'))(l,m)};i.prototype.getMaxStageDimensions=function(){'use strict';if(!this._maxStageDimensions)this._maxStageDimensions=new (c('Vector'))(c('Vector').getViewportDimensions().x-this._horizontalPadding,c('Vector').getViewportDimensions().y-this._verticalPadding);return this._maxStageDimensions};i.prototype.getMaxStageDimensionsWithoutPadding=function(){'use strict';if(!this._maxStageDimensions)this._maxStageDimensions=new (c('Vector'))(c('Vector').getViewportDimensions().x,c('Vector').getViewportDimensions().y);return this._maxStageDimensions};i.prototype._resetMaxStageDimensions=function(){'use strict';this._maxStageDimensions=null};i.prototype.getBestFitImageFromPhoto=function(j,k){'use strict';var l=null,m=c('PhotoUtils').getImagesFromData(j);m=m.sort(function(o,p){return p.width-o.width});if(window.devicePixelRatio&&window.devicePixelRatio>1)k=new (c('Vector'))(k.x*window.devicePixelRatio,k.y*window.devicePixelRatio);for(var n=0;n<m.length;n++)if(!l||m[n].width>=k.x||m[n].height>=k.y)l=m[n];return l};i.prototype.getOriginalDimensionsFromPhoto=function(j){'use strict';var k=c('PhotoUtils').getOriginalImageFromData(j);return new (c('Vector'))(k.width,k.height)};i.prototype.getBestFitDimensionsFromPhoto=function(j,k){'use strict';var l=this.getBestFitImageFromPhoto(j,k);return new (c('Vector'))(l.width,l.height)};i.prototype.getVerticalPadding=function(){'use strict';return this._verticalPadding};i.prototype.getHorizontalPadding=function(){'use strict';return this._horizontalPadding};f.exports=i}),null);
__d('SpotlightViewerStageResizer',['MessengerEnvironment','Event','SubscriptionsHandler','Vector'],(function a(b,c,d,e,f,g){var h=520;function i(j,k){'use strict';this._subscriptionsHandler=new (c('SubscriptionsHandler'))();this._subscriptionsHandler.addSubscriptions(c('Event').listen(window,'resize',this._resetStageDimensions.bind(this)));this._dimensions=j;this._minHeight=k.minHeight||h;this._minWidth=k.minWidth||h;this._resetStageDimensions()}i.prototype.destroy=function(){'use strict';this._dimensions=null;this._subscriptionsHandler.release()};i.prototype._resetStageDimensions=function(){'use strict';this._currentStageDimensions=new (c('Vector'))(this._minWidth,this._minHeight)};i.prototype.getImageAndStageDimensions=function(j){'use strict';var k=this._dimensions.getBestFitDimensionsFromPhoto(j,this._dimensions.getMaxStageDimensions()),l=c('MessengerEnvironment').messengerui?this._dimensions.getMaxStageDimensionsWithoutPadding(k):this._dimensions.getStageDimensions(k);this._currentStageDimensions=new (c('Vector'))(Math.max(l.x,this._minWidth,this._currentStageDimensions.x),Math.max(l.y,this._minHeight,this._currentStageDimensions.y));var m=c('MessengerEnvironment').messengerui?this._dimensions.getImageDimensionsForMaxStage(k,this._currentStageDimensions):this._dimensions.getImageDimensionsForStage(k,this._currentStageDimensions);return {stageDimensions:this._currentStageDimensions,imageDimensions:m}};i.prototype.getCurrentStageDimensions=function(){'use strict';return this._currentStageDimensions};f.exports=i}),null);
__d('SpotlightViewerDimensionMixin',['MessengerEnvironment','SpotlightViewerStageResizer','PhotoViewerDimensions'],(function a(b,c,d,e,f,g){var h={getInitialState:function i(){this._dimensions=new (c('PhotoViewerDimensions'))({verticalPadding:this.props.verticalPadding,horizontalPadding:this.props.horizontalPadding});this._resizer=new (c('SpotlightViewerStageResizer'))(this._dimensions,{minHeight:this.props.minHeight,minWidth:this.props.minWidth});return {maxStageDimensions:c('MessengerEnvironment').messengerui?this._dimensions.getMaxStageDimensionsWithoutPadding():this._dimensions.getMaxStageDimensions()}},componentWillUnmount:function i(){this._resizer&&this._resizer.destroy();this._resizer=null;this._dimensions&&this._dimensions.destroy();this._dimensions=null},getMedia:function i(){if(this.state.photoData){if(this.state.photoData.__typename&&this.state.photoData.__typename==='MessageVideo')return this._getVideo();var j=this._resizer.getImageAndStageDimensions(this.state.photoData),k=this._dimensions.getBestFitImageFromPhoto(this.state.photoData,this.state.maxStageDimensions);return this._getMedia(k,j)}else return null;},getDimensions:function i(){return this._dimensions},getStageDimensions:function i(){if(this.state.photoData){return this._resizer.getImageAndStageDimensions(this.state.photoData).stageDimensions}else return c('MessengerEnvironment').messengerui?this._dimensions.getMaxStageDimensionsWithoutPadding():this._dimensions.getMaxStageDimensions();},getImageDimensions:function i(){if(!this.state.photoData)return null;return this._resizer.getImageAndStageDimensions(this.state.photoData).imageDimensions},onResize:function i(){if(c('MessengerEnvironment').messengerui){var j=this._dimensions.getMaxStageDimensionsWithoutPadding();this.setState({maxStageDimensions:j,width:j.x})}else this.setState({maxStageDimensions:this._dimensions.getMaxStageDimensions()});}};f.exports=h}),null);
__d('SpotlightViewerInit',['DOM','ReactDOM'],(function a(b,c,d,e,f,g){var h={render:function i(j,k){var l=c('DOM').create('div'),m=c('ReactDOM').render(j,l);c('DOM').appendContent(document.body,l);m.subscribeOnce('close',function(){c('ReactDOM').unmountComponentAtNode(l);c('DOM').remove(l);k&&k()});return m}};f.exports=h}),null);
__d('SpotlightViewerThumbnailMixin',['PhotoStore','Vector'],(function a(b,c,d,e,f,g){var h={_getInitialPhotoData:function i(){var j=c('PhotoStore').getIndexForID(this.props.setid,this.props.photoid),k=c('PhotoStore').getByIndexImmediate(this.props.setid,j);return k?k:this._getThumbnailPhotoData()},_getThumbnailPhotoData:function i(){if(!this.props.dimensions||!this.props.thumbsrc)return null;var j={id:this.props.photoid};for(var k=0;k<this.props.dimensions.length;++k){var l=c('Vector').deserialize(this.props.dimensions[k]);j['image'+k]={width:l.x,height:l.y,uri:this.props.thumbsrc}}return j}};f.exports=h}),null);
__d("QuestionPollType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHOOSE_ONE:"CHOOSE_ONE",CHOOSE_MULTIPLE:"CHOOSE_MULTIPLE",GIF_CHOOSE_ONE:"GIF_CHOOSE_ONE",IMAGE_CHOOSE_ONE:"IMAGE_CHOOSE_ONE",VISUAL_TEXT_CHOOSE_ONE:"VISUAL_TEXT_CHOOSE_ONE",IMAGE_CHOOSE_MULTIPLE:"IMAGE_CHOOSE_MULTIPLE"})}),null);
__d('PollAddOptionMutation',['RelayModern','QuestionPollType','PollAddOptionMutation.graphql'],(function a(b,c,d,e,f,g){'use strict';var h=c('RelayModern').graphql,i=c('RelayModern').commitMutation,j=0,k=function m(){return c('PollAddOptionMutation.graphql')};function l(m,n){var o={input:{question_id:n.node.id,option_text:n.optionText,option_page_id:n.optionPageID},first:n.numOptionsToShow},p=function s(){var t=n.node.author.id===n.viewer.actor.id,u='client:newOption:'+j++,v={node:{id:u,text_with_entities:{text:n.optionText},viewer_has_voted:!t,voters:{count:t?0:1,edges:t?[]:[{node:babelHelpers['extends']({},n.viewer.actor)}]}}},w=n.node.options.edges.map(function(x){var y=babelHelpers['extends']({},x.node);if(n.node.response_method===c('QuestionPollType').CHOOSE_ONE&&x.node.viewer_has_voted&&!t){y.viewer_has_voted=false;y.voters={count:x.node.voters.count-1}}return {node:y}});w.push(v);return {question_add_option:{question:{id:n.node.id,options:{count:n.node.options.count+1,edges:w}},question_options_edge:v}}},q=function s(t){n.callbacks&&n.callbacks.onSuccess()},r=function s(t){n.callbacks&&n.callbacks.onFailure(t)};return i(m,{mutation:k,variables:o,optimisticResponse:p,onCompleted:q,onError:r})}f.exports={commit:l}}),null);
__d('PollAttachmentUtils',['QuestionPollType'],(function a(b,c,d,e,f,g){'use strict';var h={isOpinionPoll:function i(j){return j===c('QuestionPollType').CHOOSE_ONE||j===c('QuestionPollType').IMAGE_CHOOSE_ONE},isEigenpoll:function i(j){return j===c('QuestionPollType').CHOOSE_MULTIPLE||j===c('QuestionPollType').IMAGE_CHOOSE_MULTIPLE}};f.exports=h}),null);
__d('PollAddVoteMutation',['PollAttachmentUtils','RelayModern','RelayConnectionHandler','PollAddVoteMutation.graphql'],(function a(b,c,d,e,f,g){'use strict';var h=c('PollAttachmentUtils').isOpinionPoll,i=c('RelayModern').graphql,j=c('RelayModern').commitMutation,k=function m(){return c('PollAddVoteMutation.graphql')};function l(m,n){var o={input:{question_id:n.node.id,option_id:n.option.id,rank:n.rank},first:n.numOptionsToShow},p=function t(u){var v=u.get(n.node.id);if(!v)return;var w=v&&c('RelayConnectionHandler').getConnection(v,'PollAttachmentComponent_options');if(!w)return;var x=w&&w.getLinkedRecords('edges');if(!x)return;var y=x.map(function(z){return z&&z.getLinkedRecord('node')});y.forEach(function(z){if(!z)return;var aa=z&&c('RelayConnectionHandler').getConnection(z,'PollAttachmentComponent_options_voters');if(!aa)return;if(z.getValue('id')===n.option.id){z.setValue(true,'viewer_has_voted');aa.setValue(n.option.voters.count+1,'count')}else if(z.getValue('viewer_has_voted')){z.setValue(false,'viewer_has_voted');aa.setValue(parseInt(aa.getValue('count'),10)-1,'count')}})},q=function t(u){if(h(n.node.response_method)){p(u)}else{var v=u.get(n.option.id);if(!v)return;var w=v&&c('RelayConnectionHandler').getConnection(v,'PollAttachmentComponent_options_voters');if(!w)return;v.setValue(true,'viewer_has_voted');w.setValue(n.option.voters.count+1,'count')}},r=function t(){n.callbacks&&n.callbacks.onSuccess()},s=function t(u){n.callbacks&&n.callbacks.onFailure(u)};return j(m,{mutation:k,optimisticUpdater:q,variables:o,onCompleted:r,onError:s})}f.exports={commit:l}}),null);
__d('PollRemoveVoteMutation',['RelayModern','RelayConnectionHandler','PollRemoveVoteMutation.graphql'],(function a(b,c,d,e,f,g){'use strict';var h=c('RelayModern').graphql,i=c('RelayModern').commitMutation,j=function l(){return c('PollRemoveVoteMutation.graphql')};function k(l,m){var n={input:{question_id:m.node.id,option_id:m.option.id},first:m.numOptionsToShow},o=function r(s){var t=s.get(m.option.id);if(!t)return;var u=t&&c('RelayConnectionHandler').getConnection(t,'PollAttachmentComponent_options_voters');if(!u)return;t&&t.setValue(false,'viewer_has_voted');u&&u.setValue(m.option.voters.count-1,'count')},p=function r(){m.callbacks&&m.callbacks.onSuccess()},q=function r(s){m.callbacks&&m.callbacks.onFailure(s)};return i(l,{mutation:j,optimisticUpdater:o,variables:n,onCompleted:p,onError:q})}f.exports={commit:k}}),null);
__d('SpotlightPollOptionImageViewer',['cx','ArbiterMixin','Facepile.react','React','SpotlightViewer','SpotlightViewerClose','SpotlightViewerCoreMixin','SpotlightViewerDimensionMixin','SpotlightViewerThumbnailMixin','SpotlightViewport','TextWithEntities.react','XUIText.react'],(function a(b,c,d,e,f,g,h){var i=20,j=28,k=10,l=c('React').createClass({displayName:'SpotlightPollOptionImageViewer',mixins:[c('ArbiterMixin'),c('SpotlightViewerCoreMixin'),c('SpotlightViewerThumbnailMixin'),c('SpotlightViewerDimensionMixin')],getViewerID:function m(){return this.props.setid},getInitialState:function m(){return {photoData:this._getThumbnailPhotoData(),open:true}},render:function m(){var n=this.getMedia(),o=this.getStageDimensions(),p=this.props.useloadingindicator&&!this.state.photoData;return c('React').createElement(c('SpotlightViewer'),{onHide:this.close,open:this.state.open,rootClassName:this.props.rootClassName},c('React').createElement(c('SpotlightViewport'),{className:"_wma",media:n,onClick:this._onClickViewport,showLoadingIndicator:p,snapToPhoto:this.props.snapToPhoto,stageDimensions:o,useWidth:true},c('React').createElement(c('SpotlightViewerClose'),{onClick:this.close}),this._renderOptionData()))},_renderOptionData:function m(){return c('React').createElement('div',{className:"_50-m _wmb"},this._renderOptionText(),this._renderFacepile(),this._renderMore())},_renderOptionText:function m(){var n=this.props.optionText.split(/\r?\n/)[0].slice(0,i);if(n.length<this.props.optionText.length)n+='...';return c('React').createElement(c('TextWithEntities.react'),{className:"_wmc",renderEmoticons:false,renderEmoji:true,text:n})},_renderFacepile:function m(){return c('React').createElement('div',{className:"_wmd"},c('React').createElement(c('Facepile.react'),{onFaceClick:this._onFaceClick,numFaces:k,profiles:this.props.profiles,showHovercard:false,size:j}))},_renderMore:function m(){var n=this.props.voterCount-k;if(n<=0)return null;var o='+'+n+' voters';return c('React').createElement('div',{className:"_wme"},c('React').createElement(c('XUIText.react'),null,o))},_onFaceClick:function m(){this.close()}});f.exports=l}),null);
__d('PollAttachmentAddOption.react',['ix','cx','fbt','xuiglyph','AbstractTextArea.react','Image.react','React','TextAreaControl'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o={addOption:"_31qf _31qg",addOptionLabel:"_31qh _31qi",charCount:"_31qk",addOptionInput:"_4sjs"};l=babelHelpers.inherits(p,c('React').Component);m=l&&l.prototype;function p(q){m.constructor.call(this,q);this.state={text:'',isFocused:false}}p.prototype.componentDidMount=function(){var q=this.refs.textArea.getTextFieldDOM();this.$PollAttachmentAddOption1=new (c('TextAreaControl'))(q);this.$PollAttachmentAddOption1.setAutogrow(true);this.$PollAttachmentAddOption1.onupdate()};p.prototype.componentDidUpdate=function(){this.$PollAttachmentAddOption1.onupdate()};p.prototype.componentWillUnmount=function(){this.$PollAttachmentAddOption1=null};p.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement('div',{className:o.charCount},c('React').createElement('div',{hidden:!this.state.isFocused},this.state.text.length,'/',this.props.maxOptionLength)),c('React').createElement('div',{className:o.addOption},c('React').createElement('div',{className:o.addOptionLabel},c('React').createElement(c('Image.react'),{src:h("89671")})),c('React').createElement('div',{className:o.addOptionInput},c('React').createElement(c('AbstractTextArea.react'),{onChange:function(event){return this.$PollAttachmentAddOption2(event)}.bind(this),onEnter:function(event){return this.$PollAttachmentAddOption3(event)}.bind(this),maxLength:this.props.maxOptionLength,disabled:this.props.disabled,onFocus:function(){return this.setState({isFocused:true})}.bind(this),onBlur:function(){return this.setState({isFocused:false})}.bind(this),placeholder:j._("Add an option..."),value:this.state.text,ref:'textArea'}))))};p.prototype.$PollAttachmentAddOption2=function(event){if(event.target.value.length>this.props.maxOptionLength)return;this.setState({text:event.target.value})};p.prototype.$PollAttachmentAddOption3=function(event){this.props.onAdd(event);this.setState({text:''})};p.propTypes={onAdd:n.func.isRequired,maxOptionLength:n.number.isRequired,disabled:n.bool.isRequired};f.exports=p}),null);
__d("QuestionPollAnswersState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN:"OPEN",LOCKED:"LOCKED"})}),null);
__d('PollAttachmentComponent.react',['cx','fbt','Facepile.react','PollAddOptionMutation','PollAddVoteMutation','PollAttachmentUtils','PollRemoveVoteMutation','PollAttachmentAddOption.react','ProfileBrowserLink','QuestionPollAnswersState','React','ShimButton.react','RelayModern','SimpleXUIDialog','SpotlightPollOptionImageViewer','SpotlightViewerInit','TextWithEntities.react','WorkModeConfig','getURLRanges','randomShuffle','PollAttachmentComponent_viewer.graphql','PollAttachmentComponent_node.graphql','PollAttachmentComponentRefetchQuery.graphql'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('PollAttachmentUtils').isEigenpoll,m=c('RelayModern').createRefetchContainer,n=c('RelayModern').graphql,o=520,p=660,q={accessible:"accessible_elem",root:"_3cof",facepile:"_3cog",optionContainer:"_61xb",row:"_31qf",optionRow:"_31qf _1jwy",optionLabel:"_31qh _3coj",optionLabelImage:"_31qh _3coj _eh6",optionSelector:"_3cok",optionBar:"_3col",optionBarImage:"_eh7",optionImage:"_eh8",optionVotes:"_3com",optionText:"_3con",optionTextPadded:"_3con _eh9",optionTextImage:"_eha",optionTextSpanImage:"_ehb",optionExpanderLink:"_3coo",optionExpander:"_31qf _3cop",space:"_3coq"};j=babelHelpers.inherits(r,c('React').Component);k=j&&j.prototype;function r(s){k.constructor.call(this,s);this.state={isLocked:false,disableShuffle:!this.props.shouldShuffle,numOptionsToShow:5}}r.prototype.render=function(){var s=this.props.node;if(!s)return c('React').createElement('div',null);var t=!this.state.isLocked&&s.can_viewer_post,u=this.state.numOptionsToShow,v=s.options.edges.reduce(function(da,ea){return Math.max(da,ea.node.voters.count)},1),w=[].concat(s.options.edges);if(this.props.shouldShuffle&&!this.state.disableShuffle)w=c('randomShuffle')(w);var x=w.some(function(da){return !!da.node.associated_image});w=w.slice(0,u).map(function(da){var ea=da.node.voters.edges;if(!c('WorkModeConfig').is_work_user){ea=ea.filter(function(qa){return qa.node.is_viewer_friend})}else ea=ea.filter(function(qa){return qa.node.id!==this.props.viewer.actor.id}.bind(this));ea=ea.slice(0,10).map(function(qa){return qa.node});if(da.node.viewer_has_voted)ea.unshift(this.props.viewer.actor);var fa=ea.map(function(qa){return {URL:qa.url,name:qa.name,uniqueID:parseInt(qa.id,10),profilePicURI:qa.profile_picture.uri}}),ga=c('ProfileBrowserLink').constructPageURI('option_voters',{option_id:da.node.id}).toString(),ha=c('ProfileBrowserLink').constructDialogURI('option_voters',{option_id:da.node.id}).toString(),ia=function(qa){if(!t)return;if(qa.target.href!==undefined)return;if(qa.target.dataset!==undefined&&qa.target.dataset.url!==undefined){c('SpotlightViewerInit').render(c('React').createElement(c('SpotlightPollOptionImageViewer'),{setid:'poll-option-message',optionText:da.node.text_with_entities.text,photoid:da.node.associated_image.id,thumbsrc:da.node.associated_image.image.uri,profiles:fa,voterCount:da.node.voters.count,clearcache:true,dimensions:[[da.node.associated_image.image.width,da.node.associated_image.image.height].join(',')],minHeight:o,minWidth:p}));return}this.setState({isLocked:true});var ra=da.node.viewer_has_voted?c('PollRemoveVoteMutation'):c('PollAddVoteMutation');ra.commit(this.props.relay.environment,{node:s,option:da.node,viewer:this.props.viewer,numOptionsToShow:u,callbacks:{onSuccess:function(){this.setState({isLocked:false})}.bind(this),onFailure:function(sa){this.setState({isLocked:false});var ta=sa.getError();c('SimpleXUIDialog').show(ta&&ta.source&&ta.source.description,ta&&ta.source&&ta.source.summary)}.bind(this)}})}.bind(this),ja=q.optionBar,ka=q.optionText,la=null,ma=q.optionLabel,na=void 0,oa=void 0;if(x&&this.props.shouldShowImage){ka=q.optionTextPadded;ma=q.optionLabelImage;if(da.node.associated_image){ja=q.optionBarImage;ka=q.optionTextImage;la=q.optionTextSpanImage;var pa={backgroundImage:'url('+da.node.associated_image.image.uri+')'};na=c('React').createElement('div',{className:"_ehe"},c('React').createElement('div',{className:"_eh8",style:pa,'data-url':da.node.associated_image.image.uri}))}}if(fa.length)oa=c('React').createElement('div',{className:q.accessible},i._("Voters for this option"));return c('React').createElement('div',{key:da.node.id,className:q.optionContainer},c('React').createElement('div',{className:t?q.optionRow:q.row},c('React').createElement('div',{className:ma,onClick:ia,role:'presentation'},c('React').createElement('input',{'aria-label':da.node.text_with_entities.text,type:l(s.response_method)?'checkbox':'radio',disabled:!t,className:q.optionSelector,checked:da.node.viewer_has_voted})),c('React').createElement('div',{className:ja,onClick:ia,role:'presentation'},c('React').createElement('div',{className:q.optionVotes,style:{width:100*da.node.voters.count/v+'%'}}),c('React').createElement('div',{className:ka},c('React').createElement(c('TextWithEntities.react'),{className:la,ranges:c('getURLRanges')(da.node.text_with_entities.text),renderEmoticons:false,renderEmoji:true,text:da.node.text_with_entities.text})),na)),oa,c('React').createElement('div',{className:q.facepile},c('React').createElement(c('Facepile.react'),{moreColor:'gray',moreCount:da.node.voters.count-Math.min(5,fa.length),moreDialogLink:ha,morePageLink:ga,numFaces:5,profiles:fa,showHovercard:true,size:28})))}.bind(this));var y=null,z=null;if(s.options.count>u){var aa=s.options.count-u,ba=i._({"*":"{options} More Options..."},[i.param('options',aa,[0])]),ca=i._("1 More Option...");y=c('React').createElement('div',{className:q.optionContainer},c('React').createElement('div',{className:q.space}),c('React').createElement(c('ShimButton.react'),{className:q.optionExpanderLink,form:'link',onClick:function(){return this.$PollAttachmentComponent1()}.bind(this)},c('React').createElement('div',{className:q.optionExpander},aa>1?ba:ca)))}else if(s.poll_answers_state===c('QuestionPollAnswersState').OPEN&&s.can_viewer_post)z=c('React').createElement('div',{className:q.optionContainer},c('React').createElement(c('PollAttachmentAddOption.react'),{onAdd:function(da){return this.$PollAttachmentComponent2(da)}.bind(this),maxOptionLength:this.props.maxOptionLength,disabled:this.state.isLocked}));return c('React').createElement('div',{className:q.root},w,y,z)};r.prototype.$PollAttachmentComponent1=function(){this.setState({disableShuffle:true,numOptionsToShow:this.props.node.options.count});this.props.relay.refetch({first:this.props.node.options.count,questionID:this.props.node.id})};r.prototype.$PollAttachmentComponent2=function(event){this.setState({isLocked:true,numOptionsToShow:this.props.node.options.count+1});c('PollAddOptionMutation').commit(this.props.relay.environment,{node:this.props.node,optionText:event.target.value,viewer:this.props.viewer,numOptionsToShow:this.props.node.options.count+1,callbacks:{onSuccess:function(){this.setState({isLocked:false})}.bind(this),onFailure:function(s){this.setState({isLocked:false,numOptionsToShow:this.props.node.options.count});var t=s.getError();c('SimpleXUIDialog').show(t&&t.source&&t.source.description,t&&t.source&&t.source.summary)}.bind(this)}})};f.exports=m(r,{viewer:function s(){return c('PollAttachmentComponent_viewer.graphql')},node:function s(){return c('PollAttachmentComponent_node.graphql')}},function(){return c('PollAttachmentComponentRefetchQuery.graphql')})}),null);
__d('PollAttachment.react',['PollAttachmentComponent.react','React','RelayModern','RelayFBEnvironment','PollAttachmentQuery.graphql'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k=c('RelayModern').graphql,l=c('RelayModern').QueryRenderer;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props.shouldShuffle?200:5;return c('React').createElement(l,{environment:c('RelayFBEnvironment'),variables:{questionID:this.props.questionID,maxOptionLength:this.props.maxOptionLength,shouldShuffle:this.props.shouldShuffle,first:n},query:h||(h=function o(){return c('PollAttachmentQuery.graphql')}),render:function(o){var p=o.error,q=o.props;if(p){return c('React').createElement('div',null,p.message)}else if(q)return c('React').createElement(c('PollAttachmentComponent.react'),babelHelpers['extends']({},this.props,q));return c('React').createElement('div',null,'Loading')}.bind(this)})};function m(){i.apply(this,arguments)}f.exports=m}),null);