if (self.CavalryLogger) { CavalryLogger.start_js(["nbJSc"]); }

__d('CampfireByline.react',['cx','DOMContainer.react','ImageBlock.react','Link.react','React','cssURL'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=null;if(this.props.privacyMarkup)m=c('React').createElement('span',{className:"_4_mf"},c('React').createElement(c('DOMContainer.react'),null,this.props.privacyMarkup));var n=null;if(this.props.permalinkURI){n=c('React').createElement('a',{href:this.props.permalinkURI,className:"uiLinkSubtle"},this.props.dateString)}else n=this.props.dateString;var o=null;if(this.props.viewCount)o=c('React').createElement('span',{className:"_5q4y"},c('React').createElement(c('DOMContainer.react'),null,this.props.viewCount));return c('React').createElement(c('ImageBlock.react'),{className:"_2yud"},c('React').createElement('div',{className:"_2yuf",style:{backgroundImage:c('cssURL')(this.props.authorProfilePicURI)}}),c('React').createElement('div',{className:"_3uhg"},c('React').createElement(c('Link.react'),{className:"_2yug",href:this.props.authorProfileURI,target:'_blank'},this.props.authorName),c('React').createElement('span',{className:"_4_mg"},'\u00B7'),n,m,o))};function l(){i.apply(this,arguments)}l.propTypes={authorName:k.string.isRequired,authorProfileURI:k.string.isRequired,authorProfilePicURI:k.string.isRequired,dateString:k.string.isRequired,permalinkURI:k.string,privacyMarkup:k.object,viewCount:k.object};f.exports=l}),null);
__d('Video.react',['React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.componentDidMount=function(){'use strict';var l=c('ReactDOM').findDOMNode(this.refs.video);if(this.props.paused&&l&&l.pause)l.pause();};k.prototype.componentWillUpdate=function(l,m){'use strict';var n=c('ReactDOM').findDOMNode(this.refs.video);if(l.playbackRate)n.playbackRate=l.playbackRate;if(l.paused!=this.props.paused&&n)if(l.paused&&n.pause){n.pause()}else if(n.play)n.play();};k.prototype.render=function(){'use strict';return c('React').createElement('video',babelHelpers['extends']({},this.props,{ref:'video'}))};function k(){'use strict';h.apply(this,arguments)}k.propTypes={autoPlay:j.bool,paused:j.bool,controls:j.bool,height:j.oneOfType([j.string,j.number]),loop:j.bool,muted:j.bool,onAbort:j.func,onCanPlay:j.func,onCanPlayThrough:j.func,onDurationChange:j.func,onEmptied:j.func,onEncrypted:j.func,onEnded:j.func,onError:j.func,onLoadedData:j.func,onLoadedMetadata:j.func,onLoadStart:j.func,onPause:j.func,onPlay:j.func,onPlaying:j.func,onProgress:j.func,onRateChange:j.func,onSeeked:j.func,onSeeking:j.func,onStalled:j.func,onSuspend:j.func,onTimeUpdate:j.func,onVolumeChange:j.func,onWaiting:j.func,playbackRate:j.number,poster:j.string,src:j.string.isRequired,width:j.oneOfType([j.string,j.number])};f.exports=k}),null);
__d("XNotesComposerOnlyPublishController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notes\/composer\/onlypublish\/",{note_id:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d('canEditNote',['UserAgent'],(function a(b,c,d,e,f,g){var h=typeof b.getSelection==='function',i=h&&(c('UserAgent').isPlatform('Linux')||c('UserAgent').isPlatform('Mac OS X')||c('UserAgent').isPlatform('Windows')||c('UserAgent').isPlatform('Chrome OS'))&&(c('UserAgent').isBrowser('IE >= 10')||c('UserAgent').isBrowser('Chrome')||c('UserAgent').isBrowser('Edge >= 12')||c('UserAgent').isBrowser('Firefox >= 16')||c('UserAgent').isBrowser('Opera >= 12')||c('UserAgent').isBrowser('Safari >= 5'));function j(){return i}f.exports=j}),null);
__d('NotesReader.react',['ix','cx','fbt','glyph','ActorURI','CampfireByline.react','CssBackgroundImage.react','DOMContainer.react','Image.react','React','TooltipData','UnicodeBidi','UnicodeBidiDirection','Video.react','XNotesComposerOnlyPublishController','XUIButton.react','XUIGrayText.react','XUIOverlayButton.react','XUIText.react','canEditNote','uniqueID'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=c('UnicodeBidiDirection').LTR,o=c('UnicodeBidiDirection').RTL,p=c('React').PropTypes,q=c('canEditNote')();l=babelHelpers.inherits(r,c('React').Component);m=l&&l.prototype;function r(){var s,t;'use strict';for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=m.constructor).call.apply(s,[this].concat(v)),this.state={waitingToEdit:false},this.$NotesReader1=function(){if(this.props.onEdit)this.setState({waitingToEdit:true},this.props.onEdit);}.bind(this),t}r.prototype.render=function(){'use strict';var s=null;if(this.props.coverMediaInfo)if(this.props.coverMediaInfo.type==='photo'){var t=this.props.coverMediaInfo,u=t.xOffset,v=t.yOffset;s=c('React').createElement(c('CssBackgroundImage.react'),{imageURI:this.props.coverMediaInfo.coverPhotoURI,className:"_2jzn",backgroundPosition:u+'% '+v+'%'})}else if(this.props.coverMediaInfo.type==='video')s=c('React').createElement(c('Video.react'),{poster:this.props.coverMediaInfo.posterSrc,src:this.props.coverMediaInfo.videoSrc,width:'100%',height:'100%'});var w=null;if(this.props.ufiMarkup){w=c('React').createElement(c('DOMContainer.react'),null,this.props.ufiMarkup)}else if(this.props.canEdit){var x=c('XNotesComposerOnlyPublishController').getURIBuilder().setInt('note_id',this.props.noteID).getURI();x=c('ActorURI').create(x,this.props.ownerID);var y=j._("Click the \"Publish\" button to publish. Editing is not available in this browser."),z=null;if(q){y=j._("Click the \"Publish\" button to save or \"Edit\" to make more changes.");z=c('React').createElement(c('XUIButton.react'),{label:j._("Edit"),onClick:this.$NotesReader1,disabled:this.state.waitingToEdit,size:'xlarge',use:'default',className:"_3-9b _1nvw"})}w=c('React').createElement('div',{className:"_4lmh"},c('React').createElement(c('XUIGrayText.react'),{shade:'medium',display:'block'},j._("This is a preview of your note.")),c('React').createElement(c('XUIGrayText.react'),{shade:'light',display:'block',className:"_3-8w"},y),c('React').createElement('div',{className:"_3-8y"},c('React').createElement(c('XUIButton.react'),{href:x.toString(),rel:'async-post',label:j._("Publish"),size:'xlarge',use:'confirm',className:"_1nvw"}),z))}var aa=null;if(this.props.canEdit){if(q){aa=c('React').createElement('div',{className:"_34gr"},c('React').createElement(c('XUIOverlayButton.react'),{image:c('React').createElement(c('Image.react'),{src:h("101440")}),label:this.props.isDoc?j._("Edit Doc"):j._("Edit Note"),onClick:this.$NotesReader1,disabled:this.state.waitingToEdit}))}else aa=c('React').createElement('div',{className:"_34gr"},c('React').createElement(c('XUIOverlayButton.react'),{image:c('React').createElement(c('Image.react'),{src:h("101440")}),label:j._("Editing is not available in this browser"),disabled:true}));}else if(this.props.isDoc)aa=c('React').createElement('div',{className:"_34gr"},c('React').createElement(c('XUIOverlayButton.react'),babelHelpers['extends']({image:c('React').createElement(c('Image.react'),{src:h("101440")}),label:j._("Edit Doc"),disabled:true},c('TooltipData').propsFor(j._("This document is not editable"),'left'))));var ba="_4lmi"+(' '+"_t04")+(!this.props.coverMediaInfo?' '+"_t05":''),ca=c('UnicodeBidi').getDirection(this.props.title),da="_4lmk"+(ca===n?' '+"_2vxa":'')+(ca===o?' '+"_2vxb":'')+(' '+"autofocus"),ea=c('uniqueID')(),fa=null;if(this.props.menuMarkup){var ga=this.props.canEdit||this.props.isDoc,ha="_16q8"+(!this.props.coverMediaInfo?' '+"_16q9":'')+(ga?' '+"_16qa":'');fa=c('React').createElement('div',{className:ha},c('React').createElement(c('DOMContainer.react'),null,this.props.menuMarkup))}return c('React').createElement('div',{className:ba,'data-ft':this.props.feedTracking,role:'dialog','aria-labelledby':ea},s,c('React').createElement('div',{className:"_39k2"},fa,c('React').createElement(c('XUIText.react'),{id:ea,tabIndex:-1,type:'serif',display:'block',className:da},this.props.title),c('React').createElement(c('CampfireByline.react'),{authorName:this.props.authorInfo.name,authorProfileURI:this.props.authorInfo.profileURI,authorProfilePicURI:this.props.authorInfo.profilePicURI,dateString:this.props.authorInfo.dateString,permalinkURI:this.props.permalinkURI,privacyMarkup:this.props.privacyMarkup,viewCount:this.props.viewCount})),c('React').createElement(c('XUIText.react'),{type:'serif',display:'block',className:"_39k5"},this.props.children),c('React').createElement('div',{className:"_4lmp"},w),aa)};r.propTypes={authorInfo:p.object.isRequired,canEdit:p.bool,coverMediaInfo:p.object,feedTracking:p.string,noteID:p.string.isRequired,permalinkURI:p.string.isRequired,privacyMarkup:p.object,onEdit:p.func,ownerID:p.string.isRequired,title:p.string.isRequired,ufiMarkup:p.object,viewCount:p.object,isDoc:p.bool};f.exports=r}),null);
__d('TypewriterLayer',['cx','DOM','DOMContainer.react','Layer','LayerAutoFocus','LayerButtons','LayerFadeOnHide','LayerFadeOnShow','LayerHideOnBlur','LayerTabIsolation','ModalLayer','React','ReactDOM','UserAgent','XUICloseButton.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('UserAgent').isBrowser('IE');i=babelHelpers.inherits(l,c('Layer'));j=i&&i.prototype;l.prototype._getDefaultBehaviors=function(){'use strict';return j._getDefaultBehaviors.call(this).concat([c('LayerAutoFocus'),c('LayerButtons'),c('LayerFadeOnHide'),c('LayerFadeOnShow'),c('LayerHideOnBlur'),c('LayerTabIsolation'),c('ModalLayer')])};l.prototype._buildWrapper=function(m,n){'use strict';this._inner=c('DOM').create('div',{className:"_5g03"+(k?' '+"_e_c":'')},n);var o=c('DOM').create('div',{className:"_4-hy"});c('ReactDOM').render(c('React').createElement('div',null,c('React').createElement(c('XUICloseButton.react'),{className:"_5ezf layerCancel",size:'medium',shade:'light'}),c('React').createElement(c('DOMContainer.react'),{display:'block'},this._inner)),o);return o};l.prototype.getContentRoot=function(){'use strict';return this._inner};l.prototype.updatePosition=function(){'use strict';return true};function l(){'use strict';i.apply(this,arguments)}f.exports=l}),null);
__d('NotesReaderOverlay',['ActorURI','AsyncRequest','BanzaiLogger','CampfireLoggerEvents','CampfireLoggerNoteTypes','DOM','DOMContainer.react','LayerDestroyOnHide','LayerHideOnEscape','LayerHideOnTransition','LayerRefocusOnHide','NotesReader.react','PageTransitions','React','ReactDOM','TypewriterLayer','URI','XNotesComposerController','goURI'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$NotesReaderOverlay12=function(){this.$NotesReaderOverlay13();this.$NotesReaderOverlay6.show()}.bind(this);this.$NotesReaderOverlay1=i;this.$NotesReaderOverlay2=j;this.$NotesReaderOverlay3=c('DOM').create('div');this.$NotesReaderOverlay4=null;this.$NotesReaderOverlay5=null;this.$NotesReaderOverlay6=new (c('TypewriterLayer'))({addedBehaviors:[c('LayerDestroyOnHide'),c('LayerHideOnEscape'),c('LayerHideOnTransition'),c('LayerRefocusOnHide')],causalElement:j.causalElement},this.$NotesReaderOverlay3);this.$NotesReaderOverlay6.subscribe('hide',this.$NotesReaderOverlay7.bind(this));this.$NotesReaderOverlay8();if(!this.$NotesReaderOverlay2.canEdit&&this.$NotesReaderOverlay2.published)this.$NotesReaderOverlay9=Date.now();}h.prototype.$NotesReaderOverlay7=function(){'use strict';c('PageTransitions').removeHandler(this.$NotesReaderOverlay10);this.$NotesReaderOverlay10=null;var i=function(l){var m=this.$NotesReaderOverlay4;this.$NotesReaderOverlay4=null;c('PageTransitions').removeHandler(i);if(m.getPath()===l.getPath()){c('PageTransitions').transitionComplete(true);return true}return false}.bind(this);c('PageTransitions').registerHandler(i);c('goURI')(this.$NotesReaderOverlay4);if(!this.$NotesReaderOverlay2.canEdit&&this.$NotesReaderOverlay2.published){var j=Date.now(),k=Math.round((j-this.$NotesReaderOverlay9)/1000);c('BanzaiLogger').log('CampfireNotesLoggerConfig',{event:c('CampfireLoggerEvents').CONSUME_READER_EXIT_PUBLISHED,event_time:j,note_id:Number(this.$NotesReaderOverlay1),note_type:c('CampfireLoggerNoteTypes').CAMPFIRE,author_id:Number(this.$NotesReaderOverlay2.authorInfo.ownerID),time_spent_reading_sec:k})}};h.prototype.$NotesReaderOverlay11=function(){'use strict';var i=c('XNotesComposerController').getURIBuilder().getURI();i=c('ActorURI').create(i,this.$NotesReaderOverlay2.authorInfo.ownerID);new (c('AsyncRequest'))(i).setData({note_id:this.$NotesReaderOverlay1}).setMethod('POST').setHandler(function(){this.$NotesReaderOverlay6.hide()}.bind(this)).send()};h.prototype.$NotesReaderOverlay8=function(){'use strict';c('ReactDOM').render(c('React').createElement(c('NotesReader.react'),{authorInfo:this.$NotesReaderOverlay2.authorInfo,canEdit:this.$NotesReaderOverlay2.canEdit,coverMediaInfo:this.$NotesReaderOverlay2.coverMediaInfo,feedTracking:this.$NotesReaderOverlay2.feedTracking,noteID:this.$NotesReaderOverlay1,title:this.$NotesReaderOverlay2.title,menuMarkup:this.$NotesReaderOverlay2.menuMarkup,onEdit:this.$NotesReaderOverlay11.bind(this),ownerID:this.$NotesReaderOverlay2.authorInfo.ownerID,permalinkURI:this.$NotesReaderOverlay2.permalinkURI,privacyMarkup:this.$NotesReaderOverlay2.privacyMarkup,ufiMarkup:this.$NotesReaderOverlay2.ufiMarkup,testConfig:this.$NotesReaderOverlay2.testConfig,viewCount:this.$NotesReaderOverlay2.viewCount},c('React').createElement(c('DOMContainer.react'),{display:'block'},this.$NotesReaderOverlay2.documentMarkup)),this.$NotesReaderOverlay3,this.$NotesReaderOverlay12)};h.prototype.$NotesReaderOverlay13=function(){'use strict';var i=new (c('URI'))(this.$NotesReaderOverlay2.permalinkURI);this.$NotesReaderOverlay5=function(j){if(i.getPath()===j.getPath()){c('PageTransitions').transitionComplete(true);return true}if(this.$NotesReaderOverlay6.isShown()&&this.$NotesReaderOverlay4.getPath()===j.getPath()){c('PageTransitions').removeHandler(this.$NotesReaderOverlay5);this.$NotesReaderOverlay5=null;this.$NotesReaderOverlay4=null;c('PageTransitions').transitionComplete(true);return true}this.$NotesReaderOverlay5=null;return false}.bind(this);c('PageTransitions').registerHandler(this.$NotesReaderOverlay5);this.$NotesReaderOverlay4=c('URI').getRequestURI();c('goURI')(i)};f.exports=h}),null);