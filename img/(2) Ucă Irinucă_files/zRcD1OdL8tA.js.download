if (self.CavalryLogger) { CavalryLogger.start_js(["BFNaB"]); }

__d('BusinessActorUtils.brands',['UnicodeCJK'],(function a(b,c,d,e,f,g){'use strict';var h={getInitials:function i(j,k){var l=j.trim().charAt(0),m=k.trim().charAt(0),n=l+m;return !c('UnicodeCJK').hasIdeograph(n)?n.toUpperCase():m}};f.exports=h}),null);
__d('RTISubscriptionGate',['RTISubscriptionGateLoader'],(function a(b,c,d,e,f,g){var h=c('RTISubscriptionGateLoader').module;if(c('RTISubscriptionGateLoader').gkUseIcebreaker)h=new h(c('RTISubscriptionGateLoader').icebreakerWhitelist);f.exports=h}),null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={}}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()}delete this.$UFICommentLogger2[i]};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l]}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log()};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h()}),null);
__d("UFIStoryActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"})}),null);
__d('UFIAcceptedAnswerStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER:return babelHelpers['extends']({},k,(m={},m[l.comment.ftentidentifier]=l.doAccept?{type:'Accepted',id:l.comment.id}:{type:'NoneAccepted'},m));default:return k;}};j.prototype.get=function(k,l){var m=this.getState()[k];if(m)return m;return l?{type:'Accepted',id:l}:{type:'NoneAccepted'}};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d("UFIAddCommentActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CANCEL:"add_comment_cancel",CHANGE_CONTENT:"add_comment_change_content",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",PIVOT_SEND_MESSAGE:"pivot_send_message"})}),null);
__d('UFICommentEditIDStore',['FluxReduceStore','UFIAddCommentActionType','UFICentralUpdates','UFICommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('UFICentralUpdates').subscribe('actor-changed',function(l,m){c('UFIDispatcherBase').dispatch({type:'PRIVATE_ACTOR_CHANGED',instanceID:true,ftentidentifier:true})})}j.prototype.getInitialState=function(){return {}};j.prototype.getForInstance=function(k){return this.getState()[k]||null};j.prototype.reduce=function(k,l){var m;switch(l.type){case 'PRIVATE_ACTOR_CHANGED':return {};case c('UFIAddCommentActionType').CANCEL:case c('UFIAddCommentActionType').SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c('UFICommentActionType').EDIT:return babelHelpers['extends']({},k,(m={},m[l.instanceID]=l.comment.id,m));}return k};f.exports=new j(c('UFIDispatcherBase'))}),null);
__d("CommentApprovalsResponsibleUserAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({APPEALED:"APPEALED",SECURED_ACCOUNT:"SECURED_ACCOUNT"})}),null);
__d('UFIComments',['invariant','ClientIDs','CommentApprovalsResponsibleUserAction','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','randomInt'],(function a(b,c,d,e,f,g,h){'use strict';var i={},j={},k={};function l(ha){return ha in j?j[ha]:ha}function m(ha,ia){ha.forEach(function(ja){var ka=ja.ftentidentifier,la=c('UFIConstants').UFIPayloadSourceType,ma=ja.clientid,na=false,oa=babelHelpers['extends']({},ja);if(ma){delete oa.clientid;na=c('ClientIDs').isExistingClientID(ma);if(na&&j[ma]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ja.id).log();return}}if(ia===la.LIVE_SEND||ia===c('UFIConstants').UFIPayloadSourceType.STREAMING||ia===la.USER_ACTION||ia===la.ENDPOINT_ADD_COMMENT||ia===la.ENDPOINT_EDIT_COMMENT)oa.isunseen=true;if(ia===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ia===c('UFIConstants').UFIPayloadSourceType.STREAMING)oa.islive=true;if(ia===la.ENDPOINT_COMMENT_FETCH||ia===la.ENDPOINT_ID_COMMENT_FETCH)oa.fromfetch=true;if(na&&i[ma]){oa.ufiinstanceid=i[ma].ufiinstanceid;j[ma]=ja.id;k[ja.id]=ma;i[ja.id]=i[ma];delete i[ma];c('UFICentralUpdates').didUpdateComment(ma)}ga.setComment(ja.id,new (c('ImmutableObject'))(oa));c('UFICentralUpdates').didUpdateComment(ja.id);c('UFICentralUpdates').didUpdateFeedback(ka)})}function n(ha,ia){for(var ja=0;ja<ha.length;ja++){var ka=ha[ja];switch(ka.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(ga.getComment(ka.entidentifier))o(ka.clientid,ka.entidentifier,ka.hasviewerliked,ka.likecount,ka.reactiondata,ia);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:o(ka.clientid,ka.commentid,ka.viewerliked,ka.likecount,ka.reactiondata,ia);break;case c('UFIConstants').UFIActionType.MUTE_MEMBER:p(ka);break;case c('UFIConstants').UFIActionType.REACTION:if(ga.getComment(ka.entidentifier))q(ka.entidentifier,ka);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:q(ka.commentid,ka);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:u(ka);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:v(ka);break;case c('UFIConstants').UFIActionType.CHANGE_ACCEPTED_ANSWER:w(ka);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:x(ka);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:y(ka);break;case c('UFIConstants').UFIActionType.COMMENT_KEEP_SPAM:z(ka);break;case c('UFIConstants').UFIActionType.COMMENT_APPEAL_SPAM:aa(ka);break;case c('UFIConstants').UFIActionType.COMMENT_SECURE_ACCOUNT:ba(ka);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:ca(ka);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:s(ka);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:r(ka);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:ea(ka);break;}}}function o(ha,ia,ja,ka,la,ma){var na=ga.getComment(ia);if(na){var oa={},pa=ha&&c('ClientIDs').isExistingClientID(ha);if(!pa){oa.hasviewerliked=ja;oa.likecount=ka;if(la){oa.reactioncount=la.reactioncount;oa.reactioncountmap=la.reactioncountmap;oa.reactioncountreduced=la.reactioncountreduced;oa.viewerreaction=la.viewerreaction}}if(ma===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ma===c('UFIConstants').UFIPayloadSourceType.STREAMING)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(Boolean(pa)).setCommentID(ia).log();oa.likeconfirmhash=c('randomInt')(0,1024);fa(ia,oa)}}function p(ha){for(var ia in i){var ja=i[ia];if(ja.author===ha.authorid){var ka={};ka.ismuted=ha.shouldmute;fa(ia,ka)}}}function q(ha,ia){var ja=ga.getComment(ha);if(ja){var ka={};if(ia.clientid&&c('ClientIDs').isExistingClientID(ia.clientid)&&ia.viewerreaction!==ja.viewerreaction)return;ka.hasviewerliked=ia.hasviewerliked;ka.likecount=ia.likecount;ka.reactioncount=ia.reactioncount;ka.reactioncountmap=ia.reactioncountmap;ka.reactioncountreduced=ia.reactioncountreduced;ka.viewerreaction=ia.viewerreaction;fa(ha,ka)}}function r(ha){var ia=ga.getComment(ha.commentid);if(ia&&ha.hasviewerliked===ia.hasviewerliked){var ja={likecount:ha.likecount,likeconfirmhash:c('randomInt')(0,1024)};fa(ha.commentid,ja)}}function s(ha){var ia=ha.commentid,ja=ga.getComment(ia);if(ja){var ka={translationdata:ha.translationdata};fa(ia,ka)}}function t(ha){var ia={reportLink:ha.reportLink,commenterIsFOF:ha.commenterIsFOF,userIsMinor:ha.userIsMinor,giveFeedbackLink:ha.giveFeedbackLink,reportGroupAdminLink:ha.reportGroupAdminLink};return ia}function u(ha){var ia=ga.getComment(ha.commentid);if(ia)da(ia,c('UFIConstants').UFIStatus.DELETED);}function v(ha){var ia=ga.getComment(ha.commentid);if(ia&&ia.status!==c('UFIConstants').UFIStatus.DELETED)da(ia,c('UFIConstants').UFIStatus.LIVE_DELETED);}function w(ha){fa(ha.commentid,{postacceptedanswer:ha.isaccepted?ha.commentid:null})}function x(ha){fa(ha.commentid,{attachment:null})}function y(ha){var ia=ga.getComment(ha.commentid),ja=ha.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;if(ia)da(ia,ja);}function z(ha){var ia=ga.getComment(ha.commentid);if(ia)fa(ia.id,{needsApproval:false,isApproved:true});}function aa(ha){var ia=ga.getComment(ha.commentid);if(ia)fa(ia.id,{appealStatus:c('CommentApprovalsResponsibleUserAction').APPEALED,canAppeal:false,canSecure:false});}function ba(ha){var ia=ga.getComment(ha.commentid);if(ia)fa(ia.id,{appealStatus:c('CommentApprovalsResponsibleUserAction').SECURED_ACCOUNT,canAppeal:false,canSecure:false});}function ca(ha){fa(ha.commentid,t(ha))}function da(ha,ia){fa(ha.id,{priorstatus:ha.status,status:ia})}function ea(ha){var ia=ga.getComment(ha.commentid);if(ia){var ja={constituentTitle:ha.constituentTitle,hasConstituentBadge:ha.hasConstituentBadge};fa(ha.commentid,ja)}}function fa(ha,ia){var ja=ga.getComment(ha)||new (c('ImmutableObject'))({});ga.setComment(ha,c('ImmutableObject').set(ja,ia));c('UFICentralUpdates').didUpdateComment(ja.id);c('UFICentralUpdates').didUpdateFeedback(ja.ftentidentifier)}var ga={getRenderKey:function ha(ia){return 'comment'+(ia in k?k[ia]:ia)},getComment:function ha(ia){if(ia===c('UFIConstants').unavailableCommentKey)return null;return i[l(ia)]},setComment:function ha(ia,ja){ja instanceof c('ImmutableObject')||h(0);i[l(ia)]=ja},resetComments:function ha(ia){for(var ja in ia)delete i[l(ja)];},getCommentsForFTEntIdentifier:function ha(ia){var ja=[];for(var ka in i){var la=i[ka];if(la.ftentidentifier==ia)ja.push(la);}return ja}};c('UFICentralUpdates').subscribe('update-comments',function(ha,ia){if(ia.comments&&ia.comments.length)m(ia.comments,ia.payloadsource);if(ia.pinnedcomments&&ia.pinnedcomments.length)m(ia.pinnedcomments,ia.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ha,ia){if(ia.actions&&ia.actions.length)n(ia.actions,ia.payloadsource);});f.exports=ga}),22);
__d('UFILivePinnedCommentStore',['FluxReduceStore','UFIComments','UFIDispatcherBase','UFIFeedbackTargets','UFIStoryActionType','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').LIVE_PIN_COMMENT:case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k;}};j.prototype.areEqual=function(k,l){return c('areEqual')(k,l)};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c('UFIFeedbackTargets').getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null}return l.commentID||null};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(!l)return null;var m=c('UFIComments').getComment(l);return m?m.author||null:null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIVisibility',[],(function a(b,c,d,e,f,g){'use strict';var h={VISIBLE:'visible',HIDDEN:'hidden'};f.exports=h}),null);
__d('UFICommentVisibilityStore',['invariant','FluxReduceStore','UFICommentActionType','UFIComments','UFIDispatcherBase','UFIInstanceActionType','UFILivePinnedCommentStore','UFIRootRegistry','UFIVisibility','filterObject'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+'-'+q+(r?'-P':'');return p}function l(p,q){return p===q||p.startsWith(q+'-')}function m(p){var q=c('UFIRootRegistry').getInstanceIDFromFTEntIdentifier(p);return q?q:[]}function n(p){return {instanceid:p}}i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {}};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(Object.prototype.hasOwnProperty.call(p,s))return p[s];return c('UFIVisibility').HIDDEN};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return this.getVisibility(this.getState(),q)===c('UFIVisibility').VISIBLE};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r)}.bind(this))};o.prototype.reduce=function(p,q){var r;switch(q.type){case c('UFICommentActionType').UNMOUNTED:var s=babelHelpers['extends']({},p);delete s[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return s;case c('UFICommentActionType').CHANGE_VISIBILITY:return babelHelpers['extends']({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c('UFIInstanceActionType').CHANGE_VISIBILITY:var t=c('UFIRootRegistry').getFTEntIdentifierFromInstanceID(q.instanceID),u=c('UFIComments').getCommentsForFTEntIdentifier(t);q.type===c('UFIInstanceActionType').CHANGE_VISIBILITY||h(0);var v=q.visibility;if(u){var w,x=u.reduce(function(ca,da){ca[k(q.instanceID,da.fbid,da.fbid?false:null)]=v;return ca},{});if(t){var y=c('UFILivePinnedCommentStore').getPinnedCommentID(t);if(y){var z=c('UFIComments').getComment(y);if(z)x[k(q.instanceID,z.fbid,true)]=v;}}return babelHelpers['extends']({},p,(w={},w[k(q.instanceID)]=q.visibility,w),x)}case c('UFIInstanceActionType').REMOVE:var aa=q.instanceID,ba=k(aa);return c('filterObject')(p,function(ca,da){return da!==ba&&!l(da,aa)});}return p};function o(){i.apply(this,arguments)}f.exports=new o(c('UFIDispatcherBase'))}),null);
__d('UFIKeyValueStore',['FluxReduceStore','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.getValueFor=function(k){return this.getState()[k]||null};j.prototype.getStateKey=function(k){return k.instanceID};j.prototype.getStateValue=function(k){return c('abstractMethod')('UFIKeyValueStore','getStateValue')};j.prototype.reduce=function(k,l){var m=this.getStateKey(l),n=this.getStateValue(l);if(n!==null){var o;return babelHelpers['extends']({},k,(o={},o[m]=n,o))}return k};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('UFICommercialBreakStore',['UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK:return k.inCommercial;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIComposerIsTypingStore',['UFIAddCommentActionType','UFIDispatcherBase','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getStateKey=function(k){return k.ftentidentifier};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').SUBMIT_EDIT:return false;case c('UFIAddCommentActionType').SUBMIT_NEW:return false;case c('UFIAddCommentActionType').CHANGE_CONTENT:var l=k.text.trim().length;return l>0;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIInteractionStore',['UFIAddCommentActionType','UFICommentActionType','UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').CHANGE_CONTENT:case c('UFIAddCommentActionType').SUBMIT_EDIT:case c('UFIAddCommentActionType').SUBMIT_NEW:case c('UFICommentActionType').CHANGE_REACTION:case c('UFICommentActionType').EDIT:case c('UFICommentActionType').REMOVE:case c('UFICommentActionType').TOGGLE_LIKE:case c('UFICommentActionType').TOGGLE_MARK_AS_SPAM:case c('UFICommentActionType').TRANSLATE:case c('UFIInstanceActionType').CHANGE_ORDER_MODE:case c('UFIInstanceActionType').TOGGLE_COMMENTS:case c('UFIStoryActionType').PAGE_IN_COMMENTS:case c('UFIStoryActionType').SHOW_REPLIES:case c('UFIStoryActionType').TOGGLE_REPLIES:return true;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIStoryActionType').FRIEND_TYPING:return 'friend';case c('UFIStoryActionType').SOMEONE_TYPING:return 'someone';case c('UFIStoryActionType').TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n))}return k};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend'};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFICentralUpdatesLocalCommentAdapter',['ClientIDs','FeedbackPayloadSourceType','UFICentralUpdates','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i={},j=(h={},h[c('FeedbackPayloadSourceType').USER_ACTION]=l,h[c('FeedbackPayloadSourceType').ENDPOINT_ADD_COMMENT]=m,h);function k(){return c('UFICentralUpdates').subscribe('update-comments',function(p,q){if(q.comments){var r=j[q.payloadsource];if(r)q.comments.forEach(r);}})}function l(p){if(!c('ClientIDs').isExistingClientID(p.id))return;i[p.id]=p.ufiinstanceid;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_ADDED_COMMENT',instanceID:p.ufiinstanceid,ftentidentifier:p.ftentidentifier,clientID:p.id})}function m(p){if(!c('ClientIDs').isExistingClientID(p.clientid))return;var q=i[p.clientid];delete i[p.clientid];if(!q)return;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_SAVED_COMMENT',instanceID:q,ftentidentifier:p.ftentidentifier,clientID:p.clientid,commentID:p.id})}var n=void 0,o={subscribeOnce:function p(){if(!n){n=k();return n}return null}};f.exports=o}),null);
__d('UFILocallyComposedCommentStore',['invariant','ClientIDs','FluxReduceStore','UFIAddCommentActionType','UFICentralUpdatesLocalCommentAdapter','UFIDispatcherBase','setByPath'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(m){return babelHelpers['extends']({},m)}i=babelHelpers.inherits(l,c('FluxReduceStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);var n=c('UFICentralUpdatesLocalCommentAdapter').subscribeOnce()}l.prototype.getInitialState=function(){return {}};l.prototype.getStateForInstance=function(m){return m?this.getState()[m]||{}:{}};l.prototype.reduce=function(m,n){switch(n.type){case 'CENTRALUPDATES_ADDED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.clientID],true);return m;case 'CENTRALUPDATES_SAVED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.commentID],true);delete m[n.instanceID][n.clientID];return m;case c('UFIAddCommentActionType').SUBMIT_EDIT:m=k(m);c('setByPath')(m,[n.instanceID,n.comment.id],true);return m;}return m};f.exports=new l(c('UFIDispatcherBase'))}),null);
__d('UFIPlayLiveVODHighlightsStore',['UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').PLAY_LIVE_VOD_HIGHLIGHTS:return k.playingLiveVODHighlights;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIActionTypes',['UFIInstanceActionType','UFIStoryActionType','UFIAddCommentActionType','UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={INSTANCE:c('UFIInstanceActionType'),STORY:c('UFIStoryActionType'),ADD_COMMENT:c('UFIAddCommentActionType'),COMMENT:c('UFICommentActionType')};f.exports=h}),null);
__d('UFIReactionPendingRequestsStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(o){return o+'-comment'}function k(o){return o+'-story'}function l(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)+1,q))}function m(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)-1,q))}h=babelHelpers.inherits(n,c('FluxReduceStore'));i=h&&h.prototype;n.prototype.getInitialState=function(){return {}};n.prototype.reduce=function(o,p){switch(p.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:case c('UFIActionTypes').STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_FAILURE:case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid));}return o};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0};function n(){h.apply(this,arguments)}f.exports=new n(c('UFIDispatcherBase'))}),null);
__d('UFIReactionSyncStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(m){return m+'-comment'}function k(m){return m+'-story'}h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return {}};l.prototype.reduce=function(m,n){var o,p,q;switch(n.type){case c('UFIActionTypes').INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u},{});return babelHelpers['extends']({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m;}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)]};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)]};function l(){h.apply(this,arguments)}f.exports=new l(c('UFIDispatcherBase'))}),null);
__d('UFISharedDispatcher',['UFIDispatcherBase','UFIFeedbackStore','UFIAcceptedAnswerStore','UFICommentEditIDStore','UFICommentVisibilityStore','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIInteractionStore','UFILivePinnedCommentStore','UFILiveTypingStore','UFILocallyComposedCommentStore','UFIOrderingModeStore','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFISpamStore','UFIPlayLiveVODHighlightsStore'],(function a(b,c,d,e,f,g){'use strict';c('UFIFeedbackStore');c('UFIAcceptedAnswerStore');c('UFICommentEditIDStore');c('UFICommentVisibilityStore');c('UFICommercialBreakStore');c('UFIComposerIsTypingStore');c('UFIFeedbackStore');c('UFIInteractionStore');c('UFILivePinnedCommentStore');c('UFILiveTypingStore');c('UFILocallyComposedCommentStore');c('UFIOrderingModeStore');c('UFIReactionPendingRequestsStore');c('UFIReactionSyncStore');c('UFISpamStore');c('UFIPlayLiveVODHighlightsStore');f.exports=c('UFIDispatcherBase')}),null);
__d('UFICommentAction',['UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function i(j,k,l,m){return {type:c('UFICommentActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m}},changeReactionSuccess:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},changeReactionFailure:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},mounted:function i(j,k){return {type:c('UFICommentActionType').MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},unmounted:function i(j,k){return {type:c('UFICommentActionType').UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},changeVisibility:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l}},edit:function i(j,k){return {type:c('UFICommentActionType').EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},remove:function i(j,k,l,m){return {type:c('UFICommentActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},delete_comment_and_remove_commenter:function i(j,k,l,m){return {type:c('UFICommentActionType').DELETE_COMMENT_AND_REMOVE_COMMENTER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},mute_member:function i(j,k,l,m){return {type:c('UFICommentActionType').MUTE_MEMBER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},toggle_text_delights:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_TEXT_DELIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},removePreview:function i(j,k,l){return {type:c('UFICommentActionType').REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},toggleLike:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l}},translate:function i(j,k,l){return {type:c('UFICommentActionType').TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l}},markAsSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l}},markAsNotSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l}},inlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l}},undoInlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l}},embed:function i(j,k){return {type:c('UFICommentActionType').EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},manageConstituentBadge:function i(j,k){return {type:c('UFICommentActionType').MANAGE_CONSTITUENT_BADGE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},keepSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_KEEP_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},appealSpam:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_APPEAL_SPAM,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}},secureAccount:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_SECURE_ACCOUNT,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}}};f.exports=h}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m){k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){l&&o.unshift(l);q=1}}else if(p>-1){o.splice(p,1);q=-1}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m){s=m(r)}else s=r.toString();var t=j.reactioncountmap||{},u=void 0,v=j.viewerreaction;if(v&&t[v]){t[v]['default']=Math.max((t[v]['default']||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]['default'].toString();}if(n&&t[k]){t[k]['default']=(t[k]['default']||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]['default'].toString();}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(l)if(n){w[l]=k}else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?'alternate':'current'],alternate:j.reactionsentences[y?'current':'alternate']}}return {reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k}},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count}}return k}};f.exports=h}),null);
__d('UFIStoryAction',['UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeAcceptedAnswer:function i(j,k,l){return {type:c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER,instanceID:j.instanceid,ftentidentifier:k.ftentidentifier,comment:k,doAccept:l}},commentsArrived:function i(j,k,l,m){return {type:c('UFIStoryActionType').COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m}},pageInComments:function i(j,k,l,m){return {type:c('UFIStoryActionType').PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m}},showComments:function i(j){return {type:c('UFIStoryActionType').SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},showReplies:function i(j,k,l){return {type:c('UFIStoryActionType').SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l}},spamFetched:function i(j,k,l,m){return {type:c('UFIStoryActionType').SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m}},changeReaction:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];return {type:c('UFIStoryActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l,sphericalYaw:m,sphericalPitch:n}},changeReactionSuccess:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},changeReactionFailure:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},toggleReplies:function i(j,k){return {type:c('UFIStoryActionType').TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k}},friendTyping:function i(j){return {type:c('UFIStoryActionType').FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},someoneTyping:function i(j){return {type:c('UFIStoryActionType').SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},typingStopped:function i(j){return {type:c('UFIStoryActionType').TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return {type:c('UFIStoryActionType').LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l}},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return {type:c('UFIStoryActionType').LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k}}};f.exports=h}),null);
__d('UFIUserActionUtils',['Nectar','collectDataAttributes'],(function a(b,c,d,e,f,g){var h={trackingData:function i(j){if(!j)return {ft:{}};var k={ft:c('collectDataAttributes')(j,['ft']).ft};c('Nectar').addModuleData(k,j);return k}};f.exports=h}),null);
__d('UFIVideoPlayerRegistry',['EventEmitter','Map','Set','VideoPlayerReason','ViewportBounds','destroyOnUnload','getOrCreateDOMID'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('EventEmitter'))(),i=new (c('Map'))(),j=new (c('Map'))(),k=new (c('Map'))(),l=new (c('Map'))(),m=new (c('Set'))();c('destroyOnUnload')(function(){h.removeAllListeners();i.clear();j.clear();k.clear();l.clear();m.clear()});function n(q){var r=q,s=[];while(r){s.unshift(r);r=r.parentElement}return s}function o(q,r){var s=n(q),t=null,u=null;r.forEach(function(v){var w=v[0],x=v[1],y=n(w);for(var z=0;z<s.length;++z)if(s[z]!==y[z]){if(u===null||z>u){u=z;t=x}break}});return t}var p={registerVideoPlayerController:function q(r){var s=r.getVideoID(),t=l.get(s);if(t){t.push(r)}else{t=[r];l.set(s,t);k['delete'](s)}m.forEach(function(v){return v()});var u=i.get(s);if(!u)return;u.forEach(function(v){return this._associateUFIController(v,s)}.bind(this))},addOnRegisterListener:function q(r){m.add(r)},removeOnRegisterListener:function q(r){m['delete'](r)},getAvailableVideoPlayerController:function q(r){return j.get(r)},seekAvailableVideoPlayerController:function q(r,s){var t=p.getAvailableVideoPlayerController(r);if(!t)return;if(['ready','playing','paused','finished'].includes(t.getState())){t.pause(c('VideoPlayerReason').SEEK);t.seek(s);t.play(c('VideoPlayerReason').SEEK)}},scrollToAvailableVideo:function q(r){var s=p.getAvailableVideoPlayerController(r);if(!s)return;var t=c('ViewportBounds').getElementPosition(s.getRootNode());window.scroll(0,t.y)},setAvailableVideoPlayerControllerSphericalViewport:function q(r,s){var t=p.getAvailableVideoPlayerController(r);if(!t)return;t.emit('SphericalVideoViewportTagComment/click',s)},getAvailableVideoPlayerControllerForElement:function q(r,s){if(!r)return null;var t=k.get(s)||new (c('Map'))(),u=c('getOrCreateDOMID')(r),v=t.get(u)||this._findVideoPlayerControllerForElement(r,s);t.set(u,v);k.set(s,t);return v},getAvailableVideoPlayerControllerTimeForElement:function q(r,s){if(!r)return null;var t=p.getAvailableVideoPlayerControllerForElement(r,s);if(!t)return null;var u=t.getCurrentTimePosition();if(u>=0)return Math.floor(u);return null},getAvailableVideoPlayerControllerTime:function q(r){var s=p.getAvailableVideoPlayerController(r);if(!s)return null;var t=s.getCurrentTimePosition();if(t>=0)return Math.floor(t);return null},registerUFIController:function q(r,s,t){var u=r.getInstanceID(),v=r.getFluentContentToken();if(!v)return;var w=i.get(v);if(w){w.push(r)}else{w=[r];i.set(v,w)}h.addListener(u+'/register',s);h.addListener(u+'/unregister',t);this._associateUFIController(r,v)},_findVideoPlayerControllerForElement:function q(r,s){var t=l.get(s);if(!t)return null;if(t.length===1)return t[0];return o(r,t.filter(function(u){return !u.isState('destroyed')}).map(function(u){return [u.getRootNode(),u]}))},_associateUFIController:function q(r,s){var t=r.getInstanceID(),u=this._findVideoPlayerControllerForElement(r.getRootNode(),s);if(!u)return;var v=j.get(t);if(v){if(c('getOrCreateDOMID')(v.getRootNode())===c('getOrCreateDOMID')(u.getRootNode()))return;h.emit(t+'/unregister')}j.set(t,u);h.emit(t+'/register',u)}};f.exports=p}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:false},is_comment:{type:"Bool",defaultValue:false},is_permalink:{type:"Bool",defaultValue:false},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}})}),null);
__d('UFIReactionUserActions',['ActorURI','AsyncResponse','ChannelClientID','ClientIDs','MercuryServerDispatcher','NumberFormat','QE2Logger','UFICentralUpdates','UFICommentAction','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionPendingRequestsStore','UFIReactionsUtils','UFIReactionSyncStore','UFIReactionTypes','UFISharedDispatcher','UFIStoryAction','UFIUserActionUtils','UFIVideoPlayerRegistry','XUFICommentReactionController','XUFIReactionController','emptyFunction','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function z(aa,ba,ca,da){var ea=arguments.length<=4||arguments[4]===undefined?null:arguments[4],fa=arguments.length<=5||arguments[5]===undefined?null:arguments[5];c('UFIFeedbackTargets').getFeedbackTarget(aa,function(ga){var ha,ia=w(ga,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ia});var ja=c('UFIUserActionUtils').trackingData(da),ka={};ka[c('ActorURI').PARAMETER_ACTOR]=ga.actorforpost;var la=babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:aa,reaction_type:ba,root_id:ca.rootid,session_id:c('ChannelClientID').getID(),source:ca.source,feedback_referrer:ca.feedbackReferrer,instance_id:ca.instanceid},ka,ja);if(ca.fluentContentToken)(function(){var ma=ca.fluentContentToken,na=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(da,ma);if(na&&na.isSpherical())la.video_playback_timestamp=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(ca.isLiveVOD){la.on_demand_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma)}else if(ca.islivestreaming)la.live_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(na&&na.isSpherical())c('ifRequired')('SphericalViewportControlStore',function(oa){var pa=oa.getOrientation(na.getVideoPlayerID());if(pa)if(ea!==null&&fa!==null){la.spherical_yaw=ea;la.spherical_pitch=fa}else{la.spherical_pitch=Math.round(pa.pitch);la.spherical_yaw=Math.round(pa.yaw)}},c('emptyFunction')());})();c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),la)})},changeCommentReaction:function z(aa,ba,ca,da){var ea=c('UFIComments').getComment(aa);if(ea&&ea.__typename==='saved'&&ea.viewerreaction!=ba)c('UFIFeedbackTargets').getFeedbackTarget(ea.ftentidentifier,function(fa){var ga=c('UFIUserActionUtils').trackingData(da),ha=v(ea,fa,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ha});var ia={};ia[c('ActorURI').PARAMETER_ACTOR]=fa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:aa,legacy_id:ea.legacyid,reaction_type:ba,ft_ent_identifier:ea.ftentidentifier,source:ca.source,instance_id:ca.instanceid,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ga,ia))});}},i={},j=c('XUFIReactionController').getURIBuilder().getURI();i[j]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r,handler:q};var k=c('XUFICommentReactionController').getURIBuilder().getURI();i[k]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:u,handler:t};c('MercuryServerDispatcher').registerEndpoints(i);function l(z,aa){return z&&z.ft_ent_identifier==aa.ft_ent_identifier&&z.comment_id==aa.comment_id}function m(z,aa){return aa}var n='feedback_reactions_www_rollback_universe';function o(){c('QE2Logger').logExposureForUser(n)}function p(z,aa){var ba=c('UFIReactionPendingRequestsStore').getPendingRequests(z);if(ba>0)return;var ca=c('UFIReactionSyncStore').getLastKnownReaction(z);if(aa===ca)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(da){var ea=w(da,ca);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ea})})}function q(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type;c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},da));c('setImmediate')(function(){return p(ca,da)})}function r(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type;o();var da=c('UFIConfig').reactionsHasReactionsRollback,ea=c('UFIConfig').reactionsHasReactionsRetry;if(ea&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return}c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},ca));if(da)c('setImmediate')(function(){return p(ba,ca)});c('AsyncResponse').defaultErrorHandler(z)}function s(z,aa,ba){var ca=c('UFIReactionPendingRequestsStore').getPendingRequestsForComment(aa.fbid);if(ca>0)return;var da=c('UFIReactionSyncStore').getLastKnownCommentReaction(aa.fbid);if(ba===da)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(ea){var fa=v(aa,ea,da);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:fa})})}function t(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type,ea=c('UFIComments').getComment(ba.comment_id);if(!ea||ea.__typename!=='saved')return;c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},ea,da));c('setImmediate')(function(){return s(ca,ea,da)})}function u(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type,da=c('UFIComments').getComment(aa.comment_id);if(!da)return;o();var ea=c('UFIConfig').reactionsHasCommentReactionsRollback,fa=c('UFIConfig').reactionsHasCommentReactionsRetry;if(fa&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return}if(da&&da.__typename==='saved'){c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},da,ca));if(ea)c('setImmediate')(function(){return s(ba,da,ca)});}c('AsyncResponse').defaultErrorHandler(z)}function v(z,aa,ba){var ca=z.id,da=[y(z,ba,ca,aa.supportedreactions||[],aa.actorforpost)],ea=ba===c('UFIReactionTypes').LIKE;if(aa.hasviewerliked!==ea){var fa=ea?1:-1;da.push({commentid:ca,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ea,likecount:(z.likecount||0)+fa})}return da}function w(z,aa){var ba=[x(z,aa)],ca=aa!==c('UFIReactionTypes').NONE;if(z.hasviewerliked!==ca){var da=ca?1:-1;ba.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:z.actorforpost,hasviewerliked:ca,likecount:(z.likecount||0)+da,entidentifier:z.entidentifier,likesentences:{current:z.likesentences.alternate,alternate:z.likesentences.current}})}return ba}function x(z,aa){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:z.actorforpost,entidentifier:z.entidentifier},c('UFIReactionsUtils').getReactionData(z,aa,z.actorforpost,c('NumberFormat').formatInteger))}function y(z,aa,ba,ca,da){var ea={};for(var fa=0;fa<ca.length;fa++){var ga=ca[fa],ha=z.reactioncountmap?z.reactioncountmap[ga]:null;ea[ga]={'default':ha?ha['default']:0,reduced:ha?ha.reduced:'0'}}var ia=c('UFIReactionsUtils').getReactionData({viewerreaction:z.viewerreaction,reactioncount:z.reactioncount,reactioncountreduced:z.reactioncountreduced,reactioncountmap:ea,reactorids:z.viewerreaction?[da]:[]},aa,da);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:ba,hasviewerliked:!!aa,likecount:ia.reactioncountmap[1]['default'],reactioncount:ia.reactioncount,reactioncountmap:ia.reactioncountmap,reactioncountreduced:ia.reactioncountreduced,viewerreaction:aa}}f.exports=h}),null);
__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"Live",ON_DEMAND:"OnDemand"})}),null);
__d('UFIPagedCommentListImpl',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new (c('KeyedCallbackManager'))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink}.bind(this))}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(i.__typename==='local'){this.$UFIPagedCommentListImpl1(i.id)}else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){var l=j&&c('ClientIDs').isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(j,Date.now());}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i]);};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};h.prototype.getComments=function(i,j,k,l){var m=new Array(j).fill().map(function(s,t){return t+i}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k)}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j))}.bind(this));};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error('Tried to get nonexistent comment');l[o]=p}.bind(this));return this.commentsFromCommentIDs(l,k,j)};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return {}};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};h.prototype.getCommentCount=function(){return this.count};h.prototype.getDeletedCount=function(){return this.deletedCount};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount};h.prototype.getBasePermalink=function(){return this.basePermalink};h.prototype.buildCommentPermalink=function(i,j,k){return null};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i]};f.exports=h}),null);
__d('UFIReplyCommentListImpl',['ActorURI','JSLogger','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIPagedCommentListImpl','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(k,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n}k.prototype.fetchComments=function(l,m,n){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',o)};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c('UFIComments').getComment(l[m+p]);if(q)o[m+p]=q;}return o};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true}c('UFIComments').resetComments(m);return l};k.prototype.getParentCommentID=function(){return this.parentCommentID};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split('_'),p=m;if(o.length===2){p=o[1]}else j.error('Bad reply comment ID: '+this.getParentCommentID());return new (c('URI'))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString()};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=k}),null);
__d('UFIReplyCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentListImpl','getObjectValues'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new (c('UFIReplyCommentListImpl'))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o}return h[m][n]},getReplyListsForParentCommentID:function k(l){return c('getObjectValues')(h[l]||{})},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m)});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count)}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})});});f.exports=i}),22);
__d('UFIToplevelPagedCommentListImpl',['ActorURI','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIOrderingModeStore','UFIPagedCommentListImpl','URI','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c('UFIOrderingModeStore').isInverted(l);this.orderingMode=l;this.clientHasAll=false}j.prototype.fetchComments=function(k,l,m){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+'':null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c('WebCommentViewOption').RECENT_ACTIVITY||this.orderingMode!==c('WebCommentViewOption').RANKED_THREADED||this.orderingMode!==c('WebCommentViewOption').FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',n)};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c('UFIComments').getComment(k[r]);if(s)n[l+q]=s;}return n};j.prototype.getOrderingMode=function(){return this.orderingMode};j.prototype.setClientHasAll=function(k){this.clientHasAll=k};j.prototype.getClientHasAll=function(){return this.clientHasAll};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return new (c('URI'))(this.basePermalink).addQueryData({comment_id:l}).toString()};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=j}),null);
__d("UFIStreamingStateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"live",ON_DEMAND:"on_demand"})}),null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIRange','UFIStreamingStateType'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};i.prototype.getClientHasAll=function(){return false};i.prototype.getActualCommentCount=function(){return this.commentIDs.length};i.prototype.getCommentCount=function(){return this.totalCommentCount};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount()};i.prototype.getDeletedCount=function(){return this.deletedCount};i.prototype.getPermalinkForComment=function(j){return ''};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l))};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.__typename==='local'){if(this.hasComment(j))return;this.commentIDs.push(j.id);if(k!==c('UFIStreamingStateType').ON_DEMAND&&!j.isAnnouncement&&!j.tipOptionIndex)this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};i.prototype.deleteComment=function(j){this.deletedCount+=1;var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m!==j)k.push(m);}this.commentIDs=k};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;this.deletedCount=0};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l)}var m=l.get(k);if(!m){m=new i(j);l.set(k,m)}return m};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k)};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values())};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true});return}var m={};k.forEach(function(n){m[n]=true});i.$UFIToplevelStreamedCommentList2.set(j,m)};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3())};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3())});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l)}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid);if(!m)return;var n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getAllExistingCommentLists(o).forEach(function(q){return q.deleteComment(n)});})});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,k.streamingstate)}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,k.streamingstate)});})});c('UFICentralUpdates').subscribe('update-feedback',function(j,k){var l=k.feedbacktarget?k.feedbacktarget:k.feedbacktargets&&k.feedbacktargets[0];if(!l)return;i.getAllExistingCommentLists(l.entidentifier).forEach(function(m){return m.updateCommentCount(l.commentcount)})});f.exports=i}),22);
__d('UFIToplevelPagedCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentList','UFIToplevelPagedCommentListImpl','UFIToplevelStreamedCommentList','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new (c('UFIToplevelPagedCommentListImpl'))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n}return h[l][m]},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m},getPagedCommentCountForFeedbackTargetID:function k(l){var m=i.getCommentListsForFeedbackTargetID(l);return m.length?m[0].getCommentCount():null},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0)},resetCommentListsForFeedbackTargetID:function k(l){if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true}}c('UFIComments').resetComments(m)},resetCommentListsWithContext:function k(l,m){var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c('UFIReplyCommentList').resetWithContext(l,t,m,p)}}c('UFIComments').resetComments(o)}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m)});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable)}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})});});c('UFICentralUpdates').subscribe('update-feedback',function(k,l){var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c('WebCommentViewOption').LIVE_STREAMING)return;q[s.value]=true});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount);})();});f.exports=i}),22);
__d("XGroupsMuteMembersController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groups\/mutemember\/",{group_id:{type:"FBID"},user_id:{type:"FBID"},mute_duration:{type:"Enum",enumType:1},source:{type:"Enum",enumType:1},should_reload:{type:"Bool",defaultValue:false},mute_reason:{type:"FBID"},custom_expiration:{type:"Int"}})}),null);
__d("XTownHallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/townhall\/",{address:{type:"String"},nux_shown:{type:"Bool",defaultValue:false},ref:{type:"Enum",enumType:1},term:{type:"String"},override_address:{type:"Bool",defaultValue:false},campaign:{type:"String"},setting_nux:{type:"Bool",defaultValue:false}})}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{})}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/add\/comment\/",{})}),null);
__d("XUFICommentAcceptAnswerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/answer\/accept\/",{})}),null);
__d("XUFICommentAppealSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/appeal_spam\/",{})}),null);
__d("XUFICommentKeepSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/keep_spam\/",{})}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/like\/",{})}),null);
__d("XUFICommentSecureAccountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/secure_account\/",{})}),null);
__d("XUFIDeleteCommentAndRemoveCommenterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/deletecommentandremovecommenter\/",{})}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/delete\/comment\/",{})}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/edit\/comment\/",{})}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/hide\/comment\/",{})}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/like\/",{})}),null);
__d("XUFISendMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/message\/send\/",{})}),null);
__d("XUFIToggleTextDelightsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/textdelights\/hide_comment_text_delights\/",{comment_id:{type:"String"},should_hide:{type:"Bool",defaultValue:false}})}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/translate\/comment\/",{})}),null);
__d('UFIUserActions',['errorCode','fbt','invariant','ActorURI','AsyncResponse','Bootloader','ChannelClientID','ClientIDs','CommentPostedLiveState','ImmutableObject','MercuryServerDispatcher','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionUserActions','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIUserActionUtils','UFIVideoPlayerRegistry','UnicodeBidi','XGroupsMuteMembersController','XTownHallController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentAcceptAnswerController','XUFICommentAppealSpamController','XUFICommentKeepSpamController','XUFICommentLikeController','XUFICommentSecureAccountController','XUFIDeleteCommentAndRemoveCommenterController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFISendMessageController','XUFIToggleTextDelightsAsyncController','XUFITranslateCommentController','goURI','ifRequired'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k={BAN:'ban',UNDO_BAN:'undo_ban'},l={changeActor:function qa(ra,sa){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(ta){var ua;c('UFIToplevelPagedCommentList').resetCommentListsWithContext(ra,sa);c('UFIToplevelStreamedCommentList').resetAllCommentLists(ra);c('UFICentralUpdates').inform('actor-changed',{actorID:sa});var va=(ua={from_actor_id:ta.actorforpost,ft_ent_identifier:ra},ua[c('ActorURI').PARAMETER_ACTOR]=sa,ua),wa=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,va)})},changeCommentLike:function qa(ra,sa,ta){var ua,va=c('UFIComments').getComment(ra);if(va&&va.__typename==='saved'&&va.hasviewerliked!=sa)(function(){var wa=ta.target?c('UFIUserActionUtils').trackingData(ta.target):{},xa=sa?1:-1,ya={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:sa,likecount:(va.likecount||0)+xa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ya]});c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(za){var ab={};ab[c('ActorURI').PARAMETER_ACTOR]=za.actorforpost;var bb=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(bb,babelHelpers['extends']({comment_id:ra,legacy_id:va.legacyid,like_action:sa,ft_ent_identifier:va.ftentidentifier,source:ta.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},wa,ab))})})();},_getAttachment:function qa(ra){return ra},_getLocalComment:function qa(ra,sa,ta,ua,va,wa){var xa=c('ClientIDs').getNewClientID(),ya=c('UnicodeBidi').isDirectionLTR(ta)?'ltr':'rtl',za=this._getAttachment(va.attachedsticker);return {__typename:'local',ftentidentifier:sa,body:{text:ta,dir:ya},author:ra.actorforpost,cancomment:false,clientid:null,fbid:null,id:xa,ufiinstanceid:va.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:va.replyid,replycommentparentid:va.replycommentparentid,attachment:za,photo_comment:va.attachedphoto,video_comment:va.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")},photoTextTagID:va.photoTextTagID,isPhotoTag:va.isPhotoTag,photoTagX:va.photoTagX,photoTagY:va.photoTagY,videoTimeOffset:wa,postedLiveState:va.islivestreaming?c('CommentPostedLiveState').LIVE:c('CommentPostedLiveState').ON_DEMAND}},addMessage:function qa(ra,sa,ta,ua,va){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(wa){this.sendMessage(ra,sa,ta,ua,va)}.bind(this))},sendMessage:function qa(ra,sa,ta,ua,va){var wa=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ra);if(!(wa&&wa.actorforpost))return;var xa=this._getLocalComment(wa,ra,sa,ta,ua,null);this._sendMessageToServer(ra,wa.actorforpost,sa,ta,ua,xa.id,va)},addComment:function qa(ra,sa,ta,ua){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(va){var wa=this.createComment(ra,sa,ta,ua);if(!wa)return;var xa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:va.actorforpost,hasviewersubscribed:true,entidentifier:va.entidentifier},ya={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:va.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[wa],actions:[xa,ya]})}.bind(this))},createComment:function qa(ra,sa,ta,ua){var va=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ra);if(!(va&&va.actorforpost))return null;var wa=null;if(ua.isBroadcasterUFI){wa=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(ab){return ab.getCurrentBroadcastTime()})}else if(ua.fluentContentToken&&(ua.isLiveVOD||ua.islivestreaming||ua.enableVODCommentTimestamps)){var xa=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ua.target,ua.fluentContentToken)||0;if(ua.isLiveVOD||ua.islivestreaming){wa=xa}else{var ya=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(ua.target,ua.fluentContentToken);if(ya!=null&&xa>0&&xa<Math.floor(ya.getPlaybackDuration()))wa=xa;}}var za=this._getLocalComment(va,ra,sa,ta,ua,wa);this._sendCommentToServer(ra,va.actorforpost,sa,ta,ua,za.id,wa);return za},_sendMessageToServer:function qa(ra,sa,ta,ua,va,wa,xa){var ya=c('XUFISendMessageController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,{ft_ent_identifier:ra,comment_text:ua,client_id:wa,attached_sticker_fbid:va.attachedsticker?va.attachedsticker.fbid:0,attached_photo_fbid:va.attachedphoto?va.attachedphoto.fbid:0,attached_video_fbid:va.attachedvideo?va.attachedvideo.fbid:0,attached_share_url:va.attachedshareurl,messenger_recipient:xa})},_sendCommentToServer:function qa(ra,sa,ta,ua,va,wa,xa){var ya=null;if(va.reply_fbid){ya=va.reply_fbid}else if(va.replyid){var za=c('UFIComments').getComment(va.replyid);za||j(0);ya=za.fbid}var ab=void 0;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(wa,va.timestamp||0,{has_photo:!!va.attachedphoto,has_video:!!va.attachedvideo,has_sticker:!!va.attachedsticker,is_reply:!!va.replyid});var bb={};bb[c('ActorURI').PARAMETER_ACTOR]=sa;var cb=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(cb,babelHelpers['extends']({ft_ent_identifier:ra,comment_text:ua,source:va.source,client_id:wa,session_id:c('ChannelClientID').getID(),reply_fbid:ya,parent_comment_id:va.parent_comment_id||va.replyid,reply_comment_parent_id:va.replycommentparentid,rootid:va.rootid,clp:ab,attached_sticker_fbid:va.attachedsticker?va.attachedsticker.fbid:0,attached_photo_fbid:va.attachedphoto?va.attachedphoto.fbid:0,attached_video_fbid:va.attachedvideo?va.attachedvideo.fbid:0,attached_share_url:va.attachedshareurl,feedback_referrer:va.feedbackReferrer,feed_context:va.feedcontext,video_time_offset:xa,is_live_streaming:va.islivestreaming,is_markdown:va.isMarkdown},c('UFIUserActionUtils').trackingData(va.target),bb,{photo_text_tag_id:va.photoTextTagID,is_private:va.isPrivate,is_photo_tag:va.isPhotoTag,photo_fbid:va.photoFBID,photo_tag_x:va.photoTagX,photo_tag_y:va.photoTagY}))},_hasCommentTextChanged:function qa(ra,sa){return !!ra.body&&ra.body.text!=sa},_hasCommentPhotoChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&sa&&ra.fbid!=sa.fbid)},_hasCommentVideoChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&sa&&ra.fbid!=sa.fbid)},_hasCommentStickerChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&ra.type=='sticker'&&sa&&ra.fbid!=sa.fbid)},_hasCommentShareURLChanged:function qa(ra,sa){if(sa){return true}else return Boolean(ra&&ra.type=='share');},editComment:function qa(ra,sa,ta,ua){var va=c('UFIUserActionUtils').trackingData(ua.target),wa=c('UFIComments').getComment(ra);if(!wa)return;var xa=this._hasCommentTextChanged(wa,sa)||this._hasCommentPhotoChanged(wa.photo_comment,ua.attachedPhoto)||this._hasCommentStickerChanged(wa.attachment,ua.attachedSticker)||this._hasCommentVideoChanged(wa.video_comment,ua.attachedVideo)||this._hasCommentShareURLChanged(wa.attachment,ua.attachedShareURL);wa=c('ImmutableObject').set(wa,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:sa},editnux:null,attachment:ua.attachedSticker,photo_comment:ua.attachedPhoto,video_comment:ua.attachedVideo});if(xa)wa=c('ImmutableObject').set(wa,{originalTimestamp:wa.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[wa]});c('UFIFeedbackTargets').getFeedbackTarget(wa.ftentidentifier,function(ya){var za={};za[c('ActorURI').PARAMETER_ACTOR]=ya.actorforpost;var ab=c('XUFIEditCommentController').getURIBuilder().getURI();if(wa)c('MercuryServerDispatcher').trySend(ab,babelHelpers['extends']({ft_ent_identifier:wa.ftentidentifier,comment_text:ta,source:ua.source,comment_id:wa.id,parent_comment_id:wa.parentcommentid,attached_sticker_fbid:ua.attachedSticker?ua.attachedSticker.fbid:0,attached_photo_fbid:ua.attachedPhoto?ua.attachedPhoto.fbid:0,attached_video_fbid:ua.attachedVideo?ua.attachedVideo.fbid:0,attached_share_url:ua.attachedShareURL},va,za));})},translateComments:function qa(ra,sa,ta,ua){var va=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,{ft_ent_identifier:ra,comment_ids:sa,source:ua.source,trigger:ta})},setHideAsSpam:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(ta.target),va=c('UFIComments').getComment(ra),wa={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va)c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:ra,spam_action:sa,ft_ent_identifier:va.ftentidentifier,source:ta.source},ua,ya))});},keepSpam:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua=c('UFIComments').getComment(ra),va={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_KEEP_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});if(ua)c('UFIFeedbackTargets').getFeedbackTarget(ua.ftentidentifier,function(wa){var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=wa.actorforpost;var ya=c('XUFICommentKeepSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,babelHelpers['extends']({comment_id:ra,ft_ent_identifier:ua.ftentidentifier,source:sa.source},ta,xa));c('Bootloader').loadModules(["SimpleXUIDialog"],function(za){za.show(i._("This comment is now visible on your post."),i._("Comment Restored"))},'UFIUserActions')});},appealSpam:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(ta.target),va=c('UFIComments').getComment(ra),wa={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_APPEAL_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va)c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFICommentAppealSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:ra,ft_ent_identifier:va.ftentidentifier,source:ta.source},ua,ya));c('Bootloader').loadModules(["SimpleXUIDialog"],function(ab){ab.show(i._("Your feedback helps us do better."),i._("Thanks for Letting Us Know"))},'UFIUserActions')});},secureAccount:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua=c('UFIComments').getComment(ra),va={actiontype:c('UFIConstants').UFIActionType.COMMENT_SECURE_ACCOUNT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});if(ua)c('UFIFeedbackTargets').getFeedbackTarget(ua.ftentidentifier,function(wa){var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=wa.actorforpost;var ya=c('XUFICommentSecureAccountController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,babelHelpers['extends']({comment_id:ua.id,ft_ent_identifier:ua.ftentidentifier,source:sa.source},ta,xa))});},removeComment:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(sa.target),va=c('UFIComments').getComment(ra),wa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va&&va.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:va.id,comment_legacyid:va.legacyid,ft_ent_identifier:va.ftentidentifier,one_click:sa.oneclick,source:sa.source,client_id:c('ClientIDs').getNewClientID()},ua,ya))});},removeCommentWithRule:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(sa.target),va=c('UFIComments').getComment(ra),wa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va&&va.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:va.id,comment_legacyid:va.legacyid,ft_ent_identifier:va.ftentidentifier,one_click:sa.oneclick,source:sa.source,rule_id:ta,client_id:c('ClientIDs').getNewClientID()},ua,ya))});},deleteCommentAndRemoveCommenter:function qa(ra,sa,ta,ua,va,wa){var xa=c('UFIUserActionUtils').trackingData(sa.target),ya=c('UFIComments').getComment(ra),za={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT_REMOVE_COMMENTER,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[za]});if(ya&&ya.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(ya.ftentidentifier,function(ab){var bb={};bb[c('ActorURI').PARAMETER_ACTOR]=ab.actorforpost;var cb=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(cb,babelHelpers['extends']({comment_id:ya.id,comment_legacyid:ya.legacyid,ft_ent_identifier:ya.ftentidentifier,one_click:sa.oneclick,source:sa.source,delete_posts:ta,delete_comments:ua,decline_pending_members:va,block_permanently:wa,client_id:c('ClientIDs').getNewClientID()},xa,bb))});},muteMember:function qa(ra,sa,ta,ua){var va=c('UFIComments').getComment(ra),wa=ta!==null;if(va&&va.__typename==='saved'){var xa={authorid:va.author,actiontype:c('UFIConstants').UFIActionType.MUTE_MEMBER,shouldmute:wa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[xa]});var ya;c('Bootloader').loadModules(["GroupMemberActionSource"],function(ab){ya=ab.GROUP_COMMENT},'UFIUserActions');var za=c('XGroupsMuteMembersController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,{group_id:va.group_id,user_id:va.author,mute_duration:ta,custom_expiration:ua,should_reload:false,source:ya})}},toggleTextDelights:function qa(ra,sa,ta){var ua=c('XUFIToggleTextDelightsAsyncController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ua,{comment_id:ra.id,ft_ent_identifier:ra.ftentidentifier,should_hide:ta,parent_comment_id:ra.parentcommentid,source:sa.source})},changeAcceptedAnswer:function qa(ra,sa){c('MercuryServerDispatcher').trySend(aa,{ft_ent_identifier:ra.id,do_accept:sa})},banUser:function qa(ra,sa,ta,ua){var va=ta?k.BAN:k.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:sa,commenter_id:ra.author,action:va,comment_id:ra.id,client_side:true})},changeSubscribe:function qa(ra,sa,ta){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(ua){var va=c('UFIUserActionUtils').trackingData(ta.target);if(ua.hasviewersubscribed!==sa){var wa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ua.actorforpost,hasviewersubscribed:sa,entidentifier:ra};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:sa,ft_ent_identifier:ra,source:ta.source,client_id:c('ClientIDs').getNewClientID(),rootid:ta.rootid,comment_expand_mode:ta.commentexpandmode},va,xa))}})},fetchSpamComments:function qa(ra,sa,ta,ua){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ra,viewas:ua,comment_ids:sa,parent_comment_id:ta,source:null})},manageConstituentBadge:function qa(ra){c('goURI')(c('XTownHallController').getURIBuilder().setBool('setting_nux',true).getURI())},removePreview:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua={commentid:ra.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:ra.id,ft_ent_identifier:ra.ftentidentifier,source:sa.source},ta))}};function m(qa){c('AsyncResponse').defaultErrorHandler(qa)}function n(qa){var ra=qa.request.data;c('AsyncResponse').defaultErrorHandler(qa);var sa=ra.client_id||ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;var ua=ta.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;ta=c('ImmutableObject').setDeep(ta,{status:ua,allowRetry:o(qa),body:{mentionstext:ra.comment_text,mentionsphoto:ta.photo_comment,mentionsvideo:ta.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function o(qa){var ra=qa.getError();if(qa.isBlockedAction())return false;if(qa.silentError)return true;if(ra===1357012||ra===1357006)return false;return true}function p(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;ta=c('ImmutableObject').set(ta,{status:ta.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function q(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;ta=c('ImmutableObject').set(ta,{commentid:sa,needsApproval:!ta.needsApproval,isApproved:!ta.isApproved});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function r(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(ta){ta=c('ImmutableObject').set(ta,{commentid:sa,appealStatus:null,canAppeal:!ta.canAppeal,canSecure:!ta.canSecure});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}}function s(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(ta&&ra.like_action===ta.hasviewerliked){var ua=ta.hasviewerliked?-1:1,va={commentid:sa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!ta.hasviewerliked,likecount:(ta.likecount||0)+ua};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]})}c('AsyncResponse').defaultErrorHandler(qa)}function t(qa){var ra=qa.request.data,sa=ra.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(sa,function(ta){if(ta.hasviewerliked===ra.like_action){var ua=ta.hasviewerliked?-1:1,va={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ta.actorforpost,hasviewerliked:!ta.hasviewerliked,likecount:(ta.likecount||0)+ua,entidentifier:sa,likesentences:{current:ta.likesentences.alternate,alternate:ta.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]})}});c('AsyncResponse').defaultErrorHandler(qa)}function u(qa){var ra=qa.request.data,sa=ra.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(sa,function(ta){if(ta.hasviewersubscribed===ra.subscribe_action){var ua={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ta.actorforpost,hasviewersubscribed:!ta.hasviewersubscribed,entidentifier:sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]})}});c('AsyncResponse').defaultErrorHandler(qa)}var v={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:oa,batch_function:pa},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},w=c('XUFIAddCommentController').getURIBuilder().getURI();v[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var x=c('XUFIDeleteCommentController').getURIBuilder().getURI();v[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var y=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();v[y]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var z=c('XUFICommentLikeController').getURIBuilder().getURI();v[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ma,batch_function:pa};var aa=c('XUFICommentAcceptAnswerController').getURIBuilder().getURI();v[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ba=c('XGroupsMuteMembersController').getURIBuilder().getURI();v[ba]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ca=c('XUFIToggleTextDelightsAsyncController').getURIBuilder().getURI();v[ca]={mode:c('MercuryServerDispatcher').IMMEDIATE};var da=c('XUFIHideCommentController').getURIBuilder().getURI();v[da]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var ea=c('XUFICommentKeepSpamController').getURIBuilder().getURI();v[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var fa=c('XUFICommentAppealSpamController').getURIBuilder().getURI();v[fa]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ga=c('XUFICommentSecureAccountController').getURIBuilder().getURI();v[ga]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ha=c('XUFILikeController').getURIBuilder().getURI();v[ha]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:na,batch_function:pa};var ia=c('XUFIEditCommentController').getURIBuilder().getURI();v[ia]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var ja=c('XUFITranslateCommentController').getURIBuilder().getURI();v[ja]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ka=c('XUFIActorChangeController').getURIBuilder().getURI();v[ka]={mode:c('MercuryServerDispatcher').IMMEDIATE};var la=c('XUFISendMessageController').getURIBuilder().getURI();v[la]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(v);function ma(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier&&qa.comment_id==ra.comment_id}function na(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier}function oa(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier}function pa(qa,ra){return ra}f.exports=babelHelpers['extends']({},l,c('UFIReactionUserActions'))}),null);
__d('UFISpamStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIStoryActionType').SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return k[m]=true});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIDispatcher',['ReactDispatcher_DEPRECATED','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ReactDispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.dispatch=function(k){i.dispatch.call(this,k);c('UFISharedDispatcher').dispatch(k)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('UFIInstanceAction',['UFIInstanceActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeOrderingMode:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_ORDER_MODE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,mode:k}},toggleComments:function i(j){return {type:c('UFIInstanceActionType').TOGGLE_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},changeCommentListVisibility:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,visibility:k}},init:function i(j,k){return {type:c('UFIInstanceActionType').INIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,payload:k}},didRequestVODComments:function i(j){return {type:c('UFIInstanceActionType').REQUESTED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},didReceiveVODComments:function i(j){return {type:c('UFIInstanceActionType').RECEIVED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},remove:function i(j){return {type:c('UFIInstanceActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},toggleCommercialBreak:function i(j,k){return {type:c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,inCommercial:k}},translateAll:function i(j){return {type:c('UFIInstanceActionType').TRANSLATE_ALL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},playLiveVODHighlights:function i(j,k){return {type:c('UFIInstanceActionType').PLAY_LIVE_VOD_HIGHLIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,playingLiveVODHighlights:k}}};f.exports=h}),null);
__d('UFIReactionStore',['Arbiter','FluxStore','UFIReactionTypes','UFIStoryActionType','UFIUIEvents','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c('UFIStoryActionType').CHANGE_REACTION:c('UFIUserActions').changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,feedbackReferrer:k.contextArgs.feedbackReferrer,fluentContentToken:k.contextArgs.fluentContentToken,isLiveVOD:k.contextArgs.isLiveVOD,islivestreaming:k.contextArgs.islivestreaming,instanceid:k.contextArgs.instanceid},k.target,k.sphericalYaw,k.sphericalPitch);c('Arbiter').inform(c('UFIUIEvents').ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c('UFIReactionTypes').LIKE,reaction_type:k.reactionType,target:k.target});break;}};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('FocusRelocator.react',['csx','CSS','Focus','React','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.componentWillReceiveProps=function(l){var m=this.props,n=m.from,o=m.to,p=l.from,q=l.to;if(p&&q&&(n!==p||o!==q)){this.$FocusRelocator1&&this.$FocusRelocator1.remove();this.$FocusRelocator1=c('Focus').relocate(p,q)}};k.prototype.componentDidUpdate=function(){this.$FocusRelocator2()};k.prototype.componentWillUnmount=function(){this.$FocusRelocator1&&this.$FocusRelocator1.remove();this.$FocusRelocator1=null};k.prototype.render=function(){return this.props.children};k.prototype.$FocusRelocator3=function(){var l=this.props,m=l.from,n=l.to;if(m&&n){c('Focus').performRelocation(m,n,c('getActiveElement')()===this.props.from);this.$FocusRelocator2()}};k.prototype.$FocusRelocator2=function(){setTimeout(function(){if(this.props.to&&c('getActiveElement')()===this.props.from&&!c('CSS').matchesSelector(this.props.to,"._16jm"))this.$FocusRelocator3();}.bind(this),0)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('ProfileBrowserLink',['URI'],(function a(b,c,d,e,f,g){var h='/ajax/browser/dialog/',i='/browse/',j=function l(m,n,o){return new (c('URI'))(m+n).setQueryData(o)},k={constructPageURI:function l(m,n){return j(i,m,n)},constructDialogURI:function l(m,n){return j(h,m,n)}};f.exports=k}),null);
__d('ProfileBrowserTypes',[],(function a(b,c,d,e,f,g){var h={LIKES:'likes',FRIEND_CHECKINS:'friendcheckins',FRIENDED_FANS_OF:'friended_fans_of',GROUP_ADMINS:'group_admins',GROUP_MEMBERS:'group_members',GROUP_FRIEND_MEMBERS:'group_friend_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',LIVE_VIDEO_VIEWERS:'live_video_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',GROUP_JOIN_REQUESTERS_FRIENDS_IN_GROUP:'group_join_requesters_friends_in_group'};f.exports=h}),null);
__d('SeeMore.react',['cx','fbt','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={isCollapsed:true},this.handleClick=function(r){if(this.props.clickCallback!==null)this.props.clickCallback(r);this.setState({isCollapsed:false})}.bind(this),n}l.prototype.render=function(){'use strict';var m=this.state.isCollapsed,n=this.props.exposeTextInHtml,o=null;if(m){var p=null;if(this.props.allowSeeMoreLinebreak)p=c('React').createElement('span',{className:"_1ipe",role:'hidden'},' ');o=c('React').createElement('span',{className:"_5uzb"},i._("..."),p)}var q=this.props.children[0],r=null;if(m){if(n)r=c('React').createElement('span',{className:"_1x3s"},this.props.children[1]);}else r=c('React').createElement('span',null,this.props.children[1]);var s=m?c('React').createElement('a',{className:"_5v47 fss",onClick:this.handleClick,href:'#',role:'button'},i._("See More")):null;return c('React').createElement('span',{className:c('joinClasses')(this.props.className,"_1n4g")},q,o,s,r)};l.defaultProps={clickCallback:null,exposeTextInHtml:false,allowSeeMoreLinebreak:false};f.exports=l}),null);
__d('findSplitPointForText',[],(function a(b,c,d,e,f,g){function h(i,j,k){var l=null,m=i.split('\n');if(j&&i.length>j)l=j;if(k&&m.length>k){var n=m.slice(0,k).join('\n').length;if(l!==null){l=Math.min(n,l)}else l=n;}return l}f.exports=h}),null);
__d('partitionTextAndRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){function h(k,l){var m=k.offset+k.length;return l>k.offset&&l<m}function i(k,l){for(var m=0;m<k.length;m++){var n=k[m];if(h(n,l))return n.offset;}return l}var j=function k(l,m,n){var o=[],p=[],q=i(m,n);for(var r=0;r<m.length;r++){var s=m[r];if(s.offset<q){o.push(s)}else p.push(babelHelpers['extends']({},s,{offset:s.offset-q}));}return {before:{ranges:o,text:c('UnicodeUtils').substr(l,0,q)},after:{ranges:p,text:c('UnicodeUtils').substr(l,q)}}};f.exports=j}),null);
__d('TruncatedTextWithEntities.react',['fbt','React','SeeMore.react','TextWithEntities.react','findSplitPointForText','partitionTextAndRanges'],(function a(b,c,d,e,f,g,h){var i,j,k=30;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$TruncatedTextWithEntities1=function(r){if(!this.props.allowSeeMoreLinebreakOnLongWords||!r)return false;if(r.length<=k)return false;var s=/(^|\s)(\S+)$/,t=s.exec(r),u=t?t[2]:null;return !!(u&&u.length>k)}.bind(this),n}l.prototype.render=function(){'use strict';var m=this.props.text||'',n=this.props.ranges||[];m=m.replace(/\s*$/,'');var o=this.props.maxLines,p=this.props.maxLength;if(p&&m.length>p){var q=this.props.truncationPercent||.6;p=Math.floor(q*p)}var r=null;if(!this.props.shouldExpand)r=c('findSplitPointForText')(m,p,o);if(r!==null){while(m[r-1]==='\n')r--;var s=c('partitionTextAndRanges')(m,n,r),t=c('React').createElement(c('TextWithEntities.react'),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:s.before.ranges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:s.before.text});if(!this.props.showSeeMore)return c('React').createElement('span',{className:this.props.className,'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},t,c('React').createElement('span',null,h._("...")));var u=this.$TruncatedTextWithEntities1(s.before.text);return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('SeeMore.react'),{allowSeeMoreLinebreak:u,className:this.props.className,clickCallback:this.props.markViewerHasInteracted},t,c('React').createElement(c('TextWithEntities.react'),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:s.after.ranges,textDelightRanges:this.props.textDelightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:s.after.text})))}else return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('TextWithEntities.react'),{aggregatedRanges:this.props.aggregatedRanges,className:this.props.className,imageRanges:this.props.imageRanges,interpolator:this.props.interpolator,ranges:n,textDelightRanges:this.props.textDelightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:m}));};l.defaultProps={showSeeMore:true};f.exports=l}),null);
__d('UFIBusinessActorIcon.react',['cx','AppUserRoleConstants.brands','BusinessActorUtils.brands','React','getObjectValues','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=c('BusinessActorUtils.brands').getInitials(this.props.firstName,this.props.lastName),n=this.props.businessRole===c('AppUserRoleConstants.brands').ADMIN;return c('React').createElement('div',{className:c('joinClasses')(this.props.classNames,"_1rpl")},c('React').createElement('div',{className:c('joinClasses')(this.props.textClassNames,n?"_1rpm":null)},m))};function l(){i.apply(this,arguments)}l.propTypes={firstName:k.string.isRequired,lastName:k.string.isRequired,classNames:k.string,textClassNames:k.string,businessRole:k.oneOf(c('getObjectValues')(c('AppUserRoleConstants.brands')))};f.exports=l}),null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.getChildContext=function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores}};k.prototype.render=function(){return this.props.children};function k(){h.apply(this,arguments)}k.childContextTypes={dispatch:j.func,stores:j.object};f.exports=k}),null);
__d("UFILikeWebDriverIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE_LINK:"fb-ufi-likelink",UNLIKE_LINK:"fb-ufi-unlikelink",LIKE_LINK_COMMENT:"ufi_comment_like_link",LIKE_LINK_REPLY:"ufi_reply_like_link"})}),null);
__d('UFILikeLink.react',['cx','fbt','Bootloader','React','ReactDOM','SutroStoryHeaderUFIGatingConfig','TrackingNodes','UFILikeWebDriverIDs'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=null;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$UFILikeLink1=null,this.state={nuxShown:false},this.onClick=function(t){if(this.props.href)return;t.preventDefault();this.props.onClick&&this.props.onClick(t);if(this.props.showLikeNuxForGroupMallAds){var u=!this.props.likeAction;if(!u){c('ReactDOM').findDOMNode(this.$UFILikeLink1).focus();this.setState({nuxShown:true});c('Bootloader').loadModules(["UFIGroupMallAdsLikeNux.react"],function(v){m=v},'UFILikeLink.react')}else this.setState({nuxShown:false});}}.bind(this),p}n.prototype.renderLayers=function(){if(!this.state.nuxShown||!m)return null;return c('React').createElement(m,{nuxShown:this.state.nuxShown,nuxContent:this.props.likeNuxContent,contextRef:this.$UFILikeLink1})};n.prototype.render=function(){var o=!this.props.likeAction,p=o?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,q='';if(c('SutroStoryHeaderUFIGatingConfig').is_uppercased){q=!o||!this.props.forcelegacyrendering?i._("LIKE"):i._("UNLIKE")}else q=!o||!this.props.forcelegacyrendering?i._("Like"):i._("Unlike");var r=c('TrackingNodes').getTrackingInfo(o?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),s=o?i._("Unlike this"):i._("Like this"),t=c('SutroStoryHeaderUFIGatingConfig').is_center_aligned;return c('React').createElement('span',{className:t?"_3wv2":''},c('React').createElement('a',{className:"_48-k"+(' '+"UFILikeLink")+(o?' '+"UFILinkBright":''),ref:function(u){return this.$UFILikeLink1=u}.bind(this),'data-testid':p,href:this.props.href||'#',role:'button','aria-label':s,'aria-live':'polite','aria-pressed':o,rel:this.props.rel,ajaxify:this.props.ajaxify,onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:function(u,v){this.props.onKeyDown&&this.props.onKeyDown(u,v)}.bind(this),'data-ft':r},q),this.renderLayers())};n.propTypes={ajaxify:l.string,forcelegacyrendering:l.bool,href:l.string,likeAction:l.bool,likeNuxContent:l.string,rel:l.string,showLikeNuxForGroupMallAds:l.bool};n.defaultProps={forcelegacyrendering:false,showLikeNuxForGroupMallAds:false};f.exports=n}),null);
__d('UFIStickerButton.react',['cx','fbt','Arbiter','Bootloader','FocusRelocator.react','Link.react','React','StickerInterfaces','getObjectValues'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIStickerButton',_clickGuard:false,_updateListener:null,_linkRef:null,propTypes:{onStickerFlyoutShow:j.func,onStickerSelected:j.func.isRequired,onEmoticonSelected:j.func,showTooltip:j.bool,stickerInterface:j.oneOf(c('getObjectValues')(c('StickerInterfaces'))),tabIndex:j.number},getDefaultProps:function l(){return {showTooltip:true,stickerInterface:c('StickerInterfaces').COMMENTS}},getInitialState:function l(){return {renderFlyout:null,flyoutShown:false}},componentDidMount:function l(){this._updateListener=c('Arbiter').subscribe('page_transition',function(){return this._hideFlyout()}.bind(this))},componentWillUnmount:function l(){this._updateListener&&this._updateListener.unsubscribe()},render:function l(){var m=i._("Post a sticker");return c('React').createElement(c('FocusRelocator.react'),{from:this._linkRef,to:this.refs.icon},c('React').createElement(c('Link.react'),{'aria-label':m,className:"_r1a UFICommentStickerButton",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':this.props.showTooltip?m:null,linkRef:this._setRef,onClick:this._onLinkClicked,onMouseDown:this._prepareForClick,role:'button',tabIndex:this.props.tabIndex},c('React').createElement('div',{ref:'icon',className:"UFICommentStickerIcon"+(this.state.flyoutShown?' '+"UFICommentStickerIconActive":'')}),this.props.children,this.state.renderFlyout?this.state.renderFlyout():null))},_hideFlyout:function l(){this.setState({flyoutShown:false})},_prepareForClick:function l(){this._clickGuard=this.state.flyoutShown},_onLinkClicked:function l(m){m.preventDefault();if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true})}return}c('Bootloader').loadModules(["ContextualLayerAutoFlip","LayerTabIsolation","StickersFlyout.react","XUIContextualDialog.react"],function(n,o,p,q){this.setState({flyoutShown:true,renderFlyout:function(){return c('React').createElement(q,{alignment:'right',behaviors:{ContextualLayerAutoFlip:n,LayerTabIsolation:o},className:"_5e-r",contextRef:function(){return this._linkRef}.bind(this),onBlur:this._hideFlyout,onToggle:function(r){if(!r&&this.state.flyoutShown)this._hideFlyout();}.bind(this),position:'above',shown:this.state.flyoutShown,hasActionableContext:true,width:278},c('React').createElement('div',null,c('React').createElement(p,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))}.bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow()}.bind(this),'UFIStickerButton.react')},_onStickerSelected:function l(m,event){this.props.onStickerSelected(m,event);this._hideFlyout()},_onEmoticonSelected:function l(m){this.props.onEmoticonSelected&&this.props.onEmoticonSelected(m);this._hideFlyout()},_setRef:function l(m){this._linkRef=m}});f.exports=k}),null);
__d('FBCollapsibleList.react',['Link.react','React','getObjectValues'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k={COMMA:'comma',NEWLINE:'newline'};h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={numShown:this.props.numVisible},this.$FBCollapsibleList1=function(){return this.state.numShown<this.$FBCollapsibleList6()}.bind(this),this.$FBCollapsibleList2=function(){var r=this.$FBCollapsibleList6();return this.props.showLessLink&&this.props.numVisible<r&&this.state.numShown>=r}.bind(this),this.$FBCollapsibleList4=function(){var r=this.$FBCollapsibleList6()-this.props.numVisible;return c('React').createElement(c('Link.react'),{onClick:this.$FBCollapsibleList7,key:'seeMore'},c('React').createElement('b',null,'Show more ','(',r,')'))}.bind(this),this.$FBCollapsibleList5=function(){return c('React').createElement(c('Link.react'),{onClick:this.$FBCollapsibleList8,key:'seeLess'},c('React').createElement('b',null,'Show less'))}.bind(this),this.$FBCollapsibleList3=function(r,s){switch(this.props.delimiter){case k.NEWLINE:return [c('React').createElement('div',{key:r.key},r)];case k.COMMA:return s?[r]:[r,', '];default:throw new Error('Invalid delimiter: '+this.props.delimiter);}}.bind(this),this.$FBCollapsibleList8=function(){this.setState({numShown:this.props.numVisible})}.bind(this),this.$FBCollapsibleList6=function(){if(!!this.props.maxShowMore&&this.props.maxShowMore<this.props.children.length)return this.props.maxShowMore;return this.props.children.length}.bind(this),this.$FBCollapsibleList7=function(){this.setState({numShown:this.$FBCollapsibleList6()})}.bind(this),n}l.prototype.render=function(){'use strict';var m=this.$FBCollapsibleList1(),n=this.$FBCollapsibleList2(),o=Math.min(this.state.numShown,this.props.children.length),p=m||n,q=[];for(var r=0;r<o;r++){var s=!p&&r===o-1;q.push(this.$FBCollapsibleList3(this.props.children[r],s))}if(m){q.push(this.$FBCollapsibleList4())}else if(n)q.push(this.$FBCollapsibleList5());return this.props.display=='block'?c('React').createElement('div',this.props,q):c('React').createElement('span',this.props,q)};l.propTypes={delimiter:j.oneOf(c('getObjectValues')(k)),display:j.oneOf(['inline','block']),numVisible:j.number.isRequired,maxShowMore:j.number,showLessLink:j.bool};l.Delimiters=k;l.defaultProps={children:[],delimiter:k.NEWLINE,display:'block',showLessLink:false};f.exports=l}),null);
__d('EmojiInputButton.react',['fbt','Bootloader','FocusRelocator.react','Link.react','React','createCancelableFunction','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=null;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$EmojiInputButton4=function(event){event.preventDefault();event.stopPropagation();this.props.onClick&&this.props.onClick();this.setState({locked:false,visible:!this.state.locked?!this.state.visible:false})}.bind(this);this.$EmojiInputButton5=function(event){this.setState({locked:this.state.visible})}.bind(this);this.$EmojiInputButton7=function(n){if(!n)this.setState({visible:false});}.bind(this);this.state={locked:false,visible:false}}l.prototype.componentWillUnmount=function(){this.$EmojiInputButton1&&this.$EmojiInputButton1.cancel();this.$EmojiInputButton1=null};l.prototype.render=function(){var m=h._("Insert an emoji"),n=this.state.visible?c('joinClasses')(this.props.iconActiveClassName,this.props.iconClassName):this.props.iconClassName;return c('React').createElement(c('FocusRelocator.react'),{from:this.$EmojiInputButton3,to:this.$EmojiInputButton2},c('React').createElement(c('Link.react'),{'aria-label':m,className:this.props.buttonClassName,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':!this.state.visible?m:null,onClick:this.$EmojiInputButton4,onDragStart:function o(p){return p.preventDefault()},onMouseDown:this.$EmojiInputButton5,linkRef:function(o){return this.$EmojiInputButton3=o}.bind(this),role:'button'},c('React').createElement('div',{className:n,ref:function(o){return this.$EmojiInputButton2=o}.bind(this)}),this.$EmojiInputButton6()))};l.prototype.$EmojiInputButton6=function(){if(!k){if(this.state.visible){this.$EmojiInputButton1=c('createCancelableFunction')(function(){this.forceUpdate()}.bind(this));c('Bootloader').loadModules(["EmojiPicker.react"],function(m){k=m;if(this.$EmojiInputButton1){this.$EmojiInputButton1();this.$EmojiInputButton1=null}}.bind(this),'EmojiInputButton.react')}return null}return c('React').createElement(k,{context:this.$EmojiInputButton3,onToggle:this.$EmojiInputButton7,onSelect:this.props.onSelect,shown:this.state.visible})};f.exports=l}),null);
__d('TextDelightEvents',['Bootloader','EventEmitter','EventEmitterWithHolding','EventHolder'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('EventEmitter'))(),i=new (c('EventEmitterWithHolding'))(h,new (c('EventHolder'))());function j(){c('Bootloader').loadModules(["TextDelightController"],function(l){return l.init()},'TextDelightEvents')}var k={emitScrapablePost:function l(m){j();i.emit('potential_delight_in_post',{text:m})},emitScrapableComment:function l(m){j();i.emit('potential_delight_in_comment',{text:m})},addListener:function l(event,m){i.once(event,m)}};f.exports=k}),null);
__d('addFocusEvents',['Deferred','Event','React','SubscriptionList'],(function a(b,c,d,e,f,g){var h=c('React').Component,i=void 0,j=function(k){return function(){var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){'use strict';if(!i){var o,p;i=new (c('SubscriptionList'))(function(){o=c('Event').listen(window,'blur',function(){i&&i.fireCallbacks(true);p&&p.remove();p=c('Event').listen(document.documentElement,'focusin',function(){i&&i.fireCallbacks(false);p&&p.remove();p=null})})},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null})}this.subscription=i.add(function(q){this.locked=q}.bind(this))};n.prototype.componentWillUnmount=function(){'use strict';this.subscription&&this.subscription.remove()};n.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};n.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new (c('Deferred'))();this.deferred.done(function(o){o&&o(event);this.deferred=null}.bind(this),function(){this.deferred=null}.bind(this))};n.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};n.prototype.render=function(){'use strict';var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,['onKeyboardFocus','onMouseFocus']);return c('React').createElement(k,babelHelpers['extends']({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)}))};function n(){'use strict';l.apply(this,arguments)}return n}()}.bind(this);f.exports=j}),null);
__d('linkifyEntityRange',['Link.react','React'],(function a(b,c,d,e,f,g){function h(i,j){var k=(j.entity||{}).url;if(!k)return c('React').createElement('span',null,i);return c('React').createElement(c('Link.react'),{href:k,target:'_blank'},i)}f.exports=h}),null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.uploadURIString=k;this.data=l}j.prototype.handlePaste=function(event){'use strict';var k=j.getImages(event);for(var l=0;l<k.length;++l){var m=new FormData();m.append('pasted_file',k[l]);var n=new (c('AsyncRequest'))();n.setURI(this.uploadURIString).setData(this.data).setRawData(m).setHandler(function(o){this.inform('upload_success',o)}.bind(this)).setErrorHandler(function(o){this.inform('upload_error',o)}.bind(this)).setAbortHandler(function(o){this.inform('upload_error',o)}.bind(this));this.inform('upload_start');n.send();break}};j.getImages=function(event){'use strict';if(!event.clipboardData)return [];var k=event.clipboardData.items;if(!k)return [];var l,m=[];for(var n=0;n<k.length;++n){l=k[n];if(l.kind==='string')return [];if(l.kind==='file'&&l.type.indexOf('image/')!==-1)m.push(l.getAsFile());if(l.kind==='blob')m.push(l.blob);}return m};f.exports=j}),null);
__d('UFIReactionIconImpl.react',['cx','Image.react','React','SutroStoryHeaderUFIGatingConfig','UFIConfig','UFIReactionTypes','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m,n){'use strict';return m.className!==this.props.className||m.reaction!==this.props.reaction||m.size!==this.props.size||m.grayscale!==this.props.grayscale};l.prototype.renderImage=function(){'use strict';var m=c('UFIReactionTypes').reactions[this.props.reaction].name,n='/images/ufi/reactions/v6/svg/'+m+'.svg',o=c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi;if(this.props.hasStaticSVGDock){return c('React').createElement(c('Image.react'),{style:{position:'absolute'},src:n})}else return c('React').createElement('i',{className:c('joinClasses')(c('UFIReactionTypes').reactions[this.props.reaction].class_name,"_2p78"+(this.props.size==='13'?' '+"_9-y":'')+(this.props.size==='16'?' '+"_9--":'')+(this.props.size==='18'?' '+"_19kl":'')+(this.props.size==='48'?' '+"_9-_":'')+(this.props.size==='96'?' '+"_9_0":'')+(this.props.grayscale?' '+"_pxi":'')+(o?' '+"_hly":''))});};l.prototype.render=function(){'use strict';return c('React').createElement('span',{className:c('joinClasses')("_9zc"+(this.props.size==='13'?' '+"_2p79":'')+(this.props.size==='16'?' '+"_2p7a":'')+(this.props.size==='18'?' '+"_19km":'')+(this.props.size==='48'?' '+"_2p7b":'')+(this.props.size==='96'?' '+"_9-w":''),this.props.className,"_3uet"+(' '+"_4e-m"))},this.renderImage())};function l(){'use strict';i.apply(this,arguments)}l.propTypes={className:k.string,grayscale:k.bool,isSVGDock:k.bool,reaction:k.number.isRequired,size:k.oneOf(['13','16','18','48','96'])};l.defaultProps={className:null,grayscale:false,isSVGDock:false,size:'16'};f.exports=l}),null);
__d("ReactionNuxTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux",SPATIAL_REACTIONS_NUX:"spatial_reactions_nux"})}),null);
__d('UFIReactionsLinkImpl.react',['csx','cx','fbt','BanzaiLogger','BootloadedComponent.react','Bootloader','Event','JSResource','React','ReactDOM','ReactionNuxTypeEnum','ShimButton.react','SubscriptionsHandler','SutroStoryHeaderUFIGatingConfig','UFICommentAction','UFIConfig','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionTypes','UFIStoryAction','addFocusEvents','shallowCompare','curry'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').Component,n=c('React').PropTypes,o=c('UFIConfig').reactionsFunnelLogger,p=c('UFIConfig').reactionsHasCommentFunnelLogger,q=c('UFIConfig').reactionsHasFunnelLogger,r=false,s=false,t=null,u=null,v=null,w=void 0,x=c('React').createElement('div',null),y=150,z=c('UFIReactionTypes').reactions,aa=Object.keys(z),ba=20,ca=525,da=750,ea=700,fa=850,ga=500,ha='ontouchstart' in window,ia=j._("Show more reactions"),ja=j._("New! React to what's happening in different parts of the video"),ka=[],la=function pa(){if(!t){var qa=function ra(sa){t=sa;if(ka){ka.forEach(function(ta){return ta()});ka=null}};if(c('UFIConfig').reactionsHasAnimatedIcons){c('Bootloader').loadModules(["UFIReactionsMenuWithAnimatedIcons.react"],qa,'UFIReactionsLinkImpl.react')}else c('Bootloader').loadModules(["UFIReactionsMenuImpl.react"],qa,'UFIReactionsLinkImpl.react');}},ma=function pa(qa){if(!u||!v||!w){var ra=function sa(ta,ua,va){u=ta;v=ua;w=va;qa()};c('Bootloader').loadModules(["SpatialReactionsProductionStore","SphericalVideoComponentActions","SpatialReactionClickAnimation","SpatialReactionFunnelLoggingStore"],ra,'UFIReactionsLinkImpl.react')}else qa();},na=c('addFocusEvents')('a');k=babelHelpers.inherits(oa,m);l=k&&k.prototype;function oa(pa,qa){'use strict';l.constructor.call(this,pa,qa);this.$UFIReactionsLink2=function(){if(this.state.dialogShown)this.forceUpdate();}.bind(this);this.hideDialog=function(){this.setState({dialogShown:false,isScrubbing:false})}.bind(this);this.showDialog=function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown)this.state.logToFunnel&&o.menuShow(this.state.logAsComment);r=true;this.setState({dialogShown:true,NUXShown:false})}.bind(this);this.onClick=function(event){var sa,ta=this;event.preventDefault();var ua=this.props,va=ua.reaction,wa=ua.suggestedReaction;if(!va||va===c('UFIReactionTypes').LIKE||!z[va]){(function(){if(!va&&ta.props.nuxConfig){var xa=ta.props.nuxConfig.nuxType;if(xa===c('ReactionNuxTypeEnum').LIKE_CLICK||xa===c('ReactionNuxTypeEnum').LIKE_CLICK_RENUX)ta.maybeShowNUX();}var ya=wa&&ta.hasSuggestedReaction?wa:c('UFIReactionTypes').LIKE;va=va?c('UFIReactionTypes').NONE:ya;var za=c('curry')(ta.onReactionChange,va);ta.$UFIReactionsLink3(va,true);if(ta.$UFIReactionsLink5()){ma(function(){if(u&&v){var ab=u.getVideoPlayerController(this.props.contextArgs.instanceid);if(ab&&va===c('UFIReactionTypes').LIKE){v.clickLikeButton(ab.getVideoPlayerID());event.persist();if(!this.$UFIReactionsLink1)this.$UFIReactionsLink1=new w(ab,c('UFIReactionTypes').LIKE,za);this.$UFIReactionsLink1.click(event)}else za(event);}}.bind(ta))}else za(event);})()}else this.onReactionChange(0,event);this.setState({dialogShown:false,isScrubbing:false})}.bind(this);this.onClickCapture=function(event){event.stopPropagation();this.setState({isLongPressing:false})}.bind(this);this.onContextMenu=function(event){if(this.state.isTouchDown)event.preventDefault();}.bind(this);this.onMouseDown=function(event){clearTimeout(this.hoverTimeout)}.bind(this);this.onMouseEnter=function(event){clearTimeout(this.hoverTimeout);var sa=this.props.comment?ea:ca;if(!this.state.dialogShown)this.hoverTimeout=setTimeout(function(){this.showDialog();if(this.$UFIReactionsLink5())ma(function(){if(u&&v){var ta=u.getVideoPlayerController(this.props.contextArgs.instanceid);if(ta)v.openReactionMenu(ta.getVideoPlayerID());}}.bind(this));}.bind(this),sa);la();if(!this.state.dialogShown&&this.state.logToFunnel)this.logFunnelTimeout=setTimeout(function(){return o.likeButtonEnter(this.props.reaction,this.state.logAsComment)}.bind(this),y);}.bind(this);this.onMouseLeave=function(event){clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);var sa=this.props.comment?fa:da;if(this.state.dialogShown)if(this.$UFIReactionsLink5()){ma(function(){if(u&&u.shouldLeaveReactionMenuOpen()){this.$UFIReactionsLink6(this.hideDialog)}else this.hoverTimeout=setTimeout(function(){this.hideDialog();if(u&&v){var ta=u.getVideoPlayerController(this.props.contextArgs.instanceid);if(ta)v.closeReactionMenu(ta.getVideoPlayerID());}}.bind(this),sa);}.bind(this))}else this.hoverTimeout=setTimeout(this.hideDialog,sa);}.bind(this);this.onReactionMenuMouseEnter=function(event){clearTimeout(this.hoverTimeout)}.bind(this);this.onTouchStart=function(event){if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true})}.bind(this),ga);la()}this.setState({isTouchDown:true,isLongPressing:false})}.bind(this);this.onTouchEnd=function(event){if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false})}.bind(this);this.onTouchMove=function(event){if(this.state.isScrubbing)return;var sa=event.touches[0],ta=sa.clientX,ua=sa.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=ta;this.dragStartY=ua;return}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX>ta+ba||this.dragStartX<ta-ba||this.dragStartY>ua+ba||this.dragStartY<ua-ba))this.setState({isScrubbing:true});}.bind(this);this.onReactionChange=function(sa,event){var ta=arguments.length<=2||arguments[2]===undefined?null:arguments[2],ua=arguments.length<=3||arguments[3]===undefined?null:arguments[3];this.$UFIReactionsLink3(sa);var va=c('ReactDOM').findDOMNode(this.refs.trigger);if(this.state.logToFunnel)event.target===va?o.likeButtonClick(sa,this.state.logAsComment):o.reactionSelection(sa,this.state.logAsComment);var wa=void 0;if(this.props.comment){wa=c('UFICommentAction').changeReaction(this.props.contextArgs,this.props.comment,sa,va)}else wa=c('UFIStoryAction').changeReaction(this.props.contextArgs,sa,va,ta,ua);this.context.dispatch(wa);var xa=function(){this.setState({dialogShown:false,isScrubbing:false})}.bind(this);if(this.$UFIReactionsLink5()){ma(function(){if(u)if(u.shouldLeaveReactionMenuOpen()){this.$UFIReactionsLink6(function(){xa()})}else xa();}.bind(this))}else xa();}.bind(this);this.onReactionMouseEnter=function(sa,event){if(this.reactionsHoverStartTimeMap[sa]===0)this.reactionsHoverStartTimeMap[sa]=Date.now();}.bind(this);this.onReactionMouseLeave=function(sa,event){if(this.reactionsHoverStartTimeMap[sa]){this.reactionsHoverTotalTimeMap[sa]+=Date.now()-this.reactionsHoverStartTimeMap[sa];this.reactionsHoverStartTimeMap[sa]=0}}.bind(this);this.onKeyboardFocus=function(){this.allowKeyboardFocus=true;this.showDialog()}.bind(this);this.onScreenReaderTrigger=function(){s=true;this.allowKeyboardFocus=true;this.showDialog()}.bind(this);this.dragStartX=null;this.dragStartY=null;this.hasSuggestedReaction=c('UFIConfig').reactionsHasSuggestedReaction;this.subscriptionsHandler=new (c('SubscriptionsHandler'))();if(ka)ka.push(this.$UFIReactionsLink2);var ra=false;if(o&&(q&&this.props.comment===undefined||p&&this.props.comment!==undefined))ra=true;this.state={allowAnimationPlayback:false,dialogShown:false,isLongPressing:false,isScrubbing:false,isTouchDown:false,logToFunnel:ra,logAsComment:!!this.props.comment&&p,NUXShown:false,shouldBounce:false}}oa.prototype.shouldComponentUpdate=function(pa,qa){'use strict';return c('shallowCompare')(this,pa,qa)};oa.prototype.componentWillReceiveProps=function(pa){'use strict';this.setState({shouldBounce:!!pa.reaction&&pa.reaction!==this.props.reaction})};oa.prototype.componentWillUpdate=function(pa,qa){'use strict';if(this.state.dialogShown&&!qa.dialogShown)this.$UFIReactionsLink3(this.props.reaction);};oa.prototype.componentDidUpdate=function(pa,qa){var ra,sa=this;'use strict';if(!qa.dialogShown&&this.state.dialogShown){if(ha)(function(){var ta=void 0;sa.subscriptionsHandler.addSubscriptions(c('Event').listen(document.documentElement,'touchstart',function(event){ta=event.touches[0]}),c('Event').listen(document.documentElement,'touchmove',function(event){ta=event.touches[0]}),c('Event').listen(document.documentElement,'touchend',function(event){if(ta&&!this.refs.root.contains(document.elementFromPoint(ta.clientX,ta.clientY)))this.setState({dialogShown:false,isScrubbing:false});}.bind(sa)))})();}else if(qa.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new (c('SubscriptionsHandler'))()}};oa.prototype.componentDidMount=function(){'use strict';this.$UFIReactionsLink4();if(this.props.nuxConfig){var pa=this.props.nuxConfig.nuxType;if(pa===c('ReactionNuxTypeEnum').SPATIAL_REACTIONS_NUX)this.maybeShowNUX();}if(c('UFIConfig').reactionsHasAnimatedIcons){c('Bootloader').loadModules(["KeyframesEnvironment","createCancelableFunction"],function(qa,ra){var sa=ra(function(){return this.setState({allowAnimationPlayback:true})}.bind(this));this.subscriptionsHandler.addSubscriptions(sa);qa.waitForRenderLoopToStabilizeOncePageIsLoaded().done(sa)}.bind(this),'UFIReactionsLinkImpl.react');if(c('UFIConfig').reactionsAnimatedIconsShouldPreload)c('Bootloader').loadModules(["UFIReactionsAnimationPreloader","Parent"],function(qa,ra){var sa=ra.bySelector(this.refs.root,"._zw3");if(sa)qa.registerListener(sa,this.props.supportedReactions);}.bind(this),'UFIReactionsLinkImpl.react');}};oa.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();if(ka){var pa=ka.indexOf(this.$UFIReactionsLink2);if(pa!==-1)ka.splice(pa,1);}};oa.prototype.maybeShowNUX=function(){'use strict';var pa=null;if(this.props.nuxConfig)pa=this.props.nuxConfig.nuxType;if(!r){r=true;this.setState({NUXShown:true,dialogShown:false});if(pa!==c('ReactionNuxTypeEnum').SPATIAL_REACTIONS_NUX)c('BanzaiLogger').log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.contextArgs.ftentidentifier,'interface':'www'});}};oa.prototype.onDragStart=function(event){'use strict';event.preventDefault()};oa.prototype.renderMenu=function(){'use strict';if(this.state.dialogShown)la();if(!t)return null;var pa=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return c('React').createElement(t,{allowAnimationPlayback:this.state.allowAnimationPlayback,allowKeyboardFocus:pa,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:s,instanceId:this.props.contextArgs.instanceid,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions,showSpatialReactions:this.$UFIReactionsLink5()})};oa.prototype.renderTrigger=function(){'use strict';var pa=this.props,qa=pa.reaction,ra=pa.suggestedReaction;if(qa&&!z[qa])qa=null;var sa=qa?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,ta=void 0,ua=void 0,va=void 0,wa=void 0;if(this.props.comment){sa=this.props.comment.parentcommentid?c('UFILikeWebDriverIDs').LIKE_LINK_REPLY:c('UFILikeWebDriverIDs').LIKE_LINK_COMMENT;var xa=false;if(!qa){ta=z[c('UFIReactionTypes').LIKE].display_name}else{ta=z[qa].display_name;wa=z[qa].color;xa=true}va="UFILikeLink"+(' '+"UFIReactionLink")+(xa?' '+"UFILinkBright":'')}else{var ya=c('SutroStoryHeaderUFIGatingConfig').is_uppercased?'display_name_uppercase':'display_name';if(!qa){ta=ra&&this.hasSuggestedReaction?z[ra][ya]:z[c('UFIReactionTypes').LIKE][ya]}else ta=z[qa][ya];if(qa&&qa!=c('UFIReactionTypes').LIKE||!qa&&ra&&this.hasSuggestedReaction&&ra!=c('UFIReactionTypes').LIKE){var za=c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi,ab=za?'18':'13';ua=c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_1ktw"+(za?' '+"_2hoq":''),grayscale:!qa&&!!ra,reaction:qa||ra,size:ab})}var bb=c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi_animation;va="UFILikeLink"+(' '+"_4x9-")+(' '+"_4x9_")+(!ua?' '+"_48-k":'')+(qa?' '+"UFILinkBright":'')+(this.state.shouldBounce&&!bb?' '+"_3_mo":'')+(this.state.shouldBounce&&bb?' '+"_614v":'');wa=qa?z[qa].color:null}return c('React').createElement(na,{'aria-pressed':!!qa,className:va,'data-testid':sa,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:t?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:ha?this.onTouchEnd:null,onTouchMove:ha?this.onTouchMove:null,onTouchStart:ha?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:wa},tabIndex:0},ua,ta)};oa.prototype.renderNUX=function(){'use strict';var pa=this.refs.root,qa=this.props.comment!==undefined,ra=this.props.nuxConfig&&this.props.nuxConfig.nuxType===c('ReactionNuxTypeEnum').SPATIAL_REACTIONS_NUX,sa=this.props.nuxConfig&&this.props.nuxConfig.titleOverride,ta=this.props.nuxConfig&&this.props.nuxConfig.textOverride;if(!this.state.NUXShown||!pa)return null;if(ra){sa=ja;ta=null}return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:x,bootloadLoader:c('JSResource')('UFIReactionsNUX.react').__setRef('UFIReactionsLinkImpl.react'),context:pa,titleOverride:sa,textOverride:ta,isCommentReactionNux:qa,isSpatialReactionNux:ra,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey})};oa.prototype.renderScreenReaderTrigger=function(){'use strict';if(t)return null;return c('React').createElement(c('ShimButton.react'),{className:'accessible_elem','data-accessibilityid':'virtual_cursor_trigger',inline:true,tabIndex:-1,onClick:this.onScreenReaderTrigger},ia)};oa.prototype.render=function(){'use strict';var pa=c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi,qa=c('SutroStoryHeaderUFIGatingConfig').is_center_aligned;return c('React').createElement('div',{className:"_khz"+(pa?' '+"_4sz1":'')+(qa?' '+"_4rw5":'')+(this.state.isScrubbing?' '+"_4bdq":'')+(qa?' '+"_3wv2":''),ref:'root'},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX())};oa.prototype.$UFIReactionsLink4=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};aa.forEach(function(pa){this.reactionsHoverStartTimeMap[pa]=0;this.reactionsHoverTotalTimeMap[pa]=0}.bind(this))};oa.prototype.$UFIReactionsLink5=function(){'use strict';return !!this.props.contextArgs.showSpatialReactions&&!this.props.comment};oa.prototype.$UFIReactionsLink6=function(pa){var qa;'use strict';if(u)(function(){var ra=u.addListener(function(){if(u&&!u.shouldLeaveReactionMenuOpen()){ra.remove();pa()}})})();};oa.prototype.$UFIReactionsLink3=function(pa,qa){'use strict';if(this.dialogShownTime!==0){var ra={feedback_id:this.props.contextArgs.ftentidentifier,final_reaction:pa,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:qa,time_spent:Date.now()-this.dialogShownTime};for(var sa in this.reactionsHoverTotalTimeMap){var ta='time_spent_'+z[sa].name.toLowerCase();ra[ta]=this.reactionsHoverTotalTimeMap[sa]}c('BanzaiLogger').log('UserReactionsLoggerConfig',ra);this.$UFIReactionsLink4()}};oa.contextTypes={dispatch:n.func};f.exports=oa}),null);
__d('CommentPrelude',['BanzaiODS','CSS','ErrorUtils','Parent','clickRefAction','ex','ifRequired'],(function a(b,c,d,e,f,g){function h(n,o){if(n==='ufi.react'||n==='ufi_mentions_input.react'||n==='ufi_controller'||n==='action_link_bling'||n==='action_link_timeline_bling')return;var p=new Error(c('ex')('Deprecated CommentPrelude action %s called from ref %s',o||'unknown',n||'unknown'));p.type='warn';c('ErrorUtils').reportError(p);c('BanzaiODS').bumpEntityKey('comment_prelude',n)}function i(n,o,p){h(p,'click');var q=c('Parent').byTag(n,'form');if(!q||!c('CSS').hasClass(q,'collapsible_comments'))return;c('clickRefAction')('ufi',n,null,'FORCE');return j(n,o,p)}function j(n,o,p){h(p,'expand');var q=c('Parent').byTag(n,'form');if(!q||!c('CSS').hasClass(q,'collapsible_comments'))return;k(q,p);if(o!==false){var r=q.add_comment_text_text||q.add_comment_text,s=r.length;if(s)if(!c('Parent').byClass(r[s-1],'UFIReplyList')){r=r[s-1]}else if(!c('Parent').byClass(r[0],'UFIReplyList')){r=r[0]}else r=null;if(r){r.focus();c('ifRequired')('FbFeedCommentUFIScroller',function(t){return t.reveal(r)})}}return false}function k(n,o){h(o,'uncollapse');if(!n||!c('CSS').hasClass(n,'collapsible_comments'))return;var p=c('CSS').removeClass.bind(null,n,'collapsed_comments');c('ifRequired')('ScrollAwareDOM',function(q){return q.monitor(n,p)},function(){return p()})}function l(n){var o=n.getAttribute('data-comment-prelude-ref');h(o,'blingbox');var p=c('Parent').byTag(n,'form');if(!p||!c('CSS').hasClass(p,'collapsible_comments'))return;c('CSS').toggleClass(p,'collapsed_comments')}var m={click:i,expand:j,uncollapse:k,onBlingboxClick:l,logRef:h};f.exports=m}),null);
__d('URITruncator',['fbt','URI'],(function a(b,c,d,e,f,g,h){var i=3,j=h._("..."),k=j.length||j.toString().length;function l(m,n){if(!m||n===undefined||m.length<=n||n<=k||m.toString().length<=k)return m;if(!c('URI').isValidURI(m))return m.substring(0,n-k)+j;var o=new (c('URI'))(m),p=o.getOrigin();if(p.length>n-k)return p.substring(0,n-k)+j;var q=false;if(!!o.getFragment()){q=true;o.setFragment('');if(o.toString().length<=n-k)return o.toString()+j;}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=n-k)return o.toString()+j;}}}var u=o.getPath()+(q?j:''),v=u.split('/'),w=p.length+u.length-n,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+k+i<=z.length){var aa=z.length-1,ba=z.length-w-k,ca=/[a-zA-Z0-9]/;w+=k;while(w>0){while(aa>0&&ca.test(z[aa])){aa--;w--}while(aa>0&&!ca.test(z[aa])){aa--;w--}}if(aa===0)aa=ba-1;v[y]=z.substring(0,aa+1)+j}else{x++;w-=z.length;if(x===1){w+=k}else w--;}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,j)}var da=p+v.join('/');if(da.length>n)da=da.substring(0,n-k)+j;return da}f.exports=l}),null);
__d('VideoFeedFastPreloadController',['Run','DOMQuery'],(function a(b,c,d,e,f,g){var h=0,i={preload:function j(k){if(h<2){k=c('DOMQuery').scry(k,'video')[0];if(k instanceof b.HTMLVideoElement){if(!h)c('Run').onBeforeUnload(function(){return i.reset()});k.preload='auto';h+=1}}},reset:function j(){h=0}};i.reset();f.exports=i}),null);
__d('PriorityJobQueue',['Promise','Map'],(function a(b,c,d,e,f,g){'use strict';var h=1;function i(j){this.$PriorityJobQueue2=new (c('Map'))();this.$PriorityJobQueue3=new (c('Map'))();this.$PriorityJobQueue4=false;this.$PriorityJobQueue5=new (c('Map'))();this.$PriorityJobQueue8=function(){var k=this.$PriorityJobQueue3.size,l=Date.now();if(k<this.$PriorityJobQueue1){var m=this.$PriorityJobQueue1-k,n=Array.from(this.$PriorityJobQueue2.values());n.sort(function(q,r){return r.job.getPriority(l-r.timeQueued)-q.job.getPriority(l-q.timeQueued)});var o=this.$PriorityJobQueue2.size;for(var p=0;p<Math.min(o,m);p++)this.$PriorityJobQueue9(n[p]);}this.$PriorityJobQueue4=false}.bind(this);this.$PriorityJobQueue1=j||h}i.prototype.$PriorityJobQueue6=function(j){this.$PriorityJobQueue3['delete'](j);this.$PriorityJobQueue7()};i.prototype.$PriorityJobQueue7=function(){if(!this.$PriorityJobQueue4){this.$PriorityJobQueue4=true;c('Promise').resolve().then(this.$PriorityJobQueue8).done()}};i.prototype.$PriorityJobQueue9=function(j){var k=j.job,l=k.getJobID();this.$PriorityJobQueue2['delete'](l);this.$PriorityJobQueue3.set(l,j);k.getPromise().then(function(){return this.$PriorityJobQueue6(l)}.bind(this))['catch']();var m=this.$PriorityJobQueue5.get(l);m&&m();this.$PriorityJobQueue5['delete'](l);k.start()};i.prototype.enqueue=function(j,k){var l={job:j,timeQueued:Date.now()},m=j.getJobID();this.$PriorityJobQueue2.set(m,l);if(k)this.$PriorityJobQueue5.set(m,k);this.$PriorityJobQueue7();return this};i.prototype.abort=function(j){this.$PriorityJobQueue2['delete'](j);var k=this.$PriorityJobQueue3.get(j);if(k){k.job.abort();this.$PriorityJobQueue3['delete'](j);this.$PriorityJobQueue7()}};i.get=function(){if(!i.$PriorityJobQueue10)i.$PriorityJobQueue10=new i(h);return i.$PriorityJobQueue10};f.exports=i}),null);
__d('VideoPlayerResourceTimer',['VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){'use strict';var h={getResourceTimingEntry:function i(j,k,l){var m;if(performance.getEntriesByType){var m=function(){var n=performance.getEntriesByName(j,'resource'),o=[];n.forEach(function(p){if(typeof p.responseEnd==='number'&&typeof p.responseStart==='number'&&typeof p.requestStart==='number'&&typeof p.connectEnd==='number'&&typeof p.connectStart==='number'&&typeof p.domainLookupEnd==='number'&&typeof p.domainLookupStart==='number'&&typeof p.transferSize==='number'&&p.responseEnd<=l&&p.startTime>=k&&(!c('VideoPlayerShakaExperiments').ignoreInvalidTimingEntries||p.responseStart>0&&p.responseEnd>0))o.push({entry:{timeToFirstByte:p.responseStart-p.startTime,timeToLastByte:p.responseEnd-p.startTime,timeToRequestStart:p.requestStart-p.startTime,timeToConectionEnd:p.connectEnd-p.startTime,timeToConnectionStart:p.connectStart-p.startTime,timeToDomainLookupEnd:p.domainLookupEnd-p.startTime,timeToDomainLookupStart:p.domainLookupStart-p.startTime,transferSize:p.transferSize,startTime:p.startTime},sort:p.responseEnd});});o.sort(function(p,q){return q.sort-p.sort});if(o.length)return {v:o[0].entry};}();if(typeof m==="object")return m.v;}return null}};f.exports=h}),null);
__d('VideoPlayerShakaBandwidthEstimator',['CacheStorage','requireWeak','Run','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){var h=void 0;c('requireWeak')('Shaka',function(l){h=l.util.EWMACacheBandwidthEstimator});var i=null,j=false;function k(){'use strict';var l=new (c('CacheStorage'))('localstorage','_video_'),m=l.get('bandwidthEstimate');this.$VideoPlayerShakaBandwidthEstimator1={isMockObject:true,getBandwidth:function n(){return m},getFastMovingBandwidth:function n(){return m}};if(h){this.$VideoPlayerShakaBandwidthEstimator1=new h(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,m);this.$VideoPlayerShakaBandwidthEstimator1.isMockObject=false}c('Run').onUnload(function(){l.set('bandwidthEstimate',this.$VideoPlayerShakaBandwidthEstimator1.getBandwidth())}.bind(this))}k.prototype.getEstimator=function(){'use strict';return this.$VideoPlayerShakaBandwidthEstimator1};k.getInstance=function(){'use strict';if(i===null||i.getEstimator().isMockObject&&h)i=new k();return i};k.getEstimator=function(){'use strict';return k.getInstance().getEstimator()};k.getBandwidth=function(){'use strict';var l=k.getEstimator();return l.getBandwidth()};k.isAutoplayBandwidthRestrained=function(l){'use strict';var m=k.getEstimator(),n=void 0;if(c('VideoPlayerShakaExperiments').blockAutoplayUseFastMovingAverage&&j){n=m.getFastMovingBandwidth()}else n=m.getBandwidth();var o=l?c('VideoPlayerShakaExperiments').liveBlockAutoplayBandwidthThreshold:c('VideoPlayerShakaExperiments').blockAutoplayBandwidthThreshold;if(n===null||n>=o){j=false}else j=true;return j};f.exports=k}),null);
__d('VideoPlayerShakaError',[],(function a(b,c,d,e,f,g){'use strict';var h={translateError:function i(j,k,l){var m={name:j.errorType,message:j.errorMsg,type:l,url:k,xhr:{status:j.errorCode}};return m}};f.exports=h}),null);
__d('VideoDashPrefetchCache',['Promise','regeneratorRuntime','Deferred','Map','PriorityJobQueue','Run','URI','VideoPlayerResourceTimer','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaError','VideoPlayerShakaExperiments','XHRRequest','getCrossOriginTransport','performanceNow'],(function a(b,c,d,e,f,g){var h=window.Promise||c('Promise');c('Promise').resolve();function i(r){var s='aborted',t={status:0},u=new Error('Prefetch request aborted.');return Object.assign(u,{type:s,url:r,xhr:t})}var j=null;function k(r){var s=new (c('URI'))(r),t=s.getDomain();return t.endsWith('fbcdn.net')&&!t.startsWith('interncache')&&!t.endsWith('ak.fbcdn.net')}function l(r){var s=arguments.length<=1||arguments[1]===undefined?false:arguments[1];return s&&k(r)?c('getCrossOriginTransport').withCredentials:c('getCrossOriginTransport')}function m(r){return k(r.url)}function n(r,s,t){return {response:r.slice(s.start+0,s.end+1),responseTime:t}}function o(r,s,t){'use strict';this.$UrlRequestJob1=r;this.$UrlRequestJob2=s;this.$UrlRequestJob5=t;var u=new (c('XHRRequest'))(this.$UrlRequestJob2).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(l(s));this.$UrlRequestJob3=new h(function(v,w){u.setErrorHandler(function(x){w(c('VideoPlayerShakaError').translateError(x,this.$UrlRequestJob2,'preload'))}.bind(this));u.setResponseHandler(function(x){u.response=x;v(u)});u.setAbortHandler(function(){if(c('VideoPlayerShakaExperiments').fixPrefetchCacheAbort){var x=i(s);w(x)}else w(this.$UrlRequestJob3,new Error('Request promise aborted'));}.bind(this))}.bind(this));this.$UrlRequestJob4=u}o.prototype.getUrl=function(){'use strict';return this.$UrlRequestJob2};o.prototype.getPromise=function(){'use strict';return this.$UrlRequestJob3};o.prototype.start=function(){'use strict';this.$UrlRequestJob4.send()};o.prototype.abort=function(){'use strict';this.$UrlRequestJob4.abort()};o.prototype.getPriority=function(r){'use strict';return 1/Math.min(this.$UrlRequestJob5,1)/Math.min(r,1)};o.prototype.getJobID=function(){'use strict';return this.$UrlRequestJob1};function p(r){var s=new (c('URI'))(r);if(s.getDomain()){s=s.removeQueryData(['oh']);s=s.removeQueryData('__gda__');for(var t=Object.keys(s.getQueryData()),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var w;if(u){if(v>=t.length)break;w=t[v++]}else{v=t.next();if(v.done)break;w=v.value}var x=w;if(x.startsWith('_nc'))s=s.removeQueryData(x);}return s.toString()}return r}function q(){'use strict';this.$VideoDashPrefetchCache2=new (c('Map'))();this.$VideoDashPrefetchCache1=new (c('Map'))();this.$VideoDashPrefetchCache3=new (c('Map'))();this.$VideoDashPrefetchCache4=[];this.$VideoDashPrefetchCache5=[];this.$VideoDashPrefetchCache6=0;this.$VideoDashPrefetchCache7=c('VideoPlayerShakaExperiments').maxPrefetchVideosNum;this.$VideoDashPrefetchCache8=c('VideoPlayerShakaExperiments').consolidateFragmentedPrefetchRequest}q.prototype.$VideoDashPrefetchCache9=function(r){var s=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],t=arguments.length<=2||arguments[2]===undefined?0:arguments[2],u=arguments.length<=3||arguments[3]===undefined?false:arguments[3];'use strict';var v=r;if(Object.keys(s))v=new (c('URI'))(r).addQueryData(s).toString();var w=new (c('XHRRequest'))(v).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(l(v,u)),x=c('performanceNow')();this.$VideoDashPrefetchCache2['delete'](r);var y=new h(function(z,aa){w.setErrorHandler(function(ba){this.$VideoDashPrefetchCache10(w);aa(c('VideoPlayerShakaError').translateError(ba,v,'preload'))}.bind(this));w.setResponseHandler(function(ba){if(c('VideoPlayerShakaExperiments').enableResourceTimingForPrefetchCache){var ca=c('VideoPlayerResourceTimer').getResourceTimingEntry(r,x,c('performanceNow')());if(ca)this.$VideoDashPrefetchCache2.set(p(r),ca);}w.response=ba;this.$VideoDashPrefetchCache10(w);z(w)}.bind(this));w.setAbortHandler(function(){if(c('VideoPlayerShakaExperiments').fixPrefetchCacheAbort){this.$VideoDashPrefetchCache10(w);var ba=i(r);aa(ba)}else aa(y,new Error('Request promise aborted'));}.bind(this))}.bind(this));this.$VideoDashPrefetchCache11(r,y,t);this.$VideoDashPrefetchCache4.push(w);w.send();return y};q.prototype.$VideoDashPrefetchCache11=function(r,s){var t=arguments.length<=2||arguments[2]===undefined?3600000:arguments[2];'use strict';this.$VideoDashPrefetchCache12(r);if(t>0)this.$VideoDashPrefetchCache3.set(p(r),setTimeout(function(){return this.$VideoDashPrefetchCache12(r)}.bind(this),t));this.$VideoDashPrefetchCache13(r,s)};q.prototype.genPrfetchMpdNow=function r(s,t,u){var v,w;return c('regeneratorRuntime').async(function x(y){while(1)switch(y.prev=y.next){case 0:'use strict';if(!this.has(t)){y.next=3;break}return y.abrupt('return',null);case 3:v=u.getURL();w=new o(s,v,0);this.$VideoDashPrefetchCache11(t,w.getPromise());w.start();y.next=9;return c('regeneratorRuntime').awrap(w.getPromise());case 9:return y.abrupt('return',null);case 10:case 'end':return y.stop();}},null,this)};q.prototype.queueRequestFromMouseMovement=function(r,s,t,u,v){var w=arguments.length<=5||arguments[5]===undefined?function(){}:arguments[5],x=arguments.length<=6||arguments[6]===undefined?function(){}:arguments[6];'use strict';var y=c('PriorityJobQueue').get(),z=this.$VideoDashPrefetchCache14(s);if(z){z.then(x).done();return}var aa=t.getURL(),ba=new o(r,aa,u);ba.getPromise().then(x)['catch'](function(){return this.getAndDelete(s)}.bind(this));y.enqueue(ba,function(){this.$VideoDashPrefetchCache11(s,ba.getPromise(),v);w()}.bind(this))};q.prototype.cancelRequestFromMouseMovement=function(r){'use strict';c('PriorityJobQueue').get().abort(r)};q.prototype.$VideoDashPrefetchCache12=function(r,s){'use strict';this.getAndDelete(r,s);if(this.$VideoDashPrefetchCache3.has(r)){clearTimeout(this.$VideoDashPrefetchCache3.get(r));this.$VideoDashPrefetchCache3['delete'](r)}};q.prototype.$VideoDashPrefetchCache15=function(r){var s=arguments.length<=1||arguments[1]===undefined?false:arguments[1];'use strict';var t=[];for(var u=0;u<r.length;u++){var v=q.createQueryStringURL(r[u]);if(!this.has(v))t.push(this.$VideoDashPrefetchCache9(v,undefined,undefined,s));}return t};q.prototype.$VideoDashPrefetchCache16=function(r){'use strict';var s=q.getConsolidatedURL(r);if(s==null)return this.$VideoDashPrefetchCache15(r);var t=new (c('XHRRequest'))(s).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(l(s)),u=Date.now(),v=[];for(var w=0;w<r.length;w++){var x=q.createQueryStringURL(r[w]),y=new (c('Deferred'))();if(!this.has(x))this.$VideoDashPrefetchCache13(x,y.getPromise());v.push(y)}t.setErrorHandler(function(z){this.$VideoDashPrefetchCache10(t);for(var aa=0;aa<v.length;aa++)v[aa].reject(c('VideoPlayerShakaError').translateError(z,s,'preload'));}.bind(this));t.setResponseHandler(function(z){var aa=Date.now()-u;for(var ba=0;ba<r.length;ba++){var ca=v[ba],da=r[ba];ca.resolve(n(z,da,aa))}this.$VideoDashPrefetchCache10(t)}.bind(this));t.setAbortHandler(function(){for(var z=0;z<r.length;z++){var aa=v[z];aa.reject(new Error('Request aborted.'))}});this.$VideoDashPrefetchCache4.push(t);t.send();return v.map(function(z){return z.getPromise()})};q.prototype.$VideoDashPrefetchCache17=function(r){'use strict';var s=r.useCredentials;this.$VideoDashPrefetchCache6++;var t=this.$VideoDashPrefetchCache8&&!s,u=t?this.$VideoDashPrefetchCache16(r.video):this.$VideoDashPrefetchCache15(r.video,s),v=t?this.$VideoDashPrefetchCache16(r.audio):this.$VideoDashPrefetchCache15(r.audio,s),w=this.$VideoDashPrefetchCache15(r.manifest,s),x=u.concat(v,w);h.all(x).then(function(){return this.$VideoDashPrefetchCache18()}.bind(this))['catch'](function(){return this.$VideoDashPrefetchCache18()}.bind(this))};q.prototype.$VideoDashPrefetchCache13=function(r,s){'use strict';r=p(r);if(this.$VideoDashPrefetchCache1.values().next().done)c('Run').onLeave(function(){for(var t=0;t<this.$VideoDashPrefetchCache4.length;t++)this.$VideoDashPrefetchCache4[t].abort();this.$VideoDashPrefetchCache4=[];this.$VideoDashPrefetchCache5=[];this.$VideoDashPrefetchCache6=0;this.$VideoDashPrefetchCache1.clear()}.bind(this));this.$VideoDashPrefetchCache1.set(r,s)};q.prototype.$VideoDashPrefetchCache10=function(r){'use strict';var s=this.$VideoDashPrefetchCache4.indexOf(r);if(s>-1)this.$VideoDashPrefetchCache4.splice(s,1);};q.prototype.$VideoDashPrefetchCache18=function(){'use strict';this.$VideoDashPrefetchCache6--;var r=this.$VideoDashPrefetchCache5.shift();if(r)this.$VideoDashPrefetchCache17(r);};q.prototype.has=function(r){'use strict';r=p(r);return this.$VideoDashPrefetchCache1.has(r)};q.prototype.getAndDelete=function(r,s){'use strict';r=p(r);var t=this.$VideoDashPrefetchCache1.get(r);if(t&&s){var u=this.$VideoDashPrefetchCache2.get(r);s(u)}this.$VideoDashPrefetchCache1['delete'](r);return t};q.prototype.$VideoDashPrefetchCache14=function(r){'use strict';r=p(r);var s=this.$VideoDashPrefetchCache1.get(r);return s};q.prototype.queueRequestBatch=function(r){'use strict';if(this.$VideoDashPrefetchCache7===0||this.$VideoDashPrefetchCache6<this.$VideoDashPrefetchCache7){this.$VideoDashPrefetchCache17(r)}else this.$VideoDashPrefetchCache5.push(r);};q.getInstance=function(){'use strict';if(j===null)j=new q();return j};q.createQueryStringURL=function(r){'use strict';var s=r.url,t=r.start,u=r.end;if(t!==null&&t!==undefined&&u!==null&&u!==undefined)s=new (c('URI'))(s).addQueryData({bytestart:t,byteend:u});return s.toString()};q.getConsolidatedURL=function(r){'use strict';var s='',t=Infinity,u=0;for(var v=0;v<r.length;v++){var w=r[v],x=w.url,y=w.start,z=w.end;if(x==null||y==null||z==null)return null;if(s===''){s=x}else if(s!==x)return null;t=Math.min(t,y);u=Math.max(u,z)}return q.createQueryStringURL({url:s,start:t,end:u})};q.loadVideo=function(r,s){'use strict';s=!!s;if(c('VideoPlayerShakaBandwidthEstimator').isAutoplayBandwidthRestrained())return;if(c('VideoPlayerShakaExperiments').disablePrefetchCache)return;var t=q.getInstance();if(!r.manifest)r.manifest=[];t.queueRequestBatch({manifest:r.manifest.filter(m),video:r.video.filter(m),audio:r.audio.filter(m),useCredentials:s})};q.getCacheValue=function(r,s){'use strict';return q.getInstance().getAndDelete(r,s)};q.hasCacheValue=function(r){'use strict';return q.getInstance().has(r)};f.exports=q}),null);
__d('VideoDisplayTimePlayButton',['CSS','DataStore','Event'],(function a(b,c,d,e,f,g){var h={},i='_spinner',j={getClicked:function k(l){return c('DataStore').get(l,'clicked',false)},register:function k(l,m){var n=l.id;h[n]=c('Event').listen(l,'click',function(){if(m){c('CSS').hide(l);c('CSS').show(m)}c('DataStore').set(l,'clicked',true)});if(m)h[n+i]=c('Event').listen(m,'click',function(){if(m)c('CSS').hide(m);c('CSS').show(l);c('DataStore').set(l,'clicked',false)});},unregister:function k(l){var m=l.id;if(Object.prototype.hasOwnProperty.call(h,m))h[m].remove();var n=m+i;if(Object.prototype.hasOwnProperty.call(h,n))h[n].remove();}};f.exports=j}),null);
__d('VideosRenderingInstrumentation',['DataStore','VideoPlayerHTML5Experiments','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){var h={storeRenderTime:function i(j){var k=c('VideoPlayerHTML5Experiments').useMonotonicallyIncreasingTimers?c('performanceAbsoluteNow')():Date.now();c('DataStore').set(j,'videos_rendering_instrumentation',k);return k},retrieveRenderTime:function i(j){var k=c('DataStore').get(j,'videos_rendering_instrumentation',NaN);if(Number.isNaN(k))k=h.storeRenderTime(j);return k}};f.exports=h}),null);
__d('VideoFrameBuffer',[],(function a(b,c,d,e,f,g){function h(i,j,k){'use strict';this.$VideoFrameBuffer2=j;this.$VideoFrameBuffer1=i;this.$VideoFrameBuffer3=k||'contain'}h.prototype.updateFrameBuffer=function(){'use strict';if(this.$VideoFrameBuffer4){this.$VideoFrameBuffer1.width=this.$VideoFrameBuffer4;this.$VideoFrameBuffer4=null}if(this.$VideoFrameBuffer5){this.$VideoFrameBuffer1.height=this.$VideoFrameBuffer5;this.$VideoFrameBuffer5=null}var i=this.$VideoFrameBuffer1.clientWidth||this.$VideoFrameBuffer1.width,j=this.$VideoFrameBuffer1.clientHeight||this.$VideoFrameBuffer1.height,k=i,l=j,m=this.$VideoFrameBuffer2.videoWidth/this.$VideoFrameBuffer2.videoHeight,n=k/l;if(this.$VideoFrameBuffer3==='cover'){n*=-1;m*=-1}if(n>m){k=l*m}else if(n<m)l=k/m;var o=this.$VideoFrameBuffer1.getContext('2d');if(!(o instanceof window.CanvasRenderingContext2D))return;o.drawImage(this.$VideoFrameBuffer2,(i-k)/2,(j-l)/2,k,l)};h.prototype.getDOMNode=function(){'use strict';return this.$VideoFrameBuffer1};h.prototype.updateDimensions=function(i,j){'use strict';this.$VideoFrameBuffer4=i;this.$VideoFrameBuffer5=j};f.exports=h}),null);
__d('onViewportChanged',['EventListener','emptyFunction','getViewportDimensions','requestAnimationFrame'],(function a(b,c,d,e,f,g){var h=[],i=false,j=null,k=void 0,l=void 0;function m(){var x=c('getViewportDimensions').withoutScrollbars();return {top:0,bottom:x.height,left:0,right:x.width}}function n(x,y){var z={transform:y||c('emptyFunction').thatReturnsArgument,callback:x,needsUpdate:true};h.push(z);u();p();return {remove:o.bind(null,z),scheduleCheck:s.bind(null,z)}}function o(x){var y=h.indexOf(x);if(y!==-1){h.splice(y,1);if(h.length===0){q();j=null}}}function p(){if(!l){l=c('EventListener').listen(window,'scroll',t);k=c('EventListener').listen(window,'resize',r)}}function q(){if(l){l.remove();k.remove();l=k=null}}function r(){j=null;t()}function s(x){x.needsUpdate=true;u()}function t(){h.map(function(x){return x.needsUpdate=true});u()}function u(){if(!i){i=true;c('requestAnimationFrame')(function(){i=false;w()})}}function v(x){if(x.needsUpdate){x.needsUpdate=false;return true}return false}function w(){if(!j)j=m();var x=h.filter(v),y=x.map(function(z){return z.transform.call(null,j)});x.forEach(function(z,aa){return z.callback.call(null,y[aa])})}f.exports=n}),null);
__d('onRectIsWithinViewport',['onViewportChanged'],(function a(b,c,d,e,f,g){function h(j,k){return !(j.bottom<k.top||j.top>k.bottom||j.right<k.left||j.left>k.right)}function i(j,k){var l=void 0;function m(o){var p=j();return !!p&&h(p,o)}function n(o){if(l!==o){l=o;k(o)}}return c('onViewportChanged')(n,m)}f.exports=i}),null);
/**
 * @providesModule IntersectionObserverFallback
 * @preserve-header
 * @fullSyntaxTransform
 * 
 * @format
 * Modified by Facebook
 *
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
__d('IntersectionObserverFallback',['TimeSlice','performanceNow','setInterval','throttle'],(function a(b,c,d,e,f,g){'use strict';var h=document.documentElement,i=[];function j(n,o){var p=Math.max(n.top,o.top),q=Math.min(n.bottom,o.bottom),r=Math.max(n.left,o.left),s=Math.min(n.right,o.right),t=s-r,u=q-p;return t>=0&&u>=0?{top:p,bottom:q,left:r,right:s,width:t,height:u}:undefined}function k(){return {top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(n){this.time=n.time;this.target=n.target;this.rootBounds=n.rootBounds;this.boundingClientRect=n.boundingClientRect;this.intersectionRect=n.intersectionRect||k();this.isIntersecting=!!n.intersectionRect;var o=this.boundingClientRect,p=o.width*o.height,q=this.intersectionRect.width*this.intersectionRect.height;this.intersectionRatio=p?q/p:0}function m(n,o){this.THROTTLE_TIMEOUT=100;this.POLL_INTERVAL=null;this.$IntersectionObserverFallback12=c('TimeSlice').guard(c('throttle')(function(){var r=this.$IntersectionObserverFallback14(),s=r?this.$IntersectionObserverFallback15():k();this.$IntersectionObserverFallback6.forEach(function(t){var u=t.element,v=u.getBoundingClientRect(),w=this.$IntersectionObserverFallback16(u),x=t.entry,y=r&&w&&!this.$IntersectionObserverFallback2&&this.$IntersectionObserverFallback17(u,s),z=t.entry=new l({time:c('performanceNow')(),target:u,boundingClientRect:v,rootBounds:s,intersectionRect:y});if(r&&w){if(this.$IntersectionObserverFallback18(x,z))this.$IntersectionObserverFallback7.push(z);}else if(x&&x.isIntersecting)this.$IntersectionObserverFallback7.push(z);}.bind(this));if(this.$IntersectionObserverFallback7.length)this.$IntersectionObserverFallback1(this.takeRecords(),this);}.bind(this),this.THROTTLE_TIMEOUT),'IntersectionObserverFallback: checkForIntersections');this.$IntersectionObserverFallback2=false;try{var p=window.top.document}catch(r){this.$IntersectionObserverFallback2=true}var q=o||{};this.$IntersectionObserverFallback1=n;this.$IntersectionObserverFallback4=false;this.$IntersectionObserverFallback6=[];this.$IntersectionObserverFallback7=[];this.$IntersectionObserverFallback8=this.$IntersectionObserverFallback9(q.rootMargin);this.thresholds=this.$IntersectionObserverFallback10(q.threshold);this.root=q.root||null;this.rootMargin=this.$IntersectionObserverFallback8.map(function(r){return r.value+r.unit}).join(' ')}m.prototype.$IntersectionObserverFallback10=function(n){var o=n||[0];return o.sort().filter(function(p,q,r){return p!==r[q-1]})};m.prototype.$IntersectionObserverFallback9=function(n){var o=n||'0px',p=o.split(/\s+/).map(function(q){var r=/^(-?\d*\.?\d+)(px|%)$/.exec(q);return {value:parseFloat(r[1]),unit:r[2]}});p[1]=p[1]||p[0];p[2]=p[2]||p[0];p[3]=p[3]||p[1];return p};m.prototype.$IntersectionObserverFallback11=function(){if(!this.$IntersectionObserverFallback4){this.$IntersectionObserverFallback4=true;this.$IntersectionObserverFallback12();if(this.POLL_INTERVAL){this.$IntersectionObserverFallback5=c('setInterval')(this.$IntersectionObserverFallback12,this.POLL_INTERVAL)}else{window.addEventListener('resize',this.$IntersectionObserverFallback12);document.addEventListener('scroll',this.$IntersectionObserverFallback12);if('MutationObserver' in window){this.$IntersectionObserverFallback3=new MutationObserver(this.$IntersectionObserverFallback12);this.$IntersectionObserverFallback3.observe(document,{attributes:true,childList:true,characterData:true,subtree:true})}}}};m.prototype.$IntersectionObserverFallback13=function(){if(this.$IntersectionObserverFallback4){this.$IntersectionObserverFallback4=false;if(this.$IntersectionObserverFallback5){clearInterval(this.$IntersectionObserverFallback5);this.$IntersectionObserverFallback5=undefined}window.removeEventListener('resize',this.$IntersectionObserverFallback12);document.removeEventListener('scroll',this.$IntersectionObserverFallback12);if(this.$IntersectionObserverFallback3){this.$IntersectionObserverFallback3.disconnect();this.$IntersectionObserverFallback3=undefined}}};m.prototype.$IntersectionObserverFallback17=function(n,o){if(window.getComputedStyle(n).display=='none')return undefined;var p=n.getBoundingClientRect(),q=p,r=n.parentElement,s=false;while(!s){var t=null;if(r==this.root||r&&r.nodeType!=1){s=true;t=o}else if(window.getComputedStyle(r).overflow!='visible')t=r&&r.getBoundingClientRect();if(t){q=j(t,q);if(!q)break;}r=r&&r.parentElement}return q};m.prototype.$IntersectionObserverFallback15=function(){var n=void 0;if(this.root){n=this.root.getBoundingClientRect()}else{var o=document.documentElement,p=document.body,q=o&&o.clientWidth||p&&p.clientWidth,r=o&&o.clientHeight||p&&p.clientHeight;n={top:0,left:0,right:q,width:q,bottom:r,height:r}}return this.$IntersectionObserverFallback19(n)};m.prototype.$IntersectionObserverFallback19=function(n){var o=this.$IntersectionObserverFallback8.map(function(q,r){return q.unit=='px'?q.value:q.value*(r%2?n.width:n.height)/100}),p={top:n.top-o[0],right:n.right+o[1],bottom:n.bottom+o[2],left:n.left-o[3],width:0,height:0};p.width=p.right-p.left;p.height=p.bottom-p.top;return p};m.prototype.$IntersectionObserverFallback18=function(n,o){var p=n&&n.isIntersecting?n.intersectionRatio||0:-1,q=o.isIntersecting?o.intersectionRatio||0:-1;if(p===q)return false;for(var r=0;r<this.thresholds.length;r++){var s=this.thresholds[r];if(s==p||s==q||s<p!==s<q)return true;}return false};m.prototype.$IntersectionObserverFallback14=function(){return !this.root||h!==null&&h.contains(this.root)};m.prototype.$IntersectionObserverFallback16=function(n){var o=this.root||h;return o!==null&&o.contains(n)};m.prototype.$IntersectionObserverFallback20=function(){if(i.indexOf(this)<0)i.push(this);};m.prototype.$IntersectionObserverFallback21=function(){var n=i.indexOf(this);if(n!=-1)i.splice(n,1);};m.prototype.observe=function(n){if(this.$IntersectionObserverFallback6.some(function(o){return o.element==n}))return;this.$IntersectionObserverFallback20();this.$IntersectionObserverFallback6.push({element:n,entry:null});this.$IntersectionObserverFallback11()};m.prototype.unobserve=function(n){this.$IntersectionObserverFallback6=this.$IntersectionObserverFallback6.filter(function(o){return o.element!=n});if(!this.$IntersectionObserverFallback6.length){this.$IntersectionObserverFallback13();this.$IntersectionObserverFallback21()}};m.prototype.disconnect=function(){this.$IntersectionObserverFallback6=[];this.$IntersectionObserverFallback13();this.$IntersectionObserverFallback21()};m.prototype.takeRecords=function(){var n=this.$IntersectionObserverFallback7.slice();this.$IntersectionObserverFallback7=[];return n};f.exports=m}),null);
__d('IntersectionObserver',['IntersectionObserverFallback'],(function a(b,c,d,e,f,g){'use strict';var h='IntersectionObserver' in window&&'IntersectionObserverEntry' in window&&'intersectionRatio' in window.IntersectionObserverEntry.prototype;f.exports=h?window.IntersectionObserver:c('IntersectionObserverFallback')}),null);
__d('OnVisible.react',['IntersectionObserver','React','ReactDOM','WebSpeedJSExperiments','getElementRect','onRectIsWithinViewport'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'OnVisible',propTypes:{onVisible:h.func,onHidden:h.func,buffer:h.number},componentDidMount:function j(){this._create()},componentDidUpdate:function j(){this._create()},componentWillUnmount:function j(){this._remove()},reset:function j(){this._remove();this._create()},check:function j(){if(this._listener)this._listener.scheduleCheck();},_create:function j(){if(c('WebSpeedJSExperiments').i10s_io_on_visible){this._createObserver()}else this._createListener();},_remove:function j(){if(c('WebSpeedJSExperiments').i10s_io_on_visible){this._removeObserver()}else this._removeListener();},_measureElementRect:function j(){if(!this.isMounted())return null;var k=this.props.buffer||0,l=c('ReactDOM').findDOMNode(this),m=c('getElementRect')(l);if(m.left===0&&m.right===0&&m.top===0&&m.bottom===0)return null;m.left-=k;m.right+=k;m.top-=k;m.bottom+=k;return m},_createListener:function j(){var k=c('ReactDOM').findDOMNode(this);if(this._listener&&k!==this._element)this._removeListener();if(!this._listener){this._element=k;this._listener=c('onRectIsWithinViewport')(this._measureElementRect,function(l){var m=l?this.props.onVisible:this.props.onHidden;m&&m()}.bind(this))}},_removeListener:function j(){if(this._listener){this._listener.remove();this._listener=null}},_createObserver:function j(){var k=c('ReactDOM').findDOMNode(this);if(this._observer&&k!==this._element)this._removeObserver();if(!this._observer){var l={rootMargin:this.props.buffer?this.props.buffer+'px':'0px'};this._element=k;this._observer=new (c('IntersectionObserver'))(function(m){m.forEach(function(n){if(n.target===this._element){var o=n.intersectionRatio>0?this.props.onVisible:this.props.onHidden;o&&o()}}.bind(this))}.bind(this),l);this._observer.observe(k)}},_removeObserver:function j(){if(this._observer){this._observer.unobserve(this._element);this._observer.disconnect();this._observer=undefined}},render:function j(){return c('React').Children.only(this.props.children)}});f.exports=i}),null);
__d("FBFeedLocations",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NEWSFEED:1,GROUP:2,GROUP_PERMALINK:3,COMMUNITY:4,PERMALINK:5,SHARE_OVERLAY:6,PERMALINK_STREAM:7,GROUP_PINNED:8,FRIEND_LIST:9,TIMELINE:10,HASHTAG_FEED:11,TOPIC_FEED:12,PAGE:13,NOTIFICATION_FEED:14,GROUP_REPORTED:15,GROUP_PENDING:16,PAGES_FEED_IN_PAGES_MANAGER:17,TICKER_CLASSIC:18,PAGES_SUGGESTED_FEED_IN_PAGES_MANAGER:19,SEARCH:20,GROUP_SEARCH:21,NO_ATTACHMENT:22,EMBED:23,EMBED_FEED:24,ATTACHMENT_PREVIEW:25,STORIES_TO_SHARE:26,PROMPT_PERMALINK:27,TREND_HOVERCARD:28,OPEN_GRAPH_PREVIEW:30,HOTPOST_IN_PAGES_FEED:31,SCHEDULED_POSTS:32,TIMELINE_NOTES:33,PAGE_INSIGHTS:34,COMMENT_ATTACHMENT:35,PAGE_TIMELINE:36,GOODWILL_THROWBACK_PERMALINK:37,LIKE_CONFIRM:39,GOODWILL_THROWBACK_PROMOTION:40,BROWSE_CONSOLE:42,GROUP_FOR_SALE_COMPACT:43,ENTITY_FEED:44,GROUP_FOR_SALE_DISCUSSION:45,PAGES_CONTENT_TAB_PREVIEW:46,GOODWILL_THROWBACK_SHARE:47,TIMELINE_VIDEO_SHARES:48,EVENT:49,PAGE_PLUGIN:50,SRT:51,PAGES_CONTENT_TAB_INSIGHTS:52,ADS_PE_CONTENT_TAB_INSIGHTS:53,PAGE_ACTIVITY_FEED:54,VIDEO_CHANNEL:55,POST_TO_PAGE:56,GROUPS_GSYM_HOVERCARD:57,GROUP_POST_TOPIC_FEED:58,FEED_SURVEY:59,PAGES_MODERATION:60,SAVED_DASHBOARD:61,PULSE_SEARCH:62,GROUP_NUX:63,GROUP_NUX_POST_VIEW:64,EVENT_PERMALINK:65,FUNDRAISER_PAGE:66,EXPLORE_FEED:67,CRT:68,REVIEWS_FEED:69,VIDEO_HOME_CHANNEL:70,NEWS:71,TIMELINE_FRIENDSHIP:72,SAVED_REMINDERS:73,PSYM:74,ADMIN_FEED:75,CAMPFIRE_NOTE:76,PAGES_CONTEXT_CARD:77,ACTIVITY_LOG:78,WALL_POST_REPORT:79,TIMELINE_BREAKUP:80,POLITICIANS_FEED:81,PRODUCT_DETAILS:82,SPORTS_PLAY_FEED:83,GROUP_TOP_STORIES:84,PAGE_TIMELINE_PERMALINK:86,OFFERS_WALLET:87,INSTREAM_VIDEO_IN_LIVE:88,SPOTLIGHT:89,SEARCH_DERP:90,SOCIAL_BALLOT:91,GROUP_SUGGESTIONS_WITH_STORY:92,SOCIAL_BALLOT_PERMALINK:93,LOCAL_SERP:94,FUNDRAISER_SELF_DONATION_FEED:95,CONVERSATION_NUB:97,GROUP_TOP_SALE_STORIES:98,GROUP_LEARNING_COURSE_UNIT_FEED:99,SUPPORT_INBOX_READ_TIME_BLOCK:100,PAGE_POSTS_CARD:101,CRISIS_POST:102,SUPPORT_INBOX_GROUP_RESPONSIBLE:103,PAGE_POST_DIALOG:104,CRISIS_DIALOG_POST:105,PAGE_LIVE_VIDEOS_CARD:106,PAGE_POSTS_CARD_COMPACT:107,GROUP_MEMBER_BIO_FEED:108,LIVE_COMMENT_ATTACHMENT:109,GROUP_COMPOSER:110,GROUP_INBOX_GROUP:111,GROUP_INBOX_AGGREGATED:112,ENDORSEMENTS:113,EVENTS_DASHBOARD:114,CURATED_COLLECTIONS_PAGE:115,OYML:116,COLLEGE_HOMEPAGE:117,GROUP_LIVE_VIDEOS_CARD:118,COLLEGE_HIGHLIGHTS:119,VIDEO_PERMALINK:120,JOB_CAROUSEL_NETEGO:121,TOPIC_PAGE:122,USER_SCHEDULED_POSTS:123,GOODWILL_THROWBACK_ATTACHMENT_PREVIEW:124,INSTREAM_VIDEO_IN_WASLIVE:125,INSTREAM_VIDEO_IN_NONLIVE:126,SIGNAL_APP:127,ALBUM_FEED:128,TOP_MARKETPLACE_STORIES:129,CE_PII_STRIPPED_FEED:130,TAHOE:131,SAVE_COUNT_DIALOG:132,GROUP_POST_TAG_FEED:133,GOV_DIGEST:134,GROUP_SCHEDULED:135,GAMEROOM_FEED:136,WORKPLACE_HUB_PREVIEW:137,BRANDED_CONTENT_TRENDING_POSTS:138,GROUP_ANNOUNCEMENTS:139,GROUP_ANNOUNCEMENTS_FEED:140,EXTERN_CE_PII_STRIPPED_FEED:141,CRISIS_HUB_DESKTOP:142,GROUP_DRAFT_POSTS:143,TRENDING_ISSUES:144,GAME_HUB_FEED:145,LUMOS_POST_PREVIEW:146})}),null);
__d("TranslationTrigger",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SEE_TRANSLATION:"see_translation",AUTO_TRANSLATION:"auto_translation",SEE_CONVERSION:"see_conversion",TRANSLATE_ALL:"translate_all",LOGGED_OUT_AUTO_TRANSLATION:"logged_out_auto_translation",NONE:"none"})}),null);
__d('BaseGraphQLSubscription',['Banzai','BanzaiLogger','ChannelClientID','CurrentLocale','CurrentUser','GraphQLSubscriptionsConfig','RTISubscriptionGate','URI'],(function a(b,c,d,e,f,g){var h=10000,i={subscribe:function j(k,l){var m={transformContext:JSON.stringify(this._getTransformContext(k))},n=this._getQueryParameters(k);this._logEvent('client_subscribe',n);return c('RTISubscriptionGate').subscribe(this._getTopic(k),function(o){this._logEvent('receivepayload',n);l(JSON.parse(o.payload))}.bind(this),m,null,function(){this._logEvent('client_unsubscribe',n)}.bind(this))},subscribeWithIcebreaker_EXPERIMENTAL:function j(k,l,m){var n=new (c('URI'))('https://streaming-graph.facebook.com/gqls_bore');n.setQueryData({access_token:m});var o=this._getTopic(k),p={topic:o,locale:c('CurrentLocale').get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(k))};n.addQueryData(p);var q=new EventSource(n.toString(),{withCredentials:true});q.addEventListener('message',function(r){l(JSON.parse(JSON.parse(r.data).payload))},false);return {getContext:function r(){return p},unsubscribe:function r(){return q.close()}}},_getTransformContext:function j(k){var l=155160167952447;return {viewerID:c('CurrentUser').getID(),appID:l,locale:c('CurrentLocale').get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(k))}},_logEvent:function j(k,l){if(c('Banzai').isEnabled('gqls_web_logging')){var m=c('GraphQLSubscriptionsConfig').shouldAlwaysLog?1:h;if(Math.random()*m<1)c('BanzaiLogger').log('GraphQLSubscriptionsLoggerConfig',{clienttime:Date.now()/1000,client_sample_weight:m,event:k,mechanism:'skywalker',query_id:parseInt(this._getQueryID(),10),query_params:l,session_id:c('ChannelClientID').getID(),subscription_call:this._getSubscriptionCallName()});}}};f.exports=i}),null);
__d('WebGraphQLSubscriptionHelper',[],(function a(b,c,d,e,f,g){'use strict';f.exports={getExports:function h(i){var j=i.docID,k=i.queryID;return {getDocID:function l(){return j},getLegacyQueryID:function l(){return k}}}}}),null);